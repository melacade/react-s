!function e(t,n,i){function a(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[r]={exports:{}};t[r][0].call(d.exports,(function(e){return a(t[r][1][e]||e)}),d,d.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MainToolbarButton=void 0;var o=e("../UIModule"),r=e("../../WebApplicationGIS/WebApplicationGISEvent"),s=function(e){function t(t){var n=this,i={type:"Button",name:t.name,config:{iconClass:t.iconClass,selectable:t.selectable,tooltip:t.tooltip},manager:t.manager};if(t.config)for(var a in t.config)i.config[a]=t.config[a];return(n=e.call(this,i)||this).selectable=t.selectable,n.isExpanded=t.isExpanded||!1,n.select=!1,n.exclusive=!1!==t.exclusive,n.selectCallback=t.selectCallback,n.unselectCallback=t.unselectCallback,n.clickCallback=t.clickCallback,n.linkedPanelName=t.linkedPanelName,n.toolbar=t.toolbar,n._element.onClick((function(e){n.selectable&&n.setSelect(!n.select,n),n.clickCallback instanceof Function&&n.clickCallback(e),n.getWebApplication().trigger(r.default.ButtonOnToolbarClicked,{id:t.name,isSelected:n.select,isExpanded:n.isExpanded}),!n.select||"MeasureDistance"!==t.name&&"MeasureArea"!==t.name||n.getWebApplication().trigger(r.default.ButtonOnToolbarClicked,{id:"MeasureDistance"===t.name?"MeasurePolylineDistance":"MeasureSpatialArea",isSelected:n.select,isExpanded:!1})})),n}return a(t,e),t.prototype.setSelect=function(e,n){var i=this;if(this.selectable&&this.select!==e)if(this.select=e,this.getElement().setSelected(e),e){if(!0===this.exclusive)this.toolbar.getButtons().forEach((function(e){e instanceof t&&(e!==i&&e.select&&e.exclusive&&(!1===e.needFireEvent?delete e.needFireEvent:i.getWebApplication().trigger(r.default.ButtonOnToolbarClicked,{id:e.name,isSelected:!1,isExpanded:!1})),e===i||!0===e.exclusive&&e.setSelect(!1))}));!this.panel&&this.linkedPanelName&&(this.panel=this._manager.loadModule("Panel",this.linkedPanelName),this.panel.getElement().onClose((function(){i.selectable&&i.getWebApplication().trigger(r.default.ButtonOnToolbarClicked,{id:i.name,isSelected:!1,isExpanded:i.isExpanded}),i.select=!1,i._element.setSelected(i.select),i.panel.hide()}),!1)),this.panel&&this.panel.show(),this.selectCallback instanceof Function&&this.selectCallback(this)}else this.panel&&this.panel.hide(),this.unselectCallback instanceof Function&&this.unselectCallback(this)},t.prototype.getSelect=function(){return this.select},t}(o.UIModule);n.MainToolbarButton=s},{"../../WebApplicationGIS/WebApplicationGISEvent":50,"../UIModule":45}],2:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="FullScreen",e.call(this,t)||this}return a(t,e),t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],3:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="Home",t.iconClass="gld-bf-home-fill-md",t.tooltip=window.BimfaceLanguage.bfui_button_home,t.clickCallback=function(){return n.getViewer().setCameraStatus(n.getViewer().getHomeView())},n=e.call(this,t)||this}return a(t,e),t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],4:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="LayerTree",t.iconClass="gld-bf-layers-fill-md",t.tooltip=window.BimfaceLanguage.bf_btn_modelTree,t.selectable=!0,t.linkedPanelName="LayerTreePanel",e.call(this,t)||this}return a(t,e),t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],5:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("./SubToolbarButton"),r=e("../../../../Event/EventCode"),s=e("../../../WebApplicationGIS/WebApplicationGISEvent"),l=function(e){function t(t){var n=this;return t.name="Measure",t.iconClass="gld-bf-measurement-gis-md",t.tooltip=window.BimfaceLanguage.bf_btn_measure,(n=e.call(this,t)||this).init(),n}return a(t,e),t.prototype.init=function(){var e=this,t=new window.Glodon.Bimface.Plugins.Measure.MeasureConfig;t.measureType=window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.Angle,t.viewer=this.getViewer();var n=new window.Glodon.Bimface.Plugins.Measure.Measure(t);n.id="Measure",n.switchOff(),this.measure=n,this.getWebApplication().addPlugin(n),this.getWebApplication().getDomElement().on("keyup",(function(t){n.isOpen&&!window.CLOUD.EditorConfig.NoKey&&t.keyCode==r.KeyCode.ESC&&(n.getInfo().points.length>0?n.redo():e.exit())}))},t.prototype.subToolbarClicked=function(){var e=this.getUIManager().getModule("Button","Walkthrough");e&&(e.getSelect()&&this.getWebApplication().trigger(s.default.ButtonOnToolbarClicked,{id:e.getName(),isSelected:!1,isExpanded:!1}),e.setSelect(!1))},t.prototype.setMeasureType=function(e){this.measure.switchOn(),this.measure.setMeasureType(e)},t.prototype.getMeasure=function(){return this.measure},t.prototype.exit=function(){var e=this;this.measure;this.getSubToolbar().getButtons().find((function(t){if(!0===t.getSelect())return e.getWebApplication().trigger(s.default.ButtonOnToolbarClicked,{id:t.getName(),isSelected:!1,isExpanded:!1}),t.setSelect(!1),!0}))},t}(o.default);n.default=l},{"../../../../Event/EventCode":56,"../../../WebApplicationGIS/WebApplicationGISEvent":50,"./SubToolbarButton":20}],6:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="MeasureAngle",t.iconClass="gld-bf-angle-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_angle,t.selectable=!0,e.call(this,t)||this}return a(t,e),t.prototype.setSelect=function(t){e.prototype.setSelect.call(this,t);var n=this.getUIManager().getModule("Button","Measure");!0===t?n.setMeasureType(window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.Angle):n.getMeasure().switchOff()},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],7:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="MeasureArea",t.iconClass="gld-bf-area-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_area,t.selectable=!0,(n=e.call(this,t)||this).measure=n.getWebApplication().getPlugin("Measure"),n.subToolbar=null,n}return a(t,e),t.prototype.setSelect=function(t){var n;(e.prototype.setSelect.call(this,t),this.subToolbar||(this.subToolbar=this.getUIManager().loadModule("Toolbar","SubToolbarAreaMeasure")),!0===t)?(this.subToolbar.show(),this.measure.switchOn(),this.subToolbar.getButtons().forEach((function(e,t){0!==t?e.getSelect()&&(e.needFireEvent=!1):n=e})),n&&n.setSelect(!0)):(this.subToolbar.hide(),this.measure.switchOff())},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],8:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="MeasureClear",t.iconClass="gld-bf-clear-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_clear,t.clickCallback=function(){n.getUIManager().getModule("Button","Measure").getMeasure().clear()},n=e.call(this,t)||this}return a(t,e),t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],9:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="MeasureDistance",t.iconClass="gld-bf-distance-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_distance,t.selectable=!0,(n=e.call(this,t)||this).measure=n.getWebApplication().getPlugin("Measure"),n.subToolbar=null,n}return a(t,e),t.prototype.setSelect=function(t){var n;(e.prototype.setSelect.call(this,t),this.subToolbar||(this.subToolbar=this.getUIManager().loadModule("Toolbar","SubToolbarDistanceMeasure")),!0===t)?(this.subToolbar.show(),this.measure.switchOn(),this.subToolbar.getButtons().forEach((function(e,t){0!==t?e.getSelect()&&(e.needFireEvent=!1):n=e})),n&&n.setSelect(!0)):(this.subToolbar.hide(),this.measure.switchOff())},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],10:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="MesureDistanceGroundLine",t.iconClass="gld-bf-distance-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_groundline_distance,t.selectable=!0,(n=e.call(this,t)||this).measure=n.getWebApplication().getPlugin("Measure"),n}return a(t,e),t.prototype.setSelect=function(t,n){n==this&&0==t||(e.prototype.setSelect.call(this,t),this.switchIcon(t),!0===t&&this.measure.setMeasureType(window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.GroundlineDistance))},t.prototype.switchIcon=function(e){var t=!0===e?"-selected":"";this.getElement().setHTML('<svg class="bfui-button-icon svg-icon" aria-hidden="true">\n                                  <use xlink:href="#gld-bf-ground'+t+'-c-md"></use>\n                                </svg>')},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],11:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="MeasurePolylineDistance",t.iconClass="gld-bf-distance-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_polyline_distance,t.selectable=!0,(n=e.call(this,t)||this).measure=n.getWebApplication().getPlugin("Measure"),n}return a(t,e),t.prototype.setSelect=function(t,n){n==this&&0==t||(e.prototype.setSelect.call(this,t),this.switchIcon(t),!0===t&&this.measure.setMeasureType(window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.PolylineDistance))},t.prototype.switchIcon=function(e){var t=!0===e?"-selected":"";this.getElement().setHTML('<svg class="bfui-button-icon svg-icon" aria-hidden="true">\n                                  <use xlink:href="#gld-bf-space'+t+'-c-md"></use>\n                                </svg>')},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],12:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="MeasurePosition",t.iconClass="gld-bf-coordinate-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_position,t.selectable=!0,e.call(this,t)||this}return a(t,e),t.prototype.setSelect=function(t){e.prototype.setSelect.call(this,t);var n=this.getUIManager().getModule("Button","Measure");!0===t?n.setMeasureType(window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.Position):n.getMeasure().switchOff()},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],13:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="MeasureProjectedArea",t.tooltip=window.BimfaceLanguage.bf_tip_measure_projected_area,t.selectable=!0,(n=e.call(this,t)||this).measure=n.getWebApplication().getPlugin("Measure"),n}return a(t,e),t.prototype.setSelect=function(t,n){n==this&&0==t||(e.prototype.setSelect.call(this,t),this.switchIcon(t),!0===t&&this.measure.setMeasureType(window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.ProjectedArea))},t.prototype.switchIcon=function(e){var t=!0===e?"-selected":"";this.getElement().setHTML('<svg class="bfui-button-icon svg-icon" aria-hidden="true">\n                                  <use xlink:href="#gld-bf-projection'+t+'-c-md"></use>\n                                </svg>')},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],14:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="MeasureSetting",t.iconClass="gld-bf-measure-setting-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_setting,t.selectable=!0,t.exclusive=!1,t.linkedPanelName="MeasureSettingPanel",e.call(this,t)||this}return a(t,e),t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],15:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="MeasureSpatialArea",t.tooltip=window.BimfaceLanguage.bf_tip_measure_spatial_area,t.selectable=!0,(n=e.call(this,t)||this).measure=n.getWebApplication().getPlugin("Measure"),n}return a(t,e),t.prototype.setSelect=function(t,n){n==this&&0==t||(e.prototype.setSelect.call(this,t),this.switchIcon(t),!0===t&&this.measure.setMeasureType(window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.SpatialArea))},t.prototype.switchIcon=function(e){var t=!0===e?"-selected":"";this.getElement().setHTML('<svg class="bfui-button-icon svg-icon" aria-hidden="true">\n                                  <use xlink:href="#gld-bf-space'+t+'-c-md"></use>\n                                </svg>')},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],16:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="MeasureSurfaceArea",t.tooltip=window.BimfaceLanguage.bf_tip_measure_surface_area,t.selectable=!0,(n=e.call(this,t)||this).measure=n.getWebApplication().getPlugin("Measure"),n}return a(t,e),t.prototype.setSelect=function(t,n){n==this&&0==t||(e.prototype.setSelect.call(this,t),this.switchIcon(t),!0===t&&this.measure.setMeasureType(window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.SurfaceArea))},t.prototype.switchIcon=function(e){var t=!0===e?"-selected":"";this.getElement().setHTML('<svg class="bfui-button-icon svg-icon" aria-hidden="true">\n                                  <use xlink:href="#gld-bf-ground'+t+'-c-md"></use>\n                                </svg>')},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],17:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="MeasureTriangleDistance",t.iconClass="gld-bf-triangulation-md",t.tooltip=window.BimfaceLanguage.bf_tip_measure_triangle,t.selectable=!0,e.call(this,t)||this}return a(t,e),t.prototype.setSelect=function(t){e.prototype.setSelect.call(this,t);var n=this.getUIManager().getModule("Button","Measure");!0===t?n.setMeasureType(window.Glodon.Bimface.Plugins.Measure.MeasureTypeOption.TriangleDistance):n.getMeasure().switchOff()},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],18:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="Property",t.iconClass="gld-bf-property-md",t.tooltip=window.BimfaceLanguage.bfui_button_property,t.selectable=!0,t.exclusive=!1,t.linkedPanelName="PropertyPanel",e.call(this,t)||this}return a(t,e),t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],19:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="Setting",t.iconClass="gld-bf-setting-fill-md",t.tooltip=window.BimfaceLanguage.bf_btn_settings,t.selectable=!0,t.linkedPanelName="SettingPanel",e.call(this,t)||this}return a(t,e),t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],20:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.clickCallback=function(){n.subToolbar&&(n.subToolbar.isVisible()?n.hideSubToolbar():n.showSubToolbar(),n.subToolbar.onClick((function(){n.subToolbarClicked()})))},(n=e.call(this,t)||this).getElement().addClass("bfui-button-dropdown"),n}return a(t,e),t.prototype.setSubToolbar=function(e){this.subToolbar=e},t.prototype.getSubToolbar=function(){return this.subToolbar},t.prototype.showSubToolbar=function(){return this.subToolbar?(this.isExpanded=!0,this.subToolbar.show(),this):this},t.prototype.hideSubToolbar=function(){return this.subToolbar?(this.isExpanded=!1,this.subToolbar.hide(),this):this},t.prototype.subToolbarClicked=function(){},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],21:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="Walkthrough",t.iconClass="gld-bf-route-md",t.tooltip=window.BimfaceLanguage.bf_btn_nav,t.selectable=!0,t.exclusive=!1,t.linkedPanelName="WalkthroughPanel",e.call(this,t)||this}return a(t,e),t.prototype.setSelect=function(t){e.prototype.setSelect.call(this,t);var n=this.getUIManager().getModule("Button","Measure");!0===t&&n.exit()},t}(e("../MainToolbarButton").MainToolbarButton);n.default=o},{"../MainToolbarButton":1}],22:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;if(t.type="Panel",t.config.draggable=!1,t.config.sizeFixed=!0,(n=e.call(this,t)||this)._element.addClass("bfui-panel-drawer"),n.getEnableUIAnimation()){var i=n.getElement().getDomElement();i.css("marginLeft","-"+i.getWidth()+"px").hide()}return n}return a(t,e),t.prototype.show=function(){if(this._element.topShow(),this.getEnableUIAnimation()){var t=this._element.getDomElement();if(t.isVisible()&&!this._inTransition)return;this._inTransition?(t.show().css({marginLeft:"0px"}),this._inTransition=!1):t.show().removeClass("bfui-transition").css({marginLeft:"-"+t.getWidth()+"px"}).addClass("bfui-transition").css("marginLeft","0px")}else e.prototype.show.call(this);return this},t.prototype.hide=function(){var t=this;if(this.getEnableUIAnimation()){var n=this._element.getDomElement();if(!n.isVisible())return;var i=function(){t._inTransition&&(n.removeClass("bfui-transition").hide().off("transitionend",i),t._inTransition=!1)};this._inTransition=!0,n.addClass("bfui-transition").css({marginLeft:"-"+n.getWidth()+"px"}).on("transitionend",i)}else e.prototype.hide.call(this);return this},t}(e("../UIModule").UIModule);n.default=o},{"../UIModule":45}],23:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../UI/Dom"),s=e("../DrawerPanel"),l=e("../../../../UI/Controls/Search/Search"),c=function(e){function t(t){var n=this;t.name="LayerTreePanel";var i=(n=e.call(this,t)||this)._element;i.setTitle("目录树");var a=0!==n.getViewer().getEffectManager().effectAndFileObject.children.length,s=(new r.Dom).createElement({elementType:"div",className:"bfui-layertree-switch-bar",parent:i.getContent()._domElement});!a&&s.hide();var c=(new r.Dom).createElement({elementType:"div",className:"bfui-layertree-switch-bar-detail",parent:s});c.html("图层");var d=(new r.Dom).createElement({elementType:"div",className:"bfui-layertree-switch-bar-detail ",parent:s});d.html("效果");var u=new l.default({enableAnimation:n.getEnableUIAnimation(),placeholder:"请输入要搜索的图层",searchHandler:function(e){var t=n.getViewer().getLayerManager().getLayerConfigsObject(),i=[],a=function(t,n){n=n||[],t.children&&t.children.forEach((function(t,r){var s=t.id,l=t.name,c=o(n,[{id:s,name:l,index:r}]);(l.toLowerCase().indexOf(e.toLocaleLowerCase())>=0||s.toString()===e.toString())&&i.push({text:l,value:s,path:c}),t.children&&t.children.length>0&&a(t,c)}))};return a(t),i},selectHandler:function(e){for(var t=e.data.path,i=0,a=n.getModule("Tree","LayerTree").getElement().getControl({id:"all"});t.length>i;){var o=t[i].index,r=a.getAllControls()[o];r.setExpansion(!0),a=r,i++}switch(n.getModule("Tree","LayerTree").scrollToNode(a),a.getOptions().type){case"GroupLayer":case"TileLayer":case"TerrainLayer":break;default:a.getSelectState()||a.getTreeName().getElement().click()}},parent:i.getContent()});return u.addClass("bfui-layertree-search"),c.addClass("bfui-layertree-switch-bar-detail-select"),c.on("click",(function(){u.show(),n.getModule("Tree","LayerTree").getElement().show(),n.getModule("Tree","EffectTree").getElement().hide(),c.addClass("bfui-layertree-switch-bar-detail-select"),d.removeClass("bfui-layertree-switch-bar-detail-select"),i.getContent()._domElement.removeClass("bfui-panel-content-overflow-hidden")})),d.on("click",(function(){u.hide(),n.getModule("Tree","LayerTree").getElement().hide(),n.getModule("Tree","EffectTree").getElement().show(),c.removeClass("bfui-layertree-switch-bar-detail-select"),d.addClass("bfui-layertree-switch-bar-detail-select"),i.getContent()._domElement.addClass("bfui-panel-content-overflow-hidden")})),n.initLayerTree(),n.getWebApplication().on("ModelAdded",(function(e){var t=n.getModule("Tree","LayerTree").getElement().getControl({id:"all"});t.getInstanceIds().includes(e)?t.updateUnloadControl({id:e}):(n.getUIManager().updateLayerTree(),n.initLayerTree())})),n.getWebApplication().on("ModelRemoved",(function(e){n.getUIManager().updateLayerTree(),n.initLayerTree()})),n.initEffectTree(),n.getModule("Tree","EffectTree").getElement().hide(),n}return a(t,e),t.prototype.initLayerTree=function(){var e=this._element,t={config:{id:"layerTree",title:"图层",content:this.getViewer().getLayerManager().getLayerConfigsObject().children,parent:e.getContent()}};this.loadModule("Tree","LayerTree",t)},t.prototype.initEffectTree=function(){var e=this._element,t={config:{id:"effectTree",title:"效果",content:this.getViewer().getEffectManager().effectAndFileObject.children,parent:e.getContent()}};this.loadModule("Tree","EffectTree",t)},t}(s.default);n.default=c},{"../../../../UI/Controls/Search/Search":134,"../../../../UI/Dom":147,"../DrawerPanel":22}],24:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n;return t.name="SettingPanel",(n=e.call(this,t)||this)._element.setTitle("Setting"),n}return a(t,e),t}(e("../DrawerPanel").default);n.default=o},{"../DrawerPanel":22}],25:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../Common/Glodon"),r=e("../../UIModule"),s=e("../../../../UI/Control"),l=e("../../../../UI/ControlAnchor/ControlAnchor"),c=function(e){function t(t){var n=this;t.type="Panel",t.config=window.Object.assign({},{sizeFixed:!0,draggable:!0,footerDisabled:!0,width:380,height:320},t.config);var i=(n=e.call(this,t)||this)._element;return i.setTitle(window.BimfaceLanguage.bf_panel_measure_setting),i.addClass("bfui-panel-measure-setting"),i.setPosition({anchor:l.default.MiddleCenter,offset:{x:0,y:0}}),n._measure=n.getWebApplication().getPlugin("Measure"),n.init(),n}return a(t,e),t.prototype.init=function(){this.units=this._measure.getUnits(),this.precision=this._measure.getPrecision(),this.distancePrecisionSelect=null,this.disatanceUnitSelect=null,this.areaPrecisionSelect=null,this.areaUnitSelect=null,this.anglePrecisionSelect=null,this.latLonPrecisionSelect=null,this.initBody(),this.initFooter()},t.prototype.initBody=function(){for(var e=this,t=[],n=0;n<6;n++){var i={text:n?1/Math.pow(10,n):n,value:n};t.push(i)}var a=[{text:"mm",value:window.Glodon.Bimface.Common.Units.LengthUnits.Millimeter},{text:"cm",value:window.Glodon.Bimface.Common.Units.LengthUnits.Centimeter},{text:"m",value:window.Glodon.Bimface.Common.Units.LengthUnits.Meter},{text:"km",value:window.Glodon.Bimface.Common.Units.LengthUnits.Kilometer}],r=[{text:"mm²",value:window.Glodon.Bimface.Common.Units.LengthUnits.Millimeter},{text:"cm²",value:window.Glodon.Bimface.Common.Units.LengthUnits.Centimeter},{text:"m²",value:window.Glodon.Bimface.Common.Units.LengthUnits.Meter},{text:"km²",value:window.Glodon.Bimface.Common.Units.LengthUnits.Kilometer}],l=new o.default.Bimface.Tiles.UI.Label({text:window.BimfaceLanguage.bf_panel_measure_distance});this.distancePrecisionSelect=new o.default.Bimface.Tiles.UI.Select({values:t,onChange:function(t){e.precision.distance=t.value,e.updateMeasureSetting()},defaultIndex:this.precision.distance}),this.disatanceUnitSelect=new o.default.Bimface.Tiles.UI.Select({values:a,onChange:function(t){e.units.distance=t.value,e.updateMeasureSetting()},defaultIndex:r.findIndex((function(t){return t.value==e.units.distance}))});var c=new o.default.Bimface.Tiles.UI.Label({text:window.BimfaceLanguage.bf_panel_measure_area});this.areaPrecisionSelect=new o.default.Bimface.Tiles.UI.Select({values:t,onChange:function(t){e.precision.area=t.value,e.updateMeasureSetting()},defaultIndex:this.precision.area}),this.areaUnitSelect=new o.default.Bimface.Tiles.UI.Select({values:r,onChange:function(t){e.units.area=t.value,e.updateMeasureSetting()},defaultIndex:r.findIndex((function(t){return t.value==e.units.area}))});var d=[];for(n=0;n<4;n++){i={text:n?1/Math.pow(10,n):n,value:n};d.push(i)}var u=new o.default.Bimface.Tiles.UI.Label({text:window.BimfaceLanguage.bf_panel_measure_angle});this.anglePrecisionSelect=new o.default.Bimface.Tiles.UI.Select({values:d,onChange:function(t){e.precision.angle=t.value,e.updateMeasureSetting()},defaultIndex:this.precision.angle});var f=[];for(n=0;n<10;n++){i={text:n?(1/Math.pow(10,n)).toFixed(n):n,value:n};f.push(i)}var p=new o.default.Bimface.Tiles.UI.Label({text:window.BimfaceLanguage.bf_panel_measure_latlon});this.latLonPrecisionSelect=new o.default.Bimface.Tiles.UI.Select({values:f,onChange:function(t){e.precision.latLon=t.value,e.updateMeasureSetting()},defaultIndex:this.precision.latLon});var h=new s.Control({elementParam:{elementType:"table",className:"content-table"}});h.setHTML("<thead><tr>\n        <th></th>\n        <th>"+window.BimfaceLanguage.bf_panel_measure_precision+"</th>\n        <th>"+window.BimfaceLanguage.bf_panel_measure_units+'</th>\n      </thead></tr>\n      <tr>\n        <td><Control id="distanceLabel"></Control></td>\n        <td><Control id="distancePrecisionSelect"></Control></td>\n        <td><Control id="disatanceUnitSelect"></Control></td>\n      </tr>\n      <tr>\n        <td><Control id="areaLabel"></Control></td>\n        <td><Control id="areaPrecisionSelect"></Control></td>\n        <td><Control id="areaUnitSelect"></Control></td>\n      </tr>\n      <tr>\n        <td><Control id="angleLabel"></Control></td>\n        <td><Control id="anglePrecisionSelect"></Control></td>\n        <td>°</td>\n      </tr>\n      <tr>\n        <td><Control id="latLonLabel"></Control></td>\n        <td><Control id="latLonPrecisionSelect"></Control></td>\n        <td>°</td>\n      </tr>',{distanceLabel:l,distancePrecisionSelect:this.distancePrecisionSelect,disatanceUnitSelect:this.disatanceUnitSelect,areaLabel:c,areaPrecisionSelect:this.areaPrecisionSelect,areaUnitSelect:this.areaUnitSelect,angleLabel:u,anglePrecisionSelect:this.anglePrecisionSelect,latLonLabel:p,latLonPrecisionSelect:this.latLonPrecisionSelect}),this.getElement().getContent().addControl(h)},t.prototype.initFooter=function(){var e=this,t=new o.default.Bimface.Tiles.UI.Button({elementParam:{className:"is-text reset-btn"},text:window.BimfaceLanguage.bf_panel_settings_restore,clickCallback:function(){e.resetMeasureSetting()}}),n=new o.default.Bimface.Tiles.UI.Row({justifyContent:"End"});n.addControl(t),this.getElement().getFooter().addControl(n)},t.prototype.updateMeasureSetting=function(){this._measure.setUnits(this.units),this._measure.setPrecision(this.precision)},t.prototype.resetMeasureSetting=function(){this.units={distance:window.Glodon.Bimface.Common.Units.LengthUnits.Meter,elevation:window.Glodon.Bimface.Common.Units.LengthUnits.Meter,area:window.Glodon.Bimface.Common.Units.LengthUnits.Meter},this.precision={distance:3,elevation:3,area:3,angle:2,latLon:9},this.distancePrecisionSelect.setSelectedByValue(this.precision.distance),this.disatanceUnitSelect.setSelectedByValue(this.units.distance),this.areaPrecisionSelect.setSelectedByValue(this.precision.distance),this.areaUnitSelect.setSelectedByValue(this.units.area),this.anglePrecisionSelect.setSelectedByValue(this.precision.angle),this.latLonPrecisionSelect.setSelectedByValue(this.precision.latLon),this.updateMeasureSetting()},t}(r.UIModule);n.default=c},{"../../../../Common/Glodon":52,"../../../../UI/Control":112,"../../../../UI/ControlAnchor/ControlAnchor":114,"../../UIModule":45}],26:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../UIModule"),r=e("../../../../UI/ControlGroups/PropertyPanel/PropertyPanel"),s=e("../../../../UI/ControlAnchor/ControlAnchor"),l=function(e){function t(t){var n=this;t.type="Panel",t.config=window.Object.assign({},{sizeFixed:!1,draggable:!0,width:300,height:416},t.config);var i=(n=e.call(this,t)||this)._element;return i.setTitle(""+window.BimfaceLanguage.bfui_button_property),i.addClass("bfui-panel-property"),n.init(),n.propertyPanel=new r.PropertyControl({parent:i}),!t.config.customParent&&n.getUIManager().addControl(i,{position:{anchor:s.default.TopRight,offset:{x:-10,y:10}}}),n.initProperty(),n}return a(t,e),t.prototype.getSingleSelection=function(e){var t;return this.getViewer().getModels().some((function(n){var i=[];if(i=e?e[n.modelId]||[]:n.getSelectedComponents(),t||1!==i.length){if(i.length>1||1===i.length&&t&&t.id!==i[0])return t=void 0,!0}else t={modelId:n.modelId,id:i[0]}})),t},t.prototype.init=function(){var e=this,t=window.Glodon.Bimface.Viewer.ViewerGISEvent;this.getViewer().addEventListener(t.ComponentsSelectionChanged,(function(t){"Component"===t.objectType?e.initProperty():e.setPropertyData()}))},t.prototype.initProperty=function(){var e=this.getSingleSelection(),t=this._element;e?this.getProperty(e):t.setTips(window.BimfaceLanguage.bf_panel_props_propSel)},t.prototype.getProperty=function(e){var t=this;this._element.setTips(window.BimfaceLanguage.bf_panel_modelTree_loading,"loading");var n=e.id.split(".")[1]||e.id;this.getViewer().getModel(e.modelId).getComponentProperty(n,(function(e){t.setPropertyData(e.properties)}),(function(e){t._element.setTips(window.BimfaceLanguage.bf_panel_props_noProps)}))},t.prototype.setPropertyData=function(e){var t=this._element;e?(t.clearContent(),this.propertyPanel.createCollapse(e),t.getContent().addControl(this.propertyPanel)):t.setTips(window.BimfaceLanguage.bf_panel_props_propSel)},t.prototype.getPropertyData=function(e){},t.prototype.clear=function(){},t}(o.UIModule);n.default=l},{"../../../../UI/ControlAnchor/ControlAnchor":114,"../../../../UI/ControlGroups/PropertyPanel/PropertyPanel":116,"../../UIModule":45}],27:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("../../../../UI/Dom"),s=e("../../../../UI/Controls/Input/Input"),l=e("./WalkthroughPointMng"),c=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-walkthrough-create"},type:"Collapse"};(n=e.call(this,i)||this).viewer=t.viewer,n.walkthroughManager=t.walkthroughManager;var a=n.pathName=(new s.default).addClass("bfui-walkthrough-info-input"),o=n.pathTime=(new s.default).addClass("bfui-walkthrough-info-time");o.getDomElement().attribute({type:"number",min:1,max:120});var l=n.playBtn=(new r.Dom).createElement({elementType:"div",className:"bfui-walkthrough-control "});l.html('<i class="bfui-walkthrough-icon-play"></i><span>'+window.BimfaceLanguage.bf_panel_nav_playnav+"</span>");var c=(new r.Dom).createElement({elementType:"div",className:"bfui-walkthrough-control"});c.hide().html('<i class="bfui-walkthrough-icon-stop"></i><span>'+window.BimfaceLanguage.bf_panel_nav_stop+"</span>");var d=(new r.Dom).createElement({elementType:"span",className:"bfui-walkthrough-add"}).html('<i class="bf-icon-add"></i><span>'+window.BimfaceLanguage.bf_panel_nav_addKeyframe+"</span>"),u=(new r.Dom).createElement({elementType:"span",className:"bfui-walkthrough-clear"}).html(""+window.BimfaceLanguage.bf_panel_nav_clearKeyframe),f=n.tip=(new r.Dom).createElement({elementType:"div",className:"bfui-walkthrough-panel-tips"}).html(""+window.BimfaceLanguage.bf_panel_nav_addHere),p=n.walkthroughPointMngWrap=(new r.Dom).createElement({elementType:"div",className:""});return n.setHTML('\n    <div class="bfui-walkthrough-info">\n      <div class="bfui-walkthrough-info-row"><span class="bfui-walkthrough-info-label">'+window.BimfaceLanguage.bf_panel_nav_name+'</span><Control id="name_input" ></Control></div>\n      <div class="bfui-walkthrough-info-row"><span class="bfui-walkthrough-info-label">'+window.BimfaceLanguage.bf_panel_nav_time+'</span><div class="bfui-walkthrough-info-input"><Control id="time_input" ></Control><span class="bfui-walkthrough-info-timespan">s</span></div></div>\n    </div>\n    <div class="bfui-walkthrough-title"><Control id="addBtn" ></Control><Control id="delBtn" ></Control></div>\n      <Control id="tip" ></Control>\n      <Control id="walkthroughPointMngWrap" ></Control>\n      <div class="bfui-walkthrough-foot"><Control id="playBtn" ></Control><Control id="stopBtn" ></Control></div>',{name_input:a,time_input:o,walkthroughPointMngWrap:p,playBtn:l,stopBtn:c,addBtn:d,delBtn:u,tip:f}),d.on("click",(function(){if(!n.isPlaying()){var e=n.viewer.getCameraStatus(),t=""+window.BimfaceLanguage.bf_panel_nav_keyframe+n.walkthrough.num++,i=n.walkthrough.addKeyFrame(t);n.walkthroughPointMng.addItem({walkItemName:t,keyFrame:i,camera:e})}})),u.on("click",(function(){n.isPlaying()||n.walkthroughPointMng.removeAll()})),l.on("click",(function(){n.active&&n.play(!0)})),c.on("click",(function(){n.play(!1),n.walkthroughPointMng.selected()})),n.addEvent("isPlaying",(function(e){n.pathName.enabled(!e),n.pathTime.enabled(!e),e?(c.show(),l.hide()):(c.hide(),l.show())})),n.config=t,n}return a(t,e),t.prototype.updateBtn=function(){this.active&&this.playBtn.removeClass("bfui-walkthrough-disabled")||this.playBtn.addClass("bfui-walkthrough-disabled")},t.prototype.isPlaying=function(){return this.config.panel.isPlaying},t.prototype.update=function(e,t,n){var i=this;this.pathName.setValue(e._walkthrough.getName()).removeClass("bfui-walkthrough-info-input-invalid"),this.pathTime.setValue(e._walkthrough.walkthroughTime);var a=new r.Dom(this.pathTime.getDomElement().getParent());a.removeClass("bfui-walkthrough-info-input-invalid"),this.pathName.onChange((function(t){""==t?i.pathName.addClass("bfui-walkthrough-info-input-invalid"):(i.pathName.removeClass("bfui-walkthrough-info-input-invalid"),e._walkthrough.setName(t))})),this.pathTime.onChange((function(t){""==t||t<1?a.addClass("bfui-walkthrough-info-input-invalid"):(a.removeClass("bfui-walkthrough-info-input-invalid"),e._walkthrough.setWalkthroughTime(Number(t)))}));var o=this.walkthroughPointMng=new l.default({tip:this.tip,data:n.walkthroughPointMng,viewer:this.viewer,parentControl:this});this.active=this.walkthroughPointMng.group.length>1,this.updateBtn(),this.walkthroughPointMngWrap.html(""),this.walkthroughPointMngWrap.append(o.getDomElement()),this.walkthrough=e,this.walkthrough.num=this.walkthroughPointMng.group.length,e.stopCallback((function(){i.fireEvent("isPlaying",!1),o.selected()})),e.setKeyFrameCallback((function(e){o.setSelectedPoint(e)})),this.edit=t,o.addEvent("play",(function(e){i.play(!0,e)})),o.addEvent("notify",(function(e){i.active=e,i.updateBtn()}))},t.prototype.play=function(e,t){""==this.pathName.getValue()&&(this.pathName.setValue(this.walkthrough._walkthrough.name),this.pathName.removeClass("bfui-walkthrough-info-input-invalid"));var n=this.pathTime.getValue();(""==n||n<1)&&(this.pathTime.setValue(this.walkthrough._walkthrough.walkthroughTime),new r.Dom(this.pathTime.getDomElement().getParent()).removeClass("bfui-walkthrough-info-input-invalid")),this.fireEvent("isPlaying",e),e?this.walkthrough.play(t&&t.id):this.walkthrough.stop()},t.prototype.getPath=function(){return{walkthrough:this.walkthrough,walkthroughPointMng:this.walkthroughPointMng,edit:this.edit}},t}(o.Control);n.default=c},{"../../../../UI/Control":112,"../../../../UI/Controls/Input/Input":126,"../../../../UI/Dom":147,"./WalkthroughPointMng":33}],28:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("../../../../UI/Dom"),s=e("./WalkthroughPathMng"),l=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-walkthrough-list"},type:""};n=e.call(this,i)||this;var a=(new r.Dom).createElement({elementType:"div",className:"bfui-panel-tips"}).html(window.BimfaceLanguage.bf_panel_nav_addWalkthroughHere),o=n.walkthroughPathMng=new s.default({tip:a,viewer:t.viewer});return n.setHTML('\n      <Control id="tip" ></Control>\n      <Control id="walkthroughPathMng" ></Control>\n     ',{walkthroughPathMng:o,tip:a}),o.addEvent("notify",(function(e){})),o.addEvent("edit",(function(e){n.fireEvent("edit",e)})),o.addEvent("play",(function(e){n.fireEvent("isPlaying",!0)})),o.addEvent("pause",(function(e){n.fireEvent("isPlaying",!1)})),o.addEvent("stop",(function(e){n.fireEvent("stop"),e&&e.showPlay()})),n.config=t,n}return a(t,e),t.prototype.updatePathItem=function(e){this.walkthroughPathMng.updateItem(e)},t.prototype.addPathItem=function(e){this.walkthroughPathMng.addItem(e)},t}(o.Control);n.default=l},{"../../../../UI/Control":112,"../../../../UI/Dom":147,"./WalkthroughPathMng":31}],29:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../UIModule"),r=e("./WalkthroughList"),s=e("./CreateWalkthrough"),l=e("../../../../UI/ControlAnchor/ControlAnchor"),c=e("../../../../UI/Dom"),d=function(e){function t(t){var n=this;t.type="Panel",t.config=window.Object.assign({},{sizeFixed:!0,draggable:!0,width:300,height:410},t.config);var i=(n=e.call(this,t)||this)._element;return i.setTitle(window.BimfaceLanguage.bf_panel_nav_walkthrough),i.addClass("bfui-panel-walkthrough"),n.num=0,n.init(),n.isPlaying=!1,n.getUIManager().addControl(i,{position:{anchor:l.default.TopRight,offset:{x:-10,y:10}}}),n.createWalkthrough.addEvent("isPlaying",(function(e){n.updatePlayStatus(e)})),n.walkthroughList.addEvent("isPlaying",(function(e){n.updatePlayStatus(e)})),n}return a(t,e),t.prototype.updatePlayStatus=function(e){void 0===e&&(e=this.isPlaying);var t=this._element.getContent();e?(t.addClass("bfui-walkthrough-playing"),this.create.addClass("bfui-walkthrough-disabled"),this.back.addClass("bfui-walkthrough-disabled")):(t.removeClass("bfui-walkthrough-playing"),this.create.removeClass("bfui-walkthrough-disabled"),this.back.removeClass("bfui-walkthrough-disabled")),this.isPlaying=e},t.prototype.init=function(){var e=this,t=new window.Glodon.Bimface.Plugins.Walkthrough.WalkthroughManagerConfig;t.viewer=this.getViewer();var n=this.walkthroughManager=new window.Glodon.Bimface.Plugins.Walkthrough.WalkthroughManager(t),i=this.walkthroughList=new r.default({walkthroughManager:n,viewer:this.getViewer(),panel:this}),a=this.createWalkthrough=new s.default({walkthroughManager:n,viewer:this.getViewer(),panel:this}),o=this.create=(new c.Dom).createElement({elementType:"span",className:"bfui-walkthrough-create-path-btn"}).html('<span class="bfui-walkthrough-create" ><i class="bf-icon-create"></i><span>'+window.BimfaceLanguage.bf_panel_nav_addWalkthrough+"</span></span>"),l=this.back=(new c.Dom).createElement({elementType:"span",className:"bfui-walkthrough-return"}).html(""+window.BimfaceLanguage.bf_panel_nav_walkthroughList),d=this._element;d.getContent().setHTML('<div class="bfui-walkthrough-nav"><Control id="btn_create" ></Control><Control id="btn_return" ></Control></div><div class="bfui-walkthrough-split"></div>',{btn_create:o,btn_return:l}),d.getContent().addControl(this.walkthroughList).addControl(a),a.hide(),l.hide().on("click",(function(){if(!e.isPlaying){l.hide(),o.show(),a.hide(),i.show();var t=a.getPath();t.walkthroughPointMng.group.length>0?t.edit?i.updatePathItem(t):i.addPathItem(t):e.num--}})),o.on("click",(function(){e.isPlaying||e.editPath()})),i.addEvent("edit",(function(t){e.editPath(t)})),i.addEvent("stop",(function(){e.updatePlayStatus(!1)}))},t.prototype.editPath=function(e){void 0===e&&(e={});var t,n={name:e.name||window.BimfaceLanguage.bf_panel_nav_walkthrough1+ ++this.num,walkthroughTime:e.walkthroughTime||20,walkthroughPointMng:e.walkthroughPointMng};if(this.create.hide(),this.back.show(),this.walkthroughList.hide(),this.createWalkthrough.show(),e.walkthrough)t=e.walkthrough,this.createWalkthrough.update(t,!0,n);else{var i=new window.Glodon.Bimface.Plugins.Walkthrough.WalkthroughConfig;i.viewer=this.getViewer(),(t=new window.Glodon.Bimface.Plugins.Walkthrough.Walkthrough(i)).setWalkthroughTime(n.walkthroughTime);var a=this.walkthroughManager.addWalkthrough(n.name,t);t.walkthroughId=a,this.createWalkthrough.update(t,!1,n)}},t}(o.UIModule);n.default=d},{"../../../../UI/ControlAnchor/ControlAnchor":114,"../../../../UI/Dom":147,"../../UIModule":45,"./CreateWalkthrough":27,"./WalkthroughList":28}],30:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("../../../../UI/Dom"),s=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-walkthrough-li"},id:t.id,type:"WalkthroughPath"};(n=e.call(this,i)||this).data={name:t.walkthrough._walkthrough.getName(),walkthroughTime:t.walkthrough._walkthrough.walkthroughTime,walkthrough:t.walkthrough,walkthroughPointMng:t.walkthroughPointMng};var a=n.playBtn=(new r.Dom).createElement({elementType:"div",className:"bfui-walkthrough-play"}),o=n.stopBtn=(new r.Dom).createElement({elementType:"div",className:"bfui-walkthrough-stop"}).hide(),s=(new r.Dom).createElement({elementType:"span",className:"bfui-walkthrough-button"}).html(""+window.BimfaceLanguage.bf_general_edit),l=(new r.Dom).createElement({elementType:"span",className:"bfui-walkthrough-button"}).html(""+window.BimfaceLanguage.bf_general_delete),c=n.pathName=(new r.Dom).createElement({elementType:"span",className:"bfui-walkthrough-name"}).html(n.data.name);return n.setHTML('<Control id="play" ></Control><Control id="stop" ></Control><Control id="name" ></Control><div class="bfui-walkthrough-box"><Control id="edit" ></Control><Control id="del" ></Control></div>',{play:a,stop:o,edit:s,del:l,name:c}),l.on("click",(function(){t.manage.fireEvent("delete",n.getId())})),s.on("click",(function(e){e.stopPropagation(),t.manage.fireEvent("edit",n.data,n.getId())})),a.on("click",(function(e){e.stopPropagation(),n.data.walkthroughPointMng.group.length>1&&(n.showPlay(!1),t.manage.fireEvent("play",n,n.getId()))})),o.on("click",(function(e){e.stopPropagation(),n.showPlay(),t.manage.fireEvent("pause",n.data,n.getId())})),n.getDomElement().on("click",(function(){t.manage.fireEvent("selected",n.getId(),n)})),n}return a(t,e),t.prototype.showPlay=function(e){void 0===e&&(e=!0),e?(this.playBtn.show(),this.stopBtn.hide()):(this.playBtn.hide(),this.stopBtn.show())},t}(o.Control);n.default=s},{"../../../../UI/Control":112,"../../../../UI/Dom":147}],31:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("./WalkthroughPath"),s=function(e){function t(t){var n=this,i={elementParam:{elementType:"ul",className:"bfui-walkthrough-path-list bf-scroll-bar"},type:""};return(n=e.call(this,i)||this).tip=t.tip,n.group=[],n.num=0,n.flying=!1,n.viewer=t.viewer,n.addEvent("delete",(function(e){n.deleteItem(e)})),n.addEvent("selected",(function(e,t){n.flying&&(e==n.selectedId?t.data.walkthrough.stop():(n.currentWalkthrough.data.walkthrough.pause(),n.currentWalkthrough.showPlay())),n.selected(e)})),n.addEvent("play",(function(e,t){n.flying&&(n.currentWalkthrough.data.walkthrough.pause(),n.currentWalkthrough.showPlay()),n.setStopCallback(e),n.selected(t,!0),e.data.walkthrough.play(),n.flying=!0})),n.addEvent("pause",(function(e,t){n.selected(t,!0),e.walkthrough.pause(),n.flying=!1})),n.addEvent("edit",(function(e,t){n.selected(t)})),n}return a(t,e),t.prototype.selected=function(e,t){var n=this;this.group.map((function(i){i.getId()==e?(i.addClass("bfui-walkthrough-selected"),n.selectedId=e,n.currentWalkthrough=i,!t&&n.viewer.setCameraStatus(i.data.walkthroughPointMng.group[0].camera)):i.removeClass("bfui-walkthrough-selected")})),t||(this.flying=!1,this.currentWalkthrough.data.walkthrough.stop(),this.fireEvent("stop",this.currentWalkthrough))},t.prototype.updateItem=function(e){e.edit=!1;var t=this.group.filter((function(t){return t.data.walkthrough.walkthroughId==e.walkthrough.walkthroughId}))[0];t.pathName.html(e.walkthrough._walkthrough.getName()),t.data.walkthroughPointMng=e.walkthroughPointMng.getData(),this.setStopCallback(t)},t.prototype.setStopCallback=function(e){var t=this;e.data.walkthrough.stopCallback((function(){t.fireEvent("stop",e),t.flying=!1}))},t.prototype.addItem=function(e){var t=new r.default({id:this.num,walkthrough:e.walkthrough,manage:this,walkthroughPointMng:e.walkthroughPointMng.getData()});this.getDomElement().append(t.getDomElement()),this.setStopCallback(t),this.group.push(t),this.selected(this.num,!0),this.num++,this.update()},t.prototype.removeAll=function(){this.group=[],this.update()},t.prototype.deleteItem=function(e){this.group=this.group.filter((function(t){return t.getId()!=e||(t.destroy(),!1)})),this.update()},t.prototype.update=function(){0==this.group.length?this.tip.show():this.tip.hide(),this.fireEvent("notify",this.group.length>1)},t}(o.Control);n.default=s},{"../../../../UI/Control":112,"./WalkthroughPath":30}],32:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("../../../../UI/Dom"),s=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-walkthrough-li"},id:t.id,type:"WalkthroughPoint"};(n=e.call(this,i)||this).name=t.name||""+(window.BimfaceLanguage.bf_panel_nav_keyframe+t.id),n.config=t;var a=(new r.Dom).createElement({elementType:"span",className:"bfui-walkthrough-button bfui-walkthrough-play"}).html(""+window.BimfaceLanguage.bf_panel_nav_play),o=(new r.Dom).createElement({elementType:"span",className:"bfui-walkthrough-button"}).html(""+window.BimfaceLanguage.bf_general_delete);return n.setHTML('<span class="bfui-walkthrough-name">'+n.name+'</span><div class="bfui-walkthrough-box"><Control id="play" ></Control><Control id="del" ></Control></div>',{play:a,del:o}),o.on("click",(function(){n.fireEvent("delete",n.getId())})),n.getDomElement().on("click",(function(){n.fireEvent("selected",n.getId(),n.config.camera)})),a.on("click",(function(e){e.stopPropagation(),n.fireEvent("play",n.config.keyFrame)})),n}return a(t,e),t.prototype.getData=function(){return{name:this.name,id:this.id,walkItemName:this.config.walkItemName,keyFrame:this.config.keyFrame,camera:this.config.camera}},t}(o.Control);n.default=s},{"../../../../UI/Control":112,"../../../../UI/Dom":147}],33:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("./WalkthroughPoint"),s=function(e){function t(t){var n=this,i={elementParam:{elementType:"ul",className:"bfui-walkthrough-point-list bf-scroll-bar"},type:""};if((n=e.call(this,i)||this).parentControl=t.parentControl,n.tip=t.tip,n.group=[],n.num=0,n.viewer=t.viewer,n.selectedId=-1,t.data){var a=t.data;n.num=a.num,a.group.map((function(e){n.addItem(e)}))}return n.update(),n}return a(t,e),t.prototype.setSelectedPoint=function(e){this.selected(this.group[e].getId())},t.prototype.selected=function(e){this.group.map((function(t){t.getId()==e?t.addClass("bfui-walkthrough-selected"):t.removeClass("bfui-walkthrough-selected")})),this.selectedId=e},t.prototype.addItem=function(e){var t=this;void 0===e&&(e={});var n=window.Object.assign({},{id:e.id||this.num,name:e.name},e),i=new r.default(n);i.addEvent("delete",(function(e){t.deleteItem(e)})),i.addEvent("play",(function(e){t.fireEvent("play",e)})),i.addEvent("selected",(function(e,n){t.parentControl.isPlaying()||(t.selected(e),t.viewer.setCameraStatus(n))}));var a,o=this.group.length,s=o&&this.group[o-1].getId(),l=this.group.filter((function(e,n){return e.getId()==t.selectedId&&(a=n,!0)}));this.selectedId>-1&&this.selectedId!=s?(this.getDomElement().getElement().insertBefore(i.getDomElement().getElement(),l[0].getDomElement().getElement().nextSibling||l[0].getDomElement().getElement()),this.group.splice(a+1,0,i),this.sortKeyframe(a),this.selected(this.selectedId)):(this.getDomElement().append(i.getDomElement()),this.group.push(i)),!e.name&&this.num++,this.update()},t.prototype.sortKeyframe=function(e){var t=this.parentControl.walkthrough,n=t.getKeyFrames(),i=n.pop();n.splice(e+1,0,i),t.setKeyFrames(n)},t.prototype.getData=function(){var e=[];return this.group.map((function(t){e.push(t.getData())})),{num:this.num,group:e}},t.prototype.removeAll=function(){this.parentControl.walkthrough.clearKeyFrames(),this.group=[],this.selectedId=-1,this.setHTML(""),this.update()},t.prototype.deleteItem=function(e){var t=this;this.group=this.group.filter((function(n,i){return n.getId()!=e||(t.parentControl.walkthrough.removeKeyFrame(i),n.destroy(),!1)})),this.update()},t.prototype.update=function(){this.selected(-1),0==this.group.length?this.tip.show():this.tip.hide(),this.fireEvent("notify",this.group.length>1)},t.prototype.setData=function(e){void 0===e?(this.num=0,this.removeAll()):this.num=e.num},t}(o.Control);n.default=s},{"../../../../UI/Control":112,"./WalkthroughPoint":32}],34:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Default="",e.Red="bfui-theme-red",e.Blue="bfui-theme-blue"}(i||(i={})),n.default=i},{}],35:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MainToolbar=void 0;var o=function(e){function t(t){return t.name="MainToolbar",t.config.isHorizontal=!0===t.config.isHorizontal,t.config.isFullLength=!1!==t.config.isFullLength,e.call(this,t)||this}return a(t,e),t}(e("./Toolbar").Toolbar);n.MainToolbar=o},{"./Toolbar":40}],36:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SubToolbar=void 0;var o=function(e){function t(t){var n=this;return t.config.isHorizontal=!0===t.config.isHorizontal,t.config.isFullLength=!1,(n=e.call(this,t)||this).toolbar=t.toolbar,n.getElement().addClass("bfui-subtoolbar"),t.modules&&n.loadModules(t.modules),n._isVisible=!0===t.isVisible,!n._isVisible&&n.hide(),n}return a(t,e),t.prototype.show=function(){this.getEnableUIAnimation()?this.getElement().getDomElement().css("height",this._height+"px").removeClass("bfui-subtoolbar-hide"):e.prototype.show.call(this);return this._isVisible=!0,this},t.prototype.hide=function(){var t=this.getElement().getDomElement();return this.getEnableUIAnimation()?this._height?t.addClass("bfui-subtoolbar-hide").css({height:"0px"}):(this._height=this.getElement().getHeight(),t.addClass("bfui-subtoolbar-hide").css({height:"0px"}),requestAnimationFrame((function(){return t.addClass("bfui-transition")}))):e.prototype.hide.call(this),this._isVisible=!1,this},t.prototype.isVisible=function(){return this._isVisible},t}(e("./Toolbar").Toolbar);n.SubToolbar=o},{"./Toolbar":40}],37:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="SubToolbarAreaMeasure",t.config.isHorizontal=!0,t.config.isFullLength=!1,t.config.elementParam={className:"area-measure-subtoolbar"},(n=e.call(this,t)||this).init(),n}return a(t,e),t.prototype.init=function(){var e=this.getWebApplication().getConfig().toolbars.mainToolbar,t=!0===e.create&&e.items.Measure,n=!0===t.create&&t.items.Area;if(!0===n.create){var i=n.items,a=[];for(var o in i){if(i[o].create){var r={type:"Button",name:"Measure"+o};a.push(r)}}this.loadModules(a)}},t}(e("./Toolbar").Toolbar);n.default=o},{"./Toolbar":40}],38:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t.name="SubToolbarDistanceMeasure",t.config.isHorizontal=!0,t.config.isFullLength=!1,t.config.elementParam={className:"area-measure-subtoolbar"},(n=e.call(this,t)||this).init(),n}return a(t,e),t.prototype.init=function(){var e=this.getWebApplication().getConfig().toolbars.mainToolbar,t=!0===e.create&&e.items.Measure,n=!0===t.create&&t.items.Distance;if(!0===n.create){var i=n.items,a=[];for(var o in i){if(i[o].create){var r={type:"Button",name:"Measure"+o};a.push(r)}}this.loadModules(a)}},t}(e("./Toolbar").Toolbar);n.default=o},{"./Toolbar":40}],39:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return t.name="SubToolbarMeasure",e.call(this,t)||this}return a(t,e),t}(e("./SubToolbar").SubToolbar);n.default=o},{"./SubToolbar":36}],40:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Toolbar=void 0;var o=e("../UIModule"),r=e("../UIModuleMap"),s=e("../../../UI/Control"),l=e("../../../Common/Utils/DataUtil"),c=function(e){function t(t){return t.type="Toolbar",t.config.isHorizontal=!0===t.config.isHorizontal,t.config.isFullLength=!1!==t.config.isFullLength,e.call(this,t)||this}return a(t,e),t.prototype.loadModules=function(e){var t=this;return e.forEach((function(e){if(l.default.assertType(e,"obj")&&void 0!==e.type&&void 0!==e.name){var n=e,i=n.type,a=n.name,o=n.option;r.default.hasOwnProperty(i)&&r.default[i].hasOwnProperty(a)&&((o=o||{}).toolbar=t,t.loadModule(i,a,o))}else e instanceof s.Control&&t.addControl(e)})),this},t.prototype.getButton=function(e){return this.getModule("Button",e)||this.getControl({id:e})},t.prototype.getButtons=function(){var e=[];for(var t in this.getAllModules().Button)e.push(this.getAllModules().Button[t]);return e},t}(o.UIModule);n.Toolbar=c},{"../../../Common/Utils/DataUtil":54,"../../../UI/Control":112,"../UIModule":45,"../UIModuleMap":46}],41:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../UIModule"),s=e("../../../UI/Controls/Tree/TreeNode"),l=e("../../WebApplicationGIS/WebApplicationGISEvent"),c=function(e){function t(t){var n=this;t.type="Tree";var i=(n=e.call(this,t)||this)._element,a=t.config.content;i.addClass("bfui-tree-component"),n.rootNode=i;var o=n.getElement().getId().toString().split("-")[1];n.currentLayer=n.getViewer().getLayerManager().getLayer(o),n.highlightedNodes=new Map,n.treeClickedNodes=new Array;var r=[{id:"all",typeName:"all",name:"全部构件",items:a}];n.initNode(i,r);var s=n;return n.getWebApplication().on(l.default.ComponentClicked,(function(e){s.onComponentSelected(e,r)})),n}return a(t,e),t.prototype.initNode=function(e,t){var n=this;t.data&&(t=t.data),t.map((function(t,i){var a;a=t.id?t.id:""+t.name+i;var o,r=e.getControl({id:a});r?(o=r,r.show()):(o=n.creatTreeNode(e,t,i),e===n.rootNode?e.addTreeNode(o):e.addChildNode(o))}))},t.prototype.creatTreeNode=function(e,t,n){var i=this;this.instanceIds=this.setInstanceIds(t,[],e.getOptions&&(1==e.getOptions().content.items.length?e.getOptions().content.items[0].fileId:e.getOptions().content.fileId?e.getOptions().content.fileId:e.getOptions().instanceIds&&e.getOptions().instanceIds.length>0&&e.getOptions().instanceIds[0].indexOf(".")>-1?e.getOptions().instanceIds[0].split(".")[0]:null));var a,o=e!==this.rootNode?e.getCheckedState():"checked",r=e!==this.rootNode&&e.getIsolateState(),l={rootTree:this.rootNode,content:t,id:t.id||""+t.name+n,type:t.type,hasCheckBox:!0,hasSelection:"all"!==t.typeName,hasCollapse:!!(t.items&&t.items.length>0),hasIsolate:!0,isExpand:"all"===t.typeName,isChecked:"unchecked"!==o,isIsolate:r,instanceIds:this.instanceIds||t,parent:e};a=t.name?t.name:t;var c=new s.default(l);if(c.filter=t.type,c.initTreeNode(a),l.isExpand&&t.items&&this.initNode(c,t.items),"integrateModel"==this.currentLayer.modelType&&c.getInstanceIds().some((function(e){return-1==e.indexOf(".")}))){var d=this.getConditions(c),u=this.getViewer().getViewer().getModelManager().getFilter().getMatchIds([d],this.currentLayer.modelId);c.setInstanceIds(u)}return c.on("ExpendChanged",(function(e,n){n&&t.items&&!t.items[0].elementIds&&i.initNode(e,t.items),n&&t.items[0].elementIds&&i.initNode(e,t.items[0].elementIds)})),c.on("CheckedChanged",(function(e,t){i.handleCheckedChanged(e,t)})),c.on("SelectionChanged",(function(e,t){i.handleSelectionChanged(e,t)})),c.on("IsolateChanged",(function(e,t){i.currentLayer.isVisible&&i.handleIsolateChanged(e,t)})),c},t.prototype.getConditions=function(e){var t={},n=function(e){var i=e.getParent();i.filter&&("category"==i.getOptions().content.type?t.categoryId=i.getOptions().content.id:"floor"==i.getOptions().content.type?t.levelName=i.getOptions().content.actualName:"model"==i.getOptions().content.type||(t[i.getOptions().content.type]=i.getOptions().content.actualName),n(i))};return e.filter&&("category"==e.getOptions().content.type?t.categoryId=e.getOptions().content.id:"floor"==e.getOptions().content.type?t.levelName=e.getOptions().content.actualName:"model"==e.getOptions().content.type||(t[e.getOptions().content.type]=e.getOptions().content.actualName),n(e)),t},t.prototype.setInstanceIds=function(e,t,n){if(null===n&&e.fileId&&(n=e.fileId),e.items)for(var i=function(i){if(e.items[i]&&!e.items[i].elementIds)a.setInstanceIds(e.items[i],t,n);else if(e.items[i].elementIds){var o=e.items[i].fileId;return e.items[i].elementIds.map((function(e){o?t.push(o+"."+e):t.push(e)})),"continue"}},a=this,o=0;o<e.items.length;o++)i(o);else"object"==typeof e?t.push(n?n+"."+e.id:e.id):t.push(n?n+"."+e:e);return t},t.prototype.handleCheckedChanged=function(e,t){var n=this.currentLayer.model,i=e.getInstanceIds();"all"===e.getOptions().id?t?n.showAllComponents():n.hideAllComponents():t?n.showComponentsById(i):n.hideComponentsById(i),this.getViewer().render()},t.prototype.handleSelectionChanged=function(e,t){var n=e.getInstanceIds();this.currentLayer.model.clearSelectedComponents(),t&&this.currentLayer.isVisible&&(this.currentLayer.model.addSelectedComponentsById(n),this.currentLayer.model.zoomToSelectedComponents(1)),this.getViewer().render()},t.prototype.handleIsolateChanged=function(e,t){var n=this.currentLayer.model,i=e.getInstanceIds();"all"===e.getOptions().id?t?n.opaqueAllComponents():n.transparentAllComponents():t?n.opaqueComponentsById(i):n.transparentComponentsById(i),this.getViewer().render()},t.prototype.onComponentSelected=function(e,t){var n,i=this,a=this._element;if(a){var r=a._domElement.element&&a._domElement.element.getElementsByClassName("bfui-tree-name bfui-selected");r&&this.treeClickedNodes.push(r[r.length-1]);var s=function(){if(a._selectionNode&&a._selectionNode.setSelectState(!1),Array.from(i.highlightedNodes.keys()).map((function(e){i.highlightedNodes.get(e).map((function(e){e&&e.setSelectState&&e.setSelectState(!1)}))})),r&&r.length>0)for(var e=0;e<r.length;e++)r[e].removeClass("bfui-selected")};if(e.objectId&&e.layerId===this.currentLayer.id){var l={componentId:e.objectId,modelId:e.modelId},c=new Array;this.getViewer().getModels().map((function(e){c=o(c,e.getSelectedComponents())}));var d,u=l.componentId,f=l.modelId,p=Array.from(this.highlightedNodes.values()),h=u;u&&u.includes(".")&&(n=u.split("."),d=n[0],h=n[1]);var m,v=[],g=function(e,t){var n=Array.isArray(e.items)?e.items:e.items.data;n.some((function(e,i){if(d&&e.fileId&&d.toString()!==e.fileId.toString())return!1;if(h&&e.elementIds){var a=e.elementIds.map((function(e){return e.toString()})).indexOf(h.toString());if(a>=0){for(var r=0;r<i;r++)a+=n[r].elementIds.length;return m=o(t,[a]),!0}}var s=o(t,[i]);if(e.items&&e.items.length>0)g(e,s);else if(h&&e.id&&e.id.toString()===h.toString())return m=s,!0}))};if(Array.isArray(t)||(t=[t]),t.some((function(e,n){return!(d&&e.fileIds&&!e.fileIds.includes(d))&&(e.fileIds||"floor"!==e.type||1!==t.length?g(e,o(v,[n])):g(e,o(v)),!!m||void 0)})),m||1==c.length){var b;if(m){(b=a.content._children[0]).collapseWrap&&!b.collapseWrap.element.hasClass("open")&&b.collapseWrap.click();for(var y=1;y<m.length;y++)b&&b.collapseWrap&&!b.collapseWrap.element.hasClass("open")&&b.collapseWrap.click(),b=b&&b.subNode._children[m[y]];if(!b)return}else{if(!(p.length>0))return;b=p[0][0]}if(!b||b.treeName.hasClass("bfui-selected"))s();else{var E=function(e,t){var n=a._domElement.element&&a._domElement.element.parentElement;if(n&&n.scrollBy)for(var i=e.treeName.element.getBoundingClientRect().top,o=e.treeName.element.offsetHeight,r=i+o,s=0;s<n.children.length;s++){var l=n.children[s].getBoundingClientRect().top,c=n.children[s].clientHeight,d=i-l-3*o;(i<l||r>l+c)&&n.children[s].hasClass("bfui-tree-component")&&n.children[s].scrollBy({top:d,behavior:t})}},C=a._selectionNode;C&&(E(C,"instant"),C.setSelectState(!1));var w=this.highlightedNodes.get(f);w?this.highlightedNodes.set(f,o(w,[b])):this.highlightedNodes.set(f,[b]),1==c.length?(s(),Array.from(this.highlightedNodes.values())[0].map((function(e){var t=c[0].split("."),n=t.length>1?t[1]:c[0];e.opt.content!=n&&e.opt.content.id!=n||(e.setSelectState(!0),a._selectionNode=e,E(e,"smooth"))})),this.treeClickedNodes&&this.treeClickedNodes.map((function(e){e&&e.getAttribute("title")==c[0]&&e.addClass("bfui-selected")}))):s()}}else s()}else s()}},t}(r.UIModule);n.default=c},{"../../../UI/Controls/Tree/TreeNode":146,"../../WebApplicationGIS/WebApplicationGISEvent":50,"../UIModule":45}],42:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../UIModule"),r=e("../../../UI/Controls/Tree/TreeNode"),s=e("../../../Common/Glodon"),l=function(e){function t(t){var n=this;t.type="Tree";var i=(n=e.call(this,t)||this)._element,a=t.config.content;i.addClass("bfui-tree-layer","bfui-tree-effect"),n.rootNode=i;var o=[{id:"root",type:"all",name:"全部效果",isVisible:a.some((function(e){return e.isVisible})),children:a}];return n.initNode(i,o),n}return a(t,e),t.prototype.initNode=function(e,t){var n=this;t.map((function(t){var i,a=e.getControl({id:""+t.id});a?(i=a,a.show()):(i=n.creatTreeNode(e,t),e===n.rootNode?e.addTreeNode(i):e.addChildNode(i))}))},t.prototype.creatTreeNode=function(e,t){var n,i=this,a=t.isVisible;if(e!==this.rootNode&&(n=e.getCheckedState()),"root"!==e.getId())switch(n){case"unchecked":a=!1;break;case"checked":case void 0:a=!0;break;default:a=t.isVisible}else a=t.isVisible;"root"===t.id&&(a=t.isVisible);var o=[s.default.Bimface.Common.Type.EffectType.PrismPoint,s.default.Bimface.Common.Type.EffectType.FireEffect,s.default.Bimface.Common.Type.EffectType.CurveAnimation,s.default.Bimface.Common.Type.EffectType.FanScan,s.default.Bimface.Common.Type.EffectType.RingScan,s.default.Bimface.Common.Type.EffectType.WaterEffect,s.default.Bimface.Common.Type.EffectType.WallEffect,s.default.Bimface.Common.Type.EffectType.SkyBoxManager,s.default.Bimface.Common.Type.EffectType.MapStyle,s.default.Bimface.Common.Type.EffectType.Rain],l={rootTree:this.rootNode,content:t,id:t.id,type:t.type,hasCheckBox:!0,hasSelection:o.indexOf(t.type)>=0,hasCollapse:!!(t.children&&t.children.length>0),isExpand:"all"===t.type,isChecked:a,parent:e},c={type:"svg",name:""};switch(t.type){case"all":case"effectGroup":c.name="gld-bf-folder-open-c-sm";break;default:c.name="gld-bf-file-c-sm"}var d=new r.default(l);return d.initTreeNode(t.name,c),l.isExpand&&t.children&&this.initNode(d,t.children),d.on("ExpendChanged",(function(e,n){n&&t.children&&i.initNode(e,t.children)})),d.on("CheckedChanged",(function(e,n){"root"===t.id?n?i.getViewer().getEffectManager().show({all:!0}):i.getViewer().getEffectManager().hide({all:!0}):n?i.getViewer().getEffectManager().show({ids:[t.id]}):i.getViewer().getEffectManager().hide({ids:[t.id]})})),d.on("SelectionChanged",(function(e,n){[s.default.Bimface.Common.Type.EffectType.PrismPoint,s.default.Bimface.Common.Type.EffectType.FireEffect,s.default.Bimface.Common.Type.EffectType.CurveAnimation,s.default.Bimface.Common.Type.EffectType.FanScan,s.default.Bimface.Common.Type.EffectType.RingScan,s.default.Bimface.Common.Type.EffectType.WaterEffect].indexOf(t.type)>=0&&n&&t.effect.zoomToBoundingBox(i.getViewer())})),d},t}(o.UIModule);n.default=l},{"../../../Common/Glodon":52,"../../../UI/Controls/Tree/TreeNode":146,"../UIModule":45}],43:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../UIModule"),r=e("../../../UI/Controls/Tree/TreeNode"),s=e("./ComponentsTree"),l=e("../../WebApplicationGIS/WebApplicationGISEvent"),c=e("../../../Common/Utils/DomUtil2D"),d=function(e){function t(t){var n=this;t.type="Tree";var i=(n=e.call(this,t)||this)._element,a=t.config.content;i.addClass("bfui-tree-layer"),n.rootNode=i;var o=[{id:"all",typeName:"all",name:"全部图层",children:a}];return n.initNode(i,o),n}return a(t,e),t.prototype.initNode=function(e,t){var n=this;t.map((function(t){var i,a=e.getControl({id:""+t.id});a?(i=a,a.show()):(i=n.creatTreeNode(e,t),e===n.rootNode?e.addTreeNode(i):e.addChildNode(i))}))},t.prototype.creatTreeNode=function(e,t){var n,i=this,a=this.getViewer().getLayerManager(),o=t.isVisible;if(e!==this.rootNode&&(n=e.getCheckedState()),"all"!==e.getId())switch(n){case"unchecked":o=!1;break;case"checked":case void 0:o=!0;break;default:o=t.isVisible}else o=t.isVisible;var s=!0;("BIMLayer"===t.typeName||"FeatureLayer"===t.typeName||"TilesetLayer"===t.typeName)&&t.isVisible&&t.modelId&&(s=!!this.getViewer().getLayerManager().getLayer(t.id)),this.instanceIds=this.setInstanceIds(t,[]);var d={rootTree:this.rootNode,content:t,id:t.id,type:t.typeName,hasCheckBox:!0,hasSelection:"BIMLayer"===t.typeName||"FeatureLayer"===t.typeName||"TilesetLayer"===t.typeName||"ExternalObjectLayer"===t.typeName,hasCollapse:!!(t.children&&t.children.length>0),isExpand:"all"===t.typeName,isChecked:o,isLoaded:s,instanceIds:this.instanceIds,parent:e},u={type:"svg",name:""};switch(t.typeName){case"all":case"GroupLayer":u.name="gld-bf-folder-open-c-sm";break;case"TileLayer":u.name="gld-bf-map-c-sm";break;case"TerrainLayer":u.name="gld-bf-scene-c-sm";break;default:u.name="gld-bf-file-c-sm"}var f=new r.default(d);return f.initTreeNode(t.name,u),d.isExpand&&t.children&&this.initNode(f,t.children),f.on("ExpendChanged",(function(e,n){n&&t.children&&i.initNode(e,t.children)})),f.on("CheckedChanged",(function(e,n){var o="all"===t.typeName?a.getRootLayer():a.getLayer(t.id);o&&(n?o.show():o.hide()),i.getViewer().render()})),f.on("SelectionChanged",(function(e,n){"BIMLayer"!==t.typeName&&"FeatureLayer"!==t.typeName||(n&&c.DomUtil2D.debounce((function(){return i.creatComponentsTree(t.id,e)}))(),!n&&i.hideComponentsTree(t.id),n&&a.zoomToLayer(t.id)),"TilesetLayer"!==t.typeName&&"ExternalObjectLayer"!==t.typeName||n&&a.zoomToLayer(t.id)})),f.getTreeInfoDom().on("mouseup",(function(e){0!==e.button&&2!==e.button||setTimeout((function(){var n={eventType:2===e.button?"RightClick":"Click",layerType:t.typeName,layerId:t.id,event:e,isSelected:!1,isVisible:f.getIsChecked()},a=f.getOptions();a&&a.hasSelection&&(n.isSelected=Boolean(f.getSelectState())),i.getWebApplication().trigger(l.default.LayerTreeNodeClicked,n)}),0)})),f},t.prototype.creatComponentsTree=function(e,t){var n=this;if(this.parentPanel&&this.parentPanel.getControl({id:"ComponentsTree-"+e}))this.parentPanel.getControl({id:"ComponentsTree-"+e}).show(),this.rootNode.addClass("limit-height"),window.requestAnimationFrame((function(){n.scrollToNode(t),n.rootNode.getParent().getAllControls().map((function(t){t.getId().toString().indexOf(e.toString())<0&&t.hide()}))}));else{var i=this.getViewer().getLayerManager().getLayer(e).model;i&&i.getModelTree((function(i,a,o){if(i){var r={manager:n._manager,type:"Tree",name:"ComponentsTree",config:{id:"ComponentsTree-"+e,title:"构件",content:i}},l=new s.default(r);n.parentPanel=n.getUIManager().getModule("Panel","LayerTreePanel",!1).getElement(),n.parentPanel.addControl(l.getElement()),n.rootNode.addClass("limit-height"),window.requestAnimationFrame((function(){n.scrollToNode(t),n.rootNode.getParent().getAllControls().map((function(t){t.getId().toString().indexOf(e.toString())<0&&t.hide()}))}))}}))}},t.prototype.hideComponentsTree=function(e){var t=this.parentPanel&&this.parentPanel.getControl({id:"ComponentsTree-"+e});t&&t.hide(),this.rootNode.removeClass("limit-height")},t.prototype.setInstanceIds=function(e,t){if(e.children)for(var n=0;n<e.children.length;n++){var i=e.children[n];i.id?t.push(i.id.toString()):this.setInstanceIds(i,t)}else e.id&&t.push(e.id.toString());return t},t.prototype.updateCheckState=function(){var e=this,t=this.getElement().getControl({id:"all"}),n=[],i=function(e){var a,o,r;"GroupLayer"===e.typeName?(n.push(e),e.children&&e.children.forEach((function(e){i(e)}))):(a=e.id,o=e.isVisible,(r=t.getControl({id:a},!0))&&(r.setCheckState(o),r.trigger("CheckedChanged",r,o)))},a=this.getViewer().getLayerManager().getLayerConfigsObject();i(a),(n=n.reverse()).forEach((function(n){var i,a=n.id,o=n.isVisible,r=t.getControl({id:a},!0);r&&(o?(e.getViewer().getLayerManager().getLayer(a).query("!.GroupLayer").every((function(e){return i=e.isVisible})),r.checkedState=i?"checked":"half",r.setParentCheckState(void 0)):r.setCheckState(o))}))},t.prototype.scrollToNode=function(e){var t=this.getElement().getDomElement().getElement();if(t&&t.scrollBy){var n=e.getTreeName().getPosition(),i=n.top,a=n.bottom,o=a-i,r=t.getBoundingClientRect().top,s=t.clientHeight;if(i<r||a>r+s){var l=i-r-2*o;this.getElement().getControl({id:"all"}).setExpansion(!0),t.scrollBy({top:l,behavior:"smooth"})}}},t}(o.UIModule);n.default=d},{"../../../Common/Utils/DomUtil2D":55,"../../../UI/Controls/Tree/TreeNode":146,"../../WebApplicationGIS/WebApplicationGISEvent":50,"../UIModule":45,"./ComponentsTree":41}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./UIModuleMap"),a=e("./Theme"),o=function(){function e(e){this._modules={},this._controls=[],this._webApplication=e,this.domElement=e.getDomElement()}return e.prototype.getWebApplication=function(){return this._webApplication},e.prototype.loadModule=function(e,t,n){var a=this.getModule(e,t);if(a)return a;if(i.default.hasOwnProperty(e)&&i.default[e].hasOwnProperty(t)){var o={manager:this,type:e,name:t};for(var r in n)o[r]=n[r];o.config=o.config||{},o.config.parent=o.config.parent||this.domElement;var s=new i.default[e][t](o);return this._modules[e]=this._modules[e]||{},this._modules[e][t]=s,s}},e.prototype.getModule=function(e,t,n){if(void 0===n&&(n=!0),n){var i=this.getModule(e,t,!1);if(i)return i;for(var a in this._modules){var o=this._modules[a];for(var r in o){if(i=o[r].getModule(e,t,!0))return i}}}else if(this._modules[e])return this._modules[e][t]},e.prototype.getAllModules=function(){return this._modules},e.prototype.addControl=function(e,t){this._controls.push(e),this.domElement.append(e.getDomElement()),t&&t.position&&e.setPosition(t.position),"Panel"===e.getType()&&e.topShow()},e.prototype.getAllControls=function(){return this._controls},e.prototype.removeControl=function(e){var t=this;return this._controls.some((function(n,i){if(n===e)return t._controls.splice(i,1),t.domElement.remove(n.getDomElement()),!0})),this},e.prototype.getControl=function(e){var t;if(e)return this._controls.some((function(n){if(n.getId()===e.id)return t=n,!0})),t},e.prototype.setTheme=function(e){var t=a.default[e];if(void 0===t)return this;for(var n in a.default){var i=a.default[n];""!==i&&this.domElement.removeClass(i)}return""!==t&&this.domElement.addClass(t),this},e.prototype.getToolbar=function(e){return this.getModule("Toolbar",e)},e.prototype.getContentBrowser=function(){},e.prototype.getLayerBrowser=function(){},e.prototype.getInfoBar=function(){return this._webApplication.getViewer().getInfoBar?this._webApplication.getViewer().getInfoBar():void 0},e.prototype.getScaleBar=function(){return this._webApplication.getViewer().getScaleBar?this._webApplication.getViewer().getScaleBar():void 0},e.prototype.updateLayerTree=function(){var e=this.getModule("Panel","LayerTreePanel");e&&e.getElement().getContent().clearControls(!0)},e.prototype.reset=function(){var e=this;["MainToolbar","SubToolbarMeasure"].forEach((function(t){return function(t){var n=e.getModule("Toolbar",t);n&&n.getButtons().forEach((function(e){e.getSelect()&&e.setSelect(!1)}))}(t)})),this.getModule("Button","MeasureClear").click()},e.prototype.destroy=function(){for(var e in this._modules){var t=this._modules[e];for(var n in t)t[n].destroy()}this._controls.forEach((function(e){return e.destroy()})),this._modules=null,this._controls=null,this._webApplication=null,this.domElement=null},e}();n.default=o},{"./Theme":34,"./UIModuleMap":46}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.UIModule=void 0;var i=e("../../UI/bimface.ui"),a=e("./UIModuleMap"),o=function(){function e(e){this._modules={},this._controls=[],this.type=e.type,this.name=e.name,this._UIConfig=e.config,this._manager=e.manager,this.load()}return e.prototype.load=function(){return this._element?this._element.show():this._element=new i.default[this.type](this._UIConfig),this},e.prototype.unload=function(){this._element&&this._element.hide()},e.prototype.destroy=function(){for(var e in this._modules){var t=this._modules[e];for(var n in t)t[n].destroy()}this._controls.forEach((function(e){return e.destroy()})),this._modules=null,this._controls=null,this._element&&this._element.destroy(),this._element=null,this._manager=null},e.prototype.loadModule=function(e,t,n){var i,o=this.getModule(e,t);if(o)return o;if(a.default.hasOwnProperty(e)&&a.default[e].hasOwnProperty(t)){var r={manager:this._manager,type:e,name:t};for(var s in n)r[s]=n[s];r.config=r.config||{},r.config.parent=r.config.parent||this._element.getDomElement(),i=new a.default[e][t](r)}return this._modules[e]=this._modules[e]||{},this._modules[e][t]=i,i},e.prototype.getModule=function(e,t,n){if(void 0===n&&(n=!0),n){var i,a=function(n){var o=n.getModule(e,t,!1);if(o)i=o;else{var r=n.getAllModules();for(var s in r){var l=r[s];for(var c in l){var d=l[c];a(d)}}}};return a(this),i}if(this._modules[e])return this._modules[e][t]},e.prototype.getAllModules=function(){return this._modules},e.prototype.addControl=function(e,t){this._controls.push(e),this._element.getDomElement().append(e.getDomElement()),t&&t.position&&e.setPosition(t.position)},e.prototype.getAllControls=function(){return this._controls},e.prototype.removeControl=function(e){var t=this;return this._controls.some((function(n,i){if(n===e)return t._controls.splice(i,1),t._element.getDomElement().remove(n.getDomElement()),!0})),this},e.prototype.getControl=function(e){var t;if(e)return this._controls.some((function(n){if(n.getId()===e.id)return t=n,!0})),t},e.prototype.getElement=function(){return this._element},e.prototype.getUIManager=function(){return this._manager},e.prototype.getWebApplication=function(){return this.getUIManager().getWebApplication()},e.prototype.getViewer=function(){return this.getWebApplication().getViewer()},e.prototype.getEnableUIAnimation=function(){return this.getWebApplication().getEnableUIAnimation()},e.prototype.show=function(){return this._element.show(),this},e.prototype.hide=function(){return this._element.hide(),this},e.prototype.isVisible=function(){return this._element.isVisible()},e.prototype.getName=function(){return this.name},e.prototype.onClick=function(e){return this.getElement().onClick(e),this},e.prototype.click=function(){return this.getElement().click(),this},e}();n.UIModule=o},{"../../UI/bimface.ui":151,"./UIModuleMap":46}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Buttons/MainToolbarButtons/Home"),a=e("./Buttons/MainToolbarButtons/LayerTree"),o=e("./Buttons/MainToolbarButtons/FullScreen"),r=e("./Buttons/MainToolbarButtons/Measure"),s=e("./Buttons/MainToolbarButtons/MeasureDistance"),l=e("./Buttons/MainToolbarButtons/MeasureGroundlineDistance"),c=e("./Buttons/MainToolbarButtons/MeasurePolylineDistance"),d=e("./Buttons/MainToolbarButtons/MeasurePosition"),u=e("./Buttons/MainToolbarButtons/MeasureArea"),f=e("./Buttons/MainToolbarButtons/MeasureSpatialArea"),p=e("./Buttons/MainToolbarButtons/MeasureProjectedArea"),h=e("./Buttons/MainToolbarButtons/MeasureSurfaceArea"),m=e("./Buttons/MainToolbarButtons/MeasureTriangleDistance"),v=e("./Buttons/MainToolbarButtons/MeasureAngle"),g=e("./Buttons/MainToolbarButtons/MeasureSetting"),b=e("./Buttons/MainToolbarButtons/MeasureClear"),y=e("./Buttons/MainToolbarButtons/Walkthrough"),E=e("./Buttons/MainToolbarButtons/Property"),C=e("./Buttons/MainToolbarButtons/Setting"),w=e("./Panels/DrawerPanels/LayerTreePanel"),I=e("./Panels/DrawerPanels/SettingPanel"),M=e("./Panels/PropertyPanel/PropertyPanel"),_=e("./Panels/WalkthroughPanel/WalkthroughPanel"),S=e("./Panels/MeasureSettingPanel/MeasureSettingPanel"),T=e("./Toolbars/MainToolbar"),B=e("./Toolbars/SubToolbarMeasure"),x=e("./Toolbars/SubToolbarAreaMeasure"),P=e("./Toolbars/SubToolbarDistanceMeasure"),L=e("./Tree/LayerTree"),D=e("./Tree/EffectTree"),k={Button:{Home:i.default,LayerTree:a.default,Measure:r.default,MeasureDistance:s.default,MeasureGroundlineDistance:l.default,MeasurePolylineDistance:c.default,MeasurePosition:d.default,MeasureArea:u.default,MeasureSpatialArea:f.default,MeasureProjectedArea:p.default,MeasureSurfaceArea:h.default,MeasureTriangleDistance:m.default,MeasureAngle:v.default,MeasureSetting:g.default,MeasureClear:b.default,Walkthrough:y.default,Property:E.default,Setting:C.default,FullScreen:o.default},Panel:{LayerTreePanel:w.default,SettingPanel:I.default,PropertyPanel:M.default,WalkthroughPanel:_.default,MeasureSettingPanel:S.default},Toolbar:{MainToolbar:T.MainToolbar,SubToolbarMeasure:B.default,SubToolbarAreaMeasure:x.default,SubToolbarDistanceMeasure:P.default},Tree:{LayerTree:L.default,EffectTree:D.default}};n.default=k},{"./Buttons/MainToolbarButtons/FullScreen":2,"./Buttons/MainToolbarButtons/Home":3,"./Buttons/MainToolbarButtons/LayerTree":4,"./Buttons/MainToolbarButtons/Measure":5,"./Buttons/MainToolbarButtons/MeasureAngle":6,"./Buttons/MainToolbarButtons/MeasureArea":7,"./Buttons/MainToolbarButtons/MeasureClear":8,"./Buttons/MainToolbarButtons/MeasureDistance":9,"./Buttons/MainToolbarButtons/MeasureGroundlineDistance":10,"./Buttons/MainToolbarButtons/MeasurePolylineDistance":11,"./Buttons/MainToolbarButtons/MeasurePosition":12,"./Buttons/MainToolbarButtons/MeasureProjectedArea":13,"./Buttons/MainToolbarButtons/MeasureSetting":14,"./Buttons/MainToolbarButtons/MeasureSpatialArea":15,"./Buttons/MainToolbarButtons/MeasureSurfaceArea":16,"./Buttons/MainToolbarButtons/MeasureTriangleDistance":17,"./Buttons/MainToolbarButtons/Property":18,"./Buttons/MainToolbarButtons/Setting":19,"./Buttons/MainToolbarButtons/Walkthrough":21,"./Panels/DrawerPanels/LayerTreePanel":23,"./Panels/DrawerPanels/SettingPanel":24,"./Panels/MeasureSettingPanel/MeasureSettingPanel":25,"./Panels/PropertyPanel/PropertyPanel":26,"./Panels/WalkthroughPanel/WalkthroughPanel":29,"./Toolbars/MainToolbar":35,"./Toolbars/SubToolbarAreaMeasure":37,"./Toolbars/SubToolbarDistanceMeasure":38,"./Toolbars/SubToolbarMeasure":39,"./Tree/EffectTree":42,"./Tree/LayerTree":43}],47:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0}),n.WebApplication=void 0;var r=e("../Event/EventEmmiter"),s=e("./UIModule/UIManager"),l=e("../UI/Dom"),c=function(e){function t(t){var n=e.call(this)||this;n._config=t,n.type=t.type;var i=(new l.Dom).createElement({elementType:"div",className:"bfui-app"});return t.domElement.appendChild(i.getElement()),n.domElement=i,n._enableUIAnimation=t.enableUIAnimation,n._plugins=[],n._UIManager=new s.default(n),n}return a(t,e),t.prototype.getConfig=function(){return this._config},t.prototype.getType=function(){return this.type},t.prototype.getDomElement=function(){return this.domElement},t.prototype.getUIManager=function(){return this._UIManager},t.prototype.getViewer=function(){return this._viewer},t.prototype.getEnableUIAnimation=function(){return this._enableUIAnimation},t.prototype.addPlugin=function(e){this._plugins.push(e)},t.prototype.removePlugin=function(e){this._plugins.find((function(t,n,i){if(t.id==e)return i.splice(n,1)}))},t.prototype.getPlugin=function(e){return this._plugins.find((function(t){return t.id==e}))},t.prototype.getPlugins=function(){return o(this._plugins)},t.prototype.addEventListener=function(e,t){return this.on(e,t),this},t.prototype.removeEventListener=function(e,t){return this.off(e,t),this},t.prototype.destroy=function(){this._destroyed||(this._plugins=null,this._config=null,this._UIManager.destroy(),this.domElement.destroy(),this.getViewer().destroy&&this.getViewer().destroy(),this._destroyed=!0)},t}(r.default);n.WebApplication=c},{"../Event/EventEmmiter":57,"../UI/Dom":147,"./UIModule/UIManager":44}],48:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../WebApplication"),r=e("./WebApplicationGISEvent"),s=e("../../Common/Glodon"),l=e("../../Common/StatisticsDataManager"),c=l.getUINamespace("WebApplicationGIS"),d=function(e){function t(t){return l.SDM.send(c,"bf_c_webAppGIS_new"),e.call(this,t)||this}return a(t,e),t.prototype.initUI=function(){var e=this._config;if(e.toolbars){var t=e.toolbars.mainToolbar;if(t&&t.create){var n=this.getUIManager().loadModule("Toolbar","MainToolbar"),i=[];for(var a in t.items){var o=t.items[a];if(o.create){var s={type:"Button",name:a};if(i.push(s),"Measure"===a){var l=[],c=o.items;for(var d in c){if(c[d].create){var u={type:"Button",name:"Measure"+d};l.push(u)}}var f={type:"Toolbar",name:"SubToolbarMeasure",option:{modules:l}};i.push(f)}}}n.loadModules(i);var p=n.getButton("Measure");p&&p.setSubToolbar(n.getModule("Toolbar","SubToolbarMeasure"))}}this.trigger(r.default.Loaded)},t.prototype.getViewer=function(){var e=this;if(!this._viewer){var t=new s.default.Bimface.Viewer.ViewerGISConfig;for(var n in this._config)t[n]=this._config[n];t.domElement=this.getDomElement().getElement(),this._viewer=new s.default.Bimface.Viewer.ViewerGIS(t),this._viewer.addEventListener(s.default.Bimface.Viewer.ViewerGISEvent.SceneAdded,(function(){return e.initUI()})),this._viewer.addEventListener(s.default.Bimface.Viewer.ViewerGISEvent.ModelRemoved,(function(t){e.trigger(r.default.ModelRemoved,t)})),this._viewer.addEventListener(s.default.Bimface.Viewer.ViewerGISEvent.ModelAdded,(function(t){e.trigger(r.default.ModelAdded,t)})),this._viewer.addEventListener(s.default.Bimface.Viewer.ViewerGISEvent.ComponentsSelectionChanged,(function(t){e.trigger(r.default.ComponentClicked,t)}))}return this._viewer},t.prototype.addScene=function(e){this.getViewer().addScene(e)},t.prototype.destroy=function(){this._viewer&&(this._viewer.destroy&&this._viewer.destroy(),this._viewer=null),this.getDomElement().destroy()},t}(o.WebApplication);n.default=d},{"../../Common/Glodon":52,"../../Common/StatisticsDataManager":53,"../WebApplication":47,"./WebApplicationGISEvent":50}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WebApplicationGISConfig=void 0;var i=function(e){var t={type:"WebApplicationGIS",toolbars:{mainToolbar:{create:!0,items:{Home:{create:!0},LayerTree:{create:!0},Measure:{create:!0,items:{Distance:{create:!0,items:{PolylineDistance:{create:!0},GroundlineDistance:{create:!0}}},Position:{create:!0},Area:{create:!0,items:{SpatialArea:{create:!0},ProjectedArea:{create:!0},SurfaceArea:{create:!0}}},TriangleDistance:{create:!0},Angle:{create:!0},Setting:{create:!0},Clear:{create:!0}},isCollapsed:!0},Walkthrough:{create:!0},Property:{create:!0}}}},enableCompassControl:!0,enableScaleBar:!0,enableInfoBar:!0,enableUIAnimation:!0};return e&&(t.domElement=e),t};n.WebApplicationGISConfig=i},{}],50:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Loaded="Loaded",e.ViewChanged="ViewChanged",e.ModelAdded="ModelAdded",e.ModelRemoved="ModelRemoved",e.LayerTreeNodeClicked="LayerTreeNodeClicked",e.ComponentClicked="ComponentClicked",e.ButtonOnToolbarClicked="ButtonOnToolbarClicked"}(i||(i={})),n.default=i},{}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Color=void 0;var i=function(){function e(e,t){if("number"==typeof e){for(var n=e.toString(16);6!=n.length;)n="0"+n;this.red=parseInt(n.slice(0,2),16),this.green=parseInt(n.slice(2,4),16),this.blue=parseInt(n.slice(4,6),16)}else"object"==typeof e&&(this.red=e.red,this.green=e.green,this.blue=e.blue);this.alpha=t}return e.prototype.formatHex=function(){var e=""+this.toHex(this.red)+this.toHex(this.green)+this.toHex(this.blue);return parseInt(e,16)},e.prototype.toHex=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},e}();n.Color=i},{}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=window.Glodon||{};window.Glodon=i,n.default=i},{}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getUINamespace=n.SDM=void 0;var i=e("./Utils/DataUtil"),a=window.Glodon.Bimface.Data.StatisticsDataManager.getInstance();n.SDM=a;n.getUINamespace=function(e){return i.default.assertType(e,"str")&&e.length>0?("."!==e[0]&&(e="."+e),"Gldon.Bimface.Tiles.UI"+e):"Gldon.Bimface.Tiles.UI"}},{"./Utils/DataUtil":54}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={assertType:function(e,t){var n=function(t){return Object.prototype.toString.call(e)==="[object "+t+"]"};switch(t){case"obj":case"Obj":case"object":case"Object":return n("Object");case"arr":case"Arr":case"array":case"Array":return n("Array");case"num":case"Num":case"number":case"Number":return n("Number");case"func":case"Func":case"function":case"Function":return n("Function");case"str":case"Str":case"string":case"String":return n("String");default:return n(t)}},assertParamsType:function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>1){var i=t.splice(t.length-1,1)[0],a=!0;return t.every((function(t){return a=e.assertType(t,i)})),a}},hasProperty:function(e,t){if(this.assertType(e,"obj"))return void 0!==e[t]},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16)}:null},componentToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},rgbToHex:function(e,t,n){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(n)}};n.default=i},{}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DomUtil2D=void 0;var i=function(){function e(){}return e.create=function(e,t,n){var i=document.createElement(e);return i.id=t||"",i.style.position="absolute",i.style.width="100%",i.style.top=0,i.style.bottom=0,n&&n.appendChild(i),i},e.remove=function(e){var t=e.parentNode;t&&t.removeChild(e)},e.setPosition=function(e,t){e.position=t,e.style.left=t.x+"px",e.style.top=t.y+"px"},e.setOpacity=function(t,n){"opacity"in t.style?t.style.opacity=n:"filter"in t.style&&e._setOpacityIE(t,n)},e._setOpacityIE=function(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(e){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"},e.splitStr=function(e){return e.trim().split(/\s+/g)},e.getContainerOffsetToClient=function(e){var t,n;if(e!=document){var i=(n=e).getBoundingClientRect?function(e){var t=e.getBoundingClientRect(),n=document.body,i=document.documentElement,a=i.clientTop||n.clientTop,o=i.clientLeft||n.clientLeft,r=t.top-a,s=t.left-o;return{top:Math.round(r),left:Math.round(s)}}(n):function(e){for(var t=0,n=0;e;)t+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;var i=document.body,a=document.documentElement;return{top:t-=window.pageYOffset||a.scrollTop||i.scrollTop,left:n-=window.pageXOffset||a.scrollLeft||i.scrollLeft}}(n);t={width:e.offsetWidth,height:e.offsetHeight,left:i.left,top:i.top}}else t={width:window.innerWidth,height:window.innerHeight,left:0,top:0};return t},e.setClassName=function(e,t){var n=document.getElementById(e);n&&(n.className=t)},e.addClassName=function(e,t){var n,i,a,o,r,s=document.getElementById(e);if(s&&(i=s,t&&"string"==typeof t&&(n=t.split(/\s+/),1===i.nodeType)))if(i.className||1!==n.length){for(a=" "+i.className+" ",o=0,r=n.length;o<r;++o)a.indexOf(" "+n[o]+" ")<0&&(a+=n[0]+" ");i.className=a.trim()}else i.className=t},e.removeClassName=function(e,t){var n,i,a,o,r,s=document.getElementById(e);if(s&&(a=s,t&&"string"==typeof t&&(n=(t||"").split(/\s+/),1===a.nodeType&&a.className))){for(i=(" "+a.className+" ").replace("O"," "),o=0,r=n.length;o<r;o++)for(;i.indexOf(" "+n[o]+" ")>=0;)i=i.replace(" "+n[o]+" "," ");a.className=t?i.trim():""}},e.showOrHideElement=function(e,t){var n=document.getElementById(e);n&&(n.style.display=t?"":"none")},e.prototype.getStyleString=function(e){var t=[];for(var n in e){var i=e[n];t.push(n),t.push(":"),t.push(i),t.push("; ")}return t.join("")},e.cloneStyle=function(e){var t={};for(var n in e)t[n]=e[n];return t},e.removeStyleAttribute=function(e,t){Array.isArray(t)||(t=[t]),t.forEach((function(t){t in e&&delete e[t]}))},e.trimRight=function(e){if(0===e.length)return"";for(var t=e.length-1,n=t;n>=0;--n)if(" "!==e.charAt(n)){t=n;break}return e.substr(0,t+1)},e.trimLeft=function(e){if(0===e.length)return"";for(var t=0,n=0;n<e.length;++n)if(" "!==e.charAt(n)){t=n;break}return e.substr(t)},e.matchesSelector=function(e,t){if(e.matches)return e.matches(t);if(e.matchesSelector)return e.matchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.mozMatchesSelector)return e.mozMatchesSelector(t);if(e.oMatchesSelector)return e.oMatchesSelector(t);if(e.querySelectorAll){for(var n=(e.document||e.ownerDocument).querySelectorAll(t),i=0;n[i]&&n[i]!==e;)i++;return!!n[i]}return!1},e.toTranslate3d=function(e,t){return"translate3d("+e+"px,"+t+"px,0)"},e.setCursorStyle=function(e,t){var n;switch(t){case"n":case"s":n="ns-resize";break;case"w":case"e":n="ew-resize";break;case"ne":case"sw":n="nesw-resize";break;case"nw":case"se":n="nwse-resize"}e.style.cursor=n},e.debounce=function(e,t){var n,i=this;return void 0===t&&(t=500),function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];n||e.apply(i,a),clearTimeout(n),n=setTimeout((function(){n=void 0}),t)}},e}();n.DomUtil2D=i},{}],56:[function(e,t,n){"use strict";var i,a;Object.defineProperty(n,"__esModule",{value:!0}),n.ButtonCode=n.KeyCode=void 0,function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ALT=18]="ALT",e[e.ESC=27]="ESC",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.ZERO=48]="ZERO",e[e.A=65]="A",e[e.D=68]="D",e[e.E=69]="E",e[e.Q=81]="Q",e[e.S=83]="S",e[e.W=87]="W",e[e.PLUS=187]="PLUS",e[e.SUB=189]="SUB"}(i||(i={})),n.KeyCode=i,function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(a||(a={})),n.ButtonCode=a},{}],57:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onceEvents={},t._pausedEvents={},t}return a(t,e),t.prototype.on=function(e,t){return this.addEvent(e,t)},t.prototype.off=function(e,t){var n;return this._onceEvents[e]&&((n=this._onceEvents[e].indexOf(t))>=0&&this._onceEvents[e].splice(n,1),0===this._onceEvents[e].length&&delete this._onceEvents[e]),this._pausedEvents[e]&&((n=this._pausedEvents[e].indexOf(t))>=0&&this._pausedEvents[e].splice(n,1),0===this._pausedEvents[e].length&&delete this._pausedEvents[e]),this.removeEvent(e,t)},t.prototype.trigger=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(!this._eventContainer[e])return this;var a=o(this._eventContainer[e]);return this._pausedEvents[e]&&this._pausedEvents[e].forEach((function(n){t.removeEvent(e,n)})),this.fireEvent.apply(this,o([e],n)),this._eventContainer[e]=a,this._onceEvents[e]&&this._onceEvents[e].forEach((function(n){(!t._pausedEvents[e]||t._pausedEvents[e].indexOf(n)<0)&&t.off(e,n)})),this},t.prototype.once=function(e,t){return this.on(e,t),this._onceEvents[e]=this._onceEvents[e]||[],this._onceEvents[e].indexOf(t)<0&&this._onceEvents[e].push(t),this},t.prototype.pause=function(e,t){return this._pausedEvents[e]=this._pausedEvents[e]||[],this._pausedEvents[e].indexOf(t)<0&&this._pausedEvents[e].push(t),this},t.prototype.resume=function(e,t){if(!this._pausedEvents[e])return this;var n=this._pausedEvents[e].indexOf(t);return n>=0&&this._pausedEvents[e].splice(n,1),0===this._pausedEvents[e].length&&delete this._pausedEvents[e],this},t.prototype.reset=function(){this._onceEvents={},this._pausedEvents={},e.prototype.reset.call(this)},t}(e("./EventManager").EventManager);n.default=r},{"./EventManager":58}],58:[function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0}),n.EventManager=void 0;var a=function(){function e(){this._eventContainer={}}return e.prototype.addEvent=function(e,t){return this._eventContainer[e]=this._eventContainer[e]||[],this._eventContainer[e].push(t),this},e.prototype.removeEvent=function(e,t){if(this._eventContainer[e]){var n=this._eventContainer[e].indexOf(t);n>=0&&this._eventContainer[e].splice(n,1)}return this},e.prototype.fireEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e&&this._eventContainer[e]&&i(this._eventContainer[e]).forEach((function(e){e.apply(null,t)})),this},e.prototype.reset=function(){this._eventContainer={}},e}();n.EventManager=a},{}],59:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BaseTool=void 0;var o=e("../../Event/EventEmmiter"),r=e("./InteractionEvent"),s=window.CLOUD,l=window.Glodon,c=window.BimfaceLanguage,d=function(e){function t(t){var n=e.call(this)||this;n._destroyed=!1,n.helperEvents={};var i=t.viewer,a=t.hasToolbar,o=t.controlId,r=t.controlType,s=t.controlParams;return n.viewer=i,n.controlId=o,n.controlType=r,n.controlParams=s,n.initControl(),n.initEvents(),!1!==a&&n.initToolbar(),n}return a(t,e),t.prototype.initControl=function(){this.helper=s.Interaction.InteractionHelper.getInstance(this.viewer.getViewer()),this.helper.addControl(this.controlId,this.controlType,this.controlParams)},t.prototype.initEvents=function(){for(var e in this.helperEvents){var t=this.helperEvents[e];this.helper.addEventListener(e,t)}},t.prototype.initToolbar=function(){var e=this,t=document.createElement("div");t.classList.add("bf-roomEditorToolbar"),this.domElement=t,t.addEventListener("mousedown",(function(e){return e.stopPropagation(),!1}));var n=new l.Bimface.UI.Toolbar.ToolbarConfig;n.element=t,n.className="bf-toolbar bf-toolbar-roomEditor";var i=new l.Bimface.UI.Toolbar.Toolbar(n),a=new l.Bimface.UI.Button.ButtonConfig;a.className="bf-modeleditor-cancel",a.title=c.bf_general_exit;var o=new l.Bimface.UI.Button.SingleButton(a);o.setHtml("退出"===c.bf_general_exit?"退 出":c.bf_general_exit),o.addEventListener("Click",(function(){e.fireEvent(r.default.Exit),e.exit()})),i.addControl(o),this.viewer.getDomElement().appendChild(t)},t.prototype.getControl=function(){return this.helper.getControl(this.controlId)},t.prototype.addEventListener=function(e,t){this.addEvent(e,t)},t.prototype.removeEventListener=function(e,t){this.removeEvent(e,t)},t.prototype.exit=function(){this.destroy()},t.prototype.destroy=function(){if(!this._destroyed){for(var e in this._destroyed=!0,this.helperEvents){var t=this.helperEvents[e];this.helper.removeEventListener(e,t)}this.domElement&&(this.viewer.getDomElement().removeChild(this.domElement),this.domElement=null),this.viewer=null,this.helper.removeControl(this.controlId)}},t}(o.default);n.BaseTool=d},{"../../Event/EventEmmiter":57,"./InteractionEvent":65}],60:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="DrawFanTool",t.controlType="DrawCircleControl",t.hasToolbar=!1,e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={DrawFinished:function(e){e.id===t.controlId&&(t.fireEvent(r.default.DrawFinished,{fanData:t.getFanData()}),requestAnimationFrame((function(){return t.exit()})))}},e.prototype.initEvents.call(this)},t.prototype.getFanData=function(){var e=this.getControl().getCircleData();return e?{originPosition:e.center,radius:e.radius,fanAngle:e.thetaLength}:null},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],61:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="EditFanTool",t.controlType="CircleControl",t.controlParams={center:t.originPosition,radius:t.radius,thetaLength:t.fanAngle},e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={TransformFinished:function(e){var n=e.id;[t.controlId,t.getControl().translateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformFinished)},TransformChanged:function(e){var n=e.id;[t.controlId,t.getControl().translateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformChanged)}},e.prototype.initEvents.call(this)},t.prototype.getFanData=function(){var e=this.getControl().getCircleData();return e?{originPosition:e.center,radius:e.radius,fanAngle:e.thetaLength}:null},t.prototype.setOriginPosition=function(e){this.getControl().setPosition(e)},t.prototype.setRadius=function(e){this.getControl().setRadius(e)},t.prototype.setFanAngle=function(e){this.getControl().setThetaLength(e)},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],62:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Event/EventEmmiter"),s=e("../InteractionEvent"),l=window.CLOUD,c=window.THREE,d=function(e){function t(t){var n=e.call(this)||this;n.translateControlId="TransformControl_Translate",n.scaleControlId="TransformControl_Scale",n.helperEvents={},n.currentMode="Translation",n.config=t;var i=t.viewer;for(var a in n.viewer=i,n.helper=l.Interaction.InteractionHelper.getInstance(i.getViewer()),n.init(),n.helperEvents={TransformChanged:function(e){var t=e.id,i=e.control;t===n.translateControlId?(n.translate(i),n.fireEvent(s.default.TransformChanged)):t===n.scaleControlId&&(n.scale(i),n.fireEvent(s.default.TransformChanged))},TransformStarted:function(e){var t=e.id;t===n.scaleControlId&&(n.originScale=n.getFire().getScale()),[n.translateControlId,n.scaleControlId].indexOf(t)>=0&&n.fireEvent(s.default.TransformStarted)},TransformFinished:function(e){var t=e.id;[n.translateControlId,n.scaleControlId].indexOf(t)>=0&&n.fireEvent(s.default.TransformFinished)}},n.helperEvents){var o=n.helperEvents[a];n.helper.addEventListener(a,o)}return n}return a(t,e),t.prototype.init=function(){var e=this.getCurrentInfo();this.translateControl=this.helper.addControl(this.translateControlId,"TranslateControl",e),this.scaleControl=this.helper.addControl(this.scaleControlId,"ScaleControl",o(o({},e),{visible:!1})),this.scaleControl.arrows.forEach((function(e){e.enable(!1),e.visible=!1}))},t.prototype.getCurrentInfo=function(){var e=this.toVector3(this.getPosition()),t=this.getBoundingBox();return this.offset=new c.Vector3,this.offset.z=(t.max.z-t.min.z)/2,{position:this.offset.clone().add(e),boundingBox:t}},t.prototype.getFire=function(){return this.config.fire},t.prototype.getBoundingBox=function(){return this.getFire().fireEffect.box},t.prototype.getTransformation=function(){return this.getFire().fireEffect.matrix.clone()},t.prototype.getPosition=function(){return this.getFire().getPosition()},t.prototype.setPosition=function(e){this.getFire().setPosition(e),this.getFire().update()},t.prototype.translate=function(e){var t=(new c.Matrix4).copyPosition(e.matrix);this.setPosition({x:t.elements[12]-this.offset.x,y:t.elements[13]-this.offset.y,z:t.elements[14]-this.offset.z})},t.prototype.scale=function(e){var t=e.scaleInfo;if(t&&"ScaleCube"===t.type){var n=this.toVector3(this.getPosition());this.getFire().setScale(this.originScale*t.scaleFactor),this.getFire().update();var i=this.offset.clone(),a=this.getBoundingBox();this.offset.z=(a.max.z-a.min.z)/2;var o=n.clone().add(i).sub(this.offset);this.getFire().setPosition(o),this.getFire().update(),e.update(this.getBoundingBox().clone())}},t.prototype.toVector3=function(e){return new c.Vector3(e.x,e.y,e.z)},t.prototype.enableTranslate=function(){this.translateControl.visible=!0,this.scaleControl.visible=!1;var e=this.getCurrentInfo(),t=e.position,n=e.boundingBox;this.translateControl.setPosition(t),this.translateControl.updateBoundingBox(n),this.viewer.render()},t.prototype.enableScale=function(){this.translateControl.visible=!1,this.scaleControl.visible=!0;var e=this.getCurrentInfo(),t=e.position,n=e.boundingBox;this.scaleControl.setPosition(t),this.scaleControl.update(n),this.viewer.render()},t.prototype.setMode=function(e){switch(this.currentMode=e,e){case"Translation":this.enableTranslate();break;case"Scaling":this.enableScale()}},t.prototype.updateControl=function(){this.setMode(this.currentMode)},t.prototype.destroy=function(){for(var e in this.helper.removeControl(this.translateControlId),this.helper.removeControl(this.scaleControlId),this.helperEvents){var t=this.helperEvents[e];this.helper.removeEventListener(e,t)}},t}(r.default);n.default=d},{"../../../Event/EventEmmiter":57,"../InteractionEvent":65}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./FireTransformControl"),a=e("../InteractionEvent"),o=window.Glodon,r=window.BimfaceLanguage,s=function(){function e(e){this._destroyed=!1,this.viewer=e.viewer,this.control=new i.default(e),this.initToolbar()}return e.prototype.initToolbar=function(){var e=this,t=[],n=document.createElement("div");if(n.classList.add("bf-roomEditorToolbar"),this.domElement=n,n.addEventListener("mousedown",(function(e){return e.stopPropagation(),!1})),void 0===this.transformToolbar){var i=o.Bimface.UI.Toolbar.ToolbarConfig();i.className="bf-toolbar bf-toolbar-roomEditor",i.element=n,i.buttons=["ModelEditingTranslate","ModelEditingScale"],this.viewer.getDomElement().appendChild(n),this.transformToolbar=new o.Bimface.Application.UI.Toolbar.Toolbar(i),t.push(this.transformToolbar)}var s=o.Bimface.UI.Control.ControlEvent,l=this.transformToolbar.getControls();this.uncheckOthers("Translation",l),this._editingMode="Translation";for(var c=function(t){var n=l[t];n.addEventListener(s.Click,(function(){n.isChecked()?(e.control.setMode(n.getId()),e.uncheckOthers(n.getId(),l),e._editingMode=n.getId(),e.control.fireEvent(a.default.TransformModeChanged,{mode:e._editingMode})):n.toggleCheckedState()}))},d=0;d<l.length;d++)c(d);var u=new o.Bimface.UI.Toolbar.ToolbarConfig;u.element=n,u.className="bf-toolbar bf-toolbar-roomEditor";var f=this.operationToolbar=new o.Bimface.UI.Toolbar.Toolbar(u);this.operationToolbar=f,t.push(f);var p=new o.Bimface.UI.Button.ButtonConfig;p.className="bf-modeleditor-cancel",p.title=r.bf_general_exit;var h=new o.Bimface.UI.Button.SingleButton(p);h.setHtml("退出"===r.bf_general_exit?"退 出":r.bf_general_exit),h.addEventListener("Click",(function(){e.exit(),e.control.fireEvent(a.default.Exit)})),f.addControl(h),this.viewer.getDomElement().appendChild(n)},e.prototype.uncheckOthers=function(e,t){for(var n=0,i=t;n<i.length;n++){var a=i[n];a.getId()===e?a.setCheckedState(!0):a.setCheckedState(!1)}},e.prototype.updateControl=function(){this.control.updateControl()},e.prototype.addEventListener=function(e,t){this.control.addEvent(e,t)},e.prototype.removeEventListener=function(e,t){this.control.removeEvent(e,t)},e.prototype.exit=function(){this.destroy()},e.prototype.destroy=function(){this._destroyed||(this.control.destroy(),this.viewer.getDomElement().removeChild(this.domElement),this.domElement=null,this.viewer=null,this._destroyed=!0)},e}();n.default=s},{"../InteractionEvent":65,"./FireTransformControl":62}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./PrismPointTransform/PrismPointTransformTool"),a=e("./Polygon/DrawPolygonTool"),o=e("./Polygon/EditPolygonTool"),r=e("./Line/DrawLineTool"),s=e("./Line/DrawAutoCloseLineTool"),l=e("./Line/EditLineTool"),c=e("./Fan/DrawFanTool"),d=e("./Fan/EditFanTool"),u=e("./Ring/DrawRingTool"),f=e("./Ring/EditRingTool"),p=e("./Polygon/DrawSurfaceTool"),h=e("./Polygon/EditClipSurfaceTool"),m=e("./Polygon/EditFlapSurfaceTool"),v=e("./FireTransform/FireTransformTool");n.default={PrismPointTransformTool:i.default,DrawPolygonTool:a.default,EditPolygonTool:o.default,DrawLineTool:r.default,DrawAutoCloseLineTool:s.default,EditLineTool:l.default,DrawFanTool:c.default,EditFanTool:d.default,DrawRingTool:u.default,EditRingTool:f.default,DrawSurfaceTool:p.default,EditClipSurfaceTool:h.default,EditFlapSurfaceTool:m.default,FireTransformTool:v.default}},{"./Fan/DrawFanTool":60,"./Fan/EditFanTool":61,"./FireTransform/FireTransformTool":63,"./Line/DrawAutoCloseLineTool":66,"./Line/DrawLineTool":67,"./Line/EditLineTool":68,"./Polygon/DrawPolygonTool":69,"./Polygon/DrawSurfaceTool":70,"./Polygon/EditClipSurfaceTool":71,"./Polygon/EditFlapSurfaceTool":72,"./Polygon/EditPolygonTool":73,"./PrismPointTransform/PrismPointTransformTool":75,"./Ring/DrawRingTool":76,"./Ring/EditRingTool":77}],65:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.TransformStarted="TransformStarted",e.TransformChanged="TransformChanged",e.TransformFinished="TransformFinished",e.TransformModeChanged="TransformModeChanged",e.DrawFinished="DrawFinished",e.Exit="Exit"}(i||(i={})),n.default=i},{}],66:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="DrawAutoCloseLineTool",t.controlType="DrawLineControl",t.hasToolbar=!1,t.controlParams={autoClose:!0,isCurve:!1},e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={DrawFinished:function(e){e.id===t.controlId&&(t.fireEvent(r.default.DrawFinished,{pointsData:t.getPointsData()}),requestAnimationFrame((function(){return t.exit()})))}},e.prototype.initEvents.call(this)},t.prototype.getPointsData=function(){return this.getControl().getPointsData()},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],67:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="DrawLineTool",t.controlType="DrawLineControl",t.hasToolbar=!1,e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={DrawFinished:function(e){e.id===t.controlId&&(t.fireEvent(r.default.DrawFinished,{pointsData:t.getPointsData()}),requestAnimationFrame((function(){return t.exit()})))}},e.prototype.initEvents.call(this)},t.prototype.getPointsData=function(){return this.getControl().getPointsData()},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],68:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="EditLineTool",t.controlType="LineControl",t.controlParams={points:t.points},e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={TransformFinished:function(e){var n=e.id;[t.getControl().translateControlId,t.getControl().pointTranslateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformFinished)},TransformChanged:function(e){var n=e.id;[t.getControl().translateControlId,t.getControl().pointTranslateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformChanged)}},e.prototype.initEvents.call(this)},t.prototype.getPointsData=function(){return this.getControl().getPointsData()},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],69:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="DrawPolygonTool",t.controlType="DrawPolygonControl",t.hasToolbar=!1,e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={DrawFinished:function(e){e.id===t.controlId&&(t.fireEvent(r.default.DrawFinished,{pointsData:t.getPointsData()}),requestAnimationFrame((function(){return t.exit()})))}},e.prototype.initEvents.call(this)},t.prototype.getPointsData=function(){return this.getControl().getPointsData()},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],70:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="DrawSurfaceTool",t.controlType="DrawSurfaceControl",t.hasToolbar=!1,e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={DrawFinished:function(e){e.id===t.controlId&&(t.fireEvent(r.default.DrawFinished,{pointsData:t.getPointsData()}),requestAnimationFrame((function(){return t.exit()})))}},e.prototype.initEvents.call(this)},t.prototype.getPointsData=function(){return this.getControl().getPointsData()},t.prototype.getMaxZ=function(){return this.getControl().getMaxZ()},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],71:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="EditClipSurfaceTool",t.controlType="SurfaceControl",t.controlParams={points:t.points},e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={TransformFinished:function(e){var n=e.id;[t.getControl().pointTranslateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformFinished)},TransformChanged:function(e){var n=e.id;[t.getControl().pointTranslateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformChanged)}},e.prototype.initEvents.call(this)},t.prototype.getPointsData=function(){return this.getControl().getPointsData()},t.prototype.setPoints=function(e){this.getControl().setPoints(e)},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],72:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=window.Glodon,l=window.BimfaceLanguage,c=function(e){function t(t){var n=this;return t.controlId="EditFlapSurfaceTool",t.controlType="SurfaceControl",t.hasToolbar=!1,t.controlParams={points:t.points,streching:!0,maxZ:t.maxZ,hidePlane:!!t.hidePlane},(n=e.call(this,t)||this).initToolbar(),n}return a(t,e),t.prototype.initToolbar=function(){var e=this,t=[],n=document.createElement("div");if(n.classList.add("bf-roomEditorToolbar"),this.domElement=n,n.addEventListener("mousedown",(function(e){return e.stopPropagation(),!1})),void 0===this.flapToolbar){var i=s.Bimface.UI.Toolbar.ToolbarConfig();i.className="bf-toolbar bf-toolbar-roomEditor",i.element=n,i.buttons=["ModelEditingFlap","ModelEditingPlaneTranslate"],this.viewer.getDomElement().appendChild(n),this.flapToolbar=new s.Bimface.Application.UI.Toolbar.Toolbar(i),t.push(this.flapToolbar)}var a=s.Bimface.UI.Control.ControlEvent,o=this.flapToolbar.getControls();this.uncheckOthers("Flap",o),this._editingMode="Flap";for(var c=function(t){var n=o[t];n.addEventListener(a.Click,(function(){n.isChecked()?(e.setMode(n.getId()),e.uncheckOthers(n.getId(),o),e._editingMode=n.getId(),e.fireEvent(r.default.TransformModeChanged,{mode:e._editingMode})):n.toggleCheckedState()}))},d=0;d<o.length;d++)c(d);var u=new s.Bimface.UI.Toolbar.ToolbarConfig;u.element=n,u.className="bf-toolbar bf-toolbar-roomEditor";var f=this.operationToolbar=new s.Bimface.UI.Toolbar.Toolbar(u);this.operationToolbar=f,t.push(f);var p=new s.Bimface.UI.Button.ButtonConfig;p.className="bf-modeleditor-cancel",p.title=l.bf_general_exit;var h=new s.Bimface.UI.Button.SingleButton(p);h.setHtml("退出"===l.bf_general_exit?"退 出":l.bf_general_exit),h.addEventListener("Click",(function(){e.exit(),e.fireEvent(r.default.Exit)})),f.addControl(h),this.viewer.getDomElement().appendChild(n)},t.prototype.uncheckOthers=function(e,t){for(var n=0,i=t;n<i.length;n++){var a=i[n];a.getId()===e?a.setCheckedState(!0):a.setCheckedState(!1)}},t.prototype.setMode=function(e){switch(this._editingMode=e,e){case"Flap":this.enableFlapping();break;case"PlaneTranslate":this.enableTranslate()}},t.prototype.enableFlapping=function(){this.getControl().toggleEditingMode(!0),this.viewer.render()},t.prototype.enableTranslate=function(){this.getControl().toggleEditingMode(!1),this.viewer.render()},t.prototype.exit=function(){this.destroy()},t.prototype.initEvents=function(){var t=this;this.helperEvents={TransformFinished:function(e){var n=e.id;[t.getControl().pointTranslateControlId,t.getControl().strechControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformFinished)},TransformChanged:function(e){var n=e.id;[t.getControl().pointTranslateControlId,t.getControl().strechControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformChanged)}},e.prototype.initEvents.call(this)},t.prototype.setCurrentHeight=function(e){this.getControl().setCurrentHeight(e)},t.prototype.getCurrentHeight=function(){return this.getControl().getCurrentHeight()},t.prototype.getPointsData=function(){return this.getControl().getPointsData()},t.prototype.getInitPointsData=function(){return this.getControl().getInitPointsData()},t.prototype.getGroundPointsData=function(){return this.getControl().getGroundPointsData()},t.prototype.setPoints=function(e){this.getControl().setPoints(e)},t}(o.BaseTool);n.default=c},{"../BaseTool":59,"../InteractionEvent":65}],73:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="EditPolygonTool",t.controlType="PolygonControl",t.controlParams={points:t.points},e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={TransformFinished:function(e){var n=e.id;[t.getControl().translateControlId,t.getControl().pointTranslateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformFinished)},TransformChanged:function(e){var n=e.id;[t.getControl().translateControlId,t.getControl().pointTranslateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformChanged)}},e.prototype.initEvents.call(this)},t.prototype.getPointsData=function(){return this.getControl().getPointsData()},t.prototype.setPoints=function(e){this.getControl().setPoints(e)},t.prototype.setHeight=function(e){var t=this.getPointsData().map((function(t){return{x:t.x,y:t.y,z:e}}));this.setPoints(t)},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],74:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Event/EventEmmiter"),s=e("../InteractionEvent"),l=window.CLOUD,c=window.THREE,d=function(e){function t(t){var n=e.call(this)||this;n.translateControlId="TransformControl_Translate",n.scaleControlId="TransformControl_Scale",n.helperEvents={},n.currentMode="Translation",n.config=t;var i=t.viewer;for(var a in n.viewer=i,n.helper=l.Interaction.InteractionHelper.getInstance(i.getViewer()),n.init(),n.helperEvents={TransformChanged:function(e){var t=e.id,i=e.control;t===n.translateControlId?(n.translate(i),n.fireEvent(s.default.TransformChanged)):t===n.scaleControlId&&(n.scale(i),n.fireEvent(s.default.TransformChanged))},TransformStarted:function(e){var t=e.id;t===n.scaleControlId&&(n.originSize=n.getPrismPoint().getSize()),[n.translateControlId,n.scaleControlId].indexOf(t)>=0&&n.fireEvent(s.default.TransformStarted)},TransformFinished:function(e){var t=e.id;[n.translateControlId,n.scaleControlId].indexOf(t)>=0&&n.fireEvent(s.default.TransformFinished)}},n.helperEvents){var o=n.helperEvents[a];n.helper.addEventListener(a,o)}return n}return a(t,e),t.prototype.init=function(){var e=this.getCurrentInfo();this.translateControl=this.helper.addControl(this.translateControlId,"TranslateControl",e),this.scaleControl=this.helper.addControl(this.scaleControlId,"ScaleControl",o(o({},e),{visible:!1})),this.scaleControl.arrows.forEach((function(e){e.enable(!1),e.visible=!1}))},t.prototype.getCurrentInfo=function(){var e=this.toVector3(this.getPosition()),t=this.getBoundingBox();return this.offset=new c.Vector3,t.getCenter(this.offset),{position:this.offset.clone().add(e),boundingBox:t}},t.prototype.getPrismPoint=function(){return this.config.prismPoint},t.prototype.getBoundingBox=function(){var e=this.getPrismPoint().prismPoint.children[0].geometry;return e.computeBoundingBox(),e.boundingBox.clone().applyMatrix4(this.viewer.getViewer().getScene().getMatrixGlobal().clone().invert())},t.prototype.getTransformation=function(){return this.getPrismPoint().prismPoint.matrix.clone()},t.prototype.getPosition=function(){return this.getPrismPoint().getPosition()},t.prototype.setPosition=function(e){this.getPrismPoint().setPosition(e),this.getPrismPoint().update()},t.prototype.translate=function(e){var t=(new c.Matrix4).copyPosition(e.matrix);this.setPosition({x:t.elements[12]-this.offset.x,y:t.elements[13]-this.offset.y,z:t.elements[14]-this.offset.z})},t.prototype.scale=function(e){var t=e.scaleInfo;if(t&&"ScaleCube"===t.type){var n=this.toVector3(this.getPosition());this.getPrismPoint().setSize(this.originSize*t.scaleFactor),this.getPrismPoint().update();var i=this.offset.clone();this.getBoundingBox().getCenter(this.offset);var a=n.clone().add(i).sub(this.offset);this.getPrismPoint().setPosition(a),this.getPrismPoint().update(),e.update(this.getBoundingBox().clone())}},t.prototype.toVector3=function(e){return new c.Vector3(e.x,e.y,e.z)},t.prototype.enableTranslate=function(){this.translateControl.visible=!0,this.scaleControl.visible=!1;var e=this.getCurrentInfo(),t=e.position,n=e.boundingBox;this.translateControl.setPosition(t),this.translateControl.updateBoundingBox(n),this.viewer.render()},t.prototype.enableScale=function(){this.translateControl.visible=!1,this.scaleControl.visible=!0;var e=this.getCurrentInfo(),t=e.position,n=e.boundingBox;this.scaleControl.setPosition(t),this.scaleControl.update(n),this.viewer.render()},t.prototype.setMode=function(e){switch(this.currentMode=e,e){case"Translation":this.enableTranslate();break;case"Scaling":this.enableScale()}},t.prototype.updateControl=function(){this.setMode(this.currentMode)},t.prototype.destroy=function(){for(var e in this.helper.removeControl(this.translateControlId),this.helper.removeControl(this.scaleControlId),this.helperEvents){var t=this.helperEvents[e];this.helper.removeEventListener(e,t)}},t}(r.default);n.default=d},{"../../../Event/EventEmmiter":57,"../InteractionEvent":65}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./PrismPointTransformControl"),a=e("../InteractionEvent"),o=window.Glodon,r=window.BimfaceLanguage,s=function(){function e(e){this._destroyed=!1,this.viewer=e.viewer,this.control=new i.default(e),this.initToolbar()}return e.prototype.initToolbar=function(){var e=this,t=[],n=document.createElement("div");if(n.classList.add("bf-roomEditorToolbar"),this.domElement=n,n.addEventListener("mousedown",(function(e){return e.stopPropagation(),!1})),void 0===this.transformToolbar){var i=o.Bimface.UI.Toolbar.ToolbarConfig();i.className="bf-toolbar bf-toolbar-roomEditor",i.element=n,i.buttons=["ModelEditingTranslate","ModelEditingScale"],this.viewer.getDomElement().appendChild(n),this.transformToolbar=new o.Bimface.Application.UI.Toolbar.Toolbar(i),t.push(this.transformToolbar)}var s=o.Bimface.UI.Control.ControlEvent,l=this.transformToolbar.getControls();this.uncheckOthers("Translation",l),this._editingMode="Translation";for(var c=function(t){var n=l[t];n.addEventListener(s.Click,(function(){n.isChecked()?(e.control.setMode(n.getId()),e.uncheckOthers(n.getId(),l),e._editingMode=n.getId(),e.control.fireEvent(a.default.TransformModeChanged,{mode:e._editingMode})):n.toggleCheckedState()}))},d=0;d<l.length;d++)c(d);var u=new o.Bimface.UI.Toolbar.ToolbarConfig;u.element=n,u.className="bf-toolbar bf-toolbar-roomEditor";var f=this.operationToolbar=new o.Bimface.UI.Toolbar.Toolbar(u);this.operationToolbar=f,t.push(f);var p=new o.Bimface.UI.Button.ButtonConfig;p.className="bf-modeleditor-cancel",p.title=r.bf_general_exit;var h=new o.Bimface.UI.Button.SingleButton(p);h.setHtml("退出"===r.bf_general_exit?"退 出":r.bf_general_exit),h.addEventListener("Click",(function(){e.exit(),e.control.fireEvent(a.default.Exit)})),f.addControl(h),this.viewer.getDomElement().appendChild(n)},e.prototype.uncheckOthers=function(e,t){for(var n=0,i=t;n<i.length;n++){var a=i[n];a.getId()===e?a.setCheckedState(!0):a.setCheckedState(!1)}},e.prototype.updateControl=function(){this.control.updateControl()},e.prototype.addEventListener=function(e,t){this.control.addEvent(e,t)},e.prototype.removeEventListener=function(e,t){this.control.removeEvent(e,t)},e.prototype.exit=function(){this.destroy()},e.prototype.destroy=function(){this._destroyed||(this.control.destroy(),this.viewer.getDomElement().removeChild(this.domElement),this.domElement=null,this.viewer=null,this._destroyed=!0)},e}();n.default=s},{"../InteractionEvent":65,"./PrismPointTransformControl":74}],76:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="DrawRingTool",t.controlType="DrawCircleControl",t.hasToolbar=!1,t.controlParams={drawAngle:!1},e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={DrawFinished:function(e){e.id===t.controlId&&(t.fireEvent(r.default.DrawFinished,{ringData:t.getRingData()}),requestAnimationFrame((function(){return t.exit()})))}},e.prototype.initEvents.call(this)},t.prototype.getRingData=function(){var e=this.getControl().getCircleData();return e?{originPosition:e.center,radius:e.radius}:null},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],77:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseTool"),r=e("../InteractionEvent"),s=function(e){function t(t){return t.controlId="EditRingTool",t.controlType="CircleControl",t.controlParams={center:t.originPosition,radius:t.radius,drawAngle:!1},e.call(this,t)||this}return a(t,e),t.prototype.initEvents=function(){var t=this;this.helperEvents={TransformFinished:function(e){var n=e.id;[t.controlId,t.getControl().translateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformFinished)},TransformChanged:function(e){var n=e.id;[t.controlId,t.getControl().translateControlId].indexOf(n)>=0&&t.fireEvent(r.default.TransformChanged)}},e.prototype.initEvents.call(this)},t.prototype.getRingData=function(){var e=this.getControl().getCircleData();return e?{originPosition:e.center,radius:e.radius}:null},t.prototype.setOriginPosition=function(e){this.getControl().setPosition(e)},t.prototype.setRadius=function(e){this.getControl().setRadius(e)},t}(o.BaseTool);n.default=s},{"../BaseTool":59,"../InteractionEvent":65}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/UIMap"),o=e("./ResourceSearch"),r=e("./Loading"),s=e("../../libs/EventBus"),l=e("../../libs/viewerHelper"),c={folder:"folder-md"};["zip","dwf","dwg","dgn","rvm","osgb","igms","catia","ifc","rvt","nwd","skp","model","map","terrain"].forEach((function(e){c[e]=e}));var d=function(e,t){e.forEach((function(e){c[e]=t}))};d(["dwf","dwfx"],"dwf"),d(["nwd","nwc","nwf"],"nwd"),d(["dwg","dxf"],"dwg"),d(["rvt","rfa","rte"],"rvt"),d(["catpart","catproduct"],"catia"),d(["igms","gbg","gbq","gcl","gdq","ggj","gjg","gmp","gpb","gpv","gqi","gsc","gsh","gtb","gtj","gzb"],"igms"),d(["sat","stl","3dm","obj","dae","ply","fbx","stp","step"],"model"),d(["osgb","shp","shpzip","osgbzip","kml","laszip"],"osgb"),d(["3ds","max"],"max");var u=function(){function e(e){var t=this;this.app=e,this.arrayCheckedData=[],this.panel=new a.Panel({title:"添加资源",width:680,draggable:!1,sizeFixed:!0,position:{anchor:"TopCenter",offset:{x:0,y:20}},footerDisabled:!0}),this.panel.onClose((function(){return t.cancel()})),this.panel.addClass("bfui-sceneeditor-panel");var n=(new i.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-modal"});n.append(this.panel.getDomElement()).hide(),this.domElement=n;var l=(new i.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-resource-container"}),c=this.fileSearch=new o.default;c.onSearch((function(e){t.fileCrumb.hide(),t.fileList.addClass("filelist-search"),t.getResourceList({searchKeyword:e,type:t.tabs.getActiveValue()})})),c.onCancel((function(){t.fileCrumb.show(),t.fileList.removeClass("filelist-search");var e={type:t.tabs.getActiveValue()};t.crumbData.length>1&&(e.parentId=t.crumbData[t.crumbData.length-1].id),t.getResourceList(e)})),this.fileCrumb=(new a.Crumb).addClass("bfui-sceneeditor-resource-crumb"),this.crumbData=[{id:"root",text:"全部"}],this.fileCrumb.setValue(this.crumbData).onSelect((function(e){var n=t.crumbData.find((function(t){return t.id===e}));if(n){var i=t.crumbData.indexOf(n);t.crumbData=t.crumbData.slice(0,i+1),t.fileCrumb.setValue(t.crumbData);var a={type:t.tabs.getActiveValue()};"root"!==n.id&&(a.parentId=n.id),t.getResourceList(a)}})),this.fileList=(new a.List).addClass("bfui-sceneeditor-resource-filelist"),this.fileList.onChecked((function(e){t.arrayCheckedData=e.map((function(e){return e.data})),t.updateAddResourceButton()})).onItemClicked((function(e){e.data.isFolder&&(t.getResourceList({parentId:e.id,type:t.tabs.getActiveValue()}),t.crumbData.push({id:e.id,text:e.text}),t.fileCrumb.setValue(t.crumbData))})),l.append(c.getDomElement()).append(this.fileCrumb.getDomElement()).append(this.fileList.getDomElement());var d=(new i.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-resource-container"});this.integrateList=(new a.List).addClass("bfui-sceneeditor-resource-integratelist"),this.integrateList.onChecked((function(e){t.arrayCheckedData=e.map((function(e){return e.data})),t.updateAddResourceButton()}));var u=this.integrateSearch=new o.default;u.onSearch((function(e){t.getResourceList({searchKeyword:e,type:t.tabs.getActiveValue()})})),u.onCancel((function(){var e={type:t.tabs.getActiveValue()};t.getResourceList(e)})),d.append(this.integrateSearch.getDomElement()).append(this.integrateList.getDomElement());var f=this.tabs=new a.Tabs({parent:this.panel.getDomElement(),options:[{content:l,label:"单文件模型",name:"file",value:"file"},{content:d,label:"集成模型",name:"integrate",value:"integrate"}]});f.addClass("bfui-sceneeditor-resource-tabs"),f.onSelect((function(e){"file"===e?c.cancel():u.cancel()})),requestAnimationFrame((function(){f.setActive(0)}));var p=this.buttonConfirm=new a.Button({text:"添加单文件模型"}).addClass("bfui-sceneeditor-button","footer-button","button-primary");p.onClick((function(){return t.confirm()}));var h=new a.Button({text:"取消"}).addClass("bfui-sceneeditor-button","footer-button","button-default").onClick((function(){return t.cancel()})),m=new a.Row({justifyContent:"End"}).addClass("bfui-sceneeditor-panel-footer").addControl(p).addControl(h),v=this.footerInfo=(new i.Dom).createElement({elementType:"div",className:"footer-info"});m.getDomElement().append(v);var g=this.loading=new r.default;g.hide(),this.panel.addControl(g).addControl(f).getFooter().addControl(m),this.emptyListLabel=(new i.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-emptylabel"}),this.emptyListLabel.hide().html("没有找到对应内容"),this.panel.getDomElement().append(this.emptyListLabel),s.eventBus.on(s.EditorEvent.AddResourcePanelShow,(function(e,n){t.show(),t.crumbData=[{id:"root",text:"全部"}],t.fileCrumb.setValue(t.crumbData),requestAnimationFrame((function(){f.setActive(0)})),t.getResourceList({type:t.tabs.getActiveValue()}),t.isUpdateMode="update"===e,t.fileList.setSingleCheckedMode(t.isUpdateMode),t.integrateList.setSingleCheckedMode(t.isUpdateMode),t.footerInfo.html('<i class="bfui-sceneeditor-icon-warning bf-information-sm"></i>'+(t.isUpdateMode?"仅支持更新为原有图层同类型的流式加载模型资源":"仅支持添加流式加载的模型资源")),t.originLayerType=n;var i=t.isUpdateMode?"更新资源":"添加资源";t.panel.setTitle(i)}))}return e.prototype.getDomElement=function(){return this.domElement},e.prototype.getResourceList=function(e){var t=this;this.arrayCheckedData=[],this.updateAddResourceButton(),this.emptyListLabel.hide(),this.loading.show(),e||(e={});var n="file"===this.tabs.getActiveValue();e.type=n?"file":"integrate";var i=function(e){var t=e.isFolder,n=e.name;if(t)return"bf-folder-md";var i=e.suffix||n.slice(n.lastIndexOf(".")+1);if(i){var a=c[i.toLowerCase()];if(a)return"bf-"+a}return"bf-file"};this.app.getConfig().getResourceListHandler(e).then((function(e){t.loading.hide();var a=n?t.fileList:t.integrateList,o=e.map((function(e){return{id:e.id,text:e.name,hasCheckBox:!0,isCheckBoxDisabled:!1,hasIcon:!0,iconType:"svg",iconClass:i(e),data:e}}));t.isUpdateMode&&(o=o.filter((function(e){if(e.data.isFolder)return e.isCheckBoxDisabled=!0,!0;var n=e.text.slice(e.text.lastIndexOf(".")+1);return l.getTypeNameByFileType(n)===t.originLayerType}))),a.setValue(o),0===o.length&&t.emptyListLabel.show()})).catch((function(e){return console.log("getResourceListHandler error: "+e)}))},e.prototype.show=function(){var e=this;this.domElement.show(),this.panel.show(),requestAnimationFrame((function(){return e.domElement.addClass("bfui-sceneeditor-modal-show")}))},e.prototype.hide=function(){var e=this;this.domElement.removeClass("bfui-sceneeditor-modal-show");var t=function(){e.domElement.hide(),e.getDomElement().off("transitionend",t)};this.getDomElement().on("transitionend",t)},e.prototype.confirm=function(){var e=this;0!==this.arrayCheckedData.length&&(this.isUpdateMode&&(this.arrayCheckedData=[this.arrayCheckedData[0]]),this.arrayCheckedData.forEach((function(t){t.type=e.tabs.getActiveValue()})),this.app.getConfig().getViewTokenHandler(this.arrayCheckedData).then((function(t){s.eventBus.trigger(s.EditorEvent.AddResourceByViewToken,t.map((function(t){if(!t.name){var n=e.arrayCheckedData.filter((function(e){return e.id===t.id}))[0];n&&(t.name=n.name)}return t.modelType="file"===e.tabs.getActiveValue()?"singleModel":"integrateModel",t})),e.isUpdateMode?"update":"add"),e.cancel()})).catch((function(t){console.log("getViewTokenHandler error: "+t),e.cancel()})))},e.prototype.cancel=function(){this.arrayCheckedData=[],this.hide()},e.prototype.updateAddResourceButton=function(){this.buttonConfirm.setHTML((this.isUpdateMode?"更新":"添加")+("file"===this.tabs.getActiveValue()?"单文件":"集成")+"模型"),0===this.arrayCheckedData.length?this.buttonConfirm.addClass("button-disabled"):this.buttonConfirm.removeClass("button-disabled")},e}();n.default=u},{"../../../../UI/Dom":147,"../../../../UI/UIMap":150,"../../libs/EventBus":106,"../../libs/viewerHelper":108,"./Loading":79,"./ResourceSearch":80}],79:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("../../../../UI/Common/Utils/Render"),s=function(e){function t(){var t=this,n={elementParam:{elementType:"div",className:"bfui-sceneeditor-loading"},type:"Loading"};return t=e.call(this,n)||this,r.default('\n      <div class="bf-loading">\n        <div class="bf-loading-gif"></div>\n      </div>\n    ',t.getDomElement()),t}return a(t,e),t.prototype.show=function(){return e.prototype.show.call(this),this},t}(o.Control);n.default=s},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Control":112}],80:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("../../../../UI/Common/Utils/Render"),s=function(e){function t(){var t=this,n={elementParam:{elementType:"div",className:"bfui-sceneeditor-search"},type:"ResourceSearch"};(t=e.call(this,n)||this).isSearching=!1,t.data={buttonCancelVisible:!1},t.renderItemMap=r.default('\n      <Input ref="input" class="bfui-sceneeditor-search-input"></input>\n      <i ref="buttonCancel" bf-show="buttonCancelVisible" class="bfui-sceneeditor-search-icon gld-bf-close-sm" @click="cancel"></i>\n      <i ref="buttonSearch" class="bfui-sceneeditor-search-icon gld-bf-search-md" @click="search"></i>\n    ',t.getDomElement(),t);var i=t.renderItemMap.input;return i.getDomElement().attribute("placeholder","请输入要搜索的文件名或ID"),i.onInput((function(){t.data.buttonCancelVisible=""!==i.getValue()})),t}return a(t,e),t.prototype.search=function(){var e=this.renderItemMap.input;e.getValue()&&this.searchHandler&&this.searchHandler(e.getValue()),this.isSearching=!0},t.prototype.cancel=function(){this.renderItemMap.input.setValue(""),this.cancelHandler&&this.cancelHandler(),this.data.buttonCancelVisible=!1,this.isSearching=!1},t.prototype.onSearch=function(e){this.searchHandler=e},t.prototype.onCancel=function(e){this.cancelHandler=e},t}(o.Control);n.default=s},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Control":112}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../Common/Color"),s=e("../../../../Common/Utils/DataUtil"),l=e("../../../../Common/Glodon"),c=e("../../libs/viewerHelper"),d=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.count=1,this.effect=null,this.initEdit=!1,this.init=!0,this.data={type:c.getGlodon().Bimface.Common.Type.EffectType.PrismPoint,name:"锚点-"+this.count,params:{position:{x:1e3,y:10,z:1},size:10,color:{red:50,green:211,blue:166,alpha:.4},wireframeColor:{red:142,green:255,blue:222,alpha:1},duration:1500,originPosition:""},isEdit:e&&e._isEdit||!1,id:"",display:!1},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="!scope.data.isEdit">添加效果</label>\n        <label bf-show="scope.data.isEdit">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="!scope.data.isEdit" class="displayflex">\n          <div class="bfui-sceneeditor-effects-name bfui-sceneeditor-effect-name-style">\n            <span class="bfui-sceneeditor-effect-color"></span>\n            <span class="padding-left10">点特效</span>\n          </div>\n        </div>\n        <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name color-333">锚点</div>\n            <div class="bfui-sceneeditor-effect-point-img"></div>\n          </div>\n        </div>\n        <div bf-show="!scope.data.isEdit" class="divide-line"></div>\n        <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-editor-effect-header">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">锚点</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content" bf-class="!scope.data.isEdit ? \'bfui-sceneeditor-scroll\' : \'\'">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <div class="bfui-sceneeditor-effect-value">\n              <input ref="anchorName" class="input-field" type="text">\n            </div>\n          </div>\n          <div bf-show="scope.data.isEdit" class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <div class="bfui-sceneeditor-effect-value dark-background">\n              <input ref="anchorId" class="input-field light-color" type="text"></input>\n            </div>\n          </div>\n          <div bf-show="scope.data.isEdit"  class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">世界坐标</div>\n            <div class="bfui-sceneeditor-effect-value">\n              <input ref="worldPosition" class="input-field"></input>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">锚点大小</div>\n            <div class="bfui-sceneeditor-effect-value">\n              <input ref="anchorSize" class="input-field" type="number"></input>\n              <i class="icon">m</i>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">动画时长</div>\n            <div class="bfui-sceneeditor-effect-value">\n              <input ref="animationFrequency" class="input-field" type="number"></input>\n              <i class="icon margin-left185">ms</i>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">棱锥面颜色</div>\n            <div class="color-opacity-select margin-top6">\n              <div class="color-container">\n                <div ref="pyramidalFaceColorContainer" class="bfui-colorpicker">\n                  <input ref="pyramidalFaceColor" class="bfui-colorpicker-input input-visible"></input>\n                </div>\n                <div ref="pyramidalFaceColorArrow" class="arrow"></div>\n              </div>\n              <Slider ref="pyramidalFaceColorOpacity"></Slider>\n              <div class="input-container">\n                <Input ref="pyramidalFaceColorInput" class="bfui-sceneeditor-input"></Input>\n                <span>%</span>\n              </div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">线框颜色</div>\n            <div class="color-opacity-select margin-top6">\n              <div class="color-container">\n                <div ref="lineBorderColorContainer" class="bfui-colorpicker">\n                  <input ref="lineBorderColor" class="bfui-colorpicker-input input-visible"></input>\n                </div>\n                <div ref="lineBorderColorArrow" class="arrow"></div>\n              </div>\n              <Slider ref="lineBorderColorOpacity"></Slider>\n              <div class="input-container">\n                <Input ref="lineBorderColorInput" class="bfui-sceneeditor-input"></Input>\n                <span>%</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-placeholder"></div>\n        <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-fixed-bottom">\n          <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n          <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){t.data.display=!1,o.eventBus.trigger(o.EditorEvent.AnchorEffectHide),!t.data.isEdit&&t.effect&&t.effect.destroy(),t.data.isEdit&&(t.effect.play(),o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)),o.eventBus.trigger(o.EditorEvent.AnchorPointDestroy)}));var n=this.renderItemMap.anchorName;n.attribute("type","text"),n.attribute("value","锚点-"+this.count),n.attribute("autocomplete","off");var d=this.renderItemMap.anchorSize;d.attribute("type","number"),d.attribute("value",this.data.params.size);var u=this.renderItemMap.animationFrequency;u.attribute("type","number"),u.attribute("value",this.data.params.duration);var f=this.renderItemMap.pyramidalFaceColor;f.attribute("type","color"),f.attribute("value","#32D3A6"),this.renderItemMap.pyramidalFaceColorArrow.on("click",(function(){f.click(),f.getElement().focus()}));var p=this.renderItemMap.pyramidalFaceColorContainer;p.attribute("style","background: rgb(17, 218, 183);");var h=this.renderItemMap.pyramidalFaceColorOpacity,m=this.renderItemMap.pyramidalFaceColorInput;h.setEnableTooltip(!0),h.getTooltipControl().addClass("bfui-tooltip-center"),h.onChange((function(e){t.data.params.color.alpha=+e/100,m.setValue(+e);var n=new l.default.Web.Graphics.Color(t.data.params.color.red,t.data.params.color.green,t.data.params.color.blue,t.data.params.color.alpha);if(t.effect&&!t.initEdit&&!t.init){var i=t.effect.prismPoint._running;t.effect.stop(),t.effect.setColor(n),t.effect.update(),document.addEventListener("mouseup",(function(){i&&t.effect.play()}),{once:!0})}})),m.onChange((function(e){e>100&&(e=100,m.setValue(100)),e<0&&(e=0,m.setValue(0)),t.data.params.color.alpha=+e/100,h.setValue(+e);var n=new l.default.Web.Graphics.Color(t.data.params.color.red,t.data.params.color.green,t.data.params.color.blue,t.data.params.color.alpha);t.effect&&!t.initEdit&&(t.effect.setColor(n),t.effect.update())}));var v=this.renderItemMap.lineBorderColor;v.attribute("type","color"),v.attribute("value","#8EFFDE");var g=this.renderItemMap.lineBorderColorContainer;g.attribute("style","background: rgb(142, 255, 222);"),this.renderItemMap.lineBorderColorArrow.on("click",(function(){v.click(),v.getElement().focus()}));var b=this.renderItemMap.lineBorderColorOpacity,y=this.renderItemMap.lineBorderColorInput;b.setEnableTooltip(!0),b.getTooltipControl().addClass("bfui-tooltip-center"),b.onChange((function(e){t.data.params.wireframeColor.alpha=e/100,y.setValue(e);var n=new l.default.Web.Graphics.Color(t.data.params.wireframeColor.red,t.data.params.wireframeColor.green,t.data.params.wireframeColor.blue,t.data.params.wireframeColor.alpha);if(t.effect&&!t.initEdit&&!t.init){var i=t.effect.prismPoint._running;t.effect.stop(),t.effect.setWireframeColor(n),t.effect.update(),document.addEventListener("mouseup",(function(){i&&t.effect.play()}),{once:!0})}})),y.onChange((function(e){e>100&&(e=100,y.setValue(100)),e<0&&(e=0,y.setValue(0)),t.data.params.wireframeColor.alpha=+e/100,b.setValue(+e);var n=new l.default.Web.Graphics.Color(t.data.params.wireframeColor.red,t.data.params.wireframeColor.green,t.data.params.wireframeColor.blue,t.data.params.wireframeColor.alpha);t.effect&&!t.initEdit&&(t.effect.setWireframeColor(n),t.effect.update())}));var E=this.renderItemMap.anchorId;E.attribute("type","text"),E.attribute("disabled","disabled"),E.attribute("value",this.data.id),this.renderItemMap.worldPosition.on("change",(function(e){var n=e.target.value.replaceAll("，",",").split(",");if(3==n.length){var i={x:Number(n[0]),y:Number(n[1]),z:Number(n[2])};t.data.params.originPosition=i,t.effect.setPosition(i),t.effect.update(),o.eventBus.fireEvent(o.EditorEvent.AnchorSizeUpdate)}}));var C=this.renderItemMap.saveButton;d.on("change",(function(e){t.data.params.size=e.target.value,t.effect.setSize(t.data.params.size),t.effect.update(),o.eventBus.trigger(o.EditorEvent.AnchorSizeUpdate)})),u.on("change",(function(e){t.data.params.duration=e.target.value,t.effect.setDuration(e.target.value),t.effect&&t.effect.update()})),f.on("input",(function(e){var n=s.default.hexToRgb(e.target.value.substring(1)),i=new l.default.Web.Graphics.Color(n.red,n.green,n.blue,t.data.params.color.alpha);if(t.data.params.color={red:n.red,blue:n.blue,green:n.green,alpha:t.data.params.color.alpha},p.attribute("style","background: rgb("+n.red+", "+n.green+", "+n.blue+");"),t.effect&&!t.initEdit){var a=t.effect.prismPoint._running;t.effect.stop(),t.effect.setColor(i),t.effect.update(),f.on("blur",(function(){a&&t.effect.play()}),{once:!0})}})),v.on("input",(function(e){var n=s.default.hexToRgb(e.target.value.substring(1)),i=new l.default.Web.Graphics.Color(n.red,n.green,n.blue,t.data.params.wireframeColor.alpha);if(t.data.params.wireframeColor={red:n.red,blue:n.blue,green:n.green,alpha:t.data.params.wireframeColor.alpha},g.attribute("style","background:rgb("+n.red+", "+n.green+", "+n.blue+");"),t.effect&&!t.initEdit){var a=t.effect.prismPoint._running;t.effect.stop(),t.effect.setWireframeColor(i),t.effect.update(),v.on("blur",(function(){a&&t.effect.play()}),{once:!0})}})),C.onClick((function(){var e=new r.Color(s.default.hexToRgb(f.attribute("value").substring(1)),t.data.params.color.alpha),i=new r.Color(s.default.hexToRgb(v.attribute("value").substring(1)),t.data.params.wireframeColor.alpha),a=c.getEffect(t.app._selectedEffectGroup),l={id:"prismPoint_"+t.count,typeName:t.data.type,type:t.data.type,name:n.attribute("value"),params:{id:"prismPoint_"+t.count,position:t.data.params.position,size:d.attribute("value"),color:{red:e.red,green:e.green,blue:e.blue,alpha:e.alpha},wireframeColor:{red:i.red,green:i.green,blue:i.blue,alpha:i.alpha},duration:u.attribute("value"),parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:a?a.parentId:"root",originPosition:""},isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:a?a.parentId:"root"};t.data.isEdit?l.params.originPosition=t.data.params.originPosition:delete l.params.originPosition,t.effect.size=l.params.size,t.effect.color=l.params.color,t.effect.wireframeColor=l.params.wireframeColor,t.effect.duration=l.params.duration,t.effect.parentId=l.params.parentId,o.eventBus.fireEvent(o.EditorEvent.AnchorEffectHide),o.eventBus.fireEvent(o.EditorEvent.AnchorPointDestroy),o.eventBus.fireEvent(o.EditorEvent.SaveAnchorEffect,l,t.effect),setTimeout((function(){n.attribute("value","锚点-"+t.count+1)}),200)})),this.renderItemMap.backButton.onClick((function(){t.data.display=!1,o.eventBus.fireEvent(o.EditorEvent.AnchorEffectHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow),t.effect.destroy(),o.eventBus.fireEvent(o.EditorEvent.AnchorPointDestroy)})),o.eventBus.on(o.EditorEvent.TempAnchorDestroy,(function(){t.effect&&t.data.display&&!t.data.isEdit&&!c.getEffect("prismPoint_"+t.count)&&(t.effect.destroy(),t.effect=null)})),o.eventBus.on(o.EditorEvent.AnchorPointUpdate,(function(e){t.data.params.position=e.getPosition(),t.data.params.size=e.getSize(),t.effect.position=e.getPosition(),t.effect.size=e.getSize(),t.renderItemMap.anchorSize.attribute("value",Number(e.getSize()).toFixed(2)),t.renderItemMap.worldPosition.attribute("value",Number(e.getPosition().x).toFixed(2)+","+Number(e.getPosition().y).toFixed(2)+","+Number(e.getPosition().z).toFixed(2)),e.update()})),o.eventBus.on(o.EditorEvent.AnchorEffectShow,(function(e){e.isEdit?(t.data.isEdit=e.isEdit,t.effect=e.effect,t.effect.stop(),t.data.id=e.id,t.initEdit=!0,t.init=!1,c.addAnchorTransformTool(e.effect),e.effect.update(),t.renderItemMap.anchorName.attribute("value",e.name),t.renderItemMap.anchorId.attribute("value",e.id),t.renderItemMap.anchorSize.attribute("value",e.effect.size),t.renderItemMap.animationFrequency.attribute("value",e.effect.duration),t.renderItemMap.pyramidalFaceColor.attribute("value",s.default.rgbToHex(e.effect.color.red,e.effect.color.green,e.effect.color.blue)),t.renderItemMap.lineBorderColor.attribute("value",s.default.rgbToHex(e.effect.wireframeColor.red,e.effect.wireframeColor.green,e.effect.wireframeColor.blue)),t.renderItemMap.pyramidalFaceColorContainer.attribute("style","background: rgb("+e.effect.color.red+", "+e.effect.color.green+", "+e.effect.color.blue+");"),t.renderItemMap.lineBorderColorContainer.attribute("style","background: rgb("+e.effect.wireframeColor.red+", "+e.effect.wireframeColor.green+", "+e.effect.wireframeColor.blue+")"),t.renderItemMap.pyramidalFaceColorInput.setValue(100*e.effect.color.alpha),t.renderItemMap.pyramidalFaceColorOpacity.setValue(100*e.effect.color.alpha),t.renderItemMap.lineBorderColorInput.setValue(100*e.effect.wireframeColor.alpha),t.renderItemMap.lineBorderColorOpacity.setValue(100*e.effect.wireframeColor.alpha),t.renderItemMap.worldPosition.attribute("value",Number(e.effect.getPosition().x).toFixed(2)+","+Number(e.effect.getPosition().y).toFixed(2)+","+Number(e.effect.getPosition().z).toFixed(2)),t.data.params.originPosition={x:e.effect.getPosition().x,y:e.effect.getPosition().y,z:e.effect.getPosition().z},t.data.params.color={red:e.effect.color.red,green:e.effect.color.green,blue:e.effect.color.blue,alpha:e.effect.color.alpha},t.data.params.wireframeColor={red:e.effect.wireframeColor.red,green:e.effect.wireframeColor.green,blue:e.effect.wireframeColor.blue,alpha:e.effect.wireframeColor.alpha},t.initEdit=!1,o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.anchorName.attribute("value")!=e&&t.renderItemMap.anchorName.attribute("value",e)})),t.renderItemMap.anchorName.on("change",(function(e){c.getEffect(t.data.id).name=e.target.value,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e.target.value)}))):(t.init=!0,t.count=c.getMaxEffectNo("prismPoint_")+1,t.data.isEdit=!1,t.initEdit=!1,t.data.params.color={red:50,green:211,blue:166,alpha:.4},t.data.params.wireframeColor={red:142,green:255,blue:222,alpha:1},t.renderItemMap.anchorName.attribute("value","锚点-"+t.count),t.renderItemMap.anchorSize.attribute("value",10),t.renderItemMap.animationFrequency.attribute("value",1500),t.renderItemMap.pyramidalFaceColor.attribute("value","#32D3A6"),t.renderItemMap.pyramidalFaceColorContainer.attribute("style","background: rgb(17, 218, 183);"),t.renderItemMap.lineBorderColorContainer.attribute("style","background: rgb(142, 255, 222)"),t.renderItemMap.lineBorderColor.attribute("value","#8EFFDE"),t.renderItemMap.pyramidalFaceColorOpacity.setValue(40),t.renderItemMap.pyramidalFaceColorInput.setValue(40),t.renderItemMap.lineBorderColorOpacity.setValue(100),t.renderItemMap.lineBorderColorInput.setValue(100),t.effect=e,e.update(),t.init=!1),t.data.display=!0}))}return e.prototype.getDomElement=function(){return this.domElement},e}();n.default=d},{"../../../../Common/Color":51,"../../../../Common/Glodon":52,"../../../../Common/Utils/DataUtil":54,"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../Common/Glodon"),s=e("../../libs/viewerHelper"),l=e("../../libs/options"),c=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.count=1,this.effect=null,this.extMang=null,this.data={id:"",type:s.getGlodon().Bimface.Common.Type.EffectType.CurveAnimation,name:"动线-"+this.count,params:{curves:[],time:1500,curveType:"flow",loop:!0,style:1},isEdit:e&&e._isEdit||!1,style:1,listshow:!1,editTransformExit:!1,isVisible:!0},this.renderItemMap=a.default('\n    <div class="bfui-sceneeditor-panel-header">\n      <label bf-show="!scope.data.isEdit">添加效果</label>\n      <label bf-show="scope.data.isEdit">效果属性</label>\n      <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n    </div>\n    <div class="bfui-sceneeditor-panel-content">\n      <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-effects-name bfui-sceneeditor-effect-name-style">\n        <span class="bfui-sceneeditor-effect-color"></span>\n        <span class="padding-left10">线特效</span>\n      </div>\n      <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-effect-content">\n        <div>\n          <div class="bfui-sceneeditor-effect-name color-333">动线</div>\n          <div class="bfui-sceneeditor-effect-curve-img"></div>\n        </div>\n      </div>\n      <div bf-show="!scope.data.isEdit" class="divide-line"></div>\n      <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-editor-effect-header">\n        <div class="bfui-sceneeditor-effect-color"></div>\n        <div class="bfui-sceneeditor-effect-name bfui-sceneeditor-effect-name-styl">动线</div>\n      </div>\n      <div class="bfui-sceneeditor-editor-effect-content" bf-class="!scope.data.isEdit ? \'bfui-sceneeditor-scroll\' : \'\'">\n        <div class="bfui-sceneeditor-effect-attribute">\n          <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">名称</div>\n          <div class="bfui-sceneeditor-effect-value">\n            <input ref="curveName" class="input-field" type="text">\n          </div>\n        </div>\n        <div bf-show="scope.data.isEdit" class="bfui-sceneeditor-effect-attribute">\n          <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">ID</div>\n          <div class="bfui-sceneeditor-effect-value dark-background">\n            <input ref="curveId" class="input-field light-color" type="text"></input>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-effect-attribute">\n          <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">样式</div>\n          <div class="bfui-sceneeditor-effect-value">\n            <div class="box">\n                <div ref="styleValue" class="box-item">\n                    <img ref="styleValueImg"></img>\n                    <i ref="styleDropdown" class="right-icon gld-bf-arrow-down-sm" bf-class="scope.data.listshow ? \'margin-top\' : \'\' "></i>\n                </div>\n                <ul ref="styleList" class="box-ul">\n                    <li ref="styleLi1" class="box-li">\n                      <img ref="styleOption1"></img>\n                    </li>\n                    <li ref="styleLi2" class="box-li">\n                      <img ref="styleOption2"></img>\n                    </li>\n                    <li ref="styleLi3" class="box-li">\n                      <img ref="styleOption3"></img>\n                    </li>\n                    <li ref="styleLi4" class="box-li">\n                      <img ref="styleOption4"></img>\n                    </li>\n                </ul>               \n            </div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-effect-attribute">\n          <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">动画时长</div>\n          <div class="bfui-sceneeditor-effect-value">\n            <input ref="time" class="input-field" type="number"></input>\n            <i class="icon icon-left">ms</i>\n          </div>\n        </div>\n        <div bf-show=true class="bfui-sceneeditor-effect-attribute">\n          <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">动画类型</div>\n          <Select ref="curveType" class="bfui-sceneeditor-select margin-top5"></Select>\n        </div>\n        <div bf-show=true class="bfui-sceneeditor-effect-attribute">\n          <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">循环播放</div>\n          <label class="switch">\n            <input ref="curveLoop" type="checkbox"></input>\n            <span class="slider"></span>\n          </label>\n        </div>\n      </div>\n      <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-placeholder"></div>\n      <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-fixed-bottom">\n        <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n        <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n      </div>\n    </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.trigger(o.EditorEvent.CurveEffectHide),t.extMang&&t.extMang.extraCurveId&&t.extMang.removeById(t.extMang.extraCurveId),o.eventBus.trigger(o.EditorEvent.CurveAnimationDestroy),t.data.isEdit&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)}));var n=this.renderItemMap.styleList,c=this.renderItemMap.styleValue,d=this.renderItemMap.styleValueImg,u=this.renderItemMap.styleDropdown,f=function(e){e=e||window.event;t.data.listshow=!0,n.attribute("style","display:flex;flex-direction:column; margin-top:150px"),d.attribute("src")&&d.attribute("style","height: 25px;width: 180px;margin-bottom: 5px; margin-top:172px;"),u.hasClass("gld-bf-arrow-down-sm")?(u.removeClass("gld-bf-arrow-down-sm"),u.addClass("gld-bf-arrow-up-sm")):(u.removeClass("gld-bf-arrow-up-sm"),u.addClass("gld-bf-arrow-down-sm"),t.data.listshow=!1,n.css("display","none"),d.attribute("style","height: 25px;width: 180px;margin-bottom: 5px;")),e.stopPropagation()};d.attribute("src","https://static.bimface.com/attach/38d961b9abd04f50b1b030e180840522_yellow.png"),d.attribute("style","height: 25px;width: 180px;margin-bottom: 5px;"),u.on("click",(function(e){f(e)})),c.on("click",(function(e){f(e)}));var p=this.renderItemMap.styleOption1;p.attribute("src","https://static.bimface.com/attach/38d961b9abd04f50b1b030e180840522_yellow.png"),p.attribute("style","height:30px"),this.renderItemMap.styleLi1.on("click",(function(){d.attribute("src","https://static.bimface.com/attach/38d961b9abd04f50b1b030e180840522_yellow.png"),d.attribute("style","height: 25px;width: 180px;margin-bottom: 5px;"),t.effect&&t.effect.curves[0].setMap({src:"https://static.bimface.com/attach/c3c5766a96f6459bb1951128597c3942_yellow.png",enableColorOverride:!1}),t.data.params.style=1,u.removeClass("gld-bf-arrow-up-sm"),u.addClass("gld-bf-arrow-down-sm")}));var h=this.renderItemMap.styleOption2;h.attribute("src","https://static.bimface.com/attach/8e51d49ce4144c7db3ba5d51efabd139_purple.png"),h.attribute("style","height:30px"),this.renderItemMap.styleLi2.on("click",(function(){d.attribute("src","https://static.bimface.com/attach/8e51d49ce4144c7db3ba5d51efabd139_purple.png"),d.attribute("style","height: 25px;width: 180px;margin-bottom: 5px;"),t.effect&&t.effect.curves[0].setMap({src:"https://static.bimface.com/attach/9de63e377a1b4a0e86f2ef86887db3d6_purple.png",enableColorOverride:!1}),t.data.params.style=2,u.removeClass("gld-bf-arrow-up-sm"),u.addClass("gld-bf-arrow-down-sm")}));var m=this.renderItemMap.styleOption3;m.attribute("src","https://static.bimface.com/attach/698a5d8dca964d6ca09185f429cc30ec_green.png"),m.attribute("style","height:30px"),this.renderItemMap.styleLi3.on("click",(function(){d.attribute("src","https://static.bimface.com/attach/698a5d8dca964d6ca09185f429cc30ec_green.png"),d.attribute("style","height: 25px;width: 180px;margin-bottom: 5px;"),t.effect&&t.effect.curves[0].setMap({src:"https://static.bimface.com/attach/730ead5bb4b44b6f96936923cec755a9_green.png",enableColorOverride:!1}),t.data.params.style=3,u.removeClass("gld-bf-arrow-up-sm"),u.addClass("gld-bf-arrow-down-sm")}));var v=this.renderItemMap.styleOption4;v.attribute("src","https://static.bimface.com/attach/23e95ed1accf432e811e3817f6dfd305_orange.png"),v.attribute("style","height:30px"),this.renderItemMap.styleLi4.on("click",(function(){d.attribute("src","https://static.bimface.com/attach/23e95ed1accf432e811e3817f6dfd305_orange.png"),d.attribute("style","height: 25px;width: 180px;margin-bottom: 5px;"),t.effect&&t.effect.curves[0].setMap({src:"https://static.bimface.com/attach/16ace53fa9d04d43a27db53f418376fb_red.png",enableColorOverride:!1}),t.data.params.style=4,u.removeClass("gld-bf-arrow-up-sm"),u.addClass("gld-bf-arrow-down-sm")}));var g=this;document.onclick=function(e){g.data.listshow=!1,d.attribute("style","height: 25px;width: 180px;margin-bottom: 5px;padding-top:0"),n.attribute("style","display:none"),u.removeClass("gld-bf-arrow-up-sm"),u.addClass("gld-bf-arrow-down-sm")};var b=this.renderItemMap.curveName;b.attribute("value","动线-"+this.count),b.attribute("autocomplete","off"),b.on("change",(function(e){t.data.name=e.target.value,t.data.isEdit&&o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e.target.value)}));var y=this.renderItemMap.curveId;y.attribute("type","text"),y.attribute("disabled","disabled"),y.attribute("value",this.data.id);var E=this.renderItemMap.time;E.attribute("value",1500),E.attribute("type","number"),E.on("change",(function(e){t.data.params.time=e.target.value,t.effect&&t.effect.setTime(+e.target.value)}));var C=this.renderItemMap.curveLoop;C.attribute("type","checkbox"),C.attribute("checked",!0),C.on("change",(function(e){t.data.params.loop=e.target.checked,t.effect&&t.effect.setLoop(e.target.checked)}));var w=this.renderItemMap.curveType;w.setValues(l.curveTypeOptions),this.setSelectTheme(w),w.onChange((function(e){t.data.params.curveType=e.value,t.effect&&t.effect.setType(e.value)})),this.renderItemMap.backButton.onClick((function(){o.eventBus.fireEvent(o.EditorEvent.CurveEffectHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow),t.effect&&(t.effect.curves.length>0&&t.effect.curves[0].hide(),t.effect=null),o.eventBus.fireEvent(o.EditorEvent.CurveAnimationDestroy)})),this.renderItemMap.saveButton.onClick((function(){t.extMang&&t.extMang.extraCurveId&&t.extMang.removeById(t.extMang.extraCurveId),o.eventBus.fireEvent(o.EditorEvent.CurveAnimationDestroy);var e="curve_"+t.count;o.eventBus.fireEvent(o.EditorEvent.CurveInit,t.data,t.app,e),t.count+=1,setTimeout((function(){b.attribute("value","动线-"+t.count),t.data.name="动线-"+t.count}),200)})),o.eventBus.on(o.EditorEvent.CurveEffectShow,(function(e,t,n){if(e&&e.isEdit)g.data.isEdit=e.isEdit,g.data.editTransformExit=!1,g.effect=e.effect,g.data.id=e.id,s.editCurveTransformTool(e.effect.getCurves()[0].getParams().points,e.effect,!0,e),g.renderItemMap.curveName.attribute("value",e.name),g.renderItemMap.curveId.attribute("value",e.id),g.renderItemMap.curveId.attribute("title",e.id),g.renderItemMap.styleValueImg.attribute("src",s.switchStyle(null,e.effect.getCurves()[0].getMap().src)),g.renderItemMap.time.attribute("value",+e.effect.time),g.renderItemMap.curveType.setSelectedByValue(e.effect.type),g.renderItemMap.curveLoop.attribute("checked",e.effect.loop),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){g.renderItemMap.curveName.attribute("value")!=e&&g.renderItemMap.curveName.attribute("value",e)}));else if(e||t){if(!e&&t){if(!g.effect){var i=s.initCurvesAnimation(t,g.data),a=i.curve,l=n.loadObject({name:r.default.Web.Lang.Utility.UUID.createUUID(),object:i.path[0]});n.extraCurveId=l,g.extMang=n,g.effect=a,g.effect.play(),o.eventBus.on(o.EditorEvent.TempCurveDestroy,(function(){a&&(a.curves[0].hide(),a=null)}))}g.data.editTransformExit=!0}}else g.data.isEdit=!1,g.data.editTransformExit=!1,g.count=s.getMaxEffectNo("curve_")+1,g.effect=null,g.renderItemMap.curveName.attribute("value","动线-"+g.count),g.data.name="动线-"+g.count,g.renderItemMap.styleValueImg.attribute("src",s.switchStyle(null,1)),g.data.params.style=1,g.renderItemMap.time.attribute("value",1500),g.data.params.time=1500,g.renderItemMap.curveType.setSelectedByValue("flow"),g.data.params.curveType="flow",g.renderItemMap.curveLoop.attribute("checked",!0),g.data.params.loop=!0}))}return e.prototype.getDomElement=function(){return this.domElement},e.prototype.setSelectTheme=function(e){e.content.addClass("bfui-sceneeditor-theme-"+this.app.getConfig().theme),e.setMaxHeight(280)},e}();n.default=c},{"../../../../Common/Glodon":52,"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/options":107,"../../libs/viewerHelper":108}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../libs/viewerHelper"),s=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={name:"",id:""},this.renderItemMap=a.default('\n    <div class="bfui-sceneeditor-panel-header">\n      <label>效果属性</label>\n      <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n    </div>\n    <div class="bfui-sceneeditor-panel-content">\n      <div class="bfui-sceneeditor-editor-effect-content">\n        <div class="bfui-sceneeditor-effect-attribute">\n          <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">文件夹名称</div>\n          <div class="bfui-sceneeditor-effect-value">\n            <input ref="folderName" class="input-field" type="text">\n          </div>\n        </div>\n      </div>\n      <div bf-show="scope.data.isEdit" class="bfui-sceneeditor-effect-attribute">\n        <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">ID</div>\n        <div class="bfui-sceneeditor-effect-value">\n          <input ref="folderId" class="input-field" type="text"></input>\n        </div>\n      </div>\n    </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectFolderHide)}));var n=this.renderItemMap.folderName;n.attribute("type","text"),n.attribute("id","folderName"),n.attribute("value",this.data.name),n.attribute("autocomplete","off");var r=this.renderItemMap.folderId;r.attribute("type","text"),r.attribute("disabled","disabled"),r.attribute("value",this.data.id),o.eventBus.on(o.EditorEvent.EffectFolderShow,(function(e){e&&t.setData(e)}))}return e.prototype.getDomElement=function(){return this.domElement},e.prototype.setData=function(e){var t=this;this.data.name=e.name,this.renderItemMap.folderName.attribute("value",e.name),this.data.id=e.id,this.renderItemMap.folderId.attribute("value",e.id),document.getElementById("folderName").addEventListener("change",(function(e){r.getEffect(t.data.id).name=e.target.value,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e.target.value)})),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.folderName.attribute("value")!=e&&t.renderItemMap.folderName.attribute("value",e)}))},e}();n.default=s},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../libs/viewerHelper"),s=e("../../../../UI/Controls/Tooltip/Tooltip"),l=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={isSkyBoxAdded:!1,isMapAdded:!1,isRainAdded:!1,initPoint:!1},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label>添加效果</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effectlist-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div class="bfui-sceneeditor-effects-content">\n          <div ref="pointEffectCollapse" class="bfui-sceneeditor-effect-header">\n            <div ref="pointEffectCollapseIcon" class="bfui-sceneeditor-effect-extend"></div>\n            <div class="bfui-sceneeditor-effects-name">点特效</div>\n          </div>\n          <div ref="pointContent" class="bfui-sceneeditor-effect-content">\n            <div>\n              <div class="bfui-sceneeditor-effect-name">锚点</div>\n              <div ref="pointEffect" class="bfui-sceneeditor-effect-point-img"></div>\n            </div>\n            <div class="margin-left10">\n              <div class="bfui-sceneeditor-effect-name margin-left0">火焰</div>\n              <div ref="fireEffect" class="bfui-sceneeditor-effect-fire-img"></div>\n            </div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-effects-content">\n          <div ref="lineEffectCollapse" class="bfui-sceneeditor-effect-header">\n            <div ref="lineEffectCollapseIcon" class="bfui-sceneeditor-effect-extend"></div>\n            <div class="bfui-sceneeditor-effects-name">线特效</div>\n          </div>\n          <div ref="lineContent" class="bfui-sceneeditor-effect-content">\n            <div>\n              <div class="bfui-sceneeditor-effect-name">动线</div>\n              <div ref="lineEffect" class="bfui-sceneeditor-effect-line-img"></div>\n            </div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-effects-content">\n          <div ref="dimensionalEffectCollapse" class="bfui-sceneeditor-effect-header">\n            <div ref="dimensionalEffectCollapseIcon" class="bfui-sceneeditor-effect-extend"></div>\n            <div class="bfui-sceneeditor-effects-name">面特效</div>\n          </div>\n          <div ref="dimensionalContent" class="bfui-sceneeditor-effect-content">\n            <div>\n              <div class="bfui-sceneeditor-effect-name">扇形扫描</div>\n              <div ref="sectorEffect" class="bfui-sceneeditor-effect-sector-img"></div>\n            </div>\n            <div class="margin-left10">\n              <div class="bfui-sceneeditor-effect-name margin-left0">环状扫描</div>\n              <div ref="ringScanEffect" class="bfui-sceneeditor-effect-ring-img"></div>\n            </div>\n            <div>\n              <div class="bfui-sceneeditor-effect-name">水面效果</div>\n              <div ref="waterSurfaceEffect" class="margin-left17 bfui-sceneeditor-effect-water-surface-img"></div>\n            </div>\n\n\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-effects-content">\n          <div ref="scenarioEffectCollapse" class="bfui-sceneeditor-effect-header">\n            <div ref="scenarioEffectCollapseIcon" class="bfui-sceneeditor-effect-extend"></div>\n            <div class="bfui-sceneeditor-effects-name">场景特效</div>\n          </div>\n          <div ref="scenarioContent" class="bfui-sceneeditor-effect-content">\n            <div class="height-130">\n              <div class="bfui-sceneeditor-effect-name">天空盒</div>\n              <div ref="skyEffect" class="bfui-sceneeditor-effect-sky-img"></div>\n              <span bf-show="scope.data.isSkyBoxAdded" class="bfui-sceneeditor-effect-warning">\n                <i ref="skyboxWarning" class="bfui-sceneeditor-effect-warning-icon bf-warning-md"></i>\n              </span>\n            </div>\n            <div class="margin-left10 height-130">\n              <div class="bfui-sceneeditor-effect-name margin-left0">地图滤镜</div>\n              <div ref="mapEffect" class="bfui-sceneeditor-effect-map-img"></div>\n              <span bf-show="scope.data.isMapAdded" class="bfui-sceneeditor-effect-warning left-0">\n                <i ref="mapStyleWarning" class="bfui-sceneeditor-effect-warning-icon bf-warning-md"></i>\n              </span>\n            </div>\n            <div>\n              <div class="bfui-sceneeditor-effect-name">雨景</div>\n              <div ref="rainEffect" class="bfui-sceneeditor-effect-rain-img"></div>\n              <span bf-show="scope.data.isRainAdded" class="bfui-sceneeditor-effect-warning">\n                <i ref="rainWarning" class="bfui-sceneeditor-effect-warning-icon bf-warning-md"></i>\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide)}));var n=this.renderItemMap.pointEffectCollapse,l=this.renderItemMap.pointEffectCollapseIcon,c=this.renderItemMap.pointContent,d=this.renderItemMap.pointEffect,u=this.renderItemMap.fireEffect;n.on("click",(function(){l.hasClass("bfui-sceneeditor-effect-extend")?(l.removeClass("bfui-sceneeditor-effect-extend"),l.addClass("bfui-sceneeditor-effect-collapse"),c.toggleClass("hide",!0)):(l.removeClass("bfui-sceneeditor-effect-collapse"),l.addClass("bfui-sceneeditor-effect-extend"),c.toggleClass("hide",!1))})),d.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.AnchorGISShow),o.eventBus.trigger(o.EditorEvent.handleStartDrawOrEditEvent),t.data.initPoint=!0,r.onViewerClick((function(e){t.data.initPoint&&(o.eventBus.trigger(o.EditorEvent.AnchorGISHide),o.eventBus.trigger(o.EditorEvent.AnchorPointDestroy),r.listenToGISAnchor(e.worldPosition),r.offViewerClick((function(){})),t.data.initPoint=!1)}))})),u.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.FireEffectGISShow),o.eventBus.trigger(o.EditorEvent.handleStartDrawOrEditEvent),t.data.initFireEffectPoint=!0;var e=function(n){t.data.initFireEffectPoint&&(o.eventBus.trigger(o.EditorEvent.FireEffectGISHide),o.eventBus.trigger(o.EditorEvent.FireEffectShow,n.worldPosition),o.eventBus.trigger(o.EditorEvent.FireEffectDrawExit)),r.offViewerClick(e)};r.onViewerClick(e),o.eventBus.on(o.EditorEvent.FireEffectDrawExit,(function(){t.data.initFireEffectPoint&&(t.data.initFireEffectPoint=!1,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent))}))}));var f=this.renderItemMap.lineEffectCollapse,p=this.renderItemMap.lineEffectCollapseIcon,h=this.renderItemMap.lineContent,m=this.renderItemMap.lineEffect;f.on("click",(function(){p.hasClass("bfui-sceneeditor-effect-extend")?(p.removeClass("bfui-sceneeditor-effect-extend"),p.addClass("bfui-sceneeditor-effect-collapse"),h.toggleClass("hide",!0)):(p.removeClass("bfui-sceneeditor-effect-collapse"),p.addClass("bfui-sceneeditor-effect-extend"),h.toggleClass("hide",!1))})),m.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.CurveAnimationShow),r.listenToGISCurve()}));var v=this.renderItemMap.dimensionalEffectCollapse,g=this.renderItemMap.dimensionalEffectCollapseIcon,b=this.renderItemMap.dimensionalContent,y=this.renderItemMap.sectorEffect,E=this.renderItemMap.ringScanEffect,C=this.renderItemMap.waterSurfaceEffect;v.on("click",(function(){g.hasClass("bfui-sceneeditor-effect-extend")?(g.removeClass("bfui-sceneeditor-effect-extend"),g.addClass("bfui-sceneeditor-effect-collapse"),b.toggleClass("hide",!0)):(g.removeClass("bfui-sceneeditor-effect-collapse"),g.addClass("bfui-sceneeditor-effect-extend"),b.toggleClass("hide",!1))})),y.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.FanScanGISShow),r.drawFanScan((function(e){o.eventBus.trigger(o.EditorEvent.FanScanGISHide),o.eventBus.trigger(o.EditorEvent.FanScanShow,e)}))})),E.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.RingScanGISShow),r.drawRingScan((function(e){o.eventBus.trigger(o.EditorEvent.RingScanGISHide),o.eventBus.trigger(o.EditorEvent.RingScanShow,e)}))})),C.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.WaterEffectGISShow),r.drawWaterEffect((function(e){o.eventBus.trigger(o.EditorEvent.WaterEffectGISHide),o.eventBus.trigger(o.EditorEvent.WaterEffectShow,e)}))}));var w=this.renderItemMap.scenarioEffectCollapse,I=this.renderItemMap.scenarioEffectCollapseIcon,M=this.renderItemMap.scenarioContent,_=this.renderItemMap.skyEffect,S=this.renderItemMap.skyboxWarning,T=this.renderItemMap.mapEffect,B=this.renderItemMap.mapStyleWarning,x=this.renderItemMap.rainEffect,P=this.renderItemMap.rainWarning;new s.default({hostDom:S,placement:"bottom",width:210,content:"场景中仅支持添加一个天空盒效果"}),new s.default({hostDom:B,placement:"bottom",width:230,content:"场景中仅支持添加一个地图滤镜效果"}),new s.default({hostDom:P,placement:"bottom",width:230,content:"场景中仅支持添加一个雨景效果"}),w.on("click",(function(){I.hasClass("bfui-sceneeditor-effect-extend")?(I.removeClass("bfui-sceneeditor-effect-extend"),I.addClass("bfui-sceneeditor-effect-collapse"),M.toggleClass("hide",!0)):(I.removeClass("bfui-sceneeditor-effect-collapse"),I.addClass("bfui-sceneeditor-effect-extend"),M.toggleClass("hide",!1))})),!this.data.isSkyBoxAdded&&_.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.SkyBoxShow,{isEdit:!1})})),!this.data.isMapAdded&&T.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.MapEffectShow)})),!this.data.isRainAdded&&x.on("click",(function(){o.eventBus.trigger(o.EditorEvent.EffectsHide),o.eventBus.trigger(o.EditorEvent.RainEffectShow)})),o.eventBus.on(o.EditorEvent.EffectsShow,(function(){t.data.initPoint=!1,r.getEffect("skybox")?t.data.isSkyBoxAdded=!0:t.data.isSkyBoxAdded=!1,r.getEffect("mapStyle")?t.data.isMapAdded=!0:t.data.isMapAdded=!1,r.getEffect("rainEffect")?t.data.isRainAdded=!0:t.data.isRainAdded=!1})),r.handleEffectEditEvent()}return e.prototype.getDomElement=function(){return this.domElement},e}();n.default=l},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Controls/Tooltip/Tooltip":144,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],85:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Dom"),r=e("../../../../UI/Common/Utils/Render"),s=e("../../../../UI/Controls/Tree/Tree"),l=e("../../../../UI/Controls/Tree/TreeNode"),c=e("../../libs/EventBus"),d=e("../../libs/viewerHelper"),u=e("../../../../UI/UIEvents"),f=e("../../../../UI/Controls/MessageBox/MessageBox"),p=e("../../../../Common/Glodon"),h=function(e){return e.typeName?"effectGroup"===e.typeName:"effectGroup"===e.type},m=function(){function e(e){var t=this;this.app=e,this.domElement=(new o.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-effectmanage"}),this.maxGroupNo=0,this.createNewFolderOrEffect=!1,this.notFireEvents=!1,this.reactive=new Proxy({currentEffectData:null},{set:function(e,n,i){if("currentEffectData"===n){var a;if(e[n])(a=t.getNode(e[n].id))&&(t.currentRename&&t.closeRenameEffect(a),a.setSelectState(!1));if(t.currentRename=null,e[n]=i,t.notFireEvents||(c.eventBus.trigger(c.EditorEvent.HideEffectsPanels),c.eventBus.trigger(c.EditorEvent.EffectTreeNodeSelectionChanged,i)),t.notFireEvents=!1,i&&"root"!==i.id)(a=t.getNode(i.id))&&a.setSelectState(!0)}return!0}}),this.data={renameDisabled:!0,removeDisabled:!0,hideEffectList:!0};this.searchConfig={placeholder:"请输入要搜索的效果",searchHandler:function(e){},selectHandler:function(e){}},this.renderItemMap=r.default('\n      <div class="bfui-sceneeditor-row bfui-sceneeditor-effectmanage-title">\n        <div class="bfui-sceneeditor-marker"></div>\n        <label class="bfui-sceneeditor-label">效果编辑</label>\n        <div class="bfui-sceneeditor-icons">\n          <i class="bfui-sceneeditor-icon bf-add-resource" @click="onAddEffect" title="添加效果"></i>\n          <i class="bfui-sceneeditor-icon bf-new-folder" @click="onAddGroupEffect" title="新建文件夹"></i>\n          <i ref="renameEffect" class="bfui-sceneeditor-icon bf-rename" bf-class="scope.data.renameDisabled ? \'i-disabled\' : \'\'" @click="onRenameEffect" title="重命名效果"></i>\n          <i ref="removeEffect" class="bfui-sceneeditor-icon bf-delete" bf-class="scope.data.removeDisabled ? \'i-disabled\' : \'\'" @click="onRemoveEffect" title="删除效果"></i>\n        </div>\n      </div>\n      <div class="bfui-sceneeditor-divider"></div>\n      <div ref="effectTreeContainer" class="bfui-sceneeditor-tree leftside-tree"></div>\n    ',this.domElement,this),c.eventBus.on(c.EditorEvent.SceneAdded,(function(e){t.viewer=e;var n=d.getEffectTreeData(),i=d.isEffectRootVisible(),a=new s.default({});t.effectTree=a,a.addClass("bfui-tree-effect"),d.playEffects(!0),a.on(u.default.RightClicked,(function(e){e.event,e.node})),t.renderItemMap.effectTreeContainer.append(a.getDomElement());var o=[{id:"root",typeName:"effectGroup",type:"effectGroup",name:"全部效果",children:n,isVisible:i}];t.initNode(a,o),t.maxGroupNo=d.getMaxEffectNo("group_")})),c.eventBus.on(c.EditorEvent.EffectTreeNodeSelectionChanged,(function(e,n){if(void 0===n&&(n=!1),c.eventBus.trigger(c.EditorEvent.AnchorPointDestroy),d.playEffects(),e){if(t.data.renameDisabled=!1,t.data.removeDisabled=!1,!t.createNewFolderOrEffect)switch(e.type){case"effectGroup":c.eventBus.trigger(c.EditorEvent.EffectFolderShow,e);break;case p.default.Bimface.Common.Type.EffectType.PrismPoint:e.isEdit=!0,e.effect.zoomToBoundingBox(t.viewer),c.eventBus.trigger(c.EditorEvent.AnchorEffectShow,e);break;case p.default.Bimface.Common.Type.EffectType.FireEffect:e.isEdit=!0,c.eventBus.trigger(c.EditorEvent.FireEffectShow,e);break;case p.default.Bimface.Common.Type.EffectType.CurveAnimation:e.isEdit=!0,e.effect.zoomToBoundingBox(),c.eventBus.trigger(c.EditorEvent.CurveEffectShow,e);break;case p.default.Bimface.Common.Type.EffectType.FanScan:e.isEdit=!0,e.effect.zoomToBoundingBox(),c.eventBus.trigger(c.EditorEvent.FanScanShow,e);break;case p.default.Bimface.Common.Type.EffectType.RingScan:e.isEdit=!0,e.effect.zoomToBoundingBox(),c.eventBus.trigger(c.EditorEvent.RingScanShow,e);break;case p.default.Bimface.Common.Type.EffectType.WaterEffect:e.isEdit=!0,e.effect.zoomToBoundingBox(),c.eventBus.trigger(c.EditorEvent.WaterEffectShow,e);break;case p.default.Bimface.Common.Type.EffectType.WallEffect:e.isEdit=!0;var i={type:p.default.Bimface.Common.Type.EffectType.WallEffect,data:e};c.eventBus.trigger(c.EditorEvent.EffectShow,i),c.eventBus.trigger(c.EditorEvent.EffectPanelShow,p.default.Bimface.Common.Type.EffectType.WallEffect);break;case p.default.Bimface.Common.Type.EffectType.SkyBoxManager:e.isEdit=!0,c.eventBus.trigger(c.EditorEvent.SkyBoxShow,e);break;case p.default.Bimface.Common.Type.EffectType.MapStyle:e.isEdit=!0,c.eventBus.trigger(c.EditorEvent.MapEffectShow,e);break;case p.default.Bimface.Common.Type.EffectType.Rain:e.isEdit=!0,c.eventBus.trigger(c.EditorEvent.RainEffectShow,e)}t.createNewFolderOrEffect=!1}else t.data.renameDisabled=!0,t.data.removeDisabled=!0,t.effectTree&&n&&(t.effectTree.clearSelection(),t.notFireEvents=!0,t.reactive.currentEffectData=null)})),c.eventBus.on(c.EditorEvent.SaveAnchorEffect,(function(e,n){e&&(n.update(),n.play(),t.initEffect(e,n))})),c.eventBus.on(c.EditorEvent.SaveFireEffect,(function(e){e&&t.initEffect(e,e.effect)})),c.eventBus.on(c.EditorEvent.SaveCurveEffect,(function(e,n){e&&(t.initEffect(e,n),n.play())})),c.eventBus.on(c.EditorEvent.SaveSkyBox,(function(e){e&&t.initEffect(e,null)})),c.eventBus.on(c.EditorEvent.SaveWaterEffect,(function(e){e&&t.initEffect(e,e.effect)})),c.eventBus.on(c.EditorEvent.SaveFanScan,(function(e){e&&t.initEffect(e,e.effect)})),c.eventBus.on(c.EditorEvent.SaveRingScan,(function(e){e&&t.initEffect(e,e.effect)})),c.eventBus.on(c.EditorEvent.SaveMapEffect,(function(e){e&&t.initEffect(e,e.effect)})),c.eventBus.on(c.EditorEvent.SaveRainEffect,(function(e){e&&t.initEffect(e,e.effect)})),c.eventBus.on(c.EditorEvent.SaveEffect,(function(e){e&&e.config&&t.initEffect(e.config,e.config.effect)})),c.eventBus.on(c.EditorEvent.EffectNameChanged,(function(e){t.renameEffectSubmit(e)}))}return e.prototype.createTreeNode=function(e,t){var n,i=this,a=this.getViewer().getEffectManager(),o=t.isVisible;if(e!==this.effectTree&&(n=e.getCheckedState()),"root"!==e.getId())switch(n){case"unchecked":o=!1;break;case"checked":case void 0:o=!0;break;default:o=t.isVisible}else o=t.isVisible;"root"===t.id&&(o=t.isVisible);var r={rootTree:this.effectTree,content:t,id:t.id,type:t.type,hasCheckBox:!0,hasSelection:!0,hasCollapse:["effectGroup","root"].indexOf(t.type)>=0,isExpand:"root"===t.id,isChecked:o,isLoaded:!0,parent:e},s={type:"svg",name:""};switch(t.type){case"all":case"effectGroup":s.name="bf-folder-md";break;case"TileLayer":s.name="bf-map";break;case"TerrainLayer":s.name="bf-terrain";break;default:s.name="bf-file"}var u,f=new l.default(r);return f.initTreeNode(t.name,s),t.children&&this.initNode(f,t.children),f.on("ExpendChanged",(function(e,n){n&&t.children&&i.initNode(e,t.children)})),f.on("CheckedChanged",(function(e,t){var n=e.getId();"root"==n?(t&&a.show({all:!0}),t||(a.hide({all:!0}),c.eventBus.trigger(c.EditorEvent.CurveHide,"all"))):(t&&a.show({ids:[n]}),t||(a.hide({ids:[n]}),c.eventBus.trigger(c.EditorEvent.CurveHide,n)))})),f.on("SelectionChanged",(function(e,t){return i.selectNode(e,t)})),"root"!==t.id&&f.getTreeName().attribute("draggable",!0).on("dragstart",(function(e){var t=e.target;return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",t.innerHTML),e.dataTransfer.setDragImage(t,0,0),i.dragNode=f,!0})).on("dragend",(function(e){return e.dataTransfer.clearData("text"),i.dragNode=null,!1})).on("dragover",(function(e){if(e.preventDefault(),f===i.dragNode)return!0;f.getTreeName().removeClass("bfui-sceneeditor-drag-enter","bfui-sceneeditor-drag-insertup","bfui-sceneeditor-drag-insertdown");var n=f.getTreeName().getPosition(),a="bfui-sceneeditor-drag-enter";return u="enter","effectGroup"===t.type?e.clientY-n.top<5?(a="bfui-sceneeditor-drag-insertup",u="insertup"):n.bottom-e.clientY<5&&(a="bfui-sceneeditor-drag-insertdown",u="insertdown"):e.clientY-n.top<(n.bottom-n.top)/2?(a="bfui-sceneeditor-drag-insertup",u="insertup"):(a="bfui-sceneeditor-drag-insertdown",u="insertdown"),f.getTreeName().addClass(a),!0})).on("dragleave",(function(e){return e.preventDefault(),f===i.dragNode||f.getTreeName().removeClass("bfui-sceneeditor-drag-enter","bfui-sceneeditor-drag-insertup","bfui-sceneeditor-drag-insertdown"),!0})).on("dragend",(function(e){return e.preventDefault(),!0})).on("drop",(function(e){if(e.preventDefault(),f===i.dragNode)return!0;f.getTreeName().removeClass("bfui-sceneeditor-drag-enter","bfui-sceneeditor-drag-insertup","bfui-sceneeditor-drag-insertdown");var t=f,n=0,a=d.getEffectParentId(i.dragNode.getId());if("enter"!==u){t=i.getNode(d.getEffectParentId(f.getId()));var o=d.getEffectData(t.getId()),r=d.getEffectData(f.getId()),s=[];o.children.map((function(e){return s.push(e.id)})),o.children&&(n=s.indexOf(r.id));var l=s.indexOf(i.dragNode.getId());a==t.getId()?(l<n&&"insertup"===u&&n--,l>n&&"insertdown"===u&&n++):"insertdown"===u&&n++}return i.moveNode(i.dragNode,t,n),t.setExpansion(!0),!0})),f},e.prototype.getDomElement=function(){return this.domElement},e.prototype.getNode=function(e){return"root"===e?this.getRootNode():this.getRootNode().getControl({id:e},!0)},e.prototype.getRootNode=function(){return this.effectTree.getControl({id:"root"})},e.prototype.getViewer=function(){return this.viewer},e.prototype.initNode=function(e,t,n){var i=this,a=e.getId();t.map((function(t){var o,r=e.getControl({id:""+t.id});if(r)o=r,r.show();else{var s=d.allEffectsAndFolderInside(a);if(s&&s.indexOf(t.id)<0)return;o=i.createTreeNode(e,t),e===i.effectTree?e.addTreeNode(o,{index:n}):e.addChildNode(o,{index:n})}}))},e.prototype.initEffect=function(e,t){var n;if(0==e.id.indexOf("group_")?(d.addGroup(e),n=e):(d.addEffect(e,t),n=d.getEffect(e.id)),this.reactive.currentEffectData&&"root"!==this.reactive.currentEffectData.id){var i=void 0,a=void 0,o=0,r=void 0;if(a=h(this.reactive.currentEffectData)?this.reactive.currentEffectData.id:this.reactive.currentEffectData.parentId,r=this.getNode(a),i=d.getEffectData(a),!h(this.reactive.currentEffectData)&&i.children){var s=[];i.children.map((function(e){return s.push(e.id)})),o=s.indexOf(this.reactive.currentEffectData.id)}i.children&&(i.priority&&(e.priority=i.priority),e.isNewFolder&&h(this.reactive.currentEffectData)&&i.children.unshift(e),this.reactive.currentEffectData.id.indexOf("group_")>-1||"root"==this.reactive.currentEffectData.id?this.initNode(r,[n],0):(this.initNode(r,[n],o-1),d.moveEffectInsideFolder(n,o-1)),this.getNode(e.id).setCheckState(!0),this.updateCheckState(e.id)),r.setExpansion(!0)}else{var l=this.getRootNode();this.initNode(l,[n],0),this.getNode(e.id).setCheckState(!0),this.updateCheckState(e.id)}},e.prototype.onAddEffect=function(){c.eventBus.trigger(c.EditorEvent.HideEffectsPanels),c.eventBus.trigger(c.EditorEvent.EffectsShow)},e.prototype.onAddGroupEffect=function(){this.maxGroupNo+=1,this.createNewFolderOrEffect=!0;var e={name:"新建文件夹",id:"group_"+this.maxGroupNo,typeName:"effectGroup",type:"effectGroup",isVisible:!0,priority:0,children:[],parentId:this.reactive.currentEffectData?this.reactive.currentEffectData.id.indexOf("group_")>-1?this.reactive.currentEffectData.id:this.reactive.currentEffectData.parentId:"root"};this.initEffect(e,null);var t=this.getNode(e.id);this.selectNode(t,!0),this.renameEffect(!0),t.setExpansion(!0)},e.prototype.updateCheckState=function(e){var t=this.getNode(d.getEffectParentId(e));t&&(t.setParentCheckState(t),d.updateEffectParentVisible(e))},e.prototype.selectNode=function(e,t){return i(this,void 0,void 0,(function(){var n;return a(this,(function(i){return n=d.getEffectData(e.getId()),t&&n&&"root"!==n.id?this.reactive.currentEffectData=n:(n&&"root"===n.id&&e.setSelectState(!1),this.reactive.currentEffectData=null),[2]}))}))},e.prototype.moveNode=function(e,t,n){this.getNode(d.getEffectParentId(e.getId())).getSubNode().removeControl(e),t.addChildNode(e,{index:n}),e.setParentCheckState(void 0),d.moveEffect(e.getId(),t.getId(),n)},e.prototype.renderInputRename=function(e){return r.default('\n      <div ref="element" class="bfui-sceneeditor-rename">\n        <Input ref="input" class="bfui-sceneeditor-input"></input>\n        <i ref="buttonConfirm" class="bfui-sceneeditor-icon bf-confirm"></i>\n        <i ref="buttonCancel" class="bfui-sceneeditor-icon bf-cancel"></i>\n      </div>\n    ',e)},e.prototype.onRenameEffect=function(){this.data.renameDisabled||this.renameEffect()},e.prototype.renameEffect=function(e){var t=this;if(this.reactive.currentEffectData&&!this.currentRename){var n=this.getNode(this.reactive.currentEffectData.id);if(n){n.getTreeName().hide();var i=this.renderInputRename(n.getTreeInfoDom());this.currentRename=i.element,i.input.setValue(d.getEffectName(this.reactive.currentEffectData.id)),i.input.getDomElement().getElement().select();var a=!1,o=function(){if(!a){var e=i.input.getValue()||t.getNodeData(n).name;t.renameEffectSubmit(e,n),a=!0}};i.buttonConfirm.on("mousedown",o),i.buttonCancel.on("mousedown",(function(){t.closeRenameEffect(n),e&&t.removeEffect()})),i.input.getDomElement().on("blur",(function(){requestAnimationFrame((function(){t.reactive.currentEffectData&&t.currentRename&&!a&&o()}))})),i.input.getDomElement().on("keydown",(function(e){"Enter"===e.key&&o()}))}}},e.prototype.renameEffectSubmit=function(e,t){this.createNewFolderOrEffect=!1;var n=t||this.getNode(this.reactive.currentEffectData.id);if(n){var i=n.getTreeName().html(),a=/<svg[\s,\S]+<\/svg>/.exec(i)[0]+e;n.getTreeName().html(a),this.getNodeData(n).name=e,this.closeRenameEffect(n),d.setEffectName(n.getId(),e)}},e.prototype.closeRenameEffect=function(e){if(this.reactive.currentEffectData&&this.currentRename){var t=e||this.getNode(this.reactive.currentEffectData.id);t&&(t.getTreeName().show(),t.getTreeInfoDom().remove(this.currentRename),this.currentRename=null)}},e.prototype.getNodeData=function(e){var t;return"root"===(t=e instanceof l.default?e:this.getNode(e)).getId()?{}:d.getEffectData(t.getId())},e.prototype.onRemoveEffect=function(){var e=this;this.data.removeDisabled||new f.default({parent:this.app.getDomElement(),className:"bfui-sceneeditor-theme-"+this.app.getConfig().theme,content:'<div class="bfui-sceneeditor-messagecontent"><i class="bf-confirm-md"></i><span>确认要删除所选资源吗？</span></div>',confirmHandler:function(){return e.removeEffect()}})},e.prototype.removeEffect=function(){var e=this,t=this.getNode(this.reactive.currentEffectData.id);if(t){!function(t){var n=d.getEffectParentId(t.getId()),i=e.getNode(n);if(i.getSubNode().removeControl(t),i.getSubNode().getControlCount()>0){var a=i.getSubNode().getAllControls()[0],o="unchecked"!=a.checkedState;e.updateCheckState(a.getId()),o?e.getViewer().getEffectManager().show({ids:[a.getId()]}):e.getViewer().getEffectManager().hide({ids:[a.getId()]})}e.reactive.currentEffectData=null,d.removeEffect(t.getId().toString())}(t)}},e}();n.default=m},{"../../../../Common/Glodon":52,"../../../../UI/Common/Utils/Render":110,"../../../../UI/Controls/MessageBox/MessageBox":131,"../../../../UI/Controls/Tree/Tree":145,"../../../../UI/Controls/Tree/TreeNode":146,"../../../../UI/Dom":147,"../../../../UI/UIEvents":149,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../Common/Glodon"),s=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={message:"",mode:"point"},this.renderItemMap=a.default('\n      <div class="effect-info-section">\n        <i class="bfui-sceneeditor-icon bf-information-sm margin-top3 line-height1"></i>\n        <label ref="message" class="notification-message">'+this.data.message+'</label>\n      </div>\n      <div class="effect-cancel-section">\n        <div ref="cancelBtn" class="cancel-button">\n          取消添加\n        </div>\n      </div>\n    ',this.domElement,this);var n=this.renderItemMap.message;this.renderItemMap.cancelBtn.on("click",(function(){o.eventBus.trigger(o.EditorEvent.AnchorGISHide),o.eventBus.trigger(o.EditorEvent.FanScanGISHide),o.eventBus.trigger(o.EditorEvent.RingScanGISHide),o.eventBus.trigger(o.EditorEvent.WaterEffectGISHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow),"point"===t.data.mode&&(o.eventBus.fireEvent(o.EditorEvent.AnchorEffectHide),o.eventBus.fireEvent(o.EditorEvent.AnchorPointDestroy)),"fire"===t.data.mode&&o.eventBus.fireEvent(o.EditorEvent.FireEffectDrawExit),"curve"===t.data.mode&&(o.eventBus.fireEvent(o.EditorEvent.CurveAnimationHide),o.eventBus.fireEvent(o.EditorEvent.CurveAnimationDestroy)),"fanScan"===t.data.mode&&o.eventBus.fireEvent(o.EditorEvent.FanScanDrawExit),"ringScan"===t.data.mode&&o.eventBus.fireEvent(o.EditorEvent.RingScanDrawExit),"waterEffect"===t.data.mode&&o.eventBus.fireEvent(o.EditorEvent.WaterEffectDrawExit),"wallEffect"===t.data.mode&&o.eventBus.fireEvent(o.EditorEvent.EffectCrossHairHide,r.default.Bimface.Common.Type.EffectType.WallEffect)})),o.eventBus.on(o.EditorEvent.EffectCrossHairShow,(function(e){e===r.default.Bimface.Common.Type.EffectType.WallEffect&&(t.data.mode="wallEffect",t.data.message="折线：点击左键添加点，点击右键结束绘制。至少需添加2点。<br/>闭合线：点击左键添加点，最后添加点与第一点重合时自动闭合，结束绘制。至少需添加3点。"),n.attribute("innerHTML",t.data.message)})),o.eventBus.on(o.EditorEvent.AnchorGISShow,(function(){t.data.mode="point",t.data.message="点击左键，确定锚点效果的添加位置",n.attribute("innerHTML",t.data.message)})),o.eventBus.on(o.EditorEvent.FireEffectGISShow,(function(){t.data.mode="fire",t.data.message="点击左键，确定火焰效果的添加位置",n.attribute("innerHTML",t.data.message)})),o.eventBus.on(o.EditorEvent.CurveAnimationShow,(function(){t.data.mode="curve",t.data.message="点击左键添加点，点击右键结束绘制。至少需添加2点。",n.attribute("innerHTML",t.data.message)})),o.eventBus.on(o.EditorEvent.FanScanGISShow,(function(){t.data.mode="fanScan",t.data.message="点击左键添加点，添加2点后自动结束绘制。<br/>第一点为圆心位置，两点之间距离为圆的半径。",n.attribute("innerHTML",t.data.message)})),o.eventBus.on(o.EditorEvent.RingScanGISShow,(function(){t.data.mode="ringScan",t.data.message="点击左键添加点，添加2点后自动结束绘制。<br/>第一点为圆心位置，两点之间距离为圆的半径。",n.attribute("innerHTML",t.data.message)})),o.eventBus.on(o.EditorEvent.WaterEffectGISShow,(function(){t.data.mode="waterEffect",t.data.message="点击左键添加点，点击右键结束绘制。至少需添加3点。",n.attribute("innerHTML",t.data.message)}))}return e.prototype.getDomElement=function(){return this.domElement},e}();n.default=s},{"../../../../Common/Glodon":52,"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../libs/viewerHelper"),s=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.count=1,this.effect=null,this.effectObj=null,this.data={op:"add",name:"扇形扫描-",params:{originPosition:{},fanAngle:0,radius:0,color:"",colorOpacity:"",backgroundColor:"",backgroundColorOpacity:""}},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="scope.data.op === \'add\'">添加效果</label>\n        <label bf-show="scope.data.op !== \'add\'">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effects-name"><span class="icon"></span><span>面特效</span></div>\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name">扇形扫描</div>\n            <div class="bfui-sceneeditor-effect-sector-img"></div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-header" bf-show="scope.data.op === \'add\'">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">扇形扫描</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content" bf-class="scope.data.op === \'add\' ? \'bfui-sceneeditor-scroll\' : \'\'">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <Input ref="fanScanName" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <Input ref="waterId" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">圆心坐标</div>\n            <Input ref="originPosition" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">扫描半径</div>\n            <div class="bufu-sceneeditor-effect-attribute-input">\n              <Input ref="radius" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n              <div class="unit">m</div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">动画时长</div>\n            <div class="bufu-sceneeditor-effect-attribute-input">\n              <Input ref="duration" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n              <div class="unit">ms</div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">扇形角度</div>\n            <div class="displayflex margin-top5">\n              <Slider ref="fanAngle" class="bfui-effect-slider"></Slider>\n              <div class="bfui-input-container">\n                <Input ref="fanAngleInput" class="bfui-sceneeditor-input"></Input>\n                <span>°</span>\n              </div>\n            </div> \n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">覆盖模型</div>\n            <Switch ref="enableComponentsScanned" class="margin-top5"></Switch>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">效果颜色</div>\n            <div class="color-opacity-select margin-top6">\n              <div class="color-container">\n                <ColorPicker ref="effectColor"></ColorPicker>\n                <div ref="effectColorArrow" class="arrow"></div>\n              </div>\n              <Slider ref="effectColorOpacity"></Slider>\n              <div class="input-container">\n                <Input ref="effectColorInput" class="bfui-sceneeditor-input"></Input>\n                <span>%</span>\n              </div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">背景颜色</div>\n            <div class="color-opacity-select margin-top6">\n              <div class="color-container">\n                <ColorPicker ref="backgroundColor"></ColorPicker>\n                <div ref="backgroundColorArrow" class="arrow"></div>\n              </div>\n              <Slider ref="backgroundColorOpacity"></Slider>\n              <div class="input-container">\n                <Input ref="backgroundColorInput" class="bfui-sceneeditor-input"></Input>\n                <span>%</span>\n              </div>\n            </div>\n          </div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-placeholder"></div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-fixed-bottom">\n            <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n            <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.fireEvent(o.EditorEvent.FanScanDestroy),o.eventBus.trigger(o.EditorEvent.FanScanHide),"edit"===t.data.op&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)})),this.renderItemMap.fanScanName.onChange((function(e){t.data.name=e,"edit"===t.data.op&&(t.effectObj.name=e,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e))})),this.renderItemMap.originPosition.onChange((function(e){var n=e.split(",");t.data.params.originPosition={x:+n[0],y:+n[1],z:+n[2]},r.updateFanScanAttribute(t.effect,"originPosition",t.data.params.originPosition),t.data.editFanScan&&!t.data.isEditing&&t.data.editFanScan.setOriginPosition(t.data.params.originPosition)})),this.renderItemMap.radius.onChange((function(e){t.data.params.radius=e,r.updateFanScanAttribute(t.effect,"radius",+e),t.data.editFanScan&&!t.data.isEditing&&t.data.editFanScan.setRadius(+e)})),this.renderItemMap.duration.onChange((function(e){t.data.params.duration=e,r.updateFanScanAttribute(t.effect,"duration",e)}));var n=this.renderItemMap.effectColor;n.onInput((function(e){t.data.params.color=e,r.updateFanScanAttribute(t.effect,"color",t.data.params)})),this.renderItemMap.effectColorArrow.on("click",(function(){n.click()}));var s=this.renderItemMap.effectColorOpacity,l=this.renderItemMap.effectColorInput;s.setEnableTooltip(!0),s.getTooltipControl().addClass("bfui-tooltip-center"),s.onChange((function(e){t.data.params.colorOpacity=e/100,l.setValue(e),r.updateFanScanAttribute(t.effect,"color",t.data.params)})),l.onChange((function(e){e>100&&(e=100,l.setValue(100)),e<0&&(e=0,l.setValue(0)),t.data.params.colorOpacity=+e/100,s.setValue(+e),r.updateFanScanAttribute(t.effect,"color",t.data.params)}));var c=this.renderItemMap.backgroundColor;c.onInput((function(e){t.data.params.backgroundColor=e,r.updateFanScanAttribute(t.effect,"backgroundColor",t.data.params)})),this.renderItemMap.backgroundColorArrow.on("click",(function(){c.click()}));var d=this.renderItemMap.backgroundColorOpacity,u=this.renderItemMap.backgroundColorInput;d.setEnableTooltip(!0),d.getTooltipControl().addClass("bfui-tooltip-center"),d.onChange((function(e){t.data.params.backgroundColorOpacity=e/100,u.setValue(e),r.updateFanScanAttribute(t.effect,"backgroundColor",t.data.params)})),u.onChange((function(e){e>100&&(e=100,u.setValue(100)),e<0&&(e=0,u.setValue(0)),t.data.params.backgroundColorOpacity=+e/100,d.setValue(+e),r.updateFanScanAttribute(t.effect,"backgroundColor",t.data.params)}));var f=this.renderItemMap.fanAngle,p=this.renderItemMap.fanAngleInput;f.setEnableTooltip(!0),f.getTooltipControl().addClass("bfui-tooltip-center"),f.setValueRange(0,360),f.setTooltipFormater((function(e){return(1*e).toFixed(0)+"°"})),f.onChange((function(e){t.data.params.fanAngle=e*Math.PI/180,r.updateFanScanAttribute(t.effect,"fanAngle",e*Math.PI/180),t.data.editFanScan&&!t.data.isEditing&&t.data.editFanScan.setFanAngle(e*Math.PI/180),p.setValue(e)})),p.onChange((function(e){e=Number(e),(isNaN(e)||e<0)&&(e=0),e>360&&(e=360),t.data.params.fanAngle=e*Math.PI/180,r.updateFanScanAttribute(t.effect,"fanAngle",e*Math.PI/180),t.data.editFanScan&&!t.data.isEditing&&t.data.editFanScan.setFanAngle(e*Math.PI/180),f.setValue(e)})),this.renderItemMap.enableComponentsScanned.onChange((function(e){t.data.params.enableComponentsScanned=e,r.updateFanScanAttribute(t.effect,"enableComponentsScanned",e),t.data.editFanScan&&t.effect&&t.effect.stop(),"edit"===t.data.op&&t.effectObj&&0==t.effectObj.isVisible&&t.effect.hide()})),this.renderItemMap.saveButton.onClick((function(){var e=r.getEffect(t.app._selectedEffectGroup),n={id:"fanScan_"+t.count,typeName:r.getGlodon().Bimface.Common.Type.EffectType.FanScan,type:r.getGlodon().Bimface.Common.Type.EffectType.FanScan,name:t.data.name,effect:t.effect,isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:e?e.parentId:"root"};t.effect.play(),t.effect=null,t.data.editFanScan&&t.data.editFanScan.exit(),o.eventBus.fireEvent(o.EditorEvent.FanScanHide),o.eventBus.fireEvent(o.EditorEvent.SaveFanScan,n)})),this.renderItemMap.backButton.onClick((function(){o.eventBus.fireEvent(o.EditorEvent.FanScanDestroy),o.eventBus.fireEvent(o.EditorEvent.FanScanHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow)})),o.eventBus.on(o.EditorEvent.FanScanShow,(function(e){if(e&&e.isEdit?t.data.op="edit":t.data.op="add","add"===t.data.op)t.count=r.getMaxEffectNo("fanScan_")+1,t.data.name="扇形扫描-"+t.count,t.data.params={originPosition:e.originPosition,fanAngle:e.fanAngle,enableComponentsScanned:!1,radius:e.radius,duration:2e3,color:"#11DAB7",colorOpacity:.8,backgroundColor:"#000000",backgroundColorOpacity:.05},t.data.params.originPosition.z+=.1,t.effect=r.initFanScan(t.data.params);else{t.effectObj=e,t.effect=e.effect,t.effect.zoomToBoundingBox();var n=t.effect.getParams();t.data.name=e.name,t.data.params={originPosition:n.originPosition,fanAngle:n.fanAngle,enableComponentsScanned:n.enableComponentsScanned,radius:n.radius,duration:n.duration,color:t.objectColorToString(n.color),colorOpacity:n.color.alpha,backgroundColor:t.objectColorToString(n.backgroundColor),backgroundColorOpacity:n.backgroundColor.alpha},t.renderItemMap.waterId.setValue(e.id),t.renderItemMap.waterId.enabled(!1),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.fanScanName.getValue()!=e&&t.renderItemMap.fanScanName.setValue(e)}))}t.data.params.originPosition.x=+t.data.params.originPosition.x.toFixed(2),t.data.params.originPosition.y=+t.data.params.originPosition.y.toFixed(2),t.data.params.originPosition.z=+t.data.params.originPosition.z.toFixed(2),t.data.params.radius=+t.data.params.radius.toFixed(2),t.effect.stop(),o.eventBus.trigger(o.EditorEvent.handleStartDrawOrEditEvent),t.data.editFanScan=r.editFanScan({fanAngle:t.data.params.fanAngle,originPosition:t.data.params.originPosition,radius:t.data.params.radius},(function(e){t.data.isEditing=!0,e.originPosition.x=+e.originPosition.x.toFixed(2),e.originPosition.y=+e.originPosition.y.toFixed(2),e.originPosition.z=+e.originPosition.z.toFixed(2),e.radius=+e.radius.toFixed(2),t.data.params.originPosition=e.originPosition,t.data.params.radius=e.radius,t.data.params.fanAngle=e.fanAngle,t.setItemValue("fanAngle",Math.round(180*t.data.params.fanAngle/Math.PI)),t.setItemValue("fanAngleInput",Math.round(180*t.data.params.fanAngle/Math.PI)),t.setItemValue("originPosition",t.data.params.originPosition.x+","+t.data.params.originPosition.y+","+t.data.params.originPosition.z),t.setItemValue("radius",t.data.params.radius),r.updateFanScanAttribute(t.effect,"fanAngle",t.data.params.fanAngle),r.updateFanScanAttribute(t.effect,"originPosition",t.data.params.originPosition),r.updateFanScanAttribute(t.effect,"radius",t.data.params.radius)}),(function(){t.data.isEditing=!1}),(function(){t.effect.play(),t.data.editFanScan=null,t.data.isEditing=!1,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)})),"edit"===t.data.op&&(t.setItemValue("originPosition",t.data.params.originPosition.x+","+t.data.params.originPosition.y+","+t.data.params.originPosition.z),t.setItemValue("radius",t.data.params.radius)),t.setItemValue("fanScanName",t.data.name),t.setItemValue("effectColor",t.data.params.color),t.setItemValue("effectColorOpacity",100*t.data.params.colorOpacity),t.setItemValue("effectColorInput",100*t.data.params.colorOpacity),t.setItemValue("backgroundColor",t.data.params.backgroundColor),t.setItemValue("backgroundColorOpacity",100*t.data.params.backgroundColorOpacity),t.setItemValue("backgroundColorInput",100*t.data.params.backgroundColorOpacity),t.setItemValue("fanAngle",Math.round(180*t.data.params.fanAngle/Math.PI)),t.setItemValue("enableComponentsScanned",t.data.params.enableComponentsScanned),t.setItemValue("fanAngleInput",Math.round(180*t.data.params.fanAngle/Math.PI)),t.setItemValue("duration",t.data.params.duration)})),o.eventBus.on(o.EditorEvent.FanScanDestroy,(function(){t.data.editFanScan&&(t.effect&&t.effect.play&&t.effect.play(),t.data.editFanScan.exit(),t.data.editFanScan=null,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)),"add"===t.data.op&&t.effect&&t.effect.destroy(),t.effect=null}))}return e.prototype.objectColorToString=function(e){return"#"+(2===e.red.toString(16).length?e.red.toString(16):"0"+e.red.toString(16))+(2===e.green.toString(16).length?e.green.toString(16):"0"+e.green.toString(16))+(2===e.blue.toString(16).length?e.blue.toString(16):"0"+e.blue.toString(16))},e.prototype.setItemValue=function(e,t){void 0!==t&&this.renderItemMap[e].setValue(t)},e.prototype.getDomElement=function(){return this.domElement},e}();n.default=s},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../UI/UIMap"),s=e("../../libs/options"),l=e("../../libs/viewerHelper"),c=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.effect=null,this.effectObj=null,this.count=1,this.data={op:"add",editPolygonTool:null,name:"火焰-",params:{position:{},scale:10,fireType:"",color:"",smokeConcentration:""}},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="scope.data.op === \'add\'">添加效果</label>\n        <label bf-show="scope.data.op !== \'add\'">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effects-name"><span class="icon"></span><span>点特效</span></div>\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name">火焰</div>\n            <div class="bfui-sceneeditor-effect-fire-img"></div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-header" bf-show="scope.data.op === \'add\'">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">火焰</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content" bf-class="scope.data.op === \'add\' ? \'bfui-sceneeditor-scroll\' : \'\'">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <Input ref="fireName" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <Input ref="fireId" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">世界坐标</div>\n            <Input ref="position" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">火焰类型</div>\n            <Select ref="fireType" class="bfui-sceneeditor-select margin-top5"></Select>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">烟雾浓度</div>\n            <div class="displayflex margin-top5">\n              <Slider ref="smokeConcentration" class="bfui-effect-slider"></Slider>\n              <div class="bfui-input-container">\n                <Input ref="smokeConcentrationInput" class="bfui-sceneeditor-input bfui-no-padding"></Input>\n              </div>\n            </div> \n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">烟雾颜色</div>\n            <div class="color-opacity-select margin-top6">\n              <div class="color-container">\n                <ColorPicker ref="smokeColor"></ColorPicker>\n                <div ref="smokeColorArrow" class="arrow"></div>\n              </div>\n            </div>\n          </div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-placeholder"></div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-fixed-bottom">\n            <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n            <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.fireEvent(o.EditorEvent.FireEffectDestroy),o.eventBus.trigger(o.EditorEvent.FireEffectHide),"edit"===t.data.op&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)})),this.renderItemMap.fireName.onChange((function(e){t.data.name=e,"edit"===t.data.op&&(t.effectObj.name=e,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e))})),this.renderItemMap.position.onChange((function(e){var n=e.split(",");t.data.params.position={x:+n[0],y:+n[1],z:+n[2]},l.updateFireEffectAttribute(t.effect,"position",t.data.params.position),t.data.editFireTool&&t.data.editFireTool.updateControl()}));var n=this.renderItemMap.fireType;n.setValues(s.fireEffectTypeOptions),this.setSelectTheme(n),n.onChange((function(e){t.data.params.fireType=e.value,l.updateFireEffectAttribute(t.effect,"fireType",t.data.params.fireType)}));var r=this.renderItemMap.smokeConcentration,c=this.renderItemMap.smokeConcentrationInput;r.setEnableTooltip(!0),r.getTooltipControl().addClass("bfui-tooltip-center"),r.setValueRange(0,10),r.setTooltipFormater((function(e){return""+e/10})),r.onChange((function(e){t.data.params.smokeConcentration=e/10,l.updateFireEffectAttribute(t.effect,"smokeConcentration",t.data.params.smokeConcentration),c.setValue(e/10)})),c.onChange((function(e){e=Number(e),(isNaN(e)||e<0)&&(e=0),e>1&&(e=1),t.data.params.smokeConcentration=e,l.updateFireEffectAttribute(t.effect,"smokeConcentration",t.data.params.smokeConcentration),r.setValue(10*e)}));var d=this.renderItemMap.smokeColor;d.onInput((function(e){t.data.params.color.smokeColor=t.stringToRgb(e),l.updateFireEffectAttribute(t.effect,"color",t.data.params.color)})),this.renderItemMap.smokeColorArrow.on("click",(function(){d.click()})),this.renderItemMap.saveButton.onClick((function(){var e=l.getEffect(t.app._selectedEffectGroup),n={id:"fireEffect_"+t.count,typeName:l.getGlodon().Bimface.Common.Type.EffectType.FireEffect,type:l.getGlodon().Bimface.Common.Type.EffectType.FireEffect,name:t.data.name,effect:t.effect,isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:e?e.parentId:"root"};t.data.editFireTool&&t.data.editFireTool.exit(),t.effect=null,o.eventBus.fireEvent(o.EditorEvent.FireEffectHide),o.eventBus.fireEvent(o.EditorEvent.SaveFireEffect,n)})),this.renderItemMap.backButton.onClick((function(){o.eventBus.fireEvent(o.EditorEvent.FireEffectDestroy),o.eventBus.fireEvent(o.EditorEvent.FireEffectHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow)})),o.eventBus.on(o.EditorEvent.FireEffectShow,(function(e){if(e&&e.isEdit?t.data.op="edit":t.data.op="add","add"===t.data.op)t.count=l.getMaxEffectNo("fireEffect_")+1,t.data.name="火焰-"+t.count,t.data.params={position:e,scale:10,fireType:"Fire",color:{smokeColor:{r:0,g:0,b:0}},smokeConcentration:.6},t.effect=l.initFireEffect(t.data.params);else{t.effectObj=e,t.effect=e.effect,t.effect.zoomToBoundingBox();var n=t.effect.getParams();t.data.name=e.name,t.data.params={position:n.position,scale:n.scale,fireType:n.fireType,color:n.color,smokeConcentration:n.smokeConcentration},t.data.params.position.x=+t.data.params.position.x.toFixed(2),t.data.params.position.y=+t.data.params.position.y.toFixed(2),t.data.params.position.z=+t.data.params.position.z.toFixed(2),t.renderItemMap.fireId.setValue(e.id),t.renderItemMap.fireId.enabled(!1),t.setItemValue("position",n.position.x+","+n.position.y+","+n.position.z),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.fireName.getValue()!=e&&t.renderItemMap.fireName.setValue(e)}))}t.data.editFireTool=l.editFireEffect(t.effect,(function(){if("edit"===t.data.op){var e=t.effect.getPosition();t.setItemValue("position",e.x.toFixed(2)+","+e.y.toFixed(2)+","+e.z.toFixed(2))}}),(function(){t.data.editFireTool=null,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)})),t.setItemValue("fireName",t.data.name),t.setItemValue("fireType",t.data.params.fireType),t.setItemValue("smokeConcentration",10*t.data.params.smokeConcentration),t.setItemValue("smokeConcentrationInput",t.data.params.smokeConcentration),t.setItemValue("smokeColor",t.rgbToString(t.data.params.color.smokeColor))})),o.eventBus.on(o.EditorEvent.FireEffectDestroy,(function(){t.data.editFireTool&&(t.effect&&("add"===t.data.op||"edit"===t.data.op&&t.effectObj.isVisible)&&t.effect.show(),t.data.editFireTool.exit(),t.data.editFireTool=null,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)),"add"===t.data.op&&t.effect&&t.effect.destroy(),t.effect=null}))}return e.prototype.rgbToString=function(e){return"#"+(2===e.r.toString(16).length?e.r.toString(16):"0"+e.r.toString(16))+(2===e.g.toString(16).length?e.g.toString(16):"0"+e.g.toString(16))+(2===e.b.toString(16).length?e.b.toString(16):"0"+e.b.toString(16))},e.prototype.stringToRgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}},e.prototype.setItemValue=function(e,t){if(void 0!==t){var n=this.renderItemMap[e];n instanceof r.Select?n.setSelectedByValue(t):n.setValue(t)}},e.prototype.setSelectTheme=function(e){e.content.addClass("bfui-sceneeditor-theme-"+this.app.getConfig().theme),e.setMaxHeight(280)},e.prototype.getDomElement=function(){return this.domElement},e}();n.default=c},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../../../UI/UIMap":150,"../../libs/EventBus":106,"../../libs/options":107,"../../libs/viewerHelper":108}],89:[function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Common/Utils/Render"),r=e("../../../../UI/Dom"),s=e("../../libs/EventBus"),l=e("../../libs/viewerHelper"),c=e("../../../../UI/Controls/MessageBox/MessageBox"),d=function(){function e(e){var t=this;this.inited=!1,this.tempHidedLayerIds=[],this.formerTransformation=null,this.app=e;var n=this.domElement=(new r.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-adjust"});this.data={currentStep:0,modelAdjustPoints:[],mapAdjustPoints:[]},this.renderItemMap=o.default('\n      <div ref="leftMask" class="adjustment-mask" @click="onLeftMaskClick"></div>\n      <div ref="step1" class="adjustment-step-panel" bf-show="scope.data.currentStep === 1">\n        <div class="adjustment-step-panel-header">\n          <span class="adjustment-step-panel-header-step" >步骤一</span>\n          <span class="adjustment-step-panel-header-text">选择模型校准点：请依次在模型上选择2个校准点</span>\n        </div>\n        <div class="adjustment-step-panel-footer">\n          <Button class="bfui-sceneeditor-button button-undo button-disabled">上一步</Button>\n          <Button class="bfui-sceneeditor-button button-confirm" ref="step1Confirm" bf-class="scope.data.modelAdjustPoints.length === 2 ? \'\' : \'button-disabled\'" @click="onStartStep2">确认选点</Button>\n          <Button class="bfui-sceneeditor-button button-cancel" ref="step1Cancel" @click="cancel">取消校准</Button>\n        </div>\n      </div>\n      <div ref="step2" class="adjustment-step-panel" bf-show="scope.data.currentStep === 2">\n        <div class="adjustment-step-panel-header">\n          <span class="adjustment-step-panel-header-step" >步骤二</span>\n          <span class="adjustment-step-panel-header-text">选择地图校准点：请依次在地图上选择2个校准点</span>\n        </div>\n        <div class="adjustment-step-panel-footer">\n          <Button class="bfui-sceneeditor-button button-undo" @click="onReturnStep1">上一步</Button>\n          <Button class="bfui-sceneeditor-button button-confirm" ref="step2Confirm" bf-class="scope.data.mapAdjustPoints.length === 2 ? \'\' : \'button-disabled\'" @click="onStartStep3">确认选点</Button>\n          <Button class="bfui-sceneeditor-button button-cancel" ref="step2Cancel" @click="cancel">取消校准</Button>\n        </div>\n      </div>\n      <div ref="step3" class="adjustment-step-panel" bf-show="scope.data.currentStep === 3">\n        <div class="adjustment-step-panel-header">\n          <span class="adjustment-step-panel-header-step" >步骤三</span>\n          <span class="adjustment-step-panel-header-text">确认校准：请确认模型与地图校准后位置</span>\n        </div>\n        <div class="adjustment-step-panel-footer">\n          <Button class="bfui-sceneeditor-button button-undo" @click="onReturnStep2">上一步</Button>\n          <Button class="bfui-sceneeditor-button button-confirm" ref="step3Confirm" @click="confirm">确认校准</Button>\n          <Button class="bfui-sceneeditor-button button-cancel" ref="step3Cancel" @click="cancel">取消校准</Button>\n        </div>\n      </div>\n    ',n,this),s.eventBus.on(s.EditorEvent.LayerAdjustmentShow,(function(e){t.getDomElement().show(),s.eventBus.trigger(s.EditorEvent.PropertiesHide,!0),t.currentLayerData=e,t.startStep1()})),s.eventBus.on(s.EditorEvent.LayerAdjustmentHide,(function(){t.getDomElement().hide(),s.eventBus.trigger(s.EditorEvent.PropertiesShow,t.currentLayerData)})),window.adjustment=this}return e.prototype.getDomElement=function(){return this.domElement},e.prototype.confirm=function(){this.formerTransformation=null,this.reset(),s.eventBus.trigger(s.EditorEvent.LayerAdjustmentHide),l.zoomToLayer(this.currentLayerData.id,0)},e.prototype.cancel=function(){this.reset(),s.eventBus.trigger(s.EditorEvent.LayerAdjustmentHide),l.zoomToLayer(this.currentLayerData.id,0)},e.prototype.startStep1=function(e){var t=this;void 0===e&&(e=!0),this.inited||(l.onViewerClick((function(e){l.clearSelectedComponents(t.currentLayerData.id);var n=e.worldPosition;if(n)if(1===t.data.currentStep){if(e.layerId!==t.currentLayerData.id)return;t.data.modelAdjustPoints.length>=2&&(t.data.modelAdjustPoints=[],l.clearIcon()),l.addPickIcon(n),t.data.modelAdjustPoints=a(t.data.modelAdjustPoints,[n])}else 2===t.data.currentStep&&(t.data.mapAdjustPoints.length>=2&&(t.data.mapAdjustPoints=[],l.clearIcon()),l.addPickIcon(n),t.data.mapAdjustPoints=a(t.data.mapAdjustPoints,[n]))})),this.inited=!0),this.data.currentStep=1,l.clearIcon(),l.clearDashedLine(),e?this.data.modelAdjustPoints=[]:this.data.modelAdjustPoints.forEach((function(e){l.addPickIcon(e)})),this.data.mapAdjustPoints=[],this.tempHidedLayerIds=l.hideAllModelLayer(),l.setLayerVisible(this.currentLayerData.id,!0),l.closeModelEditor()},e.prototype.startStep2=function(e){void 0===e&&(e=!0),this.data.currentStep=2,l.setLayerVisible(this.currentLayerData.id,!1),l.clearIcon(),l.clearDashedLine(),e?this.data.mapAdjustPoints=[]:this.data.mapAdjustPoints.forEach((function(e){l.addPickIcon(e)})),this.formerTransformation&&(l.setTransformation(this.currentLayerData.id,this.formerTransformation),this.formerTransformation=null)},e.prototype.startStep3=function(){this.data.currentStep=3,l.setLayerVisible(this.currentLayerData.id,!0),l.clearIcon(),l.clearDashedLine();var e=i({},this.data.mapAdjustPoints[0]);e.z=this.data.modelAdjustPoints[0].z,l.addPickIcon(e),l.addDashedLine([e,this.data.modelAdjustPoints[0]]),this.formerTransformation=l.getTransformation(this.currentLayerData.id),l.calculateAdjustTransformation(this.currentLayerData.id,this.data.modelAdjustPoints,this.data.mapAdjustPoints)},e.prototype.reset=function(){l.clearIcon(),l.clearDashedLine(),this.data.currentStep=0,this.formerTransformation&&(l.setTransformation(this.currentLayerData.id,this.formerTransformation),this.formerTransformation=null),l.setLayerVisible(this.currentLayerData.id,!1),l.openModelEditor(this.currentLayerData.id),this.tempHidedLayerIds.forEach((function(e){return l.setLayerVisible(e,!0)})),this.tempHidedLayerIds.length=0,s.eventBus.trigger("finishAdjust",null)},e.prototype.onStartStep2=function(){2===this.data.modelAdjustPoints.length&&this.startStep2()},e.prototype.onStartStep3=function(){2===this.data.mapAdjustPoints.length&&this.startStep3()},e.prototype.onReturnStep1=function(){this.startStep1(!1)},e.prototype.onReturnStep2=function(){this.startStep2(!1)},e.prototype.onLeftMaskClick=function(){var e=this;new c.default({parent:this.app.getDomElement(),className:"bfui-sceneeditor-theme-"+this.app.getConfig().theme,content:'<div class="bfui-sceneeditor-messagecontent"><i class="bf-confirm-md"></i><span>正在进行位置校准，确认要退出校准吗？</span></div>',confirmHandler:function(){e.cancel()}})},e}();n.default=d},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Controls/MessageBox/MessageBox":131,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../../../UI/Controls/Tree/Tree"),r=e("../../../../UI/Controls/Tree/TreeNode"),s=e("../../libs/EventBus"),l=e("../../../../UI/Controls/MessageBox/MessageBox"),c=e("../../../../UI/Controls/Message/Message"),d=e("../../libs/viewerHelper"),u=e("../../../../Common/StatisticsDataManager"),f="bf_interaction.sceneEditor.layerEdits",p=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={currentData:{},flatArr:[],renameDisabled:!0,removeDisabled:!0,currentSelectTreeNode:null},this.reactive=new Proxy({currentEffectData:null},{set:function(e,n,i){if("currentEffectData"===n){var a;if(e[n])(a=t.getNode(e[n].id))&&(t.currentRename&&t.closeRenameEffect(a),a.setSelectState(!1));if(t.currentRename=null,e[n]=i,i&&"root"!==i.id)(a=t.getNode(i.id))&&a.setSelectState(!0)}return!0}}),this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-row bfui-sceneeditor-layer-edit">\n        <div class="bfui-sceneeditor-marker"></div>\n        <label class="bfui-sceneeditor-label">编辑对象</label>\n        <div class="bfui-sceneeditor-icons">\n          <i class="bfui-sceneeditor-icon bf-add-resource" @click="onAddEffect" title="添加"></i>\n          <i ref="renameEffect" class="bfui-sceneeditor-icon bf-rename" bf-class="scope.data.renameDisabled ? \'i-disabled\' : \'\'" @click="onRenameEffect" title="重命名"></i>\n          <i ref="removeEffect" class="bfui-sceneeditor-icon bf-delete" bf-class="scope.data.removeDisabled ? \'i-disabled\' : \'\'" @click="onRemoveEffect" title="删除"></i>\n          <div ref="selectEffectType" class="select-effect-type">\n            <div ref="selectEffectFlat" class="type-flat" bf-show="scope.data.currentData.typeName == \'TerrainLayer\' || scope.data.currentData.typeName == \'TilesetLayer\'">拍平</div>\n            <div ref="selectEffectClipping" class="type-clipping" bf-show="scope.data.currentData.typeName == \'TileLayer\' || scope.data.currentData.typeName == \'TilesetLayer\'">裁切</div>\n            <div ref="selectEffectArrow" class="arrow"></div>\n          </div>\n        </div>\n      </div>\n      <div class="bfui-sceneeditor-line"></div>\n      <div ref="effectTreeContainer" class="bfui-sceneeditor-tree leftside-tree bfui-tree-layer-edit"></div>\n\n      <div ref="flatContainer" class="bfui-effect-edit-container">\n        <div class="bfui-effect-edit-header">\n          <div class="bfui-effect-edit-color"></div>\n          <div class="bfui-effect-edit-name">拍平</div>\n          <div ref="flatBack" class="bfui-effect-edit-backbutton bf-gld-del-sm-svg"></div>\n        </div>\n        <div class="bfui-effect-edit-content">\n          <div class="bfui-effect-edit-attribute">\n            <div class="margin-top8 bfui-effect-edit-attribute-name">名称</div>\n            <Input ref="flatName" class="bfui-sceneeditor-input margin-top5"></Input>\n          </div>\n          <div class="bfui-effect-edit-attribute">\n            <div class="margin-top5 bfui-effect-edit-attribute-name">ID</div>\n            <Input ref="flatId" class="bfui-sceneeditor-input margin-top5"></Input>\n          </div>\n          <div class="bfui-effect-edit-attribute">\n            <div class="margin-top5 bfui-effect-edit-attribute-name">拍平高度</div>\n            <div class="bfui-effect-edit-attribute-input">\n              <Input ref="flatElevation" class="bfui-sceneeditor-input margin-top5"></Input>\n              <div class="unit">m</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div ref="clippingContainer" class="bfui-effect-edit-container">\n        <div class="bfui-effect-edit-header">\n          <div class="bfui-effect-edit-color"></div>\n          <div class="bfui-effect-edit-name">裁切</div>\n          <div ref="clippingBack" class="bfui-effect-edit-backbutton bf-gld-del-sm-svg"></div>\n        </div>\n        <div class="bfui-effect-edit-content">\n          <div class="bfui-effect-edit-attribute">\n            <div class="margin-top8 bfui-effect-edit-attribute-name">名称</div>\n            <Input ref="clippingName" class="bfui-sceneeditor-input margin-top5"></Input>\n          </div>\n          <div class="bfui-effect-edit-attribute">\n            <div class="margin-top5 bfui-effect-edit-attribute-name">ID</div>\n            <Input ref="clippingId" class="bfui-sceneeditor-input margin-top5"></Input>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this);var n=this.renderItemMap.flatContainer,r=this.renderItemMap.clippingContainer,l=this.renderItemMap.selectEffectType;n.hide(),r.hide(),l.hide();var p=this.renderItemMap.selectEffectArrow;p.on("click",(function(){l.hide(),"TileLayer"==t.data.currentData.typeName?s.eventBus.trigger(s.EditorEvent.DrawClippingEffect):s.eventBus.trigger(s.EditorEvent.DrawFlatEffect)}));var h=this.renderItemMap.selectEffectFlat;h.on("click",(function(){l.hide(),s.eventBus.trigger(s.EditorEvent.DrawFlatEffect)}));var m=this.renderItemMap.selectEffectClipping;m.on("click",(function(){l.hide(),s.eventBus.trigger(s.EditorEvent.DrawClippingEffect)})),p.on("mouseover",(function(){"TileLayer"==t.data.currentData.typeName?m.addClass("select-backgound-color"):h.addClass("select-backgound-color")})),p.on("mouseout",(function(){"TileLayer"==t.data.currentData.typeName?m.removeClass("select-backgound-color"):h.removeClass("select-backgound-color")})),h.on("mouseover",(function(){p.addClass("select-backgound-color")})),h.on("mouseout",(function(){p.removeClass("select-backgound-color")})),m.on("mouseover",(function(){"TileLayer"==t.data.currentData.typeName&&p.addClass("select-backgound-color")})),m.on("mouseout",(function(){"TileLayer"==t.data.currentData.typeName&&p.removeClass("select-backgound-color")})),this.renderItemMap.flatBack.on("click",(function(){t.toUncheckState(),t.layerEffectTree.clearSelection()})),this.renderItemMap.flatName.onChange((function(e){t.getEffectData(t.reactive.currentEffectData.id).name=e,t.renameEffectSubmit(e)})),this.renderItemMap.flatId.enabled(!1);var v=this.renderItemMap.flatElevation;v._domElement.attribute("type","number"),v._domElement.attribute("title",""),v.onChange((function(e){var n=t.getEffectData(t.reactive.currentEffectData.id);n.params.elevation=+e,t.flatManager.items[n.effectId].setElevation(+e),t.flatManager.update(),t.data.editSurfaceTool&&!t.data.editSurfaceToolChange&&t.data.editSurfaceTool.setCurrentHeight(+e)})),this.renderItemMap.clippingBack.on("click",(function(){t.toUncheckState(),t.layerEffectTree.clearSelection()})),this.renderItemMap.clippingName.onChange((function(e){t.getEffectData(t.reactive.currentEffectData.id).name=e,t.renameEffectSubmit(e)})),this.renderItemMap.clippingId.enabled(!1),s.eventBus.on(s.EditorEvent.LayerEditInit,(function(e){switch(t.toUncheckState(),t.data.currentData=e,t.data.currentData.layerConfig=t.data.currentData.layerConfig||{},t.data.currentData.layerConfig.edits=t.data.currentData.layerConfig.edits||[],t.layer=d.getLayer(e.id),e.typeName){case"TerrainLayer":t.flatManager=t.layer.getFlatManager();break;case"TileLayer":t.clippingManager=t.layer.getClippingManager();break;case"TilesetLayer":t.flatManager=t.layer.getFlatManager(),t.clippingManager=t.layer.getClippingManager()}var n=t.data.currentData.layerConfig.edits,i=0===n.length||n.some((function(e){return e.isVisible})),a=new o.default({});t.layerEffectTree=a,a.addClass("bfui-tree-effect"),t.renderItemMap.effectTreeContainer.clear(),t.renderItemMap.effectTreeContainer.append(a.getDomElement());var r=[{id:"root",typeName:"effectGroup",type:"effectGroup",name:"全部对象",children:n,isVisible:i}];t.initNode(a,r)})),s.eventBus.on(s.EditorEvent.LayerTreeNodeSelectionChanged,(function(e){t.data.currentSelectTreeNode=e,s.eventBus.trigger(s.EditorEvent.layerEditNotificationHide),s.eventBus.trigger(s.EditorEvent.ExitLayerEffectDrawOrEdit)})),s.eventBus.on(s.EditorEvent.AddResourcePanelShow,(function(){s.eventBus.trigger(s.EditorEvent.layerEditNotificationHide),s.eventBus.trigger(s.EditorEvent.ExitLayerEffectDrawOrEdit),t.data.currentSelectTreeNode&&t.data.currentSelectTreeNode.id==t.data.currentData.id&&s.eventBus.trigger(s.EditorEvent.PropertiesShowPanel)})),s.eventBus.on(s.EditorEvent.ExitLayerEffectDrawOrEdit,(function(){s.eventBus.trigger(s.EditorEvent.DrawFlatEffectExit),s.eventBus.trigger(s.EditorEvent.DrawClippingEffectExit),s.eventBus.trigger(s.EditorEvent.EditFlatEffectExit),s.eventBus.trigger(s.EditorEvent.EditClippingEffectExit)})),s.eventBus.on(s.EditorEvent.PropertiesHide,(function(){s.eventBus.trigger(s.EditorEvent.EditFlatEffectExit),s.eventBus.trigger(s.EditorEvent.EditClippingEffectExit)})),s.eventBus.on(s.EditorEvent.LayerEditTreeUnselect,(function(){t.toUncheckState(),t.layerEffectTree.clearSelection()})),s.eventBus.on(s.EditorEvent.LayerTreeNodeVisibleChanged,(function(e){var t=d.getLayerData(e.id);if("GroupLayer"==t.typeName){var n=function(e){e.children&&e.children.forEach((function(e){if("GroupLayer"===e.typeName)n(e);else{var t=d.getLayer(e.id);t.lastVisible=t.isVisible}}))};n(t)}else{var i=d.getLayer(e.id);i.lastVisible=i.isVisible}})),s.eventBus.on(s.EditorEvent.LayerEditHideLayer,(function(e){var t=e.typeName,n=d.getLayerConfigsObject(),i=function(n){n.children&&n.children.forEach((function(n){if("GroupLayer"===n.typeName)i(n);else{var a=d.getLayer(n.id);a.lastVisible=a.isVisible,"TerrainLayer"==t||"TileLayer"==t?["TileLayer","TerrainLayer"].indexOf(n.typeName)<0&&a.hide():n.id!=e.id&&a.hide()}}))};i(n),d.getEffectManager().hideAllEffect(["SkyBoxManager"])})),s.eventBus.on(s.EditorEvent.RestoreLayerVisible,(function(){var e=d.getLayerConfigsObject(),t=function(e){e.children&&e.children.forEach((function(e){if("GroupLayer"===e.typeName)t(e);else{var n=d.getLayer(e.id);n.lastVisible?n.show():n.hide()}}))};t(e),d.getEffectManager().restoreEffectVisible()})),s.eventBus.on(s.EditorEvent.DrawFlatEffect,(function(){t.excessiveQuantityWarning("flat"),s.eventBus.trigger(s.EditorEvent.PropertiesHide,!0),s.eventBus.trigger(s.EditorEvent.layerEditNotificationShow),s.eventBus.trigger(s.EditorEvent.LayerEditHideLayer,t.layer),d.drawFlatEffect((function(e){s.eventBus.trigger(s.EditorEvent.PropertiesShowPanel),s.eventBus.trigger(s.EditorEvent.layerEditNotificationHide),s.eventBus.trigger(s.EditorEvent.initFlatEffect,e)}))})),s.eventBus.on(s.EditorEvent.initFlatEffect,(function(e){if(t.hasIntersectionPoint(JSON.parse(JSON.stringify(e.points))))new c.default({parent:t.app.app.getDomElement(),className:"bfui-effect-warning",text:"添加失败，请勿交叉选点。",duration:2e3});else{var n={boundary:e.points,elevation:+e.height.toFixed(3),layerId:t.data.currentData.id},i=d.initFlatEffect(n);t.flatManager.addItem(i);var a=t.getMaxEffectNo("flat_")+1,o={id:"flat_"+a,effectId:i.id,type:"flat",name:"拍平-"+a,params:n,isVisible:!0,parentId:"root"};t.data.currentData.layerConfig.edits.unshift(o),t.toUncheckState(),t.reactive.currentEffectData=o,t.data.isAddFlat=!0,t.editFlat(o),t.addEffect(o),t.data.renameDisabled=!1,t.data.removeDisabled=!1,u.SDM.send(f,"addFlat"),u.SDM.send(f,"TilesetLayer"==t.data.currentData.typeName?"addFlat_layerType_tilesetLayer":"addFlat_layerType_terrainLayer")}})),s.eventBus.on(s.EditorEvent.DrawClippingEffect,(function(){t.excessiveQuantityWarning("clipping"),s.eventBus.trigger(s.EditorEvent.PropertiesHide,!0),s.eventBus.trigger(s.EditorEvent.layerEditNotificationShow),s.eventBus.trigger(s.EditorEvent.LayerEditHideLayer,t.layer),d.drawClippingEffect((function(e){s.eventBus.trigger(s.EditorEvent.PropertiesShowPanel),s.eventBus.trigger(s.EditorEvent.layerEditNotificationHide),s.eventBus.trigger(s.EditorEvent.initClippingEffect,e)}))})),s.eventBus.on(s.EditorEvent.initClippingEffect,(function(e){if(t.hasIntersectionPoint(JSON.parse(JSON.stringify(e))))new c.default({parent:t.app.app.getDomElement(),className:"bfui-effect-warning",text:"添加失败，请勿交叉选点。",duration:2e3});else{var n={boundary:e,layerId:t.data.currentData.id},i=d.initClippingEffect(n);t.clippingManager.addItem(i);var a=t.getMaxEffectNo("clipping_")+1,o={id:"clipping_"+a,effectId:i.id,type:"clipping",name:"裁切-"+a,params:n,isVisible:!0,parentId:"root"};t.data.currentData.layerConfig.edits.unshift(o),t.toUncheckState(),t.reactive.currentEffectData=o,t.data.isAddClipping=!0,t.editClipping(o),t.addEffect(o),t.data.renameDisabled=!1,t.data.removeDisabled=!1,u.SDM.send(f,"addClipping"),u.SDM.send(f,"TilesetLayer"==t.data.currentData.typeName?"addClipping_layerType_tilesetLayer":"addClipping_layerType_tileLayer")}}))}return e.prototype.initNode=function(e,t,n){var i=this;t.map((function(t){var a,o=e.getControl({id:""+t.id});o?(a=o,o.show()):(a=i.createTreeNode(e,t),e===i.layerEffectTree?e.addTreeNode(a,{index:n}):e.addChildNode(a,{index:n}))}))},e.prototype.createTreeNode=function(e,t){var n,i=this,a=t.isVisible;if(e!==this.layerEffectTree&&(n=e.getCheckedState()),"root"!==e.getId())switch(n){case"unchecked":a=!1;break;case"checked":case void 0:a=!0;break;default:a=t.isVisible}else a=t.isVisible;"root"===t.id&&(a=t.isVisible);var o={rootTree:this.layerEffectTree,content:t,id:t.id,type:t.type,hasCheckBox:!0,hasSelection:!0,hasCollapse:["effectGroup","root"].indexOf(t.type)>=0,isExpand:"root"===t.id,isChecked:a,isLoaded:!0,parent:e},s={type:"svg",name:""};switch(t.type){case"all":case"effectGroup":s.name="bf-folder-md";break;default:s.name="bf-file"}var l=new r.default(o);return l.initTreeNode(t.name,s),t.children&&this.initNode(l,t.children),l.on("ExpendChanged",(function(e,n){n&&t.children&&i.initNode(e,t.children)})),l.on("CheckedChanged",(function(e,t){var n=e.getId();"root"==n?i.showOrHideAllEffect(t?"show":"hide"):i.showOrHideEffect(n,t?"show":"hide")})),l.on("SelectionChanged",(function(e,t){i.selectNode(e,t)})),l},e.prototype.toUncheckState=function(){this.reactive.currentEffectData=null,this.renderItemMap.flatContainer.hide(),this.renderItemMap.clippingContainer.hide(),this.renderItemMap.selectEffectType.hide(),this.renderItemMap.effectTreeContainer.removeClass("height-152"),this.data.renameDisabled=!0,this.data.removeDisabled=!0,s.eventBus.trigger(s.EditorEvent.EditFlatEffectExit),s.eventBus.trigger(s.EditorEvent.EditClippingEffectExit)},e.prototype.getNode=function(e){return"root"===e?this.getRootNode():this.getRootNode().getControl({id:e},!0)},e.prototype.getRootNode=function(){return this.layerEffectTree.getControl({id:"root"})},e.prototype.renderInputRename=function(e){return a.default('\n      <div ref="element" class="bfui-sceneeditor-rename">\n        <Input ref="input" class="bfui-sceneeditor-input"></input>\n        <i ref="buttonConfirm" class="bfui-sceneeditor-icon bf-confirm"></i>\n        <i ref="buttonCancel" class="bfui-sceneeditor-icon bf-cancel"></i>\n      </div>\n    ',e)},e.prototype.onRenameEffect=function(){this.data.renameDisabled||this.renameEffect()},e.prototype.renameEffect=function(){var e=this;if(this.reactive.currentEffectData&&!this.currentRename){var t=this.getNode(this.reactive.currentEffectData.id);if(t){t.getTreeName().hide();var n=this.renderInputRename(t.getTreeInfoDom());this.currentRename=n.element,n.input.setValue(this.reactive.currentEffectData.name),n.input.getDomElement().getElement().select();var i=!1,a=function(){if(!i){var a=n.input.getValue()||e.getNodeData(t).name;e.renameEffectSubmit(a,t),i=!0}};n.buttonConfirm.on("mousedown",a),n.buttonCancel.on("mousedown",(function(){e.closeRenameEffect(t)})),n.input.getDomElement().on("blur",(function(){requestAnimationFrame((function(){e.reactive.currentEffectData&&e.currentRename&&!i&&a()}))})),n.input.getDomElement().on("keydown",(function(e){"Enter"===e.key&&a()}))}}},e.prototype.renameEffectSubmit=function(e,t){var n=t||this.getNode(this.reactive.currentEffectData.id);if(n){var i=n.getTreeName().html(),a=/<svg[\s,\S]+<\/svg>/.exec(i)[0]+e;n.getTreeName().html(a),this.getNodeData(n).name=e,this.closeRenameEffect(n),this.handleRenameToPanel(this.reactive.currentEffectData.type,e)}},e.prototype.closeRenameEffect=function(e){if(this.reactive.currentEffectData&&this.currentRename){var t=e||this.getNode(this.reactive.currentEffectData.id);t&&(t.getTreeName().show(),t.getTreeInfoDom().remove(this.currentRename),this.currentRename=null)}},e.prototype.getNodeData=function(e){var t;return"root"===(t=e instanceof r.default?e:this.getNode(e)).getId()?{}:this.getEffectData(t.getId())},e.prototype.onRemoveEffect=function(){var e=this;this.data.removeDisabled||new l.default({parent:this.app.app.getDomElement(),className:"bfui-sceneeditor-theme-"+this.app.app.getConfig().theme,content:'<div class="bfui-sceneeditor-messagecontent"><i class="bf-confirm-md"></i><span>确认要删除所选资源吗？</span></div>',confirmHandler:function(){return e.removeEffect()}})},e.prototype.removeEffect=function(){var e=this,t=this.getNode(this.reactive.currentEffectData.id);if(t){var n,i;n=t,(i=e.getNode("root")).getSubNode().removeControl(n),i.getSubNode().getControlCount()>0&&e.updateCheckState("root"),e.toUncheckState(),e.removeEffectById(n.getId().toString())}},e.prototype.selectNode=function(e,t){var n=e.getId();if("root"==n)e.setSelectState(!1),this.toUncheckState();else{var i=null;this.data.currentData.layerConfig.edits.forEach((function(e){e.id!=n||(i=e)})),t?(this.reactive.currentEffectData=i,"flat"==i.type?this.editFlat(i):this.editClipping(i),this.data.renameDisabled=!1,this.data.removeDisabled=!1):this.toUncheckState()}},e.prototype.onAddEffect=function(){var e=this;if(!this.data.selectEffectTypeVisible){this.renderItemMap.selectEffectType.show(),this.data.selectEffectTypeVisible=!0;var t=function(){e.renderItemMap.selectEffectType.hide(),e.data.selectEffectTypeVisible=!1,document.removeEventListener("click",t)};setTimeout((function(){return document.addEventListener("click",t)}),0)}},e.prototype.excessiveQuantityWarning=function(e){this.getLayerEffectTotalNum(e)>=6&&new c.default({parent:this.app.app.getDomElement(),className:"bfui-effect-warning",text:"添加过多编辑对象，可能影响场景加载效果。",duration:2e3})},e.prototype.getLayerEffectTotalNum=function(e){var t=d.getLayerConfigsObject(),n=0,i=function(t){t.children&&t.children.forEach((function(t){["TileLayer","TerrainLayer","TilesetLayer"].indexOf(t.typeName)>=0&&t.layerConfig&&t.layerConfig.edits&&t.layerConfig.edits.length>0&&t.layerConfig.edits.forEach((function(t){t.type===e&&n++})),"GroupLayer"===t.typeName&&i(t)}))};return i(t),n},e.prototype.addEffect=function(e){var t=this.getRootNode();this.initNode(t,[e],0),this.getNode(e.id).setCheckState(!0),this.layerEffectTree.clearSelection(),this.getNode(e.id).setSelectState(!0),this.updateCheckState("root")},e.prototype.updateCheckState=function(e){var t=this.getNode(e);t&&t.setParentCheckState(t)},e.prototype.editFlat=function(e){var t=this;!this.data.isAddFlat&&this.flatManager.items[e.effectId].zoomToBoundingBox(this.flatManager.viewer),s.eventBus.trigger(s.EditorEvent.LayerEditHideLayer,this.layer),this.renderItemMap.flatContainer.show(),this.renderItemMap.effectTreeContainer.addClass("height-152"),this.setItemValue("flatName",e.name),this.setItemValue("flatId",e.id),this.setItemValue("flatElevation",e.params.elevation),this.data.isAddFlat=!1;var n=this.getEffectData(e.id);this.flatManager.hideItems([n.effectId]),this.data.lastFlatPoints=e.params.boundary,this.data.editSurfaceTool=d.editFlatEffect({points:e.params.boundary,maxZ:e.params.elevation},(function(i){if(t.data.editSurfaceToolChange=!1,i.points&&i.points.length>0){if(t.hasIntersectionPoint(JSON.parse(JSON.stringify(i.points))))return t.data.editSurfaceTool.setPoints(t.data.lastFlatPoints),void new c.default({parent:t.app.app.getDomElement(),className:"bfui-effect-warning",text:"不支持出现交叉点位。",duration:2e3});n.params.boundary=i.points,t.data.lastFlatPoints=i.points,t.flatManager.items[e.effectId].setBoundary(i.points)}"number"==typeof i.height&&(i.height=+i.height.toFixed(3),n.params.elevation=i.height,t.setItemValue("flatElevation",i.height),t.flatManager.items[n.effectId].setElevation(i.height)),t.flatManager.update()}),(function(e){t.data.editSurfaceToolChange=!0,"number"==typeof e.height&&(e.height=+e.height.toFixed(3),t.setItemValue("flatElevation",e.height))}),(function(){s.eventBus.trigger(s.EditorEvent.EditFlatEffectExit)})),s.eventBus.once(s.EditorEvent.EditFlatEffectExit,(function(){t.data.editSurfaceTool&&(n.isVisible&&t.flatManager.showItems([n.effectId]),t.data.editSurfaceTool.exit(),t.data.editSurfaceTool=null,s.eventBus.trigger(s.EditorEvent.RestoreLayerVisible),s.eventBus.trigger(s.EditorEvent.handleExitDrawOrEditEvent))}))},e.prototype.editClipping=function(e){var t=this,n=!0;!this.data.isAddClipping&&this.clippingManager.clippingItemMap.get(e.effectId).zoomToBoundingBox(this.clippingManager._viewer,(function(){if(n){var i=d.handleClippingBoundary(e.params.boundary);t.data.editClippingTool&&t.data.editClippingTool.setPoints(i)}})),s.eventBus.trigger(s.EditorEvent.LayerEditHideLayer,this.layer),this.renderItemMap.effectTreeContainer.addClass("height-152"),this.renderItemMap.clippingContainer.show(),this.setItemValue("clippingName",e.name),this.setItemValue("clippingId",e.id);var i=this.getEffectData(e.id);this.data.isAddClipping=!1,this.clippingManager.hideItems([i.effectId]),this.data.lastClippingPoints=e.params.boundary;var a=d.handleClippingBoundary(e.params.boundary);this.data.editClippingTool=d.editClippingEffect({points:a},(function(n){if(t.hasIntersectionPoint(JSON.parse(JSON.stringify(n.points))))return t.data.editClippingTool.setPoints(t.data.lastClippingPoints),void new c.default({parent:t.app.app.getDomElement(),className:"bfui-effect-warning",text:"不支持出现交叉点位。",duration:2e3});t.data.lastClippingPoints=n.points,i.params.boundary=n.points,t.clippingManager.clippingItemMap.get(e.effectId).setBoundary(n.points),t.clippingManager.hideItems([i.effectId])}),(function(){s.eventBus.trigger(s.EditorEvent.EditClippingEffectExit)})),s.eventBus.once(s.EditorEvent.EditClippingEffectExit,(function(){n=!1,t.data.editClippingTool&&(i.isVisible&&t.clippingManager.showItems([i.effectId]),t.data.editClippingTool.destroy(),t.data.editClippingTool=null,s.eventBus.trigger(s.EditorEvent.RestoreLayerVisible),s.eventBus.trigger(s.EditorEvent.handleExitDrawOrEditEvent))}))},e.prototype.handleRenameToPanel=function(e,t){switch(e){case"flat":this.setItemValue("flatName",t);break;case"clipping":this.setItemValue("clippingName",t)}},e.prototype.getEffectData=function(e){var t=null;return this.data.currentData.layerConfig.edits.forEach((function(n){n.id!==e||(t=n)})),t},e.prototype.showOrHideAllEffect=function(e){var t=this;this.data.currentData.layerConfig.edits.forEach((function(n){"flat"==n.type?"show"===e?t.flatManager.showItems([n.effectId]):t.flatManager.hideItems([n.effectId]):"clipping"==n.type&&("show"===e?t.clippingManager.showItems([n.effectId]):t.clippingManager.hideItems([n.effectId])),n.isVisible="show"===e}))},e.prototype.showOrHideEffect=function(e,t){var n=this;this.data.currentData.layerConfig.edits.forEach((function(i){i.id===e&&("flat"==i.type?"show"===t?n.flatManager.showItems([i.effectId]):n.flatManager.hideItems([i.effectId]):"clipping"==i.type&&("show"===t?n.clippingManager.showItems([i.effectId]):n.clippingManager.hideItems([i.effectId])),i.isVisible="show"===t)}))},e.prototype.removeEffectById=function(e){for(var t=0;t<this.data.currentData.layerConfig.edits.length;t++)if(this.data.currentData.layerConfig.edits[t].id==e){"flat"==this.data.currentData.layerConfig.edits[t].type?this.flatManager.removeItems([this.data.currentData.layerConfig.edits[t].effectId]):this.clippingManager.removeItems([this.data.currentData.layerConfig.edits[t].effectId]),this.data.currentData.layerConfig.edits.splice(t,1);break}},e.prototype.hasIntersectionPoint=function(e){var t=!1;e.push(e[0]);for(var n=0;n<e.length-3;n++)for(var i=n+2;i<e.length-1;i++){if(0!=n||i!=e.length-2)if(d.computeSegmentsIntersect(e[n],e[n+1],e[i],e[i+1])){t=!0;break}}return t},e.prototype.getMaxEffectNo=function(e){var t=0;return this.data.currentData.layerConfig.edits.map((function(n){var i=n.id.split(e);if(2==i.length){var a=i[1];t=Math.max(t,Number(a))}})),t},e.prototype.setItemValue=function(e,t){void 0!==t&&this.renderItemMap[e].setValue(t)},e.prototype.getDomElement=function(){return this.domElement},e}();n.default=p},{"../../../../Common/StatisticsDataManager":53,"../../../../UI/Common/Utils/Render":110,"../../../../UI/Controls/Message/Message":130,"../../../../UI/Controls/MessageBox/MessageBox":131,"../../../../UI/Controls/Tree/Tree":145,"../../../../UI/Controls/Tree/TreeNode":146,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={message:"点击左键绘制点，点击右键结束绘制，至少需要添加3个点。",mode:"flat"},this.renderItemMap=a.default('\n      <div class="effect-info-section">\n        <i class="bfui-sceneeditor-icon bf-information-sm margin-top3"></i>\n        <label ref="message" class="notification-message">'+this.data.message+'</label>\n      </div>\n      <div class="effect-cancel-section">\n        <div ref="cancelBtn" class="cancel-button">\n          取消添加\n        </div>\n      </div>\n    ',this.domElement,this);var n=this.renderItemMap.message;this.renderItemMap.cancelBtn.on("click",(function(){o.eventBus.trigger(o.EditorEvent.layerEditNotificationHide),o.eventBus.trigger(o.EditorEvent.PropertiesShowPanel),"flat"===t.data.mode&&o.eventBus.fireEvent(o.EditorEvent.DrawFlatEffectExit),"clipping"===t.data.mode&&o.eventBus.fireEvent(o.EditorEvent.DrawClippingEffectExit)})),o.eventBus.on(o.EditorEvent.DrawFlatEffect,(function(){t.data.mode="flat",t.data.message="点击左键绘制点，点击右键结束绘制，至少需要添加3个点。",n.attribute("innerHTML",t.data.message)})),o.eventBus.on(o.EditorEvent.DrawClippingEffect,(function(){t.data.mode="clipping",t.data.message="点击左键绘制点，点击右键结束绘制，至少需要添加3个点。",n.attribute("innerHTML",t.data.message)}))}return e.prototype.getDomElement=function(){return this.domElement},e}();n.default=r},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106}],92:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../UI/Control"),r=e("../../../../UI/Dom"),s=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-sceneeditor-contextmenu"},type:"ContextMenu"};return n=e.call(this,i)||this,t.forEach((function(e){var t=(new r.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-contextmenu-item"});t.html(e.text),t.on("click",e.clickHandler),n.getDomElement().append(t)})),n.hide(),n}return a(t,e),t.prototype.showAt=function(e,t){var n=this;this.getDomElement().css({left:e+"px",top:t+"px"}),this.show();var i=function(){setTimeout((function(){n.hide(),document.body.removeEventListener("click",i)}),100)};return document.body.addEventListener("click",i),this},t}(o.Control);n.default=s},{"../../../../UI/Control":112,"../../../../UI/Dom":147}],93:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../UI/Dom"),s=e("../../../../UI/Common/Utils/Render"),l=e("../../../../UI/Controls/Tree/Tree"),c=e("../../../../UI/Controls/Tree/TreeNode"),d=e("../../libs/EventBus"),u=e("../../libs/viewerHelper"),f=e("../../libs/options"),p=e("../../../../UI/UIEvents"),h=e("./ContextMenu"),m=e("../../../../UI/Controls/MessageBox/MessageBox"),v=function(e){return"GroupLayer"===e.typeName},g=function(){function e(e){var t=this;this.app=e,this.domElement=(new r.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-layermanage"}),this.maxGroupNo=0,this.reactive=new Proxy({currentLayerData:null},{set:function(e,n,i){if("currentLayerData"===n){var a;if(e[n])(a=t.getNode(e[n].id))&&(t.currentRename&&t.closeRenameLayer(a),a.setSelectState(!1));if(t.currentRename=null,e[n]=i,d.eventBus.trigger(d.EditorEvent.LayerTreeNodeSelectionChanged,i),i&&"root"!==i.id)(a=t.getNode(i.id))&&a.setSelectState(!0)}return!0}}),this.data={renameDisabled:!0,removeDisabled:!0};this.searchConfig={placeholder:"请输入要搜索的图层",searchHandler:function(e){var n=t.getViewer().getLayerManager().getLayerConfigsObject(),i=[],a=function(t,n){n=n||[],t.children&&t.children.forEach((function(t,r){var s=t.id,l=t.name,c=o(n,[{id:s,name:l,index:r}]);(l.toLowerCase().indexOf(e.toLocaleLowerCase())>=0||s.toString()===e.toString())&&i.push({text:l,value:s,path:c}),t.children&&t.children.length>0&&a(t,c)}))};return a(n),i},selectHandler:function(e){for(var n=e.data.path,i=0,a=t.layerTree.getControl({id:"root"});n.length>i;){var o=n[i].index,r=a.getAllControls()[o];r.setExpansion(!0),a=r,i++}switch(t.scrollToNode(a),a.getOptions().type){case"GroupLayer":case"TileLayer":case"TerrainLayer":break;default:a.getSelectState()||a.getTreeName().getElement().click()}}},this.renderItemMap=s.default('\n      <div class="bfui-sceneeditor-row bfui-sceneeditor-layermanage-title">\n        <div class="bfui-sceneeditor-marker"></div>\n        <label class="bfui-sceneeditor-label">场景图层</label>\n        <div class="bfui-sceneeditor-icons">\n          <i class="bfui-sceneeditor-icon bf-add-resource" bf-class="scope.data.isInvalidLayer ? \'i-disabled\' : \'\'" @click="onAddLayer" title="添加资源"></i>\n          <i class="bfui-sceneeditor-icon bf-new-folder" bf-class="scope.data.isInvalidLayer ? \'i-disabled\' : \'\'" @click="onAddGroupLayer" title="新建文件夹"></i>\n          <i ref="renameLayer" class="bfui-sceneeditor-icon bf-rename" bf-class="scope.data.isInvalidLayer || scope.data.renameDisabled ? \'i-disabled\' : \'\'" @click="onRenameLayer" title="重命名图层"></i>\n          <i ref="removeLayer" class="bfui-sceneeditor-icon bf-delete" bf-class="scope.data.removeDisabled ? \'i-disabled\' : \'\'" @click="onRemoveLayer" title="删除图层"></i>\n        </div>\n      </div>\n      <div class="bfui-sceneeditor-divider"></div>\n      <Search ref="search" class="bfui-sceneeditor-layersearch" bf-config="searchConfig"></Search>\n      <div class="bfui-sceneeditor-divider"></div>\n      <div ref="layerTreeContainer" class="bfui-sceneeditor-tree leftside-tree"></div>\n    ',this.domElement,this),this.renderItemMap.search.getSearchResultGroup().addClass("bfui-sceneeditor-search-content","bfui-sceneeditor-theme-"+this.app.getConfig().theme),this.contextMenu=new h.default([{text:"更新图层",clickHandler:function(){t.reactive.currentLayerData.id;d.eventBus.trigger(d.EditorEvent.AddResourcePanelShow,"update",t.reactive.currentLayerData.typeName)}}]),this.contextMenu.hide(),this.getDomElement().append(this.contextMenu.getDomElement()),this.getDomElement().on("mousewheel",(function(){return t.contextMenu.hide()})),d.eventBus.on(d.EditorEvent.SceneAdded,(function(e){t.viewer=e;var n=u.getSceneInfo().resources,i=new l.default({});t.layerTree=i,i.addClass("bfui-tree-layer"),i.on(p.default.RightClicked,(function(e){var n=e.event,i=e.node,a=["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(i.getOptions().content.typeName)>=0,o=u.getLayerData(i.getId()).isInvalid;i.getSelectState()&&a&&!o&&t.contextMenu.showAt(n.x,n.y)})),t.renderItemMap.layerTreeContainer.append(i.getDomElement());var a=[{id:"root",typeName:"GroupLayer",name:"全部资源",children:n}];t.initNode(i,a),t.maxGroupNo=u.getMaxGroupNo()})),d.eventBus.on(d.EditorEvent.ModelAdded,(function(e){if(t.getNode(e))t.getRootNode().updateUnloadControl({id:e});else{var n=t.getViewer().getLayerManager().getLayer(e);if(n){n.name||(n.name=n._config.name=n.model._data.name);var i=n.parent.id,a=t.getNode(i);t.initNode(a,[n._config])}}})),d.eventBus.on(d.EditorEvent.PropertiesHide,(function(e){!e&&t.reactive.currentLayerData&&(t.getNode(t.reactive.currentLayerData.id).setSelectState(!1),t.reactive.currentLayerData=null)})),d.eventBus.on(d.EditorEvent.LayerTreeNodeSelectionChanged,(function(e){e?(t.data.isInvalidLayer=!!e.isInvalid,t.data.renameDisabled=!1,t.data.removeDisabled=["TileLayer","TerrainLayer","root"].indexOf(e.typeName)>=0):(t.data.isInvalidLayer=!1,t.data.renameDisabled=!0,t.data.removeDisabled=!0)})),d.eventBus.on(d.EditorEvent.AddResourceByViewToken,(function(e,n){e&&0!==e.length&&("update"!==n?e.forEach((function(e){return t.addModelLayer(e)})):t.updateLayer(e[0]))})),d.eventBus.on(d.EditorEvent.LayerNameChanged,(function(e){t.renameLayerSubmit(e)})),d.eventBus.on(d.EditorEvent.TileLayerSourceChanged,(function(){var e=t.getNode(u.getTileLayerId());u.isDefaultTiandituKey()?t.addNodeWarningIcon(e,"未输入天地图Key"):t.removeNodeWarningIcon(e)})),d.eventBus.on(d.EditorEvent.ModelLayerTransformed,(function(e){var n=t.getNode(e);u.getLayerBeyondDisitance(e)?t.addNodeWarningIcon(n,"资源已远离项目基点，请调整至正确的坐标系"):t.removeNodeWarningIcon(n)})),d.eventBus.on(d.EditorEvent.ModelAdded,(function(e){d.eventBus.trigger(d.EditorEvent.ModelLayerTransformed,e)})),d.eventBus.on(d.EditorEvent.ClearInvalidLayers,(function(){u.getInvalidLayerIds().forEach((function(e){var n=t.getNode(e);t.selectNode(n,!0),t.removeLayer()}))}))}return e.prototype.getDomElement=function(){return this.domElement},e.prototype.getViewer=function(){return this.viewer},e.prototype.getRootNode=function(){return this.layerTree.getControl({id:"root"})},e.prototype.getNode=function(e){return"root"===e?this.getRootNode():this.getRootNode().getControl({id:e},!0)},e.prototype.initNode=function(e,t,n){var i=this;t.map((function(t){var a,o=e.getControl({id:""+t.id});o?(a=o,o.show()):(a=i.createTreeNode(e,t),e===i.layerTree?e.addTreeNode(a,{index:n}):e.addChildNode(a,{index:n}))}))},e.prototype.moveNode=function(e,t,n){this.getNode(u.getParentId(e.getId())).getSubNode().removeControl(e),t.addChildNode(e,{index:n}),u.moveLayer(e.getId(),t.getId(),n),u.updateParentPriority(e.getId())},e.prototype.updateCheckState=function(e){var t=this.getNode(u.getParentId(e));t&&(t.setParentCheckState(t),u.updateParentVisible(e))},e.prototype.selectNode=function(e,t){return i(this,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return n=u.getLayerData(e.getId()),t&&"root"!==n.id?(this.reactive.currentLayerData=n,n.isInvalid?[2]:["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(n.typeName)>=0?[4,u.loadLayer(n.id)]:[3,2]):[3,3];case 1:i.sent(),u.zoomToLayer(n.id,0),i.label=2;case 2:return d.eventBus.trigger(d.EditorEvent.PropertiesShow,this.getNodeData(n.id)),[3,4];case 3:"root"===n.id&&e.setSelectState(!1),this.reactive.currentLayerData=null,d.eventBus.trigger(d.EditorEvent.PropertiesHide),i.label=4;case 4:return[2]}}))}))},e.prototype.createTreeNode=function(e,t){var n,i=this,a=["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(t.typeName)>=0,o=this.getViewer().getLayerManager(),r=t.isVisible;if(e!==this.layerTree&&(n=e.getCheckedState()),"root"!==e.getId())switch(n){case"unchecked":r=!1;break;case"checked":case void 0:r=!0;break;default:r=t.isVisible}else r=t.isVisible;if("root"===t.id){var s=!1;t.children.find((function(e){return s=s||e.isVisible,e.isVisible})),r=s}var l=!0;a&&t.isVisible&&t.modelId&&(l=!!this.getViewer().getModel(t.modelId));var f={rootTree:this.layerTree,content:t,id:t.id,type:t.typeName,hasCheckBox:!0,hasSelection:!0,hasCollapse:["GroupLayer","root"].indexOf(t.typeName)>=0,isExpand:"root"===t.id,isChecked:r,isLoaded:l,parent:e},p={type:"svg",name:""};switch(t.typeName){case"all":case"GroupLayer":p.name="bf-folder-md";break;case"TileLayer":p.name="bf-map";break;case"TerrainLayer":p.name="bf-terrain";break;default:p.name="bf-file"}var h,m=new c.default(f);if(m.initTreeNode(t.name,p),t.children&&this.initNode(m,t.children),a&&!t.databagId&&!t.viewToken){m.isLoaded=!0,t.isInvalid=!0,this.addNodeWarningIcon(m,"无效图层，可能源文件被删除或缺失图层必要信息"),m.getTreeName().addClass("bfui-tree-name-invalid");var v=function(e){if("root"!==e.getId()){i.addNodeWarningIcon(e,"该文件夹下包含无效图层");var t=e.getOptions().parent;v(t)}},g=m.getOptions().parent;v(g)}m.on("ExpendChanged",(function(e,n){n&&t.children&&i.initNode(e,t.children)})),m.on("CheckedChanged",(function(e,n){var a="root"===t.id?o.getRootLayer():o.getLayer(t.id);a&&(n?a.show():a.hide()),i.getViewer().render(),d.eventBus.trigger(d.EditorEvent.LayerTreeNodeVisibleChanged,{id:t.id,isChecked:n})})),m.on("SelectionChanged",(function(e,t){return i.selectNode(e,t)})),"root"!==t.id&&!t.isInvalid&&m.getTreeName().attribute("draggable",!0).on("dragstart",(function(e){var t=e.target;return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",t.innerHTML),e.dataTransfer.setDragImage(t,0,0),i.dragNode=m,!0})).on("dragend",(function(e){return e.dataTransfer.clearData("text"),i.dragNode=null,!1})).on("dragover",(function(e){if(e.preventDefault(),m===i.dragNode)return!0;m.getTreeName().removeClass("bfui-sceneeditor-drag-enter","bfui-sceneeditor-drag-insertup","bfui-sceneeditor-drag-insertdown");var n=m.getTreeName().getPosition(),a="bfui-sceneeditor-drag-enter";return h="enter","GroupLayer"===t.typeName?e.clientY-n.top<5?(a="bfui-sceneeditor-drag-insertup",h="insertup"):n.bottom-e.clientY<5&&(a="bfui-sceneeditor-drag-insertdown",h="insertdown"):e.clientY-n.top<(n.bottom-n.top)/2?(a="bfui-sceneeditor-drag-insertup",h="insertup"):(a="bfui-sceneeditor-drag-insertdown",h="insertdown"),m.getTreeName().addClass(a),!0})).on("dragleave",(function(e){return e.preventDefault(),m===i.dragNode||m.getTreeName().removeClass("bfui-sceneeditor-drag-enter","bfui-sceneeditor-drag-insertup","bfui-sceneeditor-drag-insertdown"),!0})).on("dragend",(function(e){return e.preventDefault(),!0})).on("drop",(function(e){if(e.preventDefault(),m===i.dragNode)return!0;m.getTreeName().removeClass("bfui-sceneeditor-drag-enter","bfui-sceneeditor-drag-insertup","bfui-sceneeditor-drag-insertdown");var t=m,n=0,a=u.getParentId(i.dragNode.getId());if("enter"!==h){t=i.getNode(u.getParentId(m.getId()));var o=u.getLayerData(t.getId()),r=u.getLayerData(m.getId());o.children&&(n=o.children.indexOf(r)),"insertdown"===h&&n++}i.moveNode(i.dragNode,t,n),i.updateCheckState(i.dragNode.getId());var s=u.getLayerData(a);return s.children&&s.children.length>0&&i.updateCheckState(s.children[0].id),t.setExpansion(!0),!0}));var b=u.getTileLayerId();return t.id===b&&u.isDefaultTiandituKey()&&this.addNodeWarningIcon(m,"未输入天地图Key"),Number.isNaN(t.priority)&&u.setPriority(t.id,0),m},e.prototype.initLayer=function(e,t){if(this.reactive.currentLayerData&&"root"!==this.reactive.currentLayerData.id){var n=void 0,i=void 0,a=0,o=void 0;i=v(this.reactive.currentLayerData)?this.reactive.currentLayerData.id:u.getParentId(this.reactive.currentLayerData.id),o=this.getNode(i),n=u.getLayerData(i),!v(this.reactive.currentLayerData)&&n.children&&(a=n.children.indexOf(this.reactive.currentLayerData)),n.children&&(n.priority&&(e.priority=n.priority),e.isNewFolder&&v(this.reactive.currentLayerData)?(n.children.unshift(e),u.moveLayer(e.id,i,0)):(n.children.splice(a,0,e),u.moveLayer(e.id,i,a)),u.addLayer(e,i,t),this.initNode(o,[e],a),this.getNode(e.id).setCheckState(!0),this.updateCheckState(e.id)),o.setExpansion(!0)}else{var r=this.getRootNode();this.initNode(r,[e],0),this.getNode(e.id).setCheckState(!0),this.updateCheckState(e.id),u.addLayer(e,void 0,t),u.addLayerData(e,0)}},e.prototype.onAddLayer=function(){d.eventBus.trigger(d.EditorEvent.AddResourcePanelShow)},e.prototype.onAddGroupLayer=function(){this.maxGroupNo+=1;var e={name:"新建文件夹",id:"group_"+this.maxGroupNo,typeName:"GroupLayer",isVisible:!0,priority:0,children:[]};this.initLayer(e);var t=this.getNode(e.id);this.selectNode(t,!0),d.eventBus.trigger(d.EditorEvent.PropertiesHide,!0),this.renameLayer(!0),t.setExpansion(!0)},e.prototype.addModelLayer=function(e){var t="BIMLayer";if(e.name&&e.name.indexOf(".")>=0){var n=e.name.slice(e.name.lastIndexOf(".")+1);t=u.getTypeNameByFileType(n)}var i=e.name.indexOf(".")>=0?e.name.slice(0,e.name.lastIndexOf(".")):e.name,a=u.getRealLayerInfo(e.id,i),o=a.layerId,r=a.customId,s={typeName:t,isVisible:!0,id:o,name:a.name,fileName:e.name,modelId:e.id,viewToken:e.viewToken,layerVersion:"1",priority:3,style:{color:null,opacity:1,wireframe:!1,enableVisualRange:!1},shadow:{receiveShadow:!1,castShadow:!1},coordSys:"",region:"",transformation:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],modelType:e.modelType,config:null,boundingBox:null};r&&(s.customId=r),this.initLayer(s,(function(){var e,t,n,i;s.config=u.getLayerConfigById(s.id);var a=null===(t=null===(e=s.config)||void 0===e?void 0:e.coordinateSystem)||void 0===t?void 0:t.geogCS,o=(null==a?void 0:a.epsg)||(null==a?void 0:a.EPSG);o&&((c=f.coordSysOptions.filter((function(e){var t;return(null===(t=e.epsg)||void 0===t?void 0:t.toString())===o.toString()}))[0])&&(s.coordSys=c.value));var r=null===(i=null===(n=s.config)||void 0===n?void 0:n.coordinateSystem)||void 0===i?void 0:i.projCS,l=(null==r?void 0:r.epsg)||(null==r?void 0:r.EPSG);if(s.coordSys)if(null==r?void 0:r.centralMeridian)s.region="Custom_"+(r.name||"自定义");else if(l){var c;(c=("CGCS2000"===s.coordSys?f.regionSysOptionsCGCS2000:f.regionSysOptionsWGS84).filter((function(e){return e.value==="EPSG:"+l}))[0])&&(s.region="EPSG:"+l)}s.boundingBox=u.getLayerBoundingBox(s.id)}))},e.prototype.updateLayer=function(e){var t;if(this.reactive.currentLayerData){if("TilesetLayer"==this.reactive.currentLayerData.typeName){var n=u.getLayer(this.reactive.currentLayerData.id);n.getClippingManager().clear(),n.getFlatManager().clear(),this.reactive.currentLayerData.layerConfig&&(this.reactive.currentLayerData.layerConfig.edits=[])}var i="BIMLayer";if(e.name&&e.name.indexOf(".")>=0)i=function(e){return["rvt","max"].indexOf(e)>=0?"BIMLayer":["shpzip"].indexOf(e)>=0?"FeatureLayer":["osgbzip","las","laszip","3dtzip"].indexOf(e)>=0?"TilesetLayer":"BIMLayer"}(e.name.slice(e.name.lastIndexOf(".")+1));var a=this.reactive.currentLayerData,o=u.getRealLayerInfo(e.id,e.name).customId,r={typeName:i,fileName:e.name,modelId:e.id,layerVersion:(null===(t=a.layerVersion)||void 0===t?void 0:t.toString()).includes("*")?a.layerVersion:Number(a.layerVersion)+1+"*",modelType:e.modelType,transformation:a.transformation,viewToken:e.viewToken};for(var s in o&&(r.customId=o),delete a.databagId,r){var l=r[s];a[s]=l}var c=a.id;d.eventBus.trigger(d.EditorEvent.PropertiesHide),u.updateLayer(c,a,(function(){a.config=u.getLayerConfigById(c,!0),a.boundingBox=u.getLayerBoundingBox(c)}))}},e.prototype.onRenameLayer=function(){this.data.renameDisabled||this.renameLayer()},e.prototype.renameLayer=function(e){var t=this;if(this.reactive.currentLayerData&&!this.currentRename){var n=this.getNode(this.reactive.currentLayerData.id);if(n){n.getTreeName().hide();var i=this.renderInputRename(n.getTreeInfoDom());this.currentRename=i.element,i.input.setValue(u.getLayerName(this.reactive.currentLayerData.id)),i.input.getDomElement().getElement().select();var a=!1,o=function(){if(!a){var e=i.input.getValue()||t.getNodeData(n).name;t.renameLayerSubmit(e,n),a=!0}};i.buttonConfirm.on("mousedown",o),i.buttonCancel.on("mousedown",(function(){t.closeRenameLayer(n),e&&t.removeLayer()})),i.input.getDomElement().on("blur",(function(){requestAnimationFrame((function(){t.reactive.currentLayerData&&t.currentRename&&!a&&o()}))})),i.input.getDomElement().on("keydown",(function(e){"Enter"===e.key&&o()}))}}},e.prototype.renameLayerSubmit=function(e,t){var n=t||this.getNode(this.reactive.currentLayerData.id);if(n){var i=n.getTreeName().html(),a=/<svg[\s,\S]+<\/svg>/.exec(i)[0]+e;n.getTreeName().html(a),this.getNodeData(n).name=e,this.closeRenameLayer(n),u.setLayerName(n.getId(),e),d.eventBus.trigger(d.EditorEvent.PropertiesShow,this.reactive.currentLayerData)}},e.prototype.closeRenameLayer=function(e){if(this.reactive.currentLayerData&&this.currentRename){var t=e||this.getNode(this.reactive.currentLayerData.id);t&&(t.getTreeName().show(),t.getTreeInfoDom().remove(this.currentRename),this.currentRename=null)}},e.prototype.onRemoveLayer=function(){var e=this;this.data.removeDisabled||new m.default({parent:this.app.getDomElement(),className:"bfui-sceneeditor-theme-"+this.app.getConfig().theme,content:'<div class="bfui-sceneeditor-messagecontent"><i class="bf-confirm-md"></i><span>确认要删除所选资源吗？</span></div>',confirmHandler:function(){return e.removeLayer()}})},e.prototype.removeLayer=function(){var e=this,t=this.getNode(this.reactive.currentLayerData.id);if(t){var n=function(e){var t=!1;return e&&"GroupLayer"===e.typeName&&e.children.some((function(e){return["TileLayer","TerrainLayer"].indexOf(e.typeName)>=0?(t=!0,!0):(t=n(e),!1)})),t},i=function(t){var n=u.getParentId(t.getId()),i=e.getNode(n);if(i.getSubNode().removeControl(t),u.removeLayer(t.getId()),i.getSubNode().getControlCount()>0){var a=i.getSubNode().getAllControls()[0];e.updateCheckState(a.getId())}e.reactive.currentLayerData=null,d.eventBus.trigger(d.EditorEvent.PropertiesHide)};if("GroupLayer"===this.reactive.currentLayerData.typeName){var a=function(e){var t=u.getLayerData(e.getId());"GroupLayer"===t.typeName&&n(t)?e.getAllControls().forEach((function(e){var t=u.getLayerData(e.getId());"GroupLayer"===t.typeName?n(t)?a(e):i(e):["TileLayer","TerrainLayer"].indexOf(t.typeName)<0&&i(e)})):i(e)};a(t)}else{var o=u.getLayerData(t.getId()).isInvalid,r=t.getOptions().parent,s=function(t){if("root"!==t.getId()&&!u.hasInvalidLayer(t.getId())){e.removeNodeWarningIcon(t);var n=t.getOptions().parent;s(n)}};i(t),o&&s(r)}}},e.prototype.getNodeData=function(e){var t;return"root"===(t=e instanceof c.default?e:this.getNode(e)).getId()?{}:u.getLayerData(t.getId())},e.prototype.renderInputRename=function(e){return s.default('\n      <div ref="element" class="bfui-sceneeditor-rename">\n        <Input ref="input" class="bfui-sceneeditor-input"></input>\n        <i ref="buttonConfirm" class="bfui-sceneeditor-icon bf-confirm"></i>\n        <i ref="buttonCancel" class="bfui-sceneeditor-icon bf-cancel"></i>\n      </div>\n    ',e)},e.prototype.scrollToNode=function(e){var t=this.layerTree.getDomElement().getElement();if(t&&t.scrollBy){var n=e.getTreeName().getPosition(),i=n.top,a=n.bottom,o=a-i,r=t.getBoundingClientRect().top,s=t.clientHeight;if(i<r||a>r+s){var l=i-r-2*o;t.scrollBy({top:l,behavior:"smooth"})}}},e.prototype.addNodeWarningIcon=function(e,t){this.removeNodeWarningIcon(e);var n=(new r.Dom).createElement({elementType:"i",className:"bfui-sceneeditor-icon-warning bf-warning-md"});t&&n.attribute("title",t),e.getTreeName().getParent().appendChild(n.getElement())},e.prototype.removeNodeWarningIcon=function(e){var t=e.getTreeName().getParent().querySelector(".bfui-sceneeditor-icon-warning");t&&e.getTreeName().getParent().removeChild(t)},e}();n.default=g},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Controls/MessageBox/MessageBox":131,"../../../../UI/Controls/Tree/Tree":145,"../../../../UI/Controls/Tree/TreeNode":146,"../../../../UI/Dom":147,"../../../../UI/UIEvents":149,"../../libs/EventBus":106,"../../libs/options":107,"../../libs/viewerHelper":108,"./ContextMenu":92}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../UI/UIMap"),s=e("../../libs/options"),l=e("../../libs/viewerHelper"),c=e("../../../../UI/Controls/Tooltip/Tooltip"),d=e("../LayerEdit/LayerEdit"),u=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={currentLayerData:null,isModelLayer:!1,isBIMLayer:!1,isFeatureLayer:!1,isTilesetLayer:!1,isTileLayer:!1,isTerrainLayer:!1,isGroupLayer:!1,isTiandituKeyVisible:!1,isTiandituKeyIconVisible:!1,featureType:"",hasLayerEdit:!1,lastSelectMapSource:{},isCustomSource:!1,customSetting:{url:"",credit:"None",provider:""}},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <div class="label-div">\n        <label ref="layerPropertiesTab">图层属性</label>\n        <label ref="layerEditTab">图层编辑</label>\n        </div>\n        <i ref="buttonClose" class="bfui-sceneeditor-properties-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div ref="layerPropertiesContent" class="bfui-sceneeditor-panel-content">\n        <div class="bfui-sceneeditor-properties-subtitle">\n          基本信息\n          <div class="bfui-sceneeditor-divider"></div>\n        </div>\n        <div ref="itemFileName" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">文件名</label>\n          <Input ref="inputFileName" class="bfui-sceneeditor-input" bf-title="scope.data.currentLayerData ? scope.data.currentLayerData.fileName : \'\'"></Input>\n        </div>\n        <div ref="itemLayerName" class="bfui-sceneeditor-properties-item">\n          <label class="bfui-sceneeditor-label" bf-show="!scope.data.isGroupLayer">图层名</label>\n          <label class="bfui-sceneeditor-label" bf-show="isGroupLayer">文件夹名</label>\n          <Input ref="inputLayerName" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemTypeName" class="bfui-sceneeditor-properties-item" bf-show="!scope.data.isGroupLayer">\n          <label class="bfui-sceneeditor-label">图层类型</label>\n          <Input ref="inputTypeName" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemFeatureType" class="bfui-sceneeditor-properties-item" bf-show="isFeatureLayer">\n          <label class="bfui-sceneeditor-label">数据类型</label>\n          <Input ref="inputFeatureType" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemLayerId" class="bfui-sceneeditor-properties-item" bf-show="!scope.data.isGroupLayer">\n          <label class="bfui-sceneeditor-label">图层ID</label>\n          <Input ref="inputLayerId" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemModelId" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">模型ID</label>\n          <Input ref="inputModelId" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemVersion" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">图层版本</label>\n          <Input ref="inputVersion" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemPriority" class="bfui-sceneeditor-properties-item">\n          <label class="bfui-sceneeditor-label">加载优先级</label>\n          <Select ref="selectPriority" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="titleDisplay" class="bfui-sceneeditor-properties-subtitle" bf-show="!scope.data.isGroupLayer">\n          显示样式\n          <div class="bfui-sceneeditor-divider"></div>\n        </div>\n        <div ref="itemOverrideColor" class="bfui-sceneeditor-properties-item" bf-show="scope.data.isFeatureLayer && scope.data.featureType === \'面\'">\n          <label class="bfui-sceneeditor-label">填充颜色</label>\n          <div style="width: 100%;display: flex; margin-top: 10px">\n            <ColorPicker ref="colorPicker"></ColorPicker>\n          </div>\n        </div>\n        <div ref="itemOpacity" class="bfui-sceneeditor-properties-item" bf-show="!scope.data.isGroupLayer && [\'点\', \'线\'].indexOf(scope.data.featureType) === -1">\n          <label class="bfui-sceneeditor-label">透明度</label>\n          <div class="bfui-sceneeditor-flex-container">\n            <Slider ref="sliderOpacity" class="bfui-silder-background"></Slider>\n            <div class="bfui-input-container">\n              <Input ref="opacityInput" class="bfui-sceneeditor-input"></Input>\n              <span>%</span>\n            </div>\n          </div>\n        </div>\n        <div ref="itemBorder" class="bfui-sceneeditor-properties-item" bf-show="isBIMLayer">\n          <label class="bfui-sceneeditor-label">开启线框</label>\n          <Select ref="selectBorder" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="itemReceiveShadow" class="bfui-sceneeditor-properties-item" bf-show="scope.data.isBIMLayer || scope.data.isTileLayer || (scope.data.isFeatureLayer && scope.data.featureType === \'面\')">\n          <label class="bfui-sceneeditor-label">接收阴影</label>\n          <Select ref="selectReceiveShadow" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="itemCastShadow" class="bfui-sceneeditor-properties-item" bf-show="scope.data.isBIMLayer || scope.data.isTerrainLayer">\n          <label class="bfui-sceneeditor-label">投射阴影</label>\n          <Select ref="selectCastShadow" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="itemVisualRange" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">按视距显示</label>\n          <Select ref="selectVisualRange" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="itemVisualMax" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">最大距离</label>\n          <Input ref="inputVisualMax" class="bfui-sceneeditor-input"></Input>\n          <label class="bfui-sceneeditor-suffix">m</label>\n        </div>\n        <div ref="itemVisualMin" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">最小距离</label>\n          <Input ref="inputVisualMin" class="bfui-sceneeditor-input"></Input>\n          <label class="bfui-sceneeditor-suffix">m</label>\n        </div>\n        <div ref="titleResource" class="bfui-sceneeditor-properties-subtitle" bf-show="isTileLayer">\n          资源\n          <div class="bfui-sceneeditor-divider"></div>\n        </div>\n        <div ref="itemMapSource" class="bfui-sceneeditor-properties-item" bf-show="isTileLayer">\n          <label class="bfui-sceneeditor-label">数据源</label>\n          <Select ref="selectMapSource" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="itemSourceUrl" class="bfui-sceneeditor-properties-item" bf-show="scope.data.isTileLayer && scope.data.isCustomSource">\n          <label class="bfui-sceneeditor-label">资源地址<span>（必填）</span></label>\n          <i ref="iconSourceUrl" class="bfui-sceneeditor-icon-warning bf-warning-md"></i>\n          <Input ref="inputSourceUrl" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemSourceProvider" class="bfui-sceneeditor-properties-item" bf-show="scope.data.isTileLayer && scope.data.isCustomSource">\n          <label class="bfui-sceneeditor-label">切片协议<span>（必填）</span></label>\n          <i ref="iconSourceProvider" class="bfui-sceneeditor-icon-warning bf-warning-md"></i>\n          <Select ref="selectSourceProvider" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="itemSourceMaxLevel" class="bfui-sceneeditor-properties-item" bf-show="scope.data.isTileLayer && scope.data.isCustomSource">\n          <label class="bfui-sceneeditor-label">最大层级</label>\n          <Input ref="inputSourceMaxLevel" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemTiandituKey" class="bfui-sceneeditor-properties-item" bf-show="isTiandituKeyVisible">\n          <label class="bfui-sceneeditor-label">天地图Key</label>\n          <i ref="iconTianditu" class="bfui-sceneeditor-icon-warning bf-warning-md" bf-show="isTiandituKeyIconVisible"></i>\n          <Input ref="inputTiandituKey" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemMapCoordSys" class="bfui-sceneeditor-properties-item" bf-show="scope.data.isTileLayer && !scope.data.isCustomSource">\n          <label class="bfui-sceneeditor-label">地理坐标系</label>\n          <Input ref="inputMapCoordSys" class="bfui-sceneeditor-input"></Input>\n        </div>\n        <div ref="itemMaxLevel" class="bfui-sceneeditor-properties-item" bf-show="scope.data.isTileLayer && !scope.data.isCustomSource">\n          <label class="bfui-sceneeditor-label">最大层级</label>\n          <Select ref="selectMaxLevel" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="titlePosition" class="bfui-sceneeditor-properties-subtitle" bf-show="isModelLayer">\n          位置\n          <div class="bfui-sceneeditor-divider"></div>\n        </div>\n        <div ref="itemCoordSys" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">地理坐标系</label>\n          <Select ref="selectCoordSys" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="itemRegion" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">投影方式</label>\n          <Select ref="selectRegion" class="bfui-sceneeditor-select"></Select>\n        </div>\n        <div ref="itemLongitude" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">经度</label>\n          <Input ref="inputLongitude" class="bfui-sceneeditor-input"></Input>\n          <label class="bfui-sceneeditor-suffix">°</label>\n        </div>\n        <div ref="itemLatitude" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">纬度</label>\n          <Input ref="inputLatitude" class="bfui-sceneeditor-input"></Input>\n          <label class="bfui-sceneeditor-suffix">°</label>\n        </div>\n        <div ref="itemAltitude" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">高程</label>\n          <Input ref="inputAltitude" class="bfui-sceneeditor-input"></Input>\n          <label class="bfui-sceneeditor-suffix">m</label>\n        </div>\n        <div ref="itemRotation" class="bfui-sceneeditor-properties-item" bf-show="isModelLayer">\n          <label class="bfui-sceneeditor-label">旋转</label>\n          <div class="bfui-sceneeditor-flex-container">\n            <Slider ref="sliderRotation"></Slider>\n            <div class="bfui-input-container">\n              <Input ref="inputRotation" class="bfui-sceneeditor-input"></Input>\n              <span>°</span>\n            </div>\n          </div>\n        </div>\n        <div ref="itemAdjustment" class="bfui-sceneeditor-properties-item item-layeradjustment" bf-show="isModelLayer"> \n          <Button ref="buttonAdjustment" class="bfui-sceneeditor-button button-adjustment" @click="showLayerAdjustment">位置校准</Button>\n        </div>\n      </div>\n      <div ref="layerEditContent" class="bfui-layer-edit-content"></div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){return o.eventBus.trigger(o.EditorEvent.PropertiesHide)})),this.renderItemMap.inputFileName.enabled(!1),this.renderItemMap.inputTypeName.enabled(!1),this.renderItemMap.inputLayerId.enabled(!1),this.renderItemMap.inputModelId.enabled(!1),this.renderItemMap.inputVersion.enabled(!1),this.renderItemMap.inputFeatureType.enabled(!1),this.renderItemMap.inputMapCoordSys.enabled(!1);var n=this.renderItemMap.layerPropertiesContent,r=this.renderItemMap.layerEditContent,u=this.renderItemMap.layerPropertiesTab,f=this.renderItemMap.layerEditTab;u.on("click",(function(){t.data.hasLayerEdit&&"property"!=t.data.selectType&&(u.addClass("tab-select"),f.removeClass("tab-select"),n.show(),r.hide(),o.eventBus.trigger(o.EditorEvent.ExitLayerEffectDrawOrEdit),o.eventBus.trigger(o.EditorEvent.LayerEditTreeUnselect),l.openModelEditor(t.data.currentLayerData.id),l.onModelEditorChanged((function(){return t.setTransformParams()})),t.data.selectType="property")})),f.on("click",(function(){t.data.layerEditCanClick&&"edit"!=t.data.selectType&&(l.closeModelEditor(),u.removeClass("tab-select"),f.addClass("tab-select"),n.hide(),r.show(),t.data.selectType="edit")}));var p=new d.default(this);r.append(p.getDomElement());var h=this.renderItemMap.inputLayerName;h.onChange((function(e){t.data.currentLayerData.name=e,h.setTooltip(e),o.eventBus.trigger(o.EditorEvent.LayerNameChanged,e)}));var m=this.renderItemMap.selectPriority;m.setValues(s.priorityOptions),this.setSelectTheme(m),m.onChange((function(e){return t.initing?t.data.currentLayerData.priority=e.value:l.setPriority(t.data.currentLayerData.id,e.value)}));var v=this.renderItemMap.sliderOpacity,g=this.renderItemMap.opacityInput;v.setEnableTooltip(!0),v.setTooltipFormater((function(e){return e+"%"})),v.onChange((function(e){var n=t.data.currentLayerData.style.opacity=e/100;l.setLayerOpacity(t.data.currentLayerData.id,n),g.setValue(e)})),g.onChange((function(e){e=Number(e),(isNaN(e)||e<0)&&(e=0,g.setValue(0)),e>100&&(e=100,g.setValue(100)),v.setValue(e);var n=t.data.currentLayerData.style.opacity=e/100;l.setLayerOpacity(t.data.currentLayerData.id,n)}));var b=this.renderItemMap.selectBorder;b.setValues(s.booleanOptions),this.setSelectTheme(b),b.onChange((function(e){l.setLayerBorderLineVisible(t.data.currentLayerData.id,e.value),t.data.currentLayerData.style.wireframe=e.value}));var y=this.renderItemMap.selectReceiveShadow;y.setValues(s.booleanOptions),this.setSelectTheme(y),y.onChange((function(e){l.setLayerReceiveShadow(t.data.currentLayerData.id,e.value),t.data.currentLayerData.shadow.receiveShadow=e.value}));var E=this.renderItemMap.selectCastShadow;E.setValues(s.booleanOptions),this.setSelectTheme(E),E.onChange((function(e){l.setLayerCastShadow(t.data.currentLayerData.id,e.value),t.data.currentLayerData.shadow.castShadow=e.value}));var C=this.renderItemMap.inputTiandituKey,w=function(e){var n=e||s.defaultTiandituKey;t.data.currentLayerData.url=t.data.currentLayerData.url.split("&tk=")[0]+"&tk="+n,o.eventBus.trigger(o.EditorEvent.TileLayerSourceChanged),t.data.isTiandituKeyIconVisible=l.isDefaultTiandituKey()};C.onChange(w);var I=this.renderItemMap.iconTianditu,M=(new c.default({hostDom:I,width:300,content:'\n        请输入在\n        <a style="color: #32d3a6; font-size: 13px" href="http://lbs.tianditu.gov.cn/server/MapService.html" target="_blank">http://lbs.tianditu.gov.cn/server/ MapService.html</a>\n        申请的天地图Key，否则仅可在bimface域名下成功发起天地图资源调用。\n      '}),this.renderItemMap.selectMapSource),_=this.renderItemMap.selectMaxLevel;M.setValues(s.mapSourceOptions),this.setSelectTheme(M),this.setSelectTheme(_),M.onChange((function(e){if("custom"===e.value)return t.data.isCustomSource=!0,t.data.isTiandituKeyVisible=!1,!t.data.customSetting.maxLevel&&(t.data.customSetting.maxLevel=t.data.currentLayerData.maxLevel),t.setItemValue("inputSourceMaxLevel",t.data.customSetting.maxLevel),void T();t.data.isCustomSource=!1;var n=s.mapSourceOptionMap[e.value],i=n.url,a=n.credit,r=n.defaultLevel,c=n.maxLevel,d=n.coordSys;t.data.lastSelectMapSource=n,t.data.currentLayerData.url=i,l.setMapSource({url:i,credit:a}),t.setItemValue("inputMapCoordSys",d),t.setMapMaxLevelOptions(c),l.setMapMaxLevel(r),t.setItemValue("selectMaxLevel",r),t.data.currentLayerData.maxLevel=r,t.initTiandituKey(),t.data.isTiandituKeyVisible&&w(C.getValue()),o.eventBus.trigger(o.EditorEvent.TileLayerSourceChanged),t.data.currentLayerData.layerConfig&&delete t.data.currentLayerData.layerConfig.customResource})),_.onChange((function(e){if(e){var n=e.value;l.setMapMaxLevel(n),t.data.currentLayerData.maxLevel=n}})),this.renderItemMap.inputSourceUrl.onChange((function(e){t.data.customSetting.url=e,T()}));var S=this.renderItemMap.selectSourceProvider;S.setValues(s.providerOptions),this.setSelectTheme(S),S.onChange((function(e){t.data.customSetting.provider=e.value,t.data.customSetting.url&&l.removeImageryLayer(),T()}));var T=function(){var e=t.data.customSetting.url&&t.data.customSetting.provider?t.data.customSetting:t.data.lastSelectMapSource,n=e.url,i=e.credit,a=e.provider;t.data.customSetting.url&&t.data.customSetting.provider?(t.data.currentLayerData.layerConfig=t.data.currentLayerData.layerConfig||{},t.data.currentLayerData.layerConfig.customResource=t.data.currentLayerData.layerConfig.customResource||{},t.data.currentLayerData.layerConfig.customResource.provider=t.data.customSetting.provider,l.setMapMaxLevel(t.data.customSetting.maxLevel),t.data.currentLayerData.maxLevel=t.data.customSetting.maxLevel):t.data.currentLayerData.layerConfig&&delete t.data.currentLayerData.layerConfig.customResource,t.data.currentLayerData.url=n,l.setMapSource({url:n,credit:i,provider:a}),o.eventBus.trigger(o.EditorEvent.TileLayerSourceChanged)},B=this.renderItemMap.iconSourceUrl,x=(new c.default({hostDom:B,width:300,content:"\n        需填写完整可访问的url路径，例如：https://bimface.com/map/rest/services/instance/MapServer/tile/{z}/{x}/{y}\n      "}),this.renderItemMap.iconSourceProvider),P=(new c.default({hostDom:x,width:300,content:"\n        需选择对应的切片协议，目前BIMFACE支持GoogleTile、WMTS、TMS协议。\n      "}),this.renderItemMap.inputSourceMaxLevel);P.onInput((function(e){e.data&&!e.data.match(/\d/)&&t.setItemValue("inputSourceMaxLevel",t.data.customSetting.maxLevel)})),P.onChange((function(e){if(e){var n=+e;n<1||n>30?t.setItemValue("inputSourceMaxLevel",t.data.customSetting.maxLevel):(t.data.customSetting.maxLevel=n,t.data.customSetting.url&&t.data.customSetting.provider&&(l.setMapMaxLevel(n),t.data.currentLayerData.maxLevel=n))}}));var L=this.renderItemMap.selectCoordSys;L.setValues(s.coordSysOptions),this.setSelectTheme(L),L.onChange((function(e){if(!t.initing){var n=e.value;t.data.currentLayerData.coordSys=n,t.data.currentLayerData.region="",t.setRegionOptions(n),t.setTransformParams(),L.setTooltip(n)}}));var D=this.renderItemMap.selectRegion;this.setSelectTheme(D),D.onChange((function(e){t.initing||(t.data.currentLayerData.region=e?e.value:"",e&&(l.convertCoordSys(t.data.currentLayerData.id,e.value),t.setTransformParams(),D.setTooltip(e.value)))}));var k=this.renderItemMap.inputLongitude,O=this.renderItemMap.inputLatitude,A=function(){var e=Number(k.getValue()),n=Number(O.getValue());l.setLayerLatLon(t.data.currentLayerData.id,n,e)};k.onChange(A),O.onChange(A),this.renderItemMap.inputAltitude.onChange((function(e){l.setLayerAltitude(t.data.currentLayerData.id,e)}));var N=this.renderItemMap.inputRotation,V=this.renderItemMap.sliderRotation;V.setValueRange(0,360),N.onChange((function(e){var n=Number(e);(isNaN(n)||n>360||n<0)&&(n=0),t.setSliderRotationValue(n),l.setLayerRotateAngle(t.data.currentLayerData.id,n)})),V.onChange((function(e){N.setValue(e),l.setLayerRotateAngle(t.data.currentLayerData.id,e)})),this.renderItemMap.colorPicker.onChange((function(e){t.data.currentLayerData.style.color=e,l.setLayerColor(t.data.currentLayerData.id,e,t.data.currentLayerData.style.opacity)}));var F=this.renderItemMap.selectVisualRange;F.setValues(s.booleanOptions),this.setSelectTheme(F),F.onChange((function(e){t.data.currentLayerData.style.enableVisualRange=e.value,t.setVisualRange()})),this.renderItemMap.inputVisualMax.enabled(!1),this.renderItemMap.inputVisualMax.setPlaceholder("请输入最大距离"),this.renderItemMap.inputVisualMin.enabled(!1),this.renderItemMap.inputVisualMin.setPlaceholder("请输入最小距离");var z=this.renderItemMap.inputVisualMax;z.enabled(!1),z.setPlaceholder("请输入最大距离"),z.onChange((function(e){if(""!==e&&!isNaN(e)&&Number(e)>0){var n=Number(Number(e).toFixed(3));t.data.currentLayerData.style.visualRange.max=n,z.setValue(n),l.setLayerVisualRange(t.data.currentLayerData.id,t.data.currentLayerData.style.visualRange)}else z.setValue(t.data.currentLayerData.style.visualRange.max)}));var H=this.renderItemMap.inputVisualMin;H.enabled(!1),H.setPlaceholder("请输入最小距离"),H.onChange((function(e){if(""!==e&&!isNaN(e)&&Number(e)>=0){var n=Number(Number(e).toFixed(3));t.data.currentLayerData.style.visualRange.min=n,H.setValue(n),l.setLayerVisualRange(t.data.currentLayerData.id,t.data.currentLayerData.style.visualRange)}else H.setValue(t.data.currentLayerData.style.visualRange.min)})),o.eventBus.on(o.EditorEvent.PropertiesShow,(function(e){t.setProperties(e)})),o.eventBus.on(o.EditorEvent.LayerTreeNodeVisibleChanged,(function(e){if(t.data.currentLayerData)if("TerrainLayer"===t.data.currentLayerData.typeName)if(e.id==t.data.currentLayerData.id){if(e.isChecked)l.getLayersByType("TileLayer")[0].isVisible&&(t.data.layerEditCanClick=!0,f.removeClass("i-disabled"));else o.eventBus.trigger(o.EditorEvent.PropertiesHide)}else{var n=l.getLayer(t.data.currentLayerData.id),i=l.getLayer(e.id);"TerrainLayer"===t.data.currentLayerData.typeName&&"TileLayer"==i.typeName&&n.isVisible&&(e.isChecked?(t.data.layerEditCanClick=!0,f.removeClass("i-disabled")):(t.data.layerEditCanClick=!1,f.addClass("i-disabled"),u.click()))}else e.id==t.data.currentLayerData.id&&(e.isChecked?["TileLayer","TilesetLayer"].indexOf(t.data.currentLayerData.typeName)>=0&&(t.data.layerEditCanClick=!0,f.removeClass("i-disabled")):o.eventBus.trigger(o.EditorEvent.PropertiesHide))}))}return e.prototype.getDomElement=function(){return this.domElement},e.prototype.setProperties=function(e){var t=this;if(this.initing=!0,e.style||(e.style={color:null,opacity:1,wireframe:!1}),e.shadow||(e.shadow={receiveShadow:!1,castShadow:!1}),e.shadow.castShadow=!0===e.shadow.castShadow,e.shadow.receiveShadow=!0===e.shadow.receiveShadow,this.data.currentLayerData=e,this.initLayerEdit(),["GroupLayer","BIMLayer","TilesetLayer","FeatureLayer","TileLayer","TerrainLayer"].forEach((function(n){t.data["is"+n]=e.typeName===n})),this.data.isModelLayer=["BIMLayer","TilesetLayer","FeatureLayer"].indexOf(e.typeName)>=0,this.data.featureType="",this.setItemValue("inputFileName",e.fileName),this.setItemValue("inputLayerName",e.name),this.setItemValue("inputTypeName",e.typeName),this.setItemValue("inputLayerId",e.id),this.setItemValue("inputModelId",e.modelId),this.setItemValue("inputVersion",e.layerVersion),this.setItemValue("selectPriority",e.priority),this.data.isFeatureLayer&&(this.data.featureType=l.getFeatureType(e.id),this.setItemValue("inputFeatureType",this.data.featureType),this.setItemValue("colorPicker",e.style.color||null)),this.data.isGroupLayer||(this.setItemValue("sliderOpacity",100*e.style.opacity),!this.data.isTerrainLayer&&this.setItemValue("selectReceiveShadow",e.shadow.receiveShadow),!this.data.isTileLayer&&this.setItemValue("selectCastShadow",e.shadow.castShadow)),this.data.isTiandituKeyVisible=!1,this.data.isTileLayer&&(this.initTiandituKey(),this.setMapSource()),this.data.isModelLayer){if(this.setItemValue("selectBorder",e.style.wireframe),this.setItemValue("selectCoordSys",e.coordSys),this.setRegionOptions(e.coordSys),e.region.indexOf("Custom_")>=0){l.defineCustomCoordSys(e.id,e.region);var n=this.renderItemMap.selectRegion,i=e.region.split("Custom_")[1];n.setText(i),n.setTooltip(i)}else this.setItemValue("selectRegion",e.region);this.setTransformParams(),l.onModelEditorChanged((function(){return t.setTransformParams()})),void 0===e.style.enableVisualRange&&(e.style.enableVisualRange=!1),this.setItemValue("selectVisualRange",e.style.enableVisualRange),this.setVisualRange()}this.initing=!1},e.prototype.initLayerEdit=function(){var e=this.data.currentLayerData.typeName,t=this.renderItemMap.layerPropertiesTab,n=this.renderItemMap.layerEditTab,i=this.renderItemMap.layerPropertiesContent,a=this.renderItemMap.layerEditContent;if(this.data.selectType="property",["TileLayer","TerrainLayer","TilesetLayer"].indexOf(e)>=0){this.data.hasLayerEdit=!0,t.addClass("tab-select"),n.removeClass("tab-select"),i.show(),n.show(),a.hide(),o.eventBus.trigger(o.EditorEvent.LayerEditInit,this.data.currentLayerData);var r=l.getLayer(this.data.currentLayerData.id);if("TerrainLayer"===r.typeName)l.getLayersByType("TileLayer")[0].isVisible&&r.isVisible?this.data.layerEditCanClick=!0:this.data.layerEditCanClick=!1;else r.isVisible?this.data.layerEditCanClick=!0:this.data.layerEditCanClick=!1;this.data.layerEditCanClick?n.removeClass("i-disabled"):n.addClass("i-disabled")}else this.data.hasLayerEdit=!1,t.removeClass("tab-select"),t.on("click",(function(){})),i.show(),n.hide(),a.hide()},e.prototype.setItemValue=function(e,t){if(void 0!==t){var n=this.renderItemMap[e];n instanceof r.Select?n.setSelectedByValue(t):n.setValue(t),["inputLayerName","selectCoordSys","selectRegion"].indexOf(e)>=0&&n.setTooltip(t)}},e.prototype.setRegionOptions=function(e){var t=this.renderItemMap.selectRegion;switch(t.setDisabled(!1).clearSelection("无"),this.setItemValue("selectRegion",""),e){case"CGCS2000":t.setValues(s.regionSysOptionsCGCS2000);break;case"WGS84":t.setValues(s.regionSysOptionsWGS84);break;default:this.initing||l.resetCoordSys(this.data.currentLayerData.id),t.setDisabled(!0)}},e.prototype.setSliderRotationValue=function(e){this.renderItemMap.sliderRotation.setValue(Number(e))},e.prototype.setTransformParams=function(){var e=l.getTransformParams(this.data.currentLayerData.id);this.renderItemMap.inputLongitude.setValue(e.longitude),this.renderItemMap.inputLatitude.setValue(e.latitude),this.renderItemMap.inputAltitude.setValue(e.altitude),this.renderItemMap.inputRotation.setValue(e.rotateAngle),this.setSliderRotationValue(e.rotateAngle),this.data.currentLayerData.transformation=e.transformation,o.eventBus.trigger(o.EditorEvent.ModelLayerTransformed,this.data.currentLayerData.id)},e.prototype.setMapMaxLevelOptions=function(e){for(var t=this.renderItemMap.selectMaxLevel,n=[],i=1;i<=e;i++)n.push({text:i,value:i});t.setValues(n)},e.prototype.setMapSource=function(){var e;if(this.data.currentLayerData.layerConfig&&this.data.currentLayerData.layerConfig.customResource){var t=this.data.currentLayerData.url,n=this.data.currentLayerData.layerConfig.customResource.provider;(e=s.mapSourceOptionMap.custom).url=t,e.provider=n,this.data.lastSelectMapSource=e;var i=s.mapSourceOptions.filter((function(t){return t.text===e.name}))[0].value;return this.setItemValue("selectMapSource",i),this.data.customSetting.provider=n,this.setItemValue("selectSourceProvider",n),this.data.customSetting.url=t,void this.setItemValue("inputSourceUrl",t)}for(var a in s.mapSourceOptionMap){var o=s.mapSourceOptionMap[a];if(o.url.includes("tianditu")){if(o.url.split("&tk=")[0]===this.data.currentLayerData.url.split("&tk=")[0]){e=o;break}}else if(o.url===this.data.currentLayerData.url){e=o;break}}var r=e.name,l=e.maxLevel,c=e.coordSys;this.data.lastSelectMapSource=e;var d=s.mapSourceOptions.filter((function(e){return e.text===r}))[0].value;this.setItemValue("selectMapSource",d),this.setMapMaxLevelOptions(l);var u=Number(this.data.currentLayerData.maxLevel);this.setItemValue("selectMaxLevel",u),this.setItemValue("inputMapCoordSys",c)},e.prototype.setSelectTheme=function(e){e.content.addClass("bfui-sceneeditor-theme-"+this.app.getConfig().theme),e.setMaxHeight(280)},e.prototype.showLayerAdjustment=function(){o.eventBus.trigger(o.EditorEvent.LayerAdjustmentShow,this.data.currentLayerData)},e.prototype.hideLayerAdjustment=function(){o.eventBus.trigger(o.EditorEvent.LayerAdjustmentHide)},e.prototype.initTiandituKey=function(){var e=this.data.currentLayerData.url;if(e.includes("tianditu")){this.data.isTiandituKeyVisible=!0;var t=e.split("&tk=")[1];t!==s.defaultTiandituKey&&this.setItemValue("inputTiandituKey",t),this.data.isTiandituKeyIconVisible=l.isDefaultTiandituKey()}else this.data.isTiandituKeyVisible=!1},e.prototype.setVisualRange=function(){var e=this.data.currentLayerData.style;if(e.enableVisualRange&&!e.visualRange){var t=Number(l.getLayerGeoErrDistance(this.data.currentLayerData.id)).toFixed(3);e.visualRange={min:0,max:Number(t)}}this.renderItemMap.inputVisualMax.enabled(e.enableVisualRange),this.renderItemMap.inputVisualMin.enabled(e.enableVisualRange),e.enableVisualRange?(this.setItemValue("inputVisualMax",this.data.currentLayerData.style.visualRange.max),this.setItemValue("inputVisualMin",this.data.currentLayerData.style.visualRange.min),l.setLayerVisualRange(this.data.currentLayerData.id,this.data.currentLayerData.style.visualRange)):(this.setItemValue("inputVisualMax",""),this.setItemValue("inputVisualMin",""),delete e.visualRange,l.setLayerVisualRange(this.data.currentLayerData.id))},e}();n.default=u},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Controls/Tooltip/Tooltip":144,"../../../../UI/Dom":147,"../../../../UI/UIMap":150,"../../libs/EventBus":106,"../../libs/options":107,"../../libs/viewerHelper":108,"../LayerEdit/LayerEdit":90}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Controls/Tabs/Tabs"),o=e("../SceneInfo/SceneInfo"),r=e("../LayerManage/LayerManage"),s=e("../EffectManage/EffectManage"),l=e("../../libs/EventBus"),c=function(){function e(e){this.domElement=(new i.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-leftside"});var t=new o.default,n=this.layerManage=new r.default(e),c=this.effectManage=new s.default(e),d=new a.default({parent:this.domElement,options:[{content:t.getDomElement(),label:"场景信息",name:"sceneInfo",extraClass:"margin-change"},{content:n.getDomElement(),label:"图层管理",name:"layerManage",extraClass:"margin-change"},{content:c.getDomElement(),label:"效果编辑",name:"effectManage"}],tabLeft:10});requestAnimationFrame((function(){d.setActive(0)})),d.onSelect((function(e){l.eventBus.trigger(l.EditorEvent.HideEffectsPanels,!0),l.eventBus.trigger(l.EditorEvent.PropertiesHide)}))}return e.prototype.getDomElement=function(){return this.domElement},e.prototype.getLayerManage=function(){return this.layerManage},e.prototype.getEffectManage=function(){return this.effectManage},e}();n.default=c},{"../../../../UI/Controls/Tabs/Tabs":143,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../EffectManage/EffectManage":85,"../LayerManage/LayerManage":93,"../SceneInfo/SceneInfo":99}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../UI/UIMap"),s=e("../../../../Common/Glodon"),l=e("../../libs/options"),c=e("../../libs/viewerHelper"),d=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={op:"add",name:"地图滤镜",params:{template:"DarkBlue",color:"",colorOpacity:1,brightness:0,contrast:0,saturation:0}},this.effect=null,this.effectObj={},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="scope.data.op === \'add\'">添加效果</label>\n        <label bf-show="scope.data.op !== \'add\'">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effects-name"><span class="icon"></span><span>场景特效</span></div>\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name">地图滤镜</div>\n            <div class="bfui-sceneeditor-effect-map-img"></div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-header" bf-show="scope.data.op === \'add\'">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">地图滤镜</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content" bf-class="scope.data.op === \'add\' ? \'bfui-sceneeditor-scroll\' : \'\'">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <Input ref="mapEffectName" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <Input ref="mapEffectId" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">滤镜样式</div>\n            <Select ref="effectStyle" class="bfui-sceneeditor-select margin-top5"></Select>\n          </div>\n          <div ref="CustomSetting">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">滤镜颜色</div>\n            <div class="color-opacity-select margin-top5">\n              <div class="color-container">\n                <ColorPicker ref="colorPicker"></ColorPicker>\n                <div ref="colorPickerArrow" class="arrow"></div>\n              </div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">亮度</div>\n            <div class="displayflex">\n              <Slider ref="brightness" class="bfui-effect-slider"></Slider>\n              <div class="bfui-input-container">\n                <Input ref="brightnessInput" class="bfui-sceneeditor-input bfui-no-padding"></Input>\n              </div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">对比度</div>\n            <div class="displayflex">\n              <Slider ref="contrast" class="bfui-effect-slider"></Slider>\n              <div class="bfui-input-container">\n                <Input ref="contrastInput" class="bfui-sceneeditor-input bfui-no-padding"></Input>\n              </div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">饱和度</div>\n            <div class="displayflex">\n              <Slider ref="saturation" class="bfui-effect-slider"></Slider>\n              <div class="bfui-input-container">\n                <Input ref="saturationInput" class="bfui-sceneeditor-input bfui-no-padding"></Input>\n              </div>\n            </div>\n          </div>\n          </div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-placeholder"></div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-fixed-bottom">\n            <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n            <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){n.getParent().getElementsByClassName("bfui-select-togglebutton")[0].removeAttribute("style"),o.eventBus.fireEvent(o.EditorEvent.MapEffectDestroy),o.eventBus.trigger(o.EditorEvent.MapEffectHide),"edit"===t.data.op&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)})),this.renderItemMap.mapEffectName.onChange((function(e){t.data.name=e,"edit"===t.data.op&&(t.effectObj.name=e,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e))}));var n=this.renderItemMap.CustomSetting,r=this.renderItemMap.effectStyle;r.setValues(l.mapStyleOptions),this.setSelectTheme(r),r.onChange((function(e){t.data.params.template=e.value,t.setMapStyle(),e.value===s.default.Bimface.Common.ImageStyle.DarkBlue?(t.setItemValue("colorPicker","#021e58"),t.data.params.color="#021e58"):e.value===s.default.Bimface.Common.ImageStyle.DarkGreen&&(t.setItemValue("colorPicker","#033f2c"),t.data.params.color="#033f2c"),e.value!==s.default.Bimface.Common.ImageStyle.CustomColor&&(t.data.params.brightness=0,t.data.params.contrast=0,t.data.params.saturation=0),e.value===s.default.Bimface.Common.ImageStyle.CustomColor?(n.attribute("style","display: table;"),"add"===t.data.op&&n.getParent().getElementsByClassName("bfui-select-togglebutton")[0].setAttribute("style","right:11px !important;")):(n.attribute("style","display: none;"),"add"===t.data.op&&n.getParent().getElementsByClassName("bfui-select-togglebutton")[0].removeAttribute("style")),t.setItemValue("brightness",10*(t.data.params.brightness+1).toFixed(1)),t.setItemValue("brightnessInput",t.data.params.brightness.toFixed(1)),t.setItemValue("contrast",10*(t.data.params.contrast+1).toFixed(1)),t.setItemValue("contrastInput",t.data.params.contrast.toFixed(1)),t.setItemValue("saturation",10*(t.data.params.saturation+1).toFixed(1)),t.setItemValue("saturationInput",t.data.params.saturation.toFixed(1))}));var d=this.renderItemMap.colorPicker;d.onInput((function(e){t.data.params.color=e,"CustomColor"===t.data.params.template&&t.setMapStyle()})),this.renderItemMap.colorPickerArrow.on("click",(function(){d.click()}));var u=this.renderItemMap.brightness,f=this.renderItemMap.brightnessInput;u.setEnableTooltip(!0),u.getTooltipControl().addClass("bfui-tooltip-center"),u.setValueRange(0,20),u.setTooltipFormater((function(e){return""+(e/10-1).toFixed(1)})),u.onChange((function(e){t.data.params.brightness=+(e/10-1).toFixed(1),t.setMapStyle(),f.setValue((e/10-1).toFixed(1))})),f.onChange((function(e){e=Number(e),(isNaN(e)||e<-1)&&(e=-1),e>1&&(e=1),t.data.params.brightness=e,t.setMapStyle(),u.setValue(10*(e+1).toFixed(1))}));var p=this.renderItemMap.contrast,h=this.renderItemMap.contrastInput;p.setEnableTooltip(!0),p.getTooltipControl().addClass("bfui-tooltip-center"),p.setValueRange(0,20),p.setTooltipFormater((function(e){return""+(e/10-1).toFixed(1)})),p.onChange((function(e){t.data.params.contrast=+(e/10-1).toFixed(1),t.setMapStyle(),h.setValue((e/10-1).toFixed(1))})),h.onChange((function(e){e=Number(e),(isNaN(e)||e<-1)&&(e=-1),e>1&&(e=1),t.data.params.contrast=e,t.setMapStyle(),p.setValue(10*(e+1).toFixed(1))}));var m=this.renderItemMap.saturation,v=this.renderItemMap.saturationInput;m.setEnableTooltip(!0),m.getTooltipControl().addClass("bfui-tooltip-center"),m.setValueRange(0,20),m.setTooltipFormater((function(e){return""+(e/10-1).toFixed(1)})),m.onChange((function(e){t.data.params.saturation=+(e/10-1).toFixed(1),t.setMapStyle(),v.setValue((e/10-1).toFixed(1))})),v.onChange((function(e){e=Number(e),(isNaN(e)||e<-1)&&(e=-1),e>1&&(e=1),t.data.params.saturation=e,t.setMapStyle(),m.setValue(10*(e+1).toFixed(1))})),this.renderItemMap.saveButton.onClick((function(){n.getParent().getElementsByClassName("bfui-select-togglebutton")[0].removeAttribute("style");var e=c.getEffect(t.app._selectedEffectGroup),i={id:"mapStyle",typeName:c.getGlodon().Bimface.Common.Type.EffectType.MapStyle,type:c.getGlodon().Bimface.Common.Type.EffectType.MapStyle,name:t.data.name,effect:t.effect,isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:e?e.parentId:"root"};t.effect=null,o.eventBus.fireEvent(o.EditorEvent.MapEffectHide),o.eventBus.fireEvent(o.EditorEvent.SaveMapEffect,i)})),this.renderItemMap.backButton.onClick((function(){n.getParent().getElementsByClassName("bfui-select-togglebutton")[0].removeAttribute("style"),o.eventBus.fireEvent(o.EditorEvent.MapEffectDestroy),o.eventBus.fireEvent(o.EditorEvent.MapEffectHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow)})),o.eventBus.on(o.EditorEvent.MapEffectShow,(function(e){if(e&&e.isEdit?t.data.op="edit":t.data.op="add","add"===t.data.op)t.data.name="地图滤镜",t.data.params={template:"DarkBlue",color:"#021e58",colorOpacity:1,brightness:0,contrast:0,saturation:0},t.effect=c.getBaseMap(),t.setMapStyle();else{t.effectObj=e,t.effect=e.effect;var n=e.effect.getLastValidMapStyle();t.data.name=e.name,t.data.params={template:n.template,color:t.objectColorToString(n.color),colorOpacity:n.color.alpha,brightness:n.brightness,contrast:n.contrast,saturation:n.saturation},t.renderItemMap.mapEffectId.setValue(e.id),t.renderItemMap.mapEffectId.enabled(!1),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.mapEffectName.getValue()!=e&&t.renderItemMap.mapEffectName.setValue(e)}))}t.setItemValue("mapEffectName",t.data.name),t.setItemValue("effectStyle",t.data.params.template),t.setItemValue("colorPicker",t.data.params.color),t.setItemValue("brightness",10*(t.data.params.brightness+1).toFixed(1)),t.setItemValue("brightnessInput",t.data.params.brightness.toFixed(1)),t.setItemValue("contrast",10*(t.data.params.contrast+1).toFixed(1)),t.setItemValue("contrastInput",t.data.params.contrast.toFixed(1)),t.setItemValue("saturation",10*(t.data.params.saturation+1).toFixed(1)),t.setItemValue("saturationInput",t.data.params.saturation.toFixed(1))})),o.eventBus.on(o.EditorEvent.MapEffectDestroy,(function(){"add"===t.data.op&&t.effect&&t.effect.setStyle({}),t.effect=null})),o.eventBus.on(o.EditorEvent.TileLayerSourceChanged,(function(){c.sourceMapChangeHandleMapStyle()}))}return e.prototype.setMapStyle=function(){c.setMapStyle({template:this.data.params.template,brightness:this.data.params.brightness,contrast:this.data.params.contrast,saturation:this.data.params.saturation,color:this.data.params.color,colorOpacity:this.data.params.colorOpacity},"edit"!==this.data.op||this.effectObj.isVisible?"setStyle":"setLastValidMapStyle")},e.prototype.setItemValue=function(e,t){if(void 0!==t){var n=this.renderItemMap[e];n instanceof r.Select?n.setSelectedByValue(t):n.setValue(t)}},e.prototype.objectColorToString=function(e){return"#"+(2===e.red.toString(16).length?e.red.toString(16):"0"+e.red.toString(16))+(2===e.green.toString(16).length?e.green.toString(16):"0"+e.green.toString(16))+(2===e.blue.toString(16).length?e.blue.toString(16):"0"+e.blue.toString(16))},e.prototype.setSelectTheme=function(e){e.content.addClass("bfui-sceneeditor-theme-"+this.app.getConfig().theme),e.setMaxHeight(280)},e.prototype.getDomElement=function(){return this.domElement},e}();n.default=d},{"../../../../Common/Glodon":52,"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../../../UI/UIMap":150,"../../libs/EventBus":106,"../../libs/options":107,"../../libs/viewerHelper":108}],97:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../UI/UIMap"),s=e("../../libs/options"),l=e("../../libs/viewerHelper"),c=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={op:"add",name:"雨景",params:{darkness:.3,density:2}},this.effect=null,this.effectObj={},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="scope.data.op === \'add\'">添加效果</label>\n        <label bf-show="scope.data.op !== \'add\'">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effects-name"><span class="icon"></span><span>场景特效</span></div>\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name">雨景</div>\n            <div class="bfui-sceneeditor-effect-rain-img"></div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-header" bf-show="scope.data.op === \'add\'">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">雨景</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <Input ref="rainEffectName" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <Input ref="rainEffectId" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">雨量</div>\n            <Select ref="densityType" class="bfui-sceneeditor-select margin-top5"></Select>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">阴天效果</div>\n\t\t\t\t\t\t<div class="slider-container width-220">\n\t\t\t\t\t\t\t<Slider ref="darkness"></Slider>\n\t\t\t\t\t\t\t<div class="input-container">\n\t\t\t\t\t\t\t\t<Input ref="darknessInput" class="bfui-sceneeditor-input"></Input>\n\t\t\t\t\t\t\t\t<span>%</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n          </div>\n\t\t\t\t\t<div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-placeholder"></div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-fixed-bottom">\n            <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n            <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.fireEvent(o.EditorEvent.RainEffectDestroy),o.eventBus.trigger(o.EditorEvent.RainEffectHide),"edit"===t.data.op&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)})),this.renderItemMap.rainEffectName.onChange((function(e){t.data.name=e,"edit"===t.data.op&&(t.effectObj.name=e,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e))}));var n=this.renderItemMap.densityType;n.setValues(s.rainDensityOptions),this.setSelectTheme(n),n.onChange((function(e){t.data.params.density=e.value,l.updateRainEffectAttribute(t.effect,"density",t.data.params.density)}));var r=this.renderItemMap.darkness,c=this.renderItemMap.darknessInput;r.setEnableTooltip(!0),r.getTooltipControl().addClass("bfui-tooltip-center"),r.setValueRange(0,100),r.onChange((function(e){t.data.params.darkness=e/100,c.setValue(e),l.updateRainEffectAttribute(t.effect,"darkness",t.data.params.darkness)})),c.onChange((function(e){e>100&&(e=100,c.setValue(100)),e<0&&(e=0,c.setValue(0)),t.data.params.darkness=+e/100,r.setValue(+e),l.updateRainEffectAttribute(t.effect,"darkness",t.data.params.darkness)})),this.renderItemMap.saveButton.onClick((function(){var e=l.getEffect(t.app._selectedEffectGroup),n={id:"rainEffect",typeName:l.getGlodon().Bimface.Common.Type.EffectType.Rain,type:l.getGlodon().Bimface.Common.Type.EffectType.Rain,name:t.data.name,effect:t.effect,isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:e?e.parentId:"root"};t.effect=null,o.eventBus.fireEvent(o.EditorEvent.RainEffectHide),o.eventBus.fireEvent(o.EditorEvent.SaveRainEffect,n)})),this.renderItemMap.backButton.onClick((function(){o.eventBus.fireEvent(o.EditorEvent.RainEffectDestroy),o.eventBus.fireEvent(o.EditorEvent.RainEffectHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow)})),o.eventBus.on(o.EditorEvent.RainEffectShow,(function(e){if(e&&e.isEdit?t.data.op="edit":t.data.op="add","add"===t.data.op)t.data.name="雨景",t.data.params={darkness:.3,density:2},t.effect=l.initRainEffect(t.data.params),t.effect.enableEffect(!0);else{t.effectObj=e,t.effect=e.effect;var n=t.effect.getParams();t.data.name=e.name,t.data.params={darkness:n.darkness,density:n.density},t.renderItemMap.rainEffectId.setValue(e.id),t.renderItemMap.rainEffectId.enabled(!1),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.rainEffectName.getValue()!=e&&t.renderItemMap.rainEffectName.setValue(e)}))}t.setItemValue("rainEffectName",t.data.name),t.setItemValue("densityType",t.data.params.density),t.setItemValue("darkness",100*t.data.params.darkness),t.setItemValue("darknessInput",100*t.data.params.darkness)})),o.eventBus.on(o.EditorEvent.RainEffectDestroy,(function(){"add"===t.data.op&&t.effect&&t.effect.enableEffect(!1),t.effect=null}))}return e.prototype.setItemValue=function(e,t){if(void 0!==t){var n=this.renderItemMap[e];n instanceof r.Select?n.setSelectedByValue(t):n.setValue(t)}},e.prototype.setSelectTheme=function(e){e.content.addClass("bfui-sceneeditor-theme-"+this.app.getConfig().theme),e.setMaxHeight(280)},e.prototype.getDomElement=function(){return this.domElement},e}();n.default=c},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../../../UI/UIMap":150,"../../libs/EventBus":106,"../../libs/options":107,"../../libs/viewerHelper":108}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../libs/viewerHelper"),s=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.count=1,this.effect=null,this.effectObj=null,this.data={op:"add",name:"环状扫描-",params:{originPosition:{},radius:0,color:"",duration:2e3,isEnableComponentsScanned:!0,colorOpacity:""}},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="scope.data.op === \'add\'">添加效果</label>\n        <label bf-show="scope.data.op !== \'add\'">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effects-name"><span class="icon"></span><span>面特效</span></div>\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name">环状扫描</div>\n            <div class="bfui-sceneeditor-effect-ring-img"></div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-header" bf-show="scope.data.op === \'add\'">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">环状扫描</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content" bf-class="scope.data.op === \'add\' ? \'bfui-sceneeditor-scroll\' : \'\'">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <Input ref="ringScanName" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <Input ref="ringId" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">圆心坐标</div>\n            <Input ref="originPosition" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">扫描半径</div>\n            <div class="bufu-sceneeditor-effect-attribute-input">\n              <Input ref="radius" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n              <div class="unit">m</div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">动画时长</div>\n            <div class="bufu-sceneeditor-effect-attribute-input">\n              <Input ref="duration" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n              <div class="unit">ms</div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">覆盖模型</div>\n            <Switch ref="isEnableComponentsScanned" class="margin-top5"></Switch>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">效果颜色</div>\n            <div class="color-opacity-select margin-top6">\n              <div class="color-container">\n                <ColorPicker ref="effectColor"></ColorPicker>\n                <div ref="effectColorArrow" class="arrow"></div>\n              </div>\n              <Slider ref="effectColorOpacity"></Slider>\n              <div class="input-container">\n                <Input ref="effectColorInput" class="bfui-sceneeditor-input"></Input>\n                <span>%</span>\n              </div>\n            </div>\n          </div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-placeholder"></div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-fixed-bottom">\n            <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n            <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.fireEvent(o.EditorEvent.RingScanDestroy),o.eventBus.trigger(o.EditorEvent.RingScanHide),"edit"===t.data.op&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)})),this.renderItemMap.ringScanName.onChange((function(e){t.data.name=e,"edit"===t.data.op&&(t.effectObj.name=e,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e))})),this.renderItemMap.originPosition.onChange((function(e){var n=e.replaceAll("，",",").split(",");t.data.params.originPosition={x:+n[0],y:+n[1],z:+n[2]},r.updateRingScanAttribute(t.effect,"originPosition",t.data.params.originPosition),t.data.editRingScan&&!t.data.isEditing&&t.data.editRingScan.setOriginPosition(t.data.params.originPosition)})),this.renderItemMap.radius.onChange((function(e){t.data.params.radius=e,r.updateRingScanAttribute(t.effect,"radius",+e),t.data.editRingScan&&!t.data.isEditing&&t.data.editRingScan.setRadius(+e)})),this.renderItemMap.duration.onChange((function(e){t.data.params.duration=e,r.updateRingScanAttribute(t.effect,"duration",e)})),this.renderItemMap.isEnableComponentsScanned.onChange((function(e){t.data.params.isEnableComponentsScanned=e,r.updateRingScanAttribute(t.effect,"isEnableComponentsScanned",e),t.data.editRingScan&&t.effect&&t.effect.stop(),"edit"===t.data.op&&t.effectObj&&0==t.effectObj.isVisible&&t.effect.hide()}));var n=this.renderItemMap.effectColor;n.onInput((function(e){t.data.params.color=e,r.updateRingScanAttribute(t.effect,"color",t.data.params)})),this.renderItemMap.effectColorArrow.on("click",(function(){n.click()}));var s=this.renderItemMap.effectColorOpacity,l=this.renderItemMap.effectColorInput;s.setEnableTooltip(!0),s.getTooltipControl().addClass("bfui-tooltip-center"),s.onChange((function(e){t.data.params.colorOpacity=e/100,l.setValue(e),r.updateRingScanAttribute(t.effect,"color",t.data.params)})),l.onChange((function(e){e>100&&(e=100,l.setValue(100)),e<0&&(e=0,l.setValue(0)),t.data.params.colorOpacity=+e/100,s.setValue(+e),r.updateRingScanAttribute(t.effect,"color",t.data.params)})),this.renderItemMap.saveButton.onClick((function(){var e=r.getEffect(t.app._selectedEffectGroup),n={id:"ringScan_"+t.count,typeName:r.getGlodon().Bimface.Common.Type.EffectType.RingScan,type:r.getGlodon().Bimface.Common.Type.EffectType.RingScan,name:t.data.name,effect:t.effect,isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:e?e.parentId:"root"};t.effect.play(),t.effect=null,t.data.editRingScan&&t.data.editRingScan.exit(),o.eventBus.fireEvent(o.EditorEvent.RingScanHide),o.eventBus.fireEvent(o.EditorEvent.SaveRingScan,n)})),this.renderItemMap.backButton.onClick((function(){o.eventBus.fireEvent(o.EditorEvent.RingScanDestroy),o.eventBus.fireEvent(o.EditorEvent.RingScanHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow)})),o.eventBus.on(o.EditorEvent.RingScanShow,(function(e){if(e&&e.isEdit?t.data.op="edit":t.data.op="add","add"===t.data.op)t.count=r.getMaxEffectNo("ringScan_")+1,t.data.name="环状扫描-"+t.count,t.data.params={originPosition:e.originPosition,radius:e.radius,duration:2e3,isEnableComponentsScanned:!0,color:"#11DAB7",colorOpacity:1},t.data.params.originPosition.z+=.1,t.effect=r.initRingScan(t.data.params);else{t.effectObj=e,t.effect=e.effect,t.effect.zoomToBoundingBox();var n=t.effect.getParams();t.data.name=e.name,t.data.params={originPosition:n.originPosition,radius:n.radius,duration:n.duration,color:t.objectColorToString(n.color),colorOpacity:n.color.alpha,isEnableComponentsScanned:n.isEnableComponentsScanned},t.renderItemMap.ringId.setValue(e.id),t.renderItemMap.ringId.enabled(!1),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.ringScanName.getValue()!=e&&t.renderItemMap.ringScanName.setValue(e)}))}t.data.params.originPosition.x=+t.data.params.originPosition.x.toFixed(2),t.data.params.originPosition.y=+t.data.params.originPosition.y.toFixed(2),t.data.params.originPosition.z=+t.data.params.originPosition.z.toFixed(2),t.data.params.radius=+t.data.params.radius.toFixed(2),t.effect.stop(),o.eventBus.trigger(o.EditorEvent.handleStartDrawOrEditEvent),t.data.editRingScan=r.editRingScan({originPosition:t.data.params.originPosition,radius:t.data.params.radius},(function(e){t.data.isEditing=!0,e.originPosition.x=+e.originPosition.x.toFixed(2),e.originPosition.y=+e.originPosition.y.toFixed(2),e.originPosition.z=+e.originPosition.z.toFixed(2),e.radius=+e.radius.toFixed(2),t.data.params.originPosition=e.originPosition,t.data.params.radius=e.radius,t.setItemValue("originPosition",t.data.params.originPosition.x+","+t.data.params.originPosition.y+","+t.data.params.originPosition.z),t.setItemValue("radius",t.data.params.radius),r.updateRingScanAttribute(t.effect,"originPosition",t.data.params.originPosition),r.updateRingScanAttribute(t.effect,"radius",t.data.params.radius)}),(function(){t.data.isEditing=!1}),(function(){t.effect.play(),t.data.editRingScan=null,t.data.isEditing=!1,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)})),"edit"===t.data.op&&(t.setItemValue("originPosition",t.data.params.originPosition.x+","+t.data.params.originPosition.y+","+t.data.params.originPosition.z),t.setItemValue("radius",t.data.params.radius)),t.setItemValue("ringScanName",t.data.name),t.setItemValue("effectColor",t.data.params.color),t.setItemValue("effectColorOpacity",100*t.data.params.colorOpacity),t.setItemValue("effectColorInput",100*t.data.params.colorOpacity),t.setItemValue("duration",t.data.params.duration),t.setItemValue("isEnableComponentsScanned",t.data.params.isEnableComponentsScanned)})),o.eventBus.on(o.EditorEvent.RingScanDestroy,(function(){t.data.editRingScan&&(t.effect&&t.effect.play&&t.effect.play(),t.data.editRingScan.exit(),t.data.editFaRingScan=null,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)),"add"===t.data.op&&t.effect&&t.effect.destroy(),t.effect=null}))}return e.prototype.objectColorToString=function(e){return"#"+(2===e.red.toString(16).length?e.red.toString(16):"0"+e.red.toString(16))+(2===e.green.toString(16).length?e.green.toString(16):"0"+e.green.toString(16))+(2===e.blue.toString(16).length?e.blue.toString(16):"0"+e.blue.toString(16))},e.prototype.setItemValue=function(e,t){void 0!==t&&this.renderItemMap[e].setValue(t)},e.prototype.getDomElement=function(){return this.domElement},e}();n.default=s},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],99:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/viewerHelper"),r=e("../../libs/EventBus"),s=function(){function e(){var e=this;this.domElement=(new i.Dom).createElement({elementType:"div",className:"bfui-sceneeditor-sceneinfo"}),this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-row">\n        <div class="bfui-sceneeditor-marker"></div>\n        <label class="bfui-sceneeditor-label">场景名称：</label>\n        <Input ref="inputSceneName" class="bfui-sceneeditor-input"></Input>\n      </div>\n      <div class="bfui-sceneeditor-divider"></div>\n      <div class="bfui-sceneeditor-row">\n        <div class="bfui-sceneeditor-marker"></div>\n        <label class="bfui-sceneeditor-label">项目基点</label>\n      </div>\n      <div class="bfui-sceneeditor-positioninfo">\n        <div class="bfui-sceneeditor-row">\n          <label class="bfui-sceneeditor-labelname">经度：</label>\n          <label ref="labelLon" class="bfui-sceneeditor-label"></label>\n        </div>\n        <div class="bfui-sceneeditor-row">\n          <label class="bfui-sceneeditor-labelname">纬度：</label>\n          <label ref="labelLat" class="bfui-sceneeditor-label"></label>\n        </div>\n        <div class="bfui-sceneeditor-row">\n          <label class="bfui-sceneeditor-labelname">高程：</label>\n          <label ref="labelAlt" class="bfui-sceneeditor-label"></label>\n        </div>\n      </div>\n      <div class="bfui-sceneeditor-divider"></div>\n      <div class="bfui-sceneeditor-row">\n        <div class="bfui-sceneeditor-marker"></div>\n        <label class="bfui-sceneeditor-label">初始视角</label>\n      </div>\n      <div class="bfui-sceneeditor-row bfui-sceneeditor-camera">\n        <Button ref="buttonSetCameraStatus" class="bfui-sceneeditor-button">设置初始视角</Button>\n        <Button ref="buttonGotoCameraStatus" class="bfui-sceneeditor-button">转至初始视角</Button>\n      </div>\n    ',this.domElement);var t=o.getSceneInfo();t?this.init(t):r.eventBus.on(r.EditorEvent.SceneAdded,(function(){e.init(o.getSceneInfo())}))}return e.prototype.init=function(e){var t=this.renderItemMap.inputSceneName;t.setValue(e.name),t.setTooltip(e.name),t.onInput((function(){var n=t.getValue();n.length<=32?(e.name=n,t.setTooltip(e.name)):t.setValue(e.name)})),this.renderItemMap.labelLon.html(e.baseLatLon.lon+" °"),this.renderItemMap.labelLat.html(e.baseLatLon.lat+" °"),this.renderItemMap.labelAlt.html(o.getBaseHeight(e.baseLatLon).z+" m"),this.renderItemMap.buttonSetCameraStatus.onClick((function(){o.setHomeView()})),this.renderItemMap.buttonGotoCameraStatus.onClick((function(){o.gotoHomeView()}))},e.prototype.getDomElement=function(){return this.domElement},e}();n.default=s},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../libs/viewerHelper"),s=e("../../libs/options"),l=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.data={id:null,name:"天空盒",isEdit:e&&e._isEdit||!1,style:"BlueSky",effect:null,effectObj:null},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="!scope.data.isEdit">添加效果</label>\n        <label bf-show="scope.data.isEdit">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-effects-name bfui-sceneeditor-effect-name-style">\n          <span class="bfui-sceneeditor-effect-color"></span>\n          <span class="padding-left10">场景特效</span>\n        </div>\n        <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name color-333">天空盒</div>\n            <div class="bfui-sceneeditor-effect-sky-img"></div>\n          </div>\n        </div>\n        <div bf-show="!scope.data.isEdit" class="divide-line"></div>\n        <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-editor-effect-header">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">天空盒</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content" bf-class="!scope.data.isEdit? \'bfui-sceneeditor-scroll\' : \'\'">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <div class="bfui-sceneeditor-effect-value">\n              <input ref="skyBoxName" class="input-field" type="text">\n            </div>\n          </div>\n          <div bf-show="scope.data.isEdit" class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <div class="bfui-sceneeditor-effect-value dark-background">\n              <input ref="skyBoxId" class="input-field light-color" type="text"></input>\n            </div>\n          </div>\n          <div bf-show=true class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">样式</div>\n            <Select ref="skyboxStyle" class="bfui-sceneeditor-select margin-top5"></Select>\n          </div>\n          <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-placeholder"></div>\n          <div bf-show="!scope.data.isEdit" class="bfui-sceneeditor-fixed-bottom">\n            <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n            <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.trigger(o.EditorEvent.SkyBoxHide),t.data.isEdit&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)}));var n=this.renderItemMap.skyBoxName;n.attribute("type","text"),n.attribute("value",this.data.name),n.attribute("autocomplete","off"),n.on("change",(function(e){t.data.name=e.target.value;var n=r.getEffect(t.data.id);n&&(n.name=e.target.value,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e.target.value))}));var l=this.renderItemMap.skyBoxId;l.attribute("type","text"),l.attribute("disabled","disabled"),l.attribute("value",this.data.id);var c=this.renderItemMap.skyboxStyle;c.setValues(s.skyboxStyleOptions),this.setSelectTheme(c),c.setSelectedByValue(this.data.style),c.onChange((function(e){if(t.data.style=e.value,t.data.effect)if(t.data.isEdit){var n=r.getEffect(t.data.id);n&&n.effect&&(n.effect.setStyle(e.value),n.effect._style=e.value)}else t.data.effect.setStyle(e.value)})),this.renderItemMap.saveButton.onClick((function(){var e=r.getEffect(t.app._selectedEffectGroup),i={id:"skybox",typeName:r.getGlodon().Bimface.Common.Type.EffectType.SkyBoxManager,type:r.getGlodon().Bimface.Common.Type.EffectType.SkyBoxManager,name:n.attribute("value"),params:{id:"skybox",style:t.data.style},isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:e?e.parentId:"root"};o.eventBus.fireEvent(o.EditorEvent.SkyBoxHide),o.eventBus.fireEvent(o.EditorEvent.SaveSkyBox,i)})),this.renderItemMap.backButton.onClick((function(){o.eventBus.fireEvent(o.EditorEvent.SkyBoxHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow)})),o.eventBus.on(o.EditorEvent.SkyBoxShow,(function(e){e&&t.setData(e)})),o.eventBus.on(o.EditorEvent.SkyBoxHide,(function(){!t.data.isEdit&&t.data.effect&&(t.data.effect.destroy(),t.data.effect=null)}))}return e.prototype.getDomElement=function(){return this.domElement},e.prototype.setSelectTheme=function(e){e.content.addClass("bfui-sceneeditor-theme-"+this.app.getConfig().theme),e.setMaxHeight(280)},e.prototype.setData=function(e){var t=this;this.data.name=e.name,this.renderItemMap.skyBoxName.attribute("value",e.name),this.data.id=e.id,this.renderItemMap.skyBoxId.attribute("value",e.id),e.effect&&(this.data.style=e.effect._style,this.renderItemMap.skyboxStyle.setSelectedByValue(this.data.style)),this.data.isEdit=e.isEdit,this.data.effect=e.effect,this.data.effectObj=e,this.data.isEdit?o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.skyBoxName.attribute("value")!=e&&t.renderItemMap.skyBoxName.attribute("value",e)})):(this.renderItemMap.skyboxStyle.setSelectedByValue("BlueSky"),this.data.effect=r.initSkyBox())},e}();n.default=l},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/options":107,"../../libs/viewerHelper":108}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../UI/UIMap"),s=e("../../../../Common/Glodon"),l=e("../../libs/options"),c=e("../../libs/viewerHelper"),d=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.effect=null,this.effectObj=null,this.count=1,this.data={op:"add",editPolygonTool:null,name:"电子围墙-",params:{path:[],direction:{type:"Tangent",reverse:!1},duration:1500,height:5,color:"",alpha:1,isRepeat:!0}},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="scope.data.op === \'add\'">添加效果</label>\n        <label bf-show="scope.data.op !== \'add\'">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      \n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effects-name"><span class="icon"></span><span>面特效</span></div>\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name">电子围墙</div>\n            <div class="bfui-sceneeditor-effect-wall-img"></div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-header" bf-show="scope.data.op === \'add\'">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">电子围墙</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content" bf-class="scope.data.op === \'add\' ? \'bfui-sceneeditor-scroll\' : \'\'">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <Input ref="wallName" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <Input ref="wallId" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">围墙高度</div>\n            <div class="bufu-sceneeditor-effect-attribute-input">\n              <Input ref="wallHeight" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n              <div class="unit">m</div>\n            </div>\n          </div>\n\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">动画方向</div>\n            <Select ref="wallDirection" class="bfui-sceneeditor-select margin-top5"></Select>\n          </div>\n\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">动画时长</div>\n            <div class="bufu-sceneeditor-effect-attribute-input">\n              <Input ref="duration" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n              <div class="unit">ms</div>\n            </div>\n          </div>\n\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">效果颜色</div>\n            <div class="color-opacity-select margin-top6">\n              <div class="color-container">\n                <ColorPicker ref="effectColor"></ColorPicker>\n                <div ref="effectColorArrow" class="arrow"></div>\n              </div>\n              <Slider ref="effectColorOpacity"></Slider>\n              <div class="input-container">\n                <Input ref="effectColorInput" class="bfui-sceneeditor-input"></Input>\n                <span>%</span>\n              </div>\n            </div>\n          </div>\n\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">循环播放</div>\n            <Switch ref="isRepeat" class="margin-top5"></Switch>\n          </div>\n\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-placeholder"></div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-fixed-bottom">\n            <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n            <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.fireEvent(o.EditorEvent.EffectPanelHide,s.default.Bimface.Common.Type.EffectType.WallEffect),o.eventBus.trigger(o.EditorEvent.EffectHide,s.default.Bimface.Common.Type.EffectType.WallEffect),"edit"===t.data.op&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)})),this.renderItemMap.wallName.onChange((function(e){t.data.name=e,"edit"===t.data.op&&(t.effectObj.name=e,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e))}));var n=this.renderItemMap.wallHeight;n.getDomElement().attribute("type","number"),n.onChange((function(e){e>1e3&&(e=1e3),t.data.params.height=+Number(e).toFixed(3),c.updateWallEffectAttribute(t.effect,"height",t.data.params.height),t.data.editPolygonTool&&t.data.editPolygonTool.setCurrentHeight(t.data.params.height)}));var r=this.renderItemMap.wallDirection;r.setValues(l.wallDirection),this.setSelectTheme(r),r.onChange((function(e){var n=e.value.split("_");t.data.params.direction.type=n[0],t.data.params.direction.reverse="true"===n[1],c.updateWallEffectAttribute(t.effect,"direction",t.data.params.direction)}));var d=this.renderItemMap.duration;d.getDomElement().attribute("type","number"),d.onChange((function(e){t.data.params.duration=+Number(e).toFixed(0),c.updateWallEffectAttribute(t.effect,"duration",t.data.params.duration)}));var u=this.renderItemMap.effectColor;u.onInput((function(e){t.data.params.color=e,c.updateWallEffectAttribute(t.effect,"color",t.data.params)})),this.renderItemMap.effectColorArrow.on("click",(function(){u.click()}));var f=this.renderItemMap.effectColorOpacity,p=this.renderItemMap.effectColorInput;f.setEnableTooltip(!0),f.getTooltipControl().addClass("bfui-tooltip-center"),f.onChange((function(e){t.data.params.alpha=e/100,p.setValue(e),c.updateWallEffectAttribute(t.effect,"color",t.data.params)})),p.onChange((function(e){e>100&&(e=100,p.setValue(100)),e<0&&(e=0,p.setValue(0)),t.data.params.alpha=+e/100,f.setValue(+e),c.updateWallEffectAttribute(t.effect,"color",t.data.params)})),this.renderItemMap.isRepeat.onChange((function(e){t.data.params.isRepeat=e,c.updateWallEffectAttribute(t.effect,"repeat",e)})),this.renderItemMap.saveButton.onClick((function(){var e=c.getEffect(t.app._selectedEffectGroup),n={id:"wallEffect_"+t.count,typeName:c.getGlodon().Bimface.Common.Type.EffectType.WallEffect,type:c.getGlodon().Bimface.Common.Type.EffectType.WallEffect,name:t.data.name,effect:t.effect,isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:e?e.parentId:"root"};t.data.editPolygonTool&&t.data.editPolygonTool.exit(),t.effect=null,o.eventBus.fireEvent(o.EditorEvent.EffectPanelHide,s.default.Bimface.Common.Type.EffectType.WallEffect),o.eventBus.fireEvent(o.EditorEvent.SaveEffect,{type:s.default.Bimface.Common.Type.EffectType.WallEffect,config:n})})),this.renderItemMap.backButton.onClick((function(){o.eventBus.fireEvent(o.EditorEvent.EffectPanelHide,s.default.Bimface.Common.Type.EffectType.WallEffect),o.eventBus.trigger(o.EditorEvent.EffectHide,s.default.Bimface.Common.Type.EffectType.WallEffect),o.eventBus.fireEvent(o.EditorEvent.EffectsShow)})),o.eventBus.on(o.EditorEvent.EffectShow,(function(e){if(e.type===s.default.Bimface.Common.Type.EffectType.WallEffect){var n=e.data;if(n&&n.isEdit?t.data.op="edit":t.data.op="add","add"===t.data.op)t.count=c.getMaxEffectNo("wallEffect_")+1,t.data.name="电子围墙-"+t.count,t.data.params={path:n,isRepeat:!0,direction:{type:"Tangent",reverse:!1},color:"#32D3A6",opacity:.8,duration:1500,height:5},t.effect=c.initWallEffect(t.data.params);else{t.effectObj=n,t.effect=n.effect,t.effect.zoomToBoundingBox();var i=t.effect.getParams();t.data.name=n.name,t.data.params={isRepeat:i.isRepeat,color:t.objectColorToString(i.color),opacity:i.color.alpha,direction:{type:i.direction.type,reverse:i.direction.reverse},duration:i.duration,path:i.path,height:i.height},t.renderItemMap.wallId.setValue(n.id),t.renderItemMap.wallId.enabled(!1),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.wallName.getValue()!=e&&t.renderItemMap.wallName.setValue(e)}))}t.effect.hide(),o.eventBus.trigger(o.EditorEvent.handleStartDrawOrEditEvent),t.data.lastPoins=t.data.params.path,t.data.editPolygonTool=c.editWallEffect(t.data.params.path,t.data.params.height,(function(e){t.data.lastPoins=e,t.data.params.path=e,c.updateWallEffectAttribute(t.effect,"path",t.data.params.path.points),c.updateWallEffectAttribute(t.effect,"height",+t.data.params.path.height.toFixed(3)),t.setItemValue("wallHeight",+t.data.params.path.height.toFixed(3))}),(function(){("add"===t.data.op||"edit"===t.data.op&&t.effectObj.isVisible)&&t.effect.show(),t.data.editPolygonTool=null,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)})),t.setItemValue("wallName",t.data.name),t.setItemValue("wallHeight",+t.data.params.height.toFixed(3)),t.setItemValue("wallDirection",t.data.params.direction.type+"_"+t.data.params.direction.reverse.toString()),t.setItemValue("duration",t.data.params.duration),t.setItemValue("effectColor",t.data.params.color),t.setItemValue("effectColorInput",100*t.data.params.opacity),t.setItemValue("effectColorOpacity",100*t.data.params.opacity),t.setItemValue("isRepeat",t.data.params.isRepeat)}})),o.eventBus.on(o.EditorEvent.EffectHide,(function(e){e===s.default.Bimface.Common.Type.EffectType.WallEffect&&(t.data.editPolygonTool&&(t.effect&&("add"===t.data.op||"edit"===t.data.op&&t.effectObj.isVisible)&&t.effect.show(),t.data.editPolygonTool.exit(),t.data.editPolygonTool=null,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)),"add"===t.data.op&&t.effect&&t.effect.destroy(),t.effect=null)}))}return e.prototype.objectColorToString=function(e){return"#"+(2===e.red.toString(16).length?e.red.toString(16):"0"+e.red.toString(16))+(2===e.green.toString(16).length?e.green.toString(16):"0"+e.green.toString(16))+(2===e.blue.toString(16).length?e.blue.toString(16):"0"+e.blue.toString(16))},e.prototype.setItemValue=function(e,t){if(void 0!==t){var n=this.renderItemMap[e];n instanceof r.Select?n.setSelectedByValue(t):n.setValue(t)}},e.prototype.setSelectTheme=function(e){e.content.addClass("bfui-sceneeditor-theme-"+this.app.getConfig().theme),e.setMaxHeight(280)},e.prototype.getDomElement=function(){return this.domElement},e}();n.default=d},{"../../../../Common/Glodon":52,"../../../../UI/Common/Utils/Render":110,"../../../../UI/Dom":147,"../../../../UI/UIMap":150,"../../libs/EventBus":106,"../../libs/options":107,"../../libs/viewerHelper":108}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../UI/Dom"),a=e("../../../../UI/Common/Utils/Render"),o=e("../../libs/EventBus"),r=e("../../../../UI/Controls/Message/Message"),s=e("../../libs/viewerHelper"),l=function(){function e(e){var t=this;this.app=e,this.domElement=(new i.Dom).createElement({elementType:"div"}).css("height","100%"),this.effect=null,this.effectObj=null,this.count=1,this.data={op:"add",editPolygonTool:null,name:"水面效果-",params:{boundary:[],flow:!0,color:"",colorOpacity:1,scale:4,shadow:!1,offset:!1,xDirection:1,yDirection:1}},this.renderItemMap=a.default('\n      <div class="bfui-sceneeditor-panel-header">\n        <label bf-show="scope.data.op === \'add\'">添加效果</label>\n        <label bf-show="scope.data.op !== \'add\'">效果属性</label>\n        <i ref="buttonClose" class="bfui-sceneeditor-effect-closebutton gld-bf-close-sm"></i>\n      </div>\n      <div class="bfui-sceneeditor-panel-content">\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effects-name"><span class="icon"></span><span>面特效</span></div>\n        <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-effect-content">\n          <div>\n            <div class="bfui-sceneeditor-effect-name">水面效果</div>\n            <div class="bfui-sceneeditor-effect-water-img"></div>\n          </div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-header" bf-show="scope.data.op === \'add\'">\n          <div class="bfui-sceneeditor-effect-color"></div>\n          <div class="bfui-sceneeditor-effect-name">水面效果</div>\n        </div>\n        <div class="bfui-sceneeditor-editor-effect-content" bf-class="scope.data.op === \'add\' ? \'bfui-sceneeditor-scroll\' : \'\'">\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">名称</div>\n            <Input ref="waterName" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute" bf-show="scope.data.op !== \'add\'">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">ID</div>\n            <Input ref="waterId" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">水面颜色</div>\n            <div class="color-opacity-select margin-top6">\n              <div class="color-container">\n                <ColorPicker ref="effectColor"></ColorPicker>\n                <div ref="effectColorArrow" class="arrow"></div>\n              </div>\n            </div>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top6 bufu-sceneeditor-effect-attribute-name">波纹系数</div>\n            <Input ref="scale" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">流动效果</div>\n            <Switch ref="flow" class="margin-top5"></Switch>\n          </div>\n          <div class="bfui-sceneeditor-effect-attribute">\n            <div class="margin-top10 bufu-sceneeditor-effect-attribute-name">水面高度</div>\n            <div class="bufu-sceneeditor-effect-attribute-input">\n              <Input ref="waterHeight" class="bfui-sceneeditor-input margin-top5 width-220"></Input>\n              <div class="unit">m</div>\n            </div>\n          </div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-placeholder"></div>\n          <div bf-show="scope.data.op === \'add\'" class="bfui-sceneeditor-fixed-bottom">\n            <Button ref="backButton" class="bfui-sceneeditor-cancel-button">取消</Button>\n            <Button ref="saveButton" class="bfui-sceneeditor-submit-button">确认添加</Button>\n          </div>\n        </div>\n      </div>\n    ',this.domElement,this),this.renderItemMap.buttonClose.on("click",(function(){o.eventBus.fireEvent(o.EditorEvent.WaterEffectDestroy),o.eventBus.trigger(o.EditorEvent.WaterEffectHide),"edit"===t.data.op&&o.eventBus.trigger(o.EditorEvent.EffectTreeNodeSelectionChanged,null,!0)})),this.renderItemMap.waterName.onChange((function(e){t.data.name=e,"edit"===t.data.op&&(t.effectObj.name=e,o.eventBus.trigger(o.EditorEvent.EffectNameChanged,e))}));var n=this.renderItemMap.effectColor;n.onInput((function(e){t.data.params.color=e,s.updateWaterEffectAttribute(t.effect,"color",t.data.params)})),this.renderItemMap.effectColorArrow.on("click",(function(){n.click()})),this.renderItemMap.scale.onChange((function(e){t.data.params.scale=+e,s.updateWaterEffectAttribute(t.effect,"scale",+e)})),this.renderItemMap.flow.onChange((function(e){t.data.params.flow=e,s.updateWaterEffectAttribute(t.effect,"flow",e)})),this.renderItemMap.waterHeight.onChange((function(e){t.data.params.boundary.forEach((function(t){return t.z=+e})),s.updateWaterEffectAttribute(t.effect,"boundary",t.data.params.boundary),t.data.editPolygonTool&&t.data.editPolygonTool.setPoints(t.data.params.boundary)})),this.renderItemMap.saveButton.onClick((function(){var e=s.getEffect(t.app._selectedEffectGroup),n={id:"waterEffect_"+t.count,typeName:s.getGlodon().Bimface.Common.Type.EffectType.WaterEffect,type:s.getGlodon().Bimface.Common.Type.EffectType.WaterEffect,name:t.data.name,effect:t.effect,isVisible:!0,parentId:t.app._selectedEffectGroup.indexOf("group_")>-1||t.app._selectedEffectGroup.indexOf("root")>-1?t.app._selectedEffectGroup:e?e.parentId:"root"};t.data.editPolygonTool&&t.data.editPolygonTool.exit(),t.effect=null,o.eventBus.fireEvent(o.EditorEvent.WaterEffectHide),o.eventBus.fireEvent(o.EditorEvent.SaveWaterEffect,n)})),this.renderItemMap.backButton.onClick((function(){o.eventBus.fireEvent(o.EditorEvent.WaterEffectDestroy),o.eventBus.fireEvent(o.EditorEvent.WaterEffectHide),o.eventBus.fireEvent(o.EditorEvent.EffectsShow)})),o.eventBus.on(o.EditorEvent.WaterEffectShow,(function(e){if(e&&e.isEdit?t.data.op="edit":t.data.op="add","add"===t.data.op){if(t.count=s.getMaxEffectNo("waterEffect_")+1,t.data.name="水面效果-"+t.count,t.data.params={boundary:e,flow:!0,color:"#082849",colorOpacity:1,scale:4,shadow:!1,offset:!1,xDirection:1,yDirection:1},t.data.params.boundary.forEach((function(e){e.z+=.5})),t.hasIntersectionPoint(JSON.parse(JSON.stringify(t.data.params.boundary))))return t.effect=null,o.eventBus.fireEvent(o.EditorEvent.WaterEffectHide),void new r.default({parent:t.app.getDomElement(),className:"bfui-effect-warning",text:"添加失败，请勿交叉选点。",duration:2e3});t.effect=s.initWaterEffect(t.data.params)}else{t.effectObj=e,t.effect=e.effect,t.effect.zoomToBoundingBox();var n=t.effect.getParams();t.data.name=e.name,t.data.params={boundary:n.boundary,flow:n.flow,color:t.objectColorToString(n.color),colorOpacity:n.color.alpha,scale:n.scale,shadow:n.shadow,offset:n.offset,xDirection:n.xDirection,yDirection:n.yDirection},t.renderItemMap.waterId.setValue(e.id),t.renderItemMap.waterId.enabled(!1),o.eventBus.on(o.EditorEvent.EffectNamePanelChanged,(function(e){t.renderItemMap.waterName.getValue()!=e&&t.renderItemMap.waterName.setValue(e)}))}t.effect.hide(),o.eventBus.trigger(o.EditorEvent.handleStartDrawOrEditEvent),t.data.lastPoins=t.data.params.boundary,t.data.editPolygonTool=s.editWaterEffect(t.data.params.boundary,(function(e){if(t.hasIntersectionPoint(JSON.parse(JSON.stringify(e))))return t.data.params.boundary=t.data.lastPoins,t.data.editPolygonTool.setPoints(t.data.lastPoins),void new r.default({parent:t.app.getDomElement(),className:"bfui-effect-warning",text:"不支持出现交叉点位。",duration:2e3});t.data.lastPoins=e,t.data.params.boundary=e,s.updateWaterEffectAttribute(t.effect,"boundary",t.data.params.boundary),t.setItemValue("waterHeight",+t.data.params.boundary[0].z.toFixed(2))}),(function(){("add"===t.data.op||"edit"===t.data.op&&t.effectObj.isVisible)&&t.effect.show(),t.data.editPolygonTool=null,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)})),t.setItemValue("waterName",t.data.name),t.setItemValue("effectColor",t.data.params.color),t.setItemValue("flow",t.data.params.flow),t.setItemValue("scale",t.data.params.scale),t.setItemValue("waterHeight",+t.data.params.boundary[0].z.toFixed(2))})),o.eventBus.on(o.EditorEvent.WaterEffectDestroy,(function(){t.data.editPolygonTool&&(t.effect&&("add"===t.data.op||"edit"===t.data.op&&t.effectObj.isVisible)&&t.effect.show(),t.data.editPolygonTool.exit(),t.data.editPolygonTool=null,o.eventBus.trigger(o.EditorEvent.handleExitDrawOrEditEvent)),"add"===t.data.op&&t.effect&&t.effect.destroy(),t.effect=null}))}return e.prototype.objectColorToString=function(e){return"#"+(2===e.red.toString(16).length?e.red.toString(16):"0"+e.red.toString(16))+(2===e.green.toString(16).length?e.green.toString(16):"0"+e.green.toString(16))+(2===e.blue.toString(16).length?e.blue.toString(16):"0"+e.blue.toString(16))},e.prototype.setItemValue=function(e,t){void 0!==t&&this.renderItemMap[e].setValue(t)},e.prototype.getDomElement=function(){return this.domElement},e.prototype.hasIntersectionPoint=function(e){var t=!1;e.push(e[0]);for(var n=0;n<e.length-3;n++)for(var i=n+2;i<e.length-1;i++){if(0!=n||i!=e.length-2)if(s.computeSegmentsIntersect(e[n],e[n+1],e[i],e[i+1])){t=!0;break}}return t},e}();n.default=l},{"../../../../UI/Common/Utils/Render":110,"../../../../UI/Controls/Message/Message":130,"../../../../UI/Dom":147,"../../libs/EventBus":106,"../../libs/viewerHelper":108}],103:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Common/Glodon"),r=e("../../UI/Common/Utils/Render"),s=e("./Components/LeftSide/LeftSide"),l=e("./Components/LayerProperties/LayerProperties"),c=e("./Components/EffectList/EffectList"),d=e("./Components/EditFolder/EditFolder"),u=e("./Components/EffectNotification/EffectNotification"),f=e("./Components/AnchorEffect/AnchorEffect"),p=e("./Components/FireEffect/FireEffect"),h=e("./Components/CurveEffect/CurveEffect"),m=e("./Components/FanScan/FanScan"),v=e("./Components/RingScan/RingScan"),g=e("./Components/WaterEffect/WaterEffect"),b=e("./Components/WallEffect/WallEffect"),y=e("./Components/MapEffect/MapEffect"),E=e("./Components/SkyBox/SkyBox"),C=e("./Components/LayerEditNotification/LayerEditNotification"),w=e("./Components/RainEffect/RainEffect"),I=e("./Components/AddResource/AddResource"),M=e("./Components/LayerAdjustment/LayerAdjustment"),_=e("./libs/EventBus"),S=e("./libs/viewerHelper");e("./style/iconfont/iconfontSvg");var T=e("../../UI/Dom"),B=e("../../Common/StatisticsDataManager"),x=function(e){function t(t){var n=this;B.SDM.send("Glodon.Bimface.Module.Scene.Editor","bf_c_sceneEditor_new"),(n=e.call(this)||this)._config=t;var i=(new T.Dom).createElement({elementType:"div",className:"bfui-app"});return t.domElement.appendChild(i.getElement()),n.domElement=i,n._selectedEffectGroup="root",n.initUI(t),n}return a(t,e),t.prototype.getDomElement=function(){return this.domElement},t.prototype.initUI=function(e){var t=this,n=this._config,i=r.default('\n      <div ref="container" class="bfui-sceneeditor-container">\n        <div ref="left" class="bfui-sceneeditor-left"></div>\n        <div ref="viewer" class="bfui-sceneeditor-right">\n          <div ref="properties" class="bfui-sceneeditor-properties hide"></div>\n          <div ref="effects" class="bfui-sceneeditor-effectlist hide"></div>\n          <div ref="editFolder" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="effectNotification" class="bfui-sceneeditor-effect-notification hide"></div>\n          <div ref="anchorEffect" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="fireEffect" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="curveEffect" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="fanScan" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="ringScan" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="waterEffect" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="wallEffect" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="mapEffect" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="skyBox" class="bfui-sceneeditor-effect hide"></div>\n          <div ref="layerEditNotification" class="bfui-sceneeditor-effect-notification hide"></div>\n          <div ref="rainEffect" class="bfui-sceneeditor-effect hide"></div>\n        </div>\n      </div>\n    ',this.getDomElement());e.theme||(e.theme="default"),this.getDomElement().addClass("bfui-sceneeditor-theme-"+e.theme),this.viewerElement=i.viewer.getElement(),this.addScene(n.viewToken),_.eventBus.reset(),_.eventBus.on(_.EditorEvent.PropertiesShow,(function(e){i.properties.removeClass("hide"),S.openModelEditor(e.id)})),_.eventBus.on(_.EditorEvent.PropertiesHide,(function(){i.properties.addClass("hide"),S.closeModelEditor()})),_.eventBus.on(_.EditorEvent.PropertiesShowPanel,(function(){i.properties.removeClass("hide")})),_.eventBus.on(_.EditorEvent.HideEffectsPanels,(function(e){void 0===e&&(e=!1),_.eventBus.trigger(_.EditorEvent.EffectTreeNodeSelectionChanged,!1,e),_.eventBus.trigger(_.EditorEvent.EffectsHide),_.eventBus.trigger(_.EditorEvent.EffectFolderHide),_.eventBus.trigger(_.EditorEvent.AnchorGISHide),_.eventBus.trigger(_.EditorEvent.EffectCrossHairHide,o.default.Bimface.Common.Type.EffectType.WallEffect),_.eventBus.trigger(_.EditorEvent.EffectPanelHide,o.default.Bimface.Common.Type.EffectType.WallEffect),_.eventBus.trigger(_.EditorEvent.EffectHide,o.default.Bimface.Common.Type.EffectType.WallEffect),_.eventBus.trigger(_.EditorEvent.AnchorEffectHide),_.eventBus.trigger(_.EditorEvent.TempAnchorDestroy),_.eventBus.trigger(_.EditorEvent.AnchorPointDestroy),_.eventBus.trigger(_.EditorEvent.FireEffectGISHide),_.eventBus.trigger(_.EditorEvent.FireEffectHide),_.eventBus.trigger(_.EditorEvent.FireEffectDrawExit),_.eventBus.trigger(_.EditorEvent.FireEffectDestroy),_.eventBus.trigger(_.EditorEvent.CurveAnimationHide),_.eventBus.trigger(_.EditorEvent.TempCurveDestroy),_.eventBus.trigger(_.EditorEvent.CurveEffectHide),_.eventBus.trigger(_.EditorEvent.CurveAnimationDestroy),_.eventBus.trigger(_.EditorEvent.SkyBoxHide),_.eventBus.trigger(_.EditorEvent.FanScanGISHide),_.eventBus.trigger(_.EditorEvent.FanScanHide),_.eventBus.trigger(_.EditorEvent.FanScanDrawExit),_.eventBus.trigger(_.EditorEvent.FanScanDestroy),_.eventBus.trigger(_.EditorEvent.RingScanGISHide),_.eventBus.trigger(_.EditorEvent.RingScanHide),_.eventBus.trigger(_.EditorEvent.RingScanDrawExit),_.eventBus.trigger(_.EditorEvent.RingScanDestroy),_.eventBus.trigger(_.EditorEvent.WaterEffectGISHide),_.eventBus.trigger(_.EditorEvent.WaterEffectHide),_.eventBus.trigger(_.EditorEvent.WaterEffectDrawExit),_.eventBus.trigger(_.EditorEvent.WaterEffectDestroy),_.eventBus.trigger(_.EditorEvent.MapEffectHide),_.eventBus.trigger(_.EditorEvent.MapEffectDestroy),_.eventBus.trigger(_.EditorEvent.RainEffectHide),_.eventBus.trigger(_.EditorEvent.RainEffectDestroy)})),_.eventBus.on(_.EditorEvent.EffectsShow,(function(e){i.effects.removeClass("hide")})),_.eventBus.on(_.EditorEvent.EffectsHide,(function(){i.effects.addClass("hide")})),_.eventBus.on(_.EditorEvent.EffectFolderShow,(function(){i.editFolder.removeClass("hide")})),_.eventBus.on(_.EditorEvent.EffectFolderHide,(function(){i.editFolder.addClass("hide")})),_.eventBus.on(_.EditorEvent.EffectCrossHairShow,(function(){i.viewer.addClass("crosshair"),i.effectNotification.removeClass("hide")})),_.eventBus.on(_.EditorEvent.EffectCrossHairHide,(function(){i.viewer.removeClass("crosshair"),i.effectNotification.addClass("hide")})),_.eventBus.on(_.EditorEvent.AnchorGISShow,(function(){i.viewer.addClass("crosshair"),i.effectNotification.removeClass("hide")})),_.eventBus.on(_.EditorEvent.AnchorGISHide,(function(){i.viewer.removeClass("crosshair"),i.effectNotification.addClass("hide")})),_.eventBus.on(_.EditorEvent.AnchorEffectShow,(function(e){i.anchorEffect.removeClass("hide"),e&&(t._isEdit=e.isEdit)})),_.eventBus.on(_.EditorEvent.AnchorEffectHide,(function(){i.anchorEffect.addClass("hide")})),_.eventBus.on(_.EditorEvent.FireEffectGISShow,(function(){i.viewer.addClass("crosshair"),i.effectNotification.removeClass("hide")})),_.eventBus.on(_.EditorEvent.FireEffectGISHide,(function(){i.viewer.removeClass("crosshair"),i.effectNotification.addClass("hide")})),_.eventBus.on(_.EditorEvent.FireEffectShow,(function(){i.fireEffect.removeClass("hide")})),_.eventBus.on(_.EditorEvent.FireEffectHide,(function(){i.fireEffect.addClass("hide")})),_.eventBus.on(_.EditorEvent.CurveEffectShow,(function(e){i.curveEffect.removeClass("hide"),e&&(t._isEdit=e.isEdit)})),_.eventBus.on(_.EditorEvent.CurveEffectHide,(function(){i.curveEffect.addClass("hide"),t.getViewer()&&t.getViewer().render()})),_.eventBus.on(_.EditorEvent.CurveAnimationShow,(function(){i.viewer.addClass("crosshair"),i.effectNotification.removeClass("hide")})),_.eventBus.on(_.EditorEvent.CurveAnimationHide,(function(){i.viewer.removeClass("crosshair"),i.effectNotification.addClass("hide")})),_.eventBus.on(_.EditorEvent.FanScanGISShow,(function(){i.viewer.addClass("crosshair"),i.effectNotification.removeClass("hide")})),_.eventBus.on(_.EditorEvent.FanScanGISHide,(function(){i.viewer.removeClass("crosshair"),i.effectNotification.addClass("hide")})),_.eventBus.on(_.EditorEvent.FanScanShow,(function(){i.fanScan.removeClass("hide")})),_.eventBus.on(_.EditorEvent.FanScanHide,(function(){i.fanScan.addClass("hide")})),_.eventBus.on(_.EditorEvent.RingScanGISShow,(function(){i.viewer.addClass("crosshair"),i.effectNotification.removeClass("hide")})),_.eventBus.on(_.EditorEvent.RingScanGISHide,(function(){i.viewer.removeClass("crosshair"),i.effectNotification.addClass("hide")})),_.eventBus.on(_.EditorEvent.RingScanShow,(function(){i.ringScan.removeClass("hide")})),_.eventBus.on(_.EditorEvent.RingScanHide,(function(){i.ringScan.addClass("hide")})),_.eventBus.on(_.EditorEvent.WaterEffectGISShow,(function(){i.viewer.addClass("crosshair"),i.effectNotification.removeClass("hide")})),_.eventBus.on(_.EditorEvent.WaterEffectGISHide,(function(){i.viewer.removeClass("crosshair"),i.effectNotification.addClass("hide")})),_.eventBus.on(_.EditorEvent.WaterEffectShow,(function(){i.waterEffect.removeClass("hide")})),_.eventBus.on(_.EditorEvent.WaterEffectHide,(function(){i.waterEffect.addClass("hide")})),_.eventBus.on(_.EditorEvent.EffectPanelShow,(function(e){e===o.default.Bimface.Common.Type.EffectType.WallEffect&&i.wallEffect.removeClass("hide")})),_.eventBus.on(_.EditorEvent.EffectPanelHide,(function(e){e===o.default.Bimface.Common.Type.EffectType.WallEffect&&i.wallEffect.addClass("hide")})),_.eventBus.on(_.EditorEvent.MapEffectShow,(function(){i.mapEffect.removeClass("hide")})),_.eventBus.on(_.EditorEvent.MapEffectHide,(function(){i.mapEffect.addClass("hide")})),_.eventBus.on(_.EditorEvent.SkyBoxShow,(function(e){i.skyBox.removeClass("hide"),e&&(t._isEdit=e.isEdit)})),_.eventBus.on(_.EditorEvent.SkyBoxHide,(function(){i.skyBox.addClass("hide")})),_.eventBus.on(_.EditorEvent.RainEffectShow,(function(){i.rainEffect.removeClass("hide")})),_.eventBus.on(_.EditorEvent.RainEffectHide,(function(){i.rainEffect.addClass("hide")})),_.eventBus.on(_.EditorEvent.layerEditNotificationShow,(function(){i.layerEditNotification.removeClass("hide")})),_.eventBus.on(_.EditorEvent.layerEditNotificationHide,(function(){i.layerEditNotification.addClass("hide")})),_.eventBus.on(_.EditorEvent.EffectTreeNodeSelectionChanged,(function(e){e?(e.type?e.type:e.typeName,t._selectedEffectGroup=e.id,t._selectedName=e.name):!1!==e&&(t._selectedEffectGroup="root")}));var a=new s.default(this);i.left.append(a.getDomElement());var T=new l.default(this);i.properties.append(T.getDomElement());var B=new c.default(this);i.effects.append(B.getDomElement());var x=new d.default(this);i.editFolder.append(x.getDomElement());var P=new u.default(this);i.effectNotification.append(P.getDomElement());var L=new f.default(this);i.anchorEffect.append(L.getDomElement());var D=new p.default(this);i.fireEffect.append(D.getDomElement());var k=new h.default(this);i.curveEffect.append(k.getDomElement());var O=new m.default(this);i.fanScan.append(O.getDomElement());var A=new v.default(this);i.ringScan.append(A.getDomElement());var N=new g.default(this);i.waterEffect.append(N.getDomElement());var V=new b.default(this);i.wallEffect.append(V.getDomElement());var F=new y.default(this);i.mapEffect.append(F.getDomElement());var z=new E.default(this);i.skyBox.append(z.getDomElement());var H=new w.default(this);i.rainEffect.append(H.getDomElement());var U=new I.default(this);i.container.append(U.getDomElement());var R=new C.default(this);i.layerEditNotification.append(R.getDomElement());var G=new M.default(this);i.container.append(G.getDomElement()),G.getDomElement().hide()},t.prototype.getViewer=function(){var e=this;if(!this._viewer){var t=new o.default.Bimface.Viewer.ViewerGISConfig;for(var n in t.enableStorage=!1,t.disableConfigCache=!0,this._config)t[n]=this._config[n];t.domElement=this.viewerElement,this._viewer=new o.default.Bimface.Viewer.ViewerGIS(t),S.registerViewer(this._viewer,o.default),this._viewer.addEventListener(o.default.Bimface.Viewer.ViewerGISEvent.ModelRemoved,(function(e){_.eventBus.trigger(_.EditorEvent.ModelRemoved,e)})),this._viewer.addEventListener(o.default.Bimface.Viewer.ViewerGISEvent.ModelAdded,(function(e){_.eventBus.trigger(_.EditorEvent.ModelAdded,e)})),this._viewer.addEventListener(o.default.Bimface.Viewer.ViewerGISEvent.SceneAdded,(function(){_.eventBus.trigger(_.EditorEvent.SceneAdded,e._viewer),requestAnimationFrame((function(){return S.initTiandituMap()}))}))}return this._viewer},t.prototype.addScene=function(e){this.getViewer().addScene(e)},t.prototype.getPublishData=function(){_.eventBus.trigger(_.EditorEvent.HideEffectsPanels),_.eventBus.trigger(_.EditorEvent.ExitLayerEffectDrawOrEdit);var e=S.getSceneInfo(),t=S.getLayerConfigsObject(),n=function(e){e.children&&e.children.forEach((function(e){delete e.parent,delete e.castShadow,delete e.receiveShadow,e.databagId&&delete e.viewToken,delete e.layerVersion,delete e.isInvalid,["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(e.typeName)>=0&&(e.config=S.getLayerConfigById(e.id,!0),e.boundingBox=S.getBoundingBoxById(e.id),e.modelType||(e.modelType=S.getModelType(e.id))),"GroupLayer"===e.typeName&&n(e)}))};return n(t),e.resources=t.children,{id:e.id,name:e.name,sceneSetting:{baseLatLon:e.baseLatLon,homeView:e.homeView},resources:e.resources,effects:S.getEffectTreeData()}},t.prototype.getConfig=function(){return this._config},t.prototype.isInvalidLayerIncluded=function(){return S.hasInvalidLayer()},t.prototype.clearInvalidLayers=function(){_.eventBus.trigger(_.EditorEvent.ClearInvalidLayers)},t.prototype.destroy=function(){this._destroyed||(_.eventBus.reset(),S.unregisterViewer(),this._config=null,this.domElement.destroy(),this.getViewer().destroy&&this.getViewer().destroy(),this._destroyed=!0)},t}(_.EventEmmiter);n.default=x},{"../../Common/Glodon":52,"../../Common/StatisticsDataManager":53,"../../UI/Common/Utils/Render":110,"../../UI/Dom":147,"./Components/AddResource/AddResource":78,"./Components/AnchorEffect/AnchorEffect":81,"./Components/CurveEffect/CurveEffect":82,"./Components/EditFolder/EditFolder":83,"./Components/EffectList/EffectList":84,"./Components/EffectNotification/EffectNotification":86,"./Components/FanScan/FanScan":87,"./Components/FireEffect/FireEffect":88,"./Components/LayerAdjustment/LayerAdjustment":89,"./Components/LayerEditNotification/LayerEditNotification":91,"./Components/LayerProperties/LayerProperties":94,"./Components/LeftSide/LeftSide":95,"./Components/MapEffect/MapEffect":96,"./Components/RainEffect/RainEffect":97,"./Components/RingScan/RingScan":98,"./Components/SkyBox/SkyBox":100,"./Components/WallEffect/WallEffect":101,"./Components/WaterEffect/WaterEffect":102,"./libs/EventBus":106,"./libs/viewerHelper":108,"./style/iconfont/iconfontSvg":109}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EditorConfig=void 0;var i=function(e){var t={theme:"default",domElement:null,viewToken:null,getResourceListHandler:null,getViewTokenHandler:null};return e&&(t.domElement=e),t};n.EditorConfig=i},{}],105:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Loaded="Loaded",e.ViewChanged="ViewChanged",e.ModelAdded="ModelAdded",e.ModelRemoved="ModelRemoved",e.LayerTreeNodeClicked="LayerTreeNodeClicked",e.SceneAdded="SceneAdded",e.PropertiesShow="PropertiesShow",e.PropertiesHide="PropertiesHide",e.HideEffectsPanels="HideEffectsPanels",e.EffectsShow="EffectsShow",e.EffectsHide="EffectsHide",e.EffectFolderShow="EffectFolderShow",e.EffectFolderHide="EffectFolderHide",e.AnchorGISShow="AnchorGISShow",e.AnchorGISHide="AnchorGISHide",e.EffectCrossHairShow="EffectCrossHairShow",e.EffectCrossHairHide="EffectCrossHairHide",e.EffectPanelShow="EffectPanelShow",e.EffectPanelHide="EffectPanelHide",e.EffectShow="EffectShow",e.EffectHide="EffectHide",e.SaveEffect="SaveEffect",e.AnchorPointUpdate="AnchorPointUpdate",e.AnchorPointDestroy="AnchorPointDestroy",e.TempAnchorDestroy="TempAnchorDestroy",e.AnchorEffectShow="AnchorEffectShow",e.AnchorEffectHide="AnchorEffectHide",e.AnchorSizeUpdate="AnchorSizeUpdate",e.SaveAnchorEffect="SaveAnchorEffect",e.FireEffectGISShow="FireEffectGISShow",e.FireEffectGISHide="FireEffectGISHide",e.FireEffectShow="FireEffectShow",e.FireEffectHide="FireEffectHide",e.FireEffectDrawExit="FireEffectDrawExit",e.FireEffectDestroy="FireEffectDestroy",e.SaveFireEffect="SaveFireEffect",e.CurveAnimationShow="CurveAnimationShow",e.CurveAnimationHide="CurveAnimationHide",e.CurveHide="CurveHide",e.CurveInit="CurveInit",e.CurveAnimationDestroy="CurveAnimationDestroy",e.TempCurveDestroy="TempCurveDestroy",e.CurveEffectShow="CurveEffectShow",e.CurveEffectHide="CurveEffectHide",e.SaveCurveEffect="SaveCurveEffect",e.FanScanGISShow="FanScanGISShow",e.FanScanGISHide="FanScanGISHide",e.FanScanDrawExit="FanScanDrawExit",e.FanScanDestroy="FanScanDestroy",e.FanScanShow="FanScanShow",e.FanScanHide="FanScanHide",e.SaveFanScan="SaveFanScan",e.RingScanGISShow="RingScanGISShow",e.RingScanGISHide="RingScanGISHide",e.RingScanDrawExit="RingScanDrawExit",e.RingScanDestroy="RingScanDestroy",e.RingScanShow="RingScanShow",e.RingScanHide="RingScanHide",e.SaveRingScan="SaveRingScan",e.WaterEffectGISShow="WaterEffectGISShow",e.WaterEffectGISHide="WaterEffectGISHide",e.WaterEffectDrawExit="WaterEffectDrawExit",e.WaterEffectDestroy="WaterEffectDestroy",e.WaterEffectShow="WaterEffectShow",e.WaterEffectHide="WaterEffectHide",e.SaveWaterEffect="SaveWaterEffect",e.MapEffectDestroy="MapEffectDestroy",e.MapEffectShow="MapEffectShow",e.MapEffectHide="MapEffectHide",e.SaveMapEffect="SaveMapEffect",e.SkyBoxShow="SkyBoxShow",e.SkyBoxHide="SkyBoxHide",e.SaveSkyBox="SaveSkyBox",e.RainEffectShow="RainEffectShow",e.RainEffectHide="RainEffectHide",e.SaveRainEffect="SaveRainEffect",e.RainEffectDestroy="RainEffectDestroy",e.handleStartDrawOrEditEvent="handleStartDrawOrEditEvent",e.handleExitDrawOrEditEvent="handleExitDrawOrEditEvent",e.LayerTreeNodeSelectionChanged="LayerTreeNodeSelectionChanged",e.EffectTreeNodeSelectionChanged="EffectTreeNodeSelectionChanged",e.AddResourceByViewToken="AddResourceByViewToken",e.AddResourcePanelShow="AddResourcePanelShow",e.UpdateResourcePanelShow="UpdateResourcePanelShow",e.LayerNameChanged="LayerNameChanged",e.EffectNameChanged="EffectNameChanged",e.EffectNamePanelChanged="EffectNamePanelChanged",e.LayerAdjustmentShow="LayerAdjustmentShow",e.LayerAdjustmentHide="LayerAdjustmentHide",e.TileLayerSourceChanged="TileLayerSourceChanged",e.ModelLayerTransformed="ModelLayerTransformed",e.ClearInvalidLayers="ClearInvalidLayers",e.PropertiesShowPanel="PropertiesShowPanel",e.LayerTreeNodeVisibleChanged="LayerTreeNodeVisibleChanged",e.layerEditNotificationShow="layerEditNotificationShow",e.layerEditNotificationHide="layerEditNotificationHide",e.LayerEditInit="LayerEditInit",e.ExitLayerEffectDrawOrEdit="ExitLayerEffectDrawOrEdit",e.LayerEditTreeUnselect="LayerEditTreeUnselect",e.DrawFlatEffect="DrawFlatEffect",e.DrawFlatEffectExit="DrawFlatEffectExit",e.EditFlatEffectExit="EditFlatEffectExit",e.initFlatEffect="initFlatEffect",e.DrawClippingEffect="DrawClippingEffect",e.DrawClippingEffectExit="DrawClippingEffectExit",e.EditClippingEffectExit="EditClippingEffectExit",e.initClippingEffect="initClippingEffect",e.LayerEditHideLayer="LayerEditHideLayer",e.RestoreLayerVisible="RestoreLayerVisible"}(i||(i={})),n.default=i},{}],106:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EditorEvent=n.EventEmmiter=n.eventBus=void 0;var i=e("../../../Event/EventEmmiter");n.EventEmmiter=i.default;var a=e("../EditorEvent");n.EditorEvent=a.default;var o=new i.default;n.eventBus=o},{"../../../Event/EventEmmiter":57,"../EditorEvent":105}],107:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.wallDirection=n.providerOptions=n.fireEffectTypeOptions=n.rainDensityOptions=n.mapStyleOptions=n.skyboxStyleOptions=n.curveTypeOptions=n.booleanOptions=n.defaultTiandituKey=n.regionSysOptionsWGS84=n.regionSysOptionsCGCS2000=n.coordSysOptions=n.mapSourceOptionMap=n.mapSourceOptions=n.priorityOptions=void 0;n.priorityOptions=[{text:"高",value:1},{text:"较高",value:2},{text:"中",value:3},{text:"较低",value:4},{text:"低",value:5},{text:"-",value:0,visible:!1}];n.mapSourceOptions=[{text:"天地图全球影像地图",value:"tiandituImg"},{text:"天地图全球道路地图",value:"tiandituRoad"},{text:"OSM全球道路地图",value:"osm"},{text:"高德全球影像地图",value:"amapImg"},{text:"高德全球道路地图",value:"amapRoad"},{text:"ArcGIS全球道路地图",value:"arcgis"},{text:"BingMap全球影像地图",value:"bingMap"},{text:"自定义影像资源",value:"custom"}];n.defaultTiandituKey="9fe0f60cd462f38c726d9a12565e4524";var i={tiandituImg:{name:"天地图全球影像地图",url:"https://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={x}&TILECOL={y}&tk=9fe0f60cd462f38c726d9a12565e4524",credit:"Tianditu",coordSys:"CGCS-2000",defaultLevel:18,maxLevel:18},tiandituRoad:{name:"天地图全球道路地图",url:"https://t0.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={x}&TILECOL={y}&tk=9fe0f60cd462f38c726d9a12565e4524",credit:"Tianditu",coordSys:"CGCS-2000",defaultLevel:18,maxLevel:18},osm:{name:"OSM全球道路地图",url:"https://c.tile.openstreetmap.org/{z}/{x}/{y}.png",credit:"OSM",coordSys:"WGS84",defaultLevel:18,maxLevel:18},amapImg:{name:"高德全球影像地图",url:"https://webst01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=6&x={x}&y={y}&z={z}",credit:"Amap",coordSys:"GCJ-02",defaultLevel:18,maxLevel:19},amapRoad:{name:"高德全球道路地图",url:"https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",credit:"Amap",coordSys:"GCJ-02",defaultLevel:18,maxLevel:19},arcgis:{name:"ArcGIS全球道路地图",url:"https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}",credit:"ArcGIS",coordSys:"GCJ-02",defaultLevel:18,maxLevel:19},bingMap:{name:"BingMap全球影像地图",url:"https://ecn.t3.tiles.virtualearth.net",credit:"BingMap",coordSys:"WGS84",defaultLevel:18,maxLevel:18},custom:{name:"自定义影像资源",url:"",credit:"None"}};n.mapSourceOptionMap=i;n.coordSysOptions=[{text:"无",value:"",epsg:""},{text:"CGCS2000",value:"CGCS2000",epsg:"4490"},{text:"WGS84",value:"WGS84",epsg:"4326"}];n.regionSysOptionsCGCS2000=[{text:"3-degree GaussKruger zone 25",value:"EPSG:4513"},{text:"3-degree GaussKruger zone 26",value:"EPSG:4514"},{text:"3-degree GaussKruger zone 27",value:"EPSG:4515"},{text:"3-degree GaussKruger zone 28",value:"EPSG:4516"},{text:"3-degree GaussKruger zone 29",value:"EPSG:4517"},{text:"3-degree GaussKruger zone 30",value:"EPSG:4518"},{text:"3-degree GaussKruger zone 31",value:"EPSG:4519"},{text:"3-degree GaussKruger zone 32",value:"EPSG:4520"},{text:"3-degree GaussKruger zone 33",value:"EPSG:4521"},{text:"3-degree GaussKruger zone 34",value:"EPSG:4522"},{text:"3-degree GaussKruger zone 35",value:"EPSG:4523"},{text:"3-degree GaussKruger zone 36",value:"EPSG:4524"},{text:"3-degree GaussKruger zone 37",value:"EPSG:4525"},{text:"3-degree GaussKruger zone 38",value:"EPSG:4526"},{text:"3-degree GaussKruger zone 39",value:"EPSG:4527"},{text:"3-degree GaussKruger zone 40",value:"EPSG:4528"},{text:"3-degree GaussKruger zone 41",value:"EPSG:4529"},{text:"3-degree GaussKruger zone 42",value:"EPSG:4530"},{text:"3-degree GaussKruger zone 43",value:"EPSG:4531"},{text:"3-degree GaussKruger zone 44",value:"EPSG:4532"},{text:"3-degree GaussKruger zone 45",value:"EPSG:4533"},{text:"3-degree GaussKruger CM 75E",value:"EPSG:4534"},{text:"3-degree GaussKruger CM 78E",value:"EPSG:4535"},{text:"3-degree GaussKruger CM 81E",value:"EPSG:4536"},{text:"3-degree GaussKruger CM 84E",value:"EPSG:4537"},{text:"3-degree GaussKruger CM 87E",value:"EPSG:4538"},{text:"3-degree GaussKruger CM 90E",value:"EPSG:4539"},{text:"3-degree GaussKruger CM 93E",value:"EPSG:4540"},{text:"3-degree GaussKruger CM 96E",value:"EPSG:4541"},{text:"3-degree GaussKruger CM 99E",value:"EPSG:4542"},{text:"3-degree GaussKruger CM 102E",value:"EPSG:4543"},{text:"3-degree GaussKruger CM 105E",value:"EPSG:4544"},{text:"3-degree GaussKruger CM 108E",value:"EPSG:4545"},{text:"3-degree GaussKruger CM 111E",value:"EPSG:4546"},{text:"3-degree GaussKruger CM 114E",value:"EPSG:4547"},{text:"3-degree GaussKruger CM 117E",value:"EPSG:4548"},{text:"3-degree GaussKruger CM 120E",value:"EPSG:4549"},{text:"3-degree GaussKruger CM 123E",value:"EPSG:4550"},{text:"3-degree GaussKruger CM 126E",value:"EPSG:4551"},{text:"3-degree GaussKruger CM 129E",value:"EPSG:4552"},{text:"3-degree GaussKruger CM 132E",value:"EPSG:4553"},{text:"3-degree GaussKruger CM 135E",value:"EPSG:4554"}];n.regionSysOptionsWGS84=[{text:"Pseudo-Mercator",value:"EPSG:3857"}];n.booleanOptions=[{text:"是",value:!0},{text:"否",value:!1}];n.curveTypeOptions=[{text:"轨迹",value:"trail"},{text:"流动",value:"flow"}];n.skyboxStyleOptions=[{text:"蓝天效果",value:"BlueSky"},{text:"多云效果",value:"CloudySky"},{text:"暗夜效果",value:"DarkNight"},{text:"星空效果",value:"Galaxy"}];n.mapStyleOptions=[{text:"深蓝",value:"DarkBlue"},{text:"墨绿",value:"DarkGreen"},{text:"自定义",value:"CustomColor"}];n.rainDensityOptions=[{text:"大雨",value:3},{text:"中雨",value:2},{text:"小雨",value:1},{text:"阴天",value:0}];n.fireEffectTypeOptions=[{text:"火焰",value:"Fire"},{text:"烟雾",value:"Smoke"}];n.providerOptions=[{text:"GoogleTile",value:"GoogleTile"},{text:"WMTS",value:"WMTS"},{text:"TMS",value:"TMS"}];n.wallDirection=[{text:"路径方向",value:"Tangent_false"},{text:"路径反向",value:"Tangent_true"}]},{}],108:[function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.handleClippingBoundary=n.getEffectManager=n.initClippingEffect=n.editClippingEffect=n.drawClippingEffect=n.initFlatEffect=n.editFlatEffect=n.drawFlatEffect=n.getInvalidLayerIds=n.hasInvalidLayer=n.playEffects=n.getMaxEffectNo=n.initSkyBox=n.initSplineCurves=n.initCurvesAnimation=n.switchStyle=n.editCurveTransformTool=n.generateUUID=n.initWallEffect=n.editWallEffect=n.updateWallEffectAttribute=n.drawWallEffect=n.listenToGISCurve=n.addAnchorTransformTool=n.listenToGISAnchor=n.defineCustomCoordSys=n.getLayerGeoErrDistance=n.setLayerVisualRange=n.getModelType=n.setPriority=n.updateParentPriority=n.isDefaultTiandituKey=n.initTiandituMap=n.getTileLayerId=n.getBoundingBoxById=n.getLayerConfigsObject=n.getSceneInfo=n.setEffectName=n.moveEffectInsideFolder=n.getEffect=n.getEffectName=n.setLayerName=n.getLayerName=n.getRealLayerInfo=n.getMaxGroupNo=n.addLayerData=n.getEffectData=n.getLayerData=n.clearSelectedComponents=n.resetCursor=n.setPickCursor=n.calculateAdjustTransformation=n.setTransformation=n.getTransformation=n.clearDashedLine=n.addDashedLine=n.clearIcon=n.addPickIcon=n.offViewerClick=n.onViewerClick=n.getDrawableContainer=n.getLayersByType=n.getLayer=n.isLayerIniting=n.getLayerBoundingBox=n.getLayerConfigById=n.clearLayerColor=n.setLayerColor=n.addModelAddedEventListener=n.getLayerBeyondDisitance=n.getFeatureType=n.setLayerRotateAngle=n.setLayerLatLon=n.setLayerAltitude=n.getTransformParams=n.onModelEditorChanged=n.closeModelEditor=n.openModelEditor=n.getCoordSysConfig=n.resetCoordSys=n.convertCoordSys=n.loadLayer=n.setLayerBorderLineVisible=n.setLayerCastShadow=n.setLayerReceiveShadow=n.getNameMaxNumByType=n.computeSegmentsIntersect=n.handleEffectEditEvent=n.updateRainEffectAttribute=n.initRainEffect=n.updateFireEffectAttribute=n.editFireEffect=n.initFireEffect=n.updateWaterEffectAttribute=n.initWaterEffect=n.editWaterEffect=n.drawWaterEffect=n.updateRingScanAttribute=n.initRingScan=n.editRingScan=n.drawRingScan=n.updateFanScanAttribute=n.initFanScan=n.editFanScan=n.drawFanScan=n.sourceMapChangeHandleMapStyle=n.setMapStyle=n.getBaseMap=n.setMapMaxLevel=n.removeImageryLayer=n.setMapSource=n.setLayerOpacity=n.isEffectRootVisible=n.getEffectTreeData=n.allEffectsAndFolderInside=n.removeEffect=n.removeLayer=n.renameLayer=n.moveEffect=n.moveLayer=n.updateEffectParentVisible=n.updateParentVisible=n.zoomToLayer=n.hideAllModelLayer=n.setLayerVisible=n.addGroup=n.addEffect=n.updateLayer=n.addLayer=n.getTypeNameByFileType=n.getEffectParentId=n.getParentId=n.getHomeViewConfig=n.setHomeView=n.gotoHomeView=n.getBaseHeight=n.getGlodon=n.unregisterViewer=n.registerViewer=void 0;var a,o,r=e("./options"),s=e("./options"),l=e("./EventBus");n.registerViewer=function(e,t){a=e,o=t};n.getGlodon=function(){return o};n.getBaseHeight=function(e){var t=e.lat,n=e.lon;return a.latLonToWorld({latLon:{lat:t,lon:n}})};n.gotoHomeView=function(){a.setCameraStatus(a.getHomeView())};var c=function(){var e=a.getCameraStatus().position;if(e){var t=e.z,n=a.worldToLatLon(e),i=n.lat,o=n.lon,r=a._camera.getYawPitch(),s=r.yaw;return{orientation:{pitch:r.pitch,yaw:s,roll:0},position:{alt:t,lat:i,lon:o}}}return null};n.getHomeViewConfig=c;n.setHomeView=function(){a.setHomeView(a.getCameraStatus()),a._config.homeView=c()};var d=function(e){return["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(e.typeName)>=0},u=function(e){return a.getLayerManager().getLayer(e)};n.getLayer=u;n.getLayersByType=function(e){return a.getLayerManager().getLayerByType(e)};var f=function(e){return e.indexOf("group_")>-1||"root"==e?a.getEffectManager().getObjectsInsideFoler(e):a.getEffectManager().getEffectObj(e)};n.getEffect=f;n.moveEffectInsideFolder=function(e,t){var n=a.getEffectManager().getObjectsInsideFoler(e.parentId);n&&n.children.splice(t,0,n.children.splice(0,1)[0])};var p=function(e,t){if(t){var n=o.Bimface.Viewer.ViewerGISEvent.ModelAdded,i=function(o){o===e&&(t(),a.removeEventListener(n,i))};a.addEventListener(n,i)}};n.getTypeNameByFileType=function(e){return["rvt","max"].indexOf(e)>=0?"BIMLayer":["shpzip"].indexOf(e)>=0?"FeatureLayer":["osgbzip","las","laszip","3dtzip"].indexOf(e)>=0?"TilesetLayer":"BIMLayer"};n.addLayer=function(e,t,n){var r=new o.Bimface.Layer[e.typeName](i({},e));a.getLayerManager().addLayer(r,t),r.show(),d(r)&&n&&p(r.id,n)};n.addEffect=function(e,t){a.getEffectManager().getEffect(e.id)||(t=t||a.getEffectManager().initEffect(e,!1),a.getEffectManager().addEffect(t,{id:e.id,name:e.name,parentId:e.parentId||"root"}))};n.initSkyBox=function(){return a.getEffectManager().initEffect({type:o.Bimface.Common.Type.EffectType.SkyBoxManager,params:{style:"BlueSky"}},!1)};n.addGroup=function(e){a.getEffectManager().addGroup({id:e.id,name:e.name,parentId:e.parentId})};n.updateLayer=function(e,t,n){var i=u(e);i&&d(i)&&(t.disableUserData=!1,i.update(t),n&&p(e,n))};n.playEffects=function(e){void 0===e&&(e=!1);var t=a.getEffectManager();t.getEffects({type:o.Bimface.Common.Type.EffectType.PrismPoint}).map((function(e){e&&e.play&&e.play()})),t.getEffectObjByType(t.effectAndFileObject,o.Bimface.Common.Type.EffectType.CurveAnimation).map((function(e){e&&e.isVisible&&e.effect&&e.effect.play&&(e.effect.stop(),e.effect.play())})),t.getEffectObjByType(t.effectAndFileObject,o.Bimface.Common.Type.EffectType.RingScan).map((function(e){e&&e.effect&&(e.isVisible&&e.effect.play(),!e.isVisible&&e.effect.hide())}));var n=t.getEffectObj("skybox");n&&(n.isVisible?n.effect.show():(n.effect.hide(),e&&setTimeout((function(){a.enableIBLBackground(!1)}),1e3)))};n.listenToGISAnchor=function(e){var t=new o.Bimface.Plugins.Anchor.AnchorManagerConfig;t.viewer=a;var n=new o.Bimface.Plugins.Anchor.AnchorManager(t),i=new o.Bimface.Plugins.Anchor.PrismPointConfig;i.position=e,i.duration=1500;var r={type:o.Bimface.Common.Type.EffectType.PrismPoint,params:i},s=a.getEffectManager().initEffect(r,!1);s.stop(),n.addItem(s),l.eventBus.trigger(l.EditorEvent.AnchorEffectShow,s),h(s)};var h=function(e){var t=new o.Bimface.Tiles.Interaction.PrismPointTransformTool({viewer:a,prismPoint:e});t.addEventListener("TransformFinished",(function(){l.eventBus.trigger(l.EditorEvent.AnchorPointUpdate,e)})),t.addEventListener("Exit",(function(){e&&e.play()}));var n=function(){t&&t.updateControl()};l.eventBus.on(l.EditorEvent.AnchorSizeUpdate,n),l.eventBus.on(l.EditorEvent.AnchorPointDestroy,(function(){t&&(l.eventBus.off(l.EditorEvent.AnchorSizeUpdate,n),t.destroy(),l.eventBus.trigger(l.EditorEvent.handleExitDrawOrEditEvent))}))};n.addAnchorTransformTool=h;n.listenToGISCurve=function(){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var e=new o.Bimface.Tiles.Interaction.DrawLineTool({viewer:a});e.addEventListener("DrawFinished",(function(){l.eventBus.trigger(l.EditorEvent.CurveAnimationHide),l.eventBus.trigger(l.EditorEvent.CurveEffectShow),m(e.getPointsData(),null,!1,null)})),l.eventBus.on(l.EditorEvent.CurveAnimationDestroy,(function(){e&&(l.eventBus.trigger(l.EditorEvent.handleExitDrawOrEditEvent),e.destroy())}))};var m=function(e,t,n,i){var r=V(),s=i&&i.isVisible,c=new o.Bimface.Tiles.Interaction.EditLineTool({viewer:a,points:e});n&&i&&a.getEffectManager().hide({ids:[i.id]}),c.addEventListener("TransformFinished",(function(){if(t&&!n){var e=b(c.getPointsData(),null);t.curves=e}n&&i.effect.getCurves()[0].setPoints(c.getPointsData())})),c.addEventListener("Exit",(function(){l.eventBus.trigger(l.EditorEvent.CurveEffectShow,void 0,c.getPointsData(),r),n&&i&&s&&a.getEffectManager().show({ids:[i.id]})})),l.eventBus.on(l.EditorEvent.CurveHide,(function(e){("all"==e||i&&i.id==e)&&(s=!1)})),l.eventBus.on(l.EditorEvent.CurveAnimationDestroy,(function(){c&&c.destroy(),n&&i&&s&&a.getEffectManager().show({ids:[i.id]}),i&&(i.effect.stop(),i.effect.play())})),n||l.eventBus.once(l.EditorEvent.CurveInit,(function e(t,n,i){if(i){var a=g(c.getPointsData(),t),o=f(n._selectedEffectGroup),r={id:i,typeName:t.type,type:t.type,name:t.name,params:{id:i,curves:a.curve.getCurves(),time:t.params.time,curveType:t.params.curveType,style:t.params.style,loop:t.params.loop,parentId:n._selectedEffectGroup.indexOf("group_")>-1||n._selectedEffectGroup.indexOf("root")>-1?n._selectedEffectGroup:o?o.parentId:"root"},isVisible:!0,style:t.params.style,parentId:n._selectedEffectGroup.indexOf("group_")>-1||n._selectedEffectGroup.indexOf("root")>-1?n._selectedEffectGroup:o?o.parentId:"root"};l.eventBus.fireEvent(l.EditorEvent.CurveEffectHide),l.eventBus.fireEvent(l.EditorEvent.SaveCurveEffect,r,a.curve),l.eventBus.off(l.EditorEvent.CurveInit,e)}}))};n.editCurveTransformTool=m;n.drawWallEffect=function(e){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var t=new o.Bimface.Tiles.Interaction.DrawAutoCloseLineTool({viewer:a});t.addEventListener("DrawFinished",(function(){l.eventBus.trigger(l.EditorEvent.EffectPanelShow,o.Bimface.Common.Type.EffectType.WallEffect),e(t.getPointsData()),l.eventBus.trigger(l.EditorEvent.EffectCrossHairHide,o.Bimface.Common.Type.EffectType.WallEffect)})),l.eventBus.on(l.EditorEvent.EffectCrossHairHide,(function(e){t&&e===o.Bimface.Common.Type.EffectType.WallEffect&&(l.eventBus.trigger(l.EditorEvent.handleExitDrawOrEditEvent),t.destroy())}))};n.editWallEffect=function(e,t,n,i){var r=new o.Bimface.Tiles.Interaction.EditFlapSurfaceTool({viewer:a,points:e,maxZ:t,hidePlane:!0});return r.addEventListener("TransformFinished",(function(){return n({points:r.getInitPointsData(),height:r.getCurrentHeight()})})),r.addEventListener("TransformChanged",(function(){return n({points:r.getInitPointsData(),height:r.getCurrentHeight()})})),r.addEventListener("Exit",i),r};var v=function(e,t){var n=["https://static.bimface.com/attach/c3c5766a96f6459bb1951128597c3942_yellow.png","https://static.bimface.com/attach/9de63e377a1b4a0e86f2ef86887db3d6_purple.png","https://static.bimface.com/attach/730ead5bb4b44b6f96936923cec755a9_green.png","https://static.bimface.com/attach/16ace53fa9d04d43a27db53f418376fb_red.png"],i=["https://static.bimface.com/attach/38d961b9abd04f50b1b030e180840522_yellow.png","https://static.bimface.com/attach/8e51d49ce4144c7db3ba5d51efabd139_purple.png","https://static.bimface.com/attach/698a5d8dca964d6ca09185f429cc30ec_green.png","https://static.bimface.com/attach/23e95ed1accf432e811e3817f6dfd305_orange.png"];return"number"==typeof t?(e&&e.setMap({src:n[t-1],enableColorOverride:!1},(function(){a.render()})),i[t-1]):i[n.indexOf(t)]};n.switchStyle=v;var g=function(e,t){e.map((function(e){e.z+=.2}));var n=b(e,t),i=new o.Bimface.Plugins.Animation.CurveAnimationConfig;return i.viewer=a,i.curves=n,i.loop=!t||t.params.loop,i.time=t?t.params.time:1500,i.type=t?t.params.curveType:"flow",{curve:new o.Bimface.Plugins.Animation.CurveAnimation(i),path:n}};n.initCurvesAnimation=g;var b=function(e,t){var n=[],i=new o.Bimface.Plugins.Geometry.SplineCurve({points:e,viewer:a,width:4,color:new o.Web.Graphics.Color(50,211,166,1),style:{lineType:"Continuous",lineStyle:null}});return v(i,t?t.params.style:1),n.push(i),n};n.initSplineCurves=b;n.generateUUID=function(){return o.Web.Lang.Utility.UUID.createUUID()};var y=function(e){var t=u(e);if(!t){var n=R(),i=null,a=function(t){t.children&&t.children.forEach((function(n){["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(n.typeName)>=0&&n.id===e&&(i=t.id),"GroupLayer"===n.typeName&&a(n)}))};return a(n),i}return t.parent.id};n.getParentId=y;n.getEffectParentId=function(e){var t=f(e);return t?t.parent?t.parent.id:t.parentId:null};var E=function(e,t){var n=u(e);n&&(d(n)&&!n.databagId||(t?n.show():n.hide()),"TerrainLayer"===n.typeName&&a.render())};n.setLayerVisible=E;n.hideAllModelLayer=function(){var e=a.getLayerManager().query(".BIMLayer .FeatureLayer .TilesetLayer").map((function(e){return e.id}));return e.forEach((function(e){return E(e,!1)})),e};n.loadLayer=function(e){return new Promise((function(t){var n=u(e);if(n&&d(n)&&!n.loaded){var i=n.isVisible;n.show();var r=o.Bimface.Viewer.ViewerGISEvent.ModelAdded,s=function(e){e===n.id&&(t(!0),i||n.hide(),a.removeEventListener(r,s))};a.addEventListener(r,s)}else t(!0)}))};var C=function(e,t){var n=u(e);n&&d(n)&&a.zoomToBoundingBox({boundingBox:n.getBoundingBox(),duration:t})};n.zoomToLayer=C;n.getBoundingBoxById=function(e){var t,n=u(e);return n?d(n)&&"loaded"===n.loadStatus?n.getBoundingBox():null===(t=n._config)||void 0===t?void 0:t.boundingBox:null};n.updateParentVisible=function(e){var t=u(e);t&&t.updateParentsVisible()};n.updateEffectParentVisible=function(e){var t=f(e);t&&a.getEffectManager().showEffectAndFile(t)};n.moveLayer=function(e,t,n){var i=u(e),a=u(t);if(i&&a){var o=i.parent.children.indexOf(i);i.parent.children.splice(o,1),a.children.splice(n,0,i);var r=U(e),s=U(i.parent.id),l=s.children.indexOf(r);s.children.splice(l,1),U(t).children.splice(n,0,r),i.parent=a}};n.moveEffect=function(e,t,n){var i=f(e),o=f(t);if(i&&o){var r=f(i.parentId).children.findIndex((function(t){return t.id==e}));f(i.parentId).children.splice(r,1),i&&o.children.splice(n,0,i),i.parent=o,i.parentId=o.id,i.isVisible&&!o.isVisible&&a.getEffectManager().handleParentVisibleShow(t),!i.isVisible&&o.isVisible&&1==o.children.length&&a.getEffectManager().handleParentVisibleHide(t)}};n.renameLayer=function(e,t){var n=u(e);n&&n.setName(t)};n.setLayerOpacity=function(e,t){var n=u(e);if(n){if("TerrainLayer"===n.typeName)a.getLayerManager().baseMap.setOpacity(t);else n.setOpacity(t);a.render()}};var w=function(e){delete e.protocol,"None"!==e.credit&&delete e.provider,a.getLayerManager().baseMap.setSource(e),a.render()};n.setMapSource=w;n.removeImageryLayer=function(){var e=a.getLayerManager().baseMap.tileManager,t=e.tileProvider.getBaseImageryLayer();e.globeLayer._tileset.invalidateImageryOfAllTiles(),e.tileProvider.removeImageryLayer(t.imageryProvider.id)};var I=function(e){a.getLayerManager().baseMap.setMaxLevel(e),a.render()};n.setMapMaxLevel=I;n.getBaseMap=function(){return a.getLayerManager().baseMap};n.setMapStyle=function(e,t){a.getLayerManager().baseMap[t](i(i({},e),{template:o.Bimface.Common.ImageStyle[e.template],color:new o.Web.Graphics.Color(e.color,e.colorOpacity)})),a.render()};n.sourceMapChangeHandleMapStyle=function(){var e=a.getEffectManager().getEffectObjByType(a.getEffectManager().effectAndFileObject,o.Bimface.Common.Type.EffectType.MapStyle)[0];if(e){var t=e.effect.getLastValidMapStyle();e.isVisible?a.getLayerManager().baseMap.setStyle(i(i({},t),{color:new o.Web.Graphics.Color(t.color.red,t.color.green,t.color.blue,t.colorOpacity)})):a.getLayerManager().baseMap.setStyle({}),a.render()}};n.drawFanScan=function(e){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var t=new o.Bimface.Tiles.Interaction.DrawFanTool({viewer:a});t.addEventListener("DrawFinished",(function(){e(t.getFanData()),l.eventBus.trigger(l.EditorEvent.FanScanDrawExit)})),l.eventBus.on(l.EditorEvent.FanScanDrawExit,(function(){t&&(t.exit(),t=null,l.eventBus.trigger(l.EditorEvent.handleExitDrawOrEditEvent))}))};n.editFanScan=function(e,t,n,r){var s=new o.Bimface.Tiles.Interaction.EditFanTool(i({viewer:a},e));return s.addEventListener("TransformFinished",(function(){return n()})),s.addEventListener("TransformChanged",(function(){return t(s.getFanData())})),s.addEventListener("Exit",(function(){return r()})),s};n.initFanScan=function(e){var t=new o.Bimface.Plugins.Animation.FanScanEffectConfig;return t.viewer=a,t.backgroundColor=new o.Web.Graphics.Color(e.backgroundColor,1),t.color=new o.Web.Graphics.Color(e.color,1),t.fanAngle=e.fanAngle,t.duration=e.duration,t.originPosition=e.originPosition,t.radius=e.radius,new o.Bimface.Plugins.Animation.FanScanEffect(t)};n.updateFanScanAttribute=function(e,t,n){if(e){switch(t){case"originPosition":e.setOriginPosition(n);break;case"radius":e.setRadius(n);break;case"duration":e.setDuration(n);break;case"color":e.setColor(new o.Web.Graphics.Color(n.color,n.colorOpacity));break;case"backgroundColor":e.setBackgroundColor(new o.Web.Graphics.Color(n.backgroundColor,n.backgroundColorOpacity));break;case"fanAngle":e.setFanAngle(n);break;case"enableComponentsScanned":e.enableComponentsScanned(n)}e.fanScanEffectImpl.update()}};n.drawRingScan=function(e){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var t=new o.Bimface.Tiles.Interaction.DrawRingTool({viewer:a});t.addEventListener("DrawFinished",(function(){e(t.getRingData()),l.eventBus.trigger(l.EditorEvent.RingScanDrawExit)})),l.eventBus.on(l.EditorEvent.RingScanDrawExit,(function(){t&&(t.exit(),t=null,l.eventBus.trigger(l.EditorEvent.handleExitDrawOrEditEvent))}))};n.editRingScan=function(e,t,n,r){var s=new o.Bimface.Tiles.Interaction.EditRingTool(i({viewer:a},e));return s.addEventListener("TransformFinished",(function(){return n()})),s.addEventListener("TransformChanged",(function(){return t(s.getRingData())})),s.addEventListener("Exit",(function(){return r()})),s};n.initRingScan=function(e){var t=new o.Bimface.Plugins.Animation.RingScanEffectConfig;return t.viewer=a,t.color=new o.Web.Graphics.Color(e.color,1),t.duration=e.duration,t.originPosition=e.originPosition,t.radius=e.radius,t.isEnableComponentsScanned=e.isEnableComponentsScanned,new o.Bimface.Plugins.Animation.RingScanEffect(t)};n.updateRingScanAttribute=function(e,t,n){if(e){switch(t){case"originPosition":e.setOriginPosition(n);break;case"radius":e.setRadius(n);break;case"duration":e.setDuration(n);break;case"isEnableComponentsScanned":e.enableComponentsScanned(n);break;case"color":e.setColor(new o.Web.Graphics.Color(n.color,n.colorOpacity))}e.ringScanEffectImpl.update()}};n.drawWaterEffect=function(e){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var t=new o.Bimface.Tiles.Interaction.DrawPolygonTool({viewer:a});t.addEventListener("DrawFinished",(function(){e(t.getPointsData()),l.eventBus.trigger(l.EditorEvent.WaterEffectDrawExit)})),l.eventBus.on(l.EditorEvent.WaterEffectDrawExit,(function(){t&&(t.exit(),t=null,l.eventBus.trigger(l.EditorEvent.handleExitDrawOrEditEvent))}))};n.editWaterEffect=function(e,t,n){var i=new o.Bimface.Tiles.Interaction.EditPolygonTool({viewer:a,points:e});return i.addEventListener("TransformFinished",(function(){return t(i.getPointsData())})),i.addEventListener("Exit",(function(){return n()})),i};n.initWaterEffect=function(e){var t=new o.Bimface.Plugins.Animation.WaterEffectConfig;return t.boundary=e.boundary,t.viewer=a,t.flow=e.flow,t.color=new o.Web.Graphics.Color(e.color,1),t.scale=e.scale,t.shadow=e.shadow,t.xDirection=e.xDirection,t.yDirection=e.yDirection,new o.Bimface.Plugins.Animation.WaterEffect(t)};n.updateWaterEffectAttribute=function(e,t,n){if(e)switch(t){case"boundary":e.setBoundary(n);break;case"scale":e.setScale(n);break;case"color":e.setColor(new o.Web.Graphics.Color(n.color,n.colorOpacity));break;case"shadow":e.setShadow(n);break;case"flow":e.setFlow(n);break;case"xDirection":e.setXDirection(n);break;case"yDirection":e.setYDirection(n)}};n.initWallEffect=function(e){var t=new o.Bimface.Plugins.Animation.WallEffectConfig;return t.viewer=a,t.direction=e.direction,t.path=e.path,t.streching=!0,t.duration=e.duration,t.height=e.height,t.color=new o.Web.Graphics.Color(e.color,e.opacity),t.isRepeat=e.isRepeat,new o.Bimface.Plugins.Animation.WallEffect(t)};n.updateWallEffectAttribute=function(e,t,n){if(e){switch(t){case"path":e.setPath(n);break;case"height":e.setHeight(Number(n));break;case"duration":e.setDuration(n);break;case"color":e.setColor(new o.Web.Graphics.Color(n.color,n.alpha));break;case"direction":e.setDirection({type:n.type,reverse:n.reverse});break;case"repeat":e.repeat(n)}e.update()}};n.initFireEffect=function(e){var t=new o.Bimface.Plugins.ParticleSystem.FireEffectConfig;t.position=e.position,t.scale=e.scale,t.fireType=e.fireType,t.color=e.color,t.smokeConcentration=e.smokeConcentration,t.viewer=a;var n=new o.Bimface.Plugins.ParticleSystem.FireEffect(t);return a.render(),n};n.editFireEffect=function(e,t,n){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var i=new o.Bimface.Tiles.Interaction.FireTransformTool({viewer:a,fire:e});return i.addEventListener("TransformFinished",(function(){return t()})),i.addEventListener("Exit",(function(){return n()})),i};n.updateFireEffectAttribute=function(e,t,n){if(e){switch(t){case"position":e.setPosition(n);break;case"scale":e.setScale(n);break;case"color":e.setColor(n);break;case"fireType":e.setType(n);break;case"smokeConcentration":e.setSmokeConcentration(n)}e.update()}};n.initRainEffect=function(e){var t=new o.Bimface.Plugins.WeatherEffect.RainConfig;return t.viewer=a,t.darkness=e.darkness,t.density=e.density,new o.Bimface.Plugins.WeatherEffect.Rain(t)};n.updateRainEffectAttribute=function(e,t,n){if(e){switch(t){case"darkness":e.setDarkness(n);break;case"density":e.setDensity(n)}e.update()}};n.handleEffectEditEvent=function(){var e=function(){a.getViewer().clearSelection()};l.eventBus.on(l.EditorEvent.handleStartDrawOrEditEvent,(function(){a.addEventListener("MouseClicked",e)})),l.eventBus.on(l.EditorEvent.handleExitDrawOrEditEvent,(function(){setTimeout((function(){a&&a.removeEventListener("MouseClicked",e)}),600)}))};n.computeSegmentsIntersect=function(e,t,n,i){var a=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x),o=(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x);if(a*o>0)return!1;var r=(n.x-e.x)*(i.y-e.y)-(n.y-e.y)*(i.x-e.x);if(r*((n.x-t.x)*(i.y-t.y)-(n.y-t.y)*(i.x-t.x))>0)return!1;var s=r/(o-a),l=s*(t.x-e.x),c=s*(t.y-e.y);return{x:e.x+l,y:e.y+c,z:0}};n.getNameMaxNumByType=function(e){return a.getEffectManager().getNameMaxNumByType(e)};n.setLayerReceiveShadow=function(e,t){var n=u(e);n&&n.enableReceiveShadow&&(n.enableReceiveShadow(t),a.render())};n.setLayerCastShadow=function(e,t){var n=u(e);if(n){if("TerrainLayer"===n.typeName)a.getLayerManager().baseMap.enableCastShadow(t);else n.enableCastShadow&&n.enableCastShadow(t);a.render()}};n.setLayerBorderLineVisible=function(e,t){var n=u(e);n&&n.setBorderLineVisible&&(n.setBorderLineVisible(t),a.render())};var M=function(e){var t,n,i,a=e.getBoundingBox();return a&&(t=(a.min.x+a.max.x)/2,n=(a.min.y+a.max.y)/2,i=(a.min.z+a.max.z)/2),{x:t,y:n,z:i}};n.getLayerBoundingBox=function(e){var t=u(e);return t&&d(t)?t.getBoundingBox():null};n.getLayerBeyondDisitance=function(e,t){var n=u(e);if(n&&d(n)&&n.loaded){var i=t||5e5,a=M(n),o=a.x,r=a.y;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))>i}return!1};var _;n.addModelAddedEventListener=function(e){var t=o.Bimface.Viewer.ViewerGISEvent.ModelAdded;a.addEventListener(t,e)};var S=function(e,t){var n=u(e);if(n){n.setTransformation([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),!1!==t&&C(e,0)}};n.resetCoordSys=S;var T=function(e,t){var n,i,o;return t?null===(n=a.getViewer().getModelManager().getModel(e.modelId))||void 0===n?void 0:n._config:(null===(i=e._config)||void 0===i?void 0:i.config)||(null===(o=a.getViewer().getModelManager().getModel(e.modelId))||void 0===o?void 0:o._config)};n.getLayerConfigById=function(e,t){var n=u(e);return n?T(n,t):null};n.convertCoordSys=function(e,t){var n,i,r,s=u(e);if(_=_||new o.Bimface.Common.CoordinateConvertor,s){var l=T(s),c=void 0,d=void 0,f=null===(r=null===(i=null==l?void 0:l.coordinateSystem)||void 0===i?void 0:i.projCS)||void 0===r?void 0:r.offset;!f||0===f[0]&&0===f[1]?(S(e,!1),c=(n=M(s)).x,d=n.y):(c=f[0],d=f[1]);var p=_.translateXY({x:c,y:d},t,"EPSG:4490");p.lon>360&&(p.lon%=360),p.lon>180&&(p.lon-=360);var h=a.latLonToWorld({latLon:p}),m=[1,0,0,0,0,1,0,0,0,0,1,0,h.x,h.y,0,1];s.setTransformation(m),C(e,0)}};var B;n.getCoordSysConfig=function(e){var t,n,i=u(e);if(i){var a=T(i),o=null===(n=null===(t=null==a?void 0:a.coordinateSystem)||void 0===t?void 0:t.projCS)||void 0===n?void 0:n.epsg;if(o){var s="EPSG:"+o,l="";if(r.regionSysOptionsCGCS2000.map((function(e){return e.value})).indexOf(s)>=0?l="CGCS2000":r.regionSysOptionsWGS84.map((function(e){return e.value})).indexOf(s)>=0&&(l="WGS84"),l)return{coordSys:l,region:s}}}return{coordSys:"",region:""}};var x=function(){B&&B.exit(),B=null};n.closeModelEditor=x;n.openModelEditor=function(e){x();var t=u(e);if(t&&d(t)){var n=o.Bimface.Plugins.ModelEditor,i=new n.ModelEditorToolbarConfig;i.viewer=a,i.modelId=t.customId||t.modelId,i.buttons={translate:!0,rotate:!0,scale:!0},i.rotationController={X:!1,Y:!1},i.scaleController={X:!1,Y:!1,Z:!1},(B=new n.ModelEditorToolbar(i)).show(),"TilesetLayer"==U(e).typeName&&(L(e),B.addEventListener(o.Bimface.Plugins.ModelEditor.ModelEditorToolbarEvent.ModelTransforming,(function(t){var n=u(e),i=U(e),a=window.THREE,o=t.transformation||n.getTransformation(),r=new a.Matrix4;r.elements=o,i.layerConfig&&i.layerConfig.edits&&i.layerConfig.edits.map((function(e){if(e.params.boundary=[],e.params.layerBoundary.map((function(t){e.params.boundary.push(t.clone().applyMatrix4(r))})),"clipping"===e.type){var t=n.getClippingManager();t.clippingItemMap.get(e.effectId).setBoundary(e.params.boundary),!e.isVisible&&t.hideItems([e.effectId])}}))})))}};n.onModelEditorChanged=function(e){if(B){var t=o.Bimface.Plugins.ModelEditor.ModelEditorToolbarEvent.ModelTransformEnd;B.addEventListener(t,e)}};n.removeLayer=function(e){var t=U(y(e)),n=U(e),i=t.children.indexOf(n);i>=0&&t.children.splice(i,1),x();var a=u(e);a&&a.parent.remove(a)};n.removeEffect=function(e){a.getEffectManager().remove({ids:[e]})};n.allEffectsAndFolderInside=function(e){if(!e)return null;var t=a.getEffectManager().getObjectsInsideFoler(e),n=[];return t.children&&t.children.forEach((function(e){n.push(e.id)})),n};var P=function(e){var t=u(e);if(t&&d(t)){var n=t.getTransformation(),i=o.Bimface.Utils.Transformation,r=i.getTranslation(n),s=i.getQuaternion(n),l=Math.round(i.quaternionToEulerAngles(s).z*(180/Math.PI));l<0&&(l+=360);var c=a.worldToLatLon(r);return{latitude:c.lat.toFixed(9),longitude:c.lon.toFixed(9),altitude:r.z.toFixed(3),basePoint:r,rotateAngle:l,transformation:n}}return null};n.getTransformParams=P;n.setLayerAltitude=function(e,t){var n=u(e);if(n&&d(n)&&!isNaN(Number(t))){var i=n.getTransformation();L(e),i[14]=Number(t),n.setTransformation(i),D(e)}};n.setLayerLatLon=function(e,t,n){var i=u(e);if(i&&d(i)&&!isNaN(Number(t))&&!isNaN(Number(n))){var o=a.latLonToWorld({latLon:{lat:Number(t),lon:Number(n)}}),r=i.getTransformation();L(e),r[12]=o.x,r[13]=o.y,i.setTransformation(r),D(e)}};n.setLayerRotateAngle=function(e,t){var n=u(e);if(n&&d(n)&&!isNaN(t)){var i=P(e),a=i.basePoint,o=i.rotateAngle;L(e);var r=(Number(t)-o)*(Math.PI/180);n.setRotationZ(a,r),D(e)}};var L=function(e){var t=u(e),n=U(e);if("TilesetLayer"==n.typeName){var i=window.THREE,a=t.getTransformation(),o=new i.Matrix4;o.elements=a;var r=o.clone().invert();n.layerConfig&&n.layerConfig.edits&&n.layerConfig.edits.map((function(e){var t=[];e.params.boundary.map((function(e){var n=new i.Vector3(e.x,e.y,e.z);t.push(n.applyMatrix4(r))})),e.params.layerBoundary=t}))}},D=function(e,t){void 0===t&&(t=null);var n=u(e),i=U(e);if("TilesetLayer"==i.typeName){var a=window.THREE,o=t||n.getTransformation(),r=new a.Matrix4;r.elements=o,i.layerConfig&&i.layerConfig.edits&&i.layerConfig.edits.map((function(e){if(e.params.boundary=[],e.params.layerBoundary.map((function(t){e.params.boundary.push(t.clone().applyMatrix4(r))})),"flat"===e.type){var t=n.getFlatManager();t.items[e.effectId].setBoundary(e.params.boundary),t.update()}else if("clipping"===e.type){var i=n.getClippingManager();i.clippingItemMap.get(e.effectId).setBoundary(e.params.boundary),!e.isVisible&&i.hideItems([e.effectId])}}))}};n.getFeatureType=function(e){var t=u(e);if(t&&"FeatureLayer"===t.typeName){var n=T(t);if(n)return{point:"点",line:"线",polygon:"面"}[n.metadata.FeatureType]}return""};n.setLayerColor=function(e,t,n){var i=u(e);i&&"FeatureLayer"===i.typeName&&(i.getPolygonFeatureManager().overrideColor({all:!0},new o.Web.Graphics.Color(t,n)),a.render())};n.clearLayerColor=function(e){var t=u(e);t&&"FeatureLayer"===t.typeName&&t.getPolygonFeatureManager().restoreColor({all:!0})};var k,O=function(e){var t=u(e);return!(!t||!d(t)||"loading"!==t.loadStatus)};n.isLayerIniting=O;var A,N=function(){if(!k||k._viewer._isDestroyed){var e=new o.Bimface.Plugins.Drawable.DrawableContainerConfig;e.viewer=a,k=new o.Bimface.Plugins.Drawable.DrawableContainer(e)}return k};n.getDrawableContainer=N;var V=function(){return A=A&&!A._manager.isDestroyed()?A:new o.Bimface.Plugins.ExternalObject.ExternalObjectManager(a)};n.onViewerClick=function(e){a.addEventListener("MouseClicked",e)};n.offViewerClick=function(e){a.removeEventListener("MouseClicked",e)};n.setPickCursor=function(){a.getDomElement().style.cursor="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjFweCIgaGVpZ2h0PSIyMXB4IiB2aWV3Qm94PSIwIDAgMjEgMjEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+5b2i54q257uT5ZCIPC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xMSw1IEwxMSwxMCBMMTYsMTAgTDE2LDExIEwxMSwxMSBMMTEsMTYgTDEwLDE2IEwxMCwxMSBMNSwxMSBMNSwxMCBMMTAsMTAgTDEwLDUgTDExLDUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTYzLjYlIiB5PSItNjMuNiUiIHdpZHRoPSIyMjcuMyUiIGhlaWdodD0iMjI3LjMlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMiI+CiAgICAgICAgICAgIDxmZU1vcnBob2xvZ3kgcmFkaXVzPSIxIiBvcGVyYXRvcj0iZGlsYXRlIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93U3ByZWFkT3V0ZXIxIj48L2ZlTW9ycGhvbG9neT4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49InNoYWRvd1NwcmVhZE91dGVyMSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4KICAgICAgICAgICAgPGZlQ29tcG9zaXRlIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiBpbjI9IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0ib3V0IiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb21wb3NpdGU+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IuWFtuS7luWKn+iDvSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCI+CiAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0yKSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMTEuNSw0LjUgTDExLjUsOS41IEwxNi41LDkuNSBMMTYuNSwxMS41IEwxMS41LDExLjUgTDExLjUsMTYuNSBMOS41LDE2LjUgTDkuNSwxMS41IEw0LjUsMTEuNSBMNC41LDkuNSBMOS41LDkuNSBMOS41LDQuNSBMMTEuNSw0LjUgWiIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=)10 10,auto"};var F;n.resetCursor=function(){a.getDomElement().style.cursor=""};n.addPickIcon=function(e){if(!F){var t=document.createElement("canvas");t.width=20,t.height=20;var n=t.getContext("2d");n.fillStyle="#FF9D0B",n.fillRect(0,8.5,20,3),n.fillRect(8.5,0,3,20),F=t.toDataURL()}var i=new o.Bimface.Plugins.Drawable.ImageConfig;i.worldPosition=e,i.src=F,i.width=20,i.height=20,i.opacity=1;var a=new o.Bimface.Plugins.Drawable.Image(i);N().addItem(a)};n.clearIcon=function(){N().clear()};var z=0,H=[];n.addDashedLine=function(e){var t=new o.Bimface.Plugins.Geometry.SplineCurve(e);t.setWidth(2),t.setColor(new o.Web.Graphics.Color("#FF9D0B",1)),t.setStyle({lineType:"Dashed",lineStyle:{dashLength:2,gapLength:1}}),t.setType("polyline");var n=V().loadObject({name:"dashedLine_"+z,object:t});H.push(n),z+=1};n.clearDashedLine=function(){H.length>0&&(V().removeByIds(H),H=[])};n.getTransformation=function(e){var t=u(e);return t&&d(t)&&!O(e)?t.getTransformation():null};n.setTransformation=function(e,t){var n=u(e);n&&d(n)&&!O(e)&&(L(e),n.setTransformation(t),D(e))};n.clearSelectedComponents=function(e){var t=u(e);t&&d(t)&&!O(e)&&t.model.clearSelectedComponents()};n.calculateAdjustTransformation=function(e,t,n){var i=u(e);if(i&&d(i)&&!O(e)){var a=window.THREE,o=new a.Vector3(t[0].x,t[0].y,t[0].z),r=new a.Vector3(t[1].x,t[1].y,t[1].z),s=new a.Vector3(n[0].x,n[0].y,n[0].z),l=new a.Vector3(n[1].x,n[1].y,n[1].z),c=r.clone().sub(o),f=l.clone().sub(s),p=new a.Vector2(c.x,c.y),h=new a.Vector2(f.x,f.y).angle()-p.angle(),m=s.clone().sub(o);L(e),i.setRotationZ(o,h),i.setTranslation({x:m.x,y:m.y,z:0}),D(e)}};var U=function(e){var t,n=u(e);if(!n){var i=R(),o=null,r=function(t){t.children&&t.children.forEach((function(t){["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(t.typeName)>=0&&t.id===e&&(o=t),"GroupLayer"===t.typeName&&r(t)}))};return r(i),o}if("root"===e)return{id:"root",children:a._config.resources};var s,l,c="TerrainLayer"===n.typeName,d=function(n){n.children&&n.children.some((function(n){return c?(n.id===e?s=n:n.id===a.getLayerManager().baseMap.id&&(l=n),!(!s||!l)||("GroupLayer"===n.typeName&&d(n),!1)):n.id===e?(t=n,!0):("GroupLayer"===n.typeName&&d(n),!1)}))};return d({id:"root",children:a._config.resources}),c&&(s.style=l.style,s.shadow=l.shadow,t=s),t};n.getLayerData=U;n.getEffectData=function(e){var t;if(!f(e))return null;if("root"===e)return{id:"root",children:a.getEffectManager().getEffectsObject()};var n=function(i){i.children&&i.children.some((function(i){return i.id===e?(t=i,!0):("effectGroup"===i.typeName&&n(i),!1)}))};return e.indexOf("group_")>-1?n({id:a.getEffectManager().getObjectsInsideFoler(e).parentId,children:a.getEffectManager().getObjectsInsideFoler(a.getEffectManager().getObjectsInsideFoler(e).parentId).children}):t=a.getEffectManager().getEffectObj(e),t};n.getEffectTreeData=function(){return a.getEffectManager().getEffectsObject()};n.isEffectRootVisible=function(){return a.getEffectManager().effectAndFileObject&&a.getEffectManager().effectAndFileObject.isVisible};n.addLayerData=function(e,t){a._config.resources.splice(t,0,e)};n.getMaxGroupNo=function(){var e=0,t=function(n){n.children&&n.children.forEach((function(n){var i=n.id.split("group_");if(2===i.length){var a=i[1];e=Math.max(e,Number(a))}"GroupLayer"===n.typeName&&t(n)}))};return t({id:"root",children:a._config.resources}),++e};n.getMaxEffectNo=function(e){var t=0,n=function(i){i.children&&i.children.map((function(i){var a=i.id.split(e);if(2==a.length){var o=a[1];t=Math.max(t,Number(o))}i.children&&n(i)}))};return n({children:a.getEffectManager().getEffectsObject()}),t};n.getRealLayerInfo=function(e,t){var n=[];a.getLayerManager().query(".BIMLayer .FeatureLayer .TilesetLayer").forEach((function(t){var i=t.id.toString();if(i.indexOf(e)>=0)n.push(i);else{var a=t.getModelId().toString();a.indexOf(e)>=0&&n.push(a)}}));var i={layerId:"layer_"+e,customId:void 0,name:t};if(n.length>0){var o=0;n.forEach((function(e){var t=e.split("_");if(t[2]){var n=Number(t[2]);n>o&&(o=n)}})),o+=1,i.layerId="layer_"+e+"_"+o,i.customId=i.layerId,i.name=t+"-"+o}return i};n.getLayerName=function(e){var t=u(e);return t?t.name:""};n.getEffectName=function(e){var t=f(e);return t?t.name:""};n.setLayerName=function(e,t){var n=u(e);n&&(n.name=t)};n.setEffectName=function(e,t){var n=f(e);n&&(n.name=t,l.eventBus.trigger(l.EditorEvent.EffectNamePanelChanged,t))};n.getSceneInfo=function(){return a._config};var R=function(){return a.getLayerManager().getLayerConfigsObject()};n.getLayerConfigsObject=R;var G=function(){if(u("layer_map_1"))return"layer_map_1";var e=a.getLayerManager().query(".TileLayer")[0];return e?e.id:""};n.getTileLayerId=G;n.initTiandituMap=function(){var e=U(G());if(e.url.indexOf("tianditu")>=0){var t=e.url.indexOf("img_w")>=0?s.mapSourceOptionMap.tiandituImg.url:s.mapSourceOptionMap.tiandituRoad.url,n=s.mapSourceOptionMap.tiandituImg.credit;w({url:t,credit:n}),I(e.maxLevel||s.mapSourceOptionMap.tiandituImg.defaultLevel)}};n.isDefaultTiandituKey=function(){var e=U(G());if(e.url.indexOf("tianditu")>=0&&e.url.split("&tk=")[1]===s.defaultTiandituKey)return!0;return!1};var j=function(e){var t=y(e);if(null!==t&&"root"!==t){var n=U(t),i=null;n.children.some((function(e){if(!e.priority)return i=0,!0;if(null===i)i=e.priority;else if(i!==e.priority)return i=0,!0})),n.priority=i||0,j(t)}};n.updateParentPriority=j;var W=function(e,t,n){void 0===n&&(n=!0);var i=U(e),a=u(e);i&&a&&(i.priority=t,a.priority=t,Array.isArray(i.children)&&i.children.forEach((function(e){W(e.id,t,!1)})),n&&j(e))};n.setPriority=W;n.getModelType=function(e){var t=u(e);return t?t._config.modelType:""};n.setLayerVisualRange=function(e,t){var n=u(e);if(n){if(n&&n.getRootGeoErrDistance)if(t)n.setVisualRange(t);else{var i=n.getRootGeoErrDistance();n.setVisualRange({min:0,max:i})}a.render()}};n.getLayerGeoErrDistance=function(e){var t=u(e);return t&&t.getRootGeoErrDistance?t.getRootGeoErrDistance():""};n.defineCustomCoordSys=function(e,t){var n;_=_||new o.Bimface.Common.CoordinateConvertor;var i=u(e);if(i){var a=T(i),r=null===(n=null==a?void 0:a.coordinateSystem)||void 0===n?void 0:n.projCS;r&&_.defineCustomCoordSys(t,r)}};n.hasInvalidLayer=function(e){var t=!1,n=function(e){e.children&&e.children.forEach((function(e){["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(e.typeName)>=0&&(e.databagId||e.viewToken||(t=!0)),"GroupLayer"===e.typeName&&n(e)}))};return n(e?U(e):R()),t};n.getInvalidLayerIds=function(){var e=[],t=function(n){n.children&&n.children.forEach((function(n){["BIMLayer","FeatureLayer","TilesetLayer"].indexOf(n.typeName)>=0&&(n.databagId||n.viewToken||e.push(n.id)),"GroupLayer"===n.typeName&&t(n)}))};return t(R()),e};n.unregisterViewer=function(){x(),a=null};n.drawFlatEffect=function(e){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var t=new o.Bimface.Tiles.Interaction.DrawSurfaceTool({viewer:a});t.addEventListener("DrawFinished",(function(){var n={points:t.getPointsData(),height:t.getMaxZ()+50};l.eventBus.trigger(l.EditorEvent.DrawFlatEffectExit),e(n)})),l.eventBus.once(l.EditorEvent.DrawFlatEffectExit,(function(){t&&(t.exit(),t=null,l.eventBus.trigger(l.EditorEvent.RestoreLayerVisible),l.eventBus.trigger(l.EditorEvent.handleExitDrawOrEditEvent))}))};n.editFlatEffect=function(e,t,n,i){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var r=new o.Bimface.Tiles.Interaction.EditFlapSurfaceTool({viewer:a,points:e.points,maxZ:e.maxZ});return r.addEventListener("TransformFinished",(function(){return t({points:r.getGroundPointsData(),height:r.getCurrentHeight()})})),r.addEventListener("TransformChanged",(function(){return n({points:r.getGroundPointsData(),height:r.getCurrentHeight()})})),r.addEventListener("Exit",i),r};n.initFlatEffect=function(e){var t=new o.Bimface.Plugins.Flats.FlatConfig;return t.elevation=e.elevation,t.boundary=e.boundary,t.layerIds=[e.layerId],new o.Bimface.Plugins.Flats.Flat(t)};n.drawClippingEffect=function(e){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var t=new o.Bimface.Tiles.Interaction.DrawSurfaceTool({viewer:a});t.addEventListener("DrawFinished",(function(){var n=t.getPointsData();l.eventBus.trigger(l.EditorEvent.DrawClippingEffectExit),e(n)})),l.eventBus.once(l.EditorEvent.DrawClippingEffectExit,(function(){t&&(t.exit(),t=null,l.eventBus.trigger(l.EditorEvent.RestoreLayerVisible),l.eventBus.trigger(l.EditorEvent.handleExitDrawOrEditEvent))}))};n.editClippingEffect=function(e,t,n){l.eventBus.trigger(l.EditorEvent.handleStartDrawOrEditEvent);var i=new o.Bimface.Tiles.Interaction.EditClipSurfaceTool({viewer:a,points:e.points});return i.addEventListener("TransformFinished",(function(){return t({points:i.getPointsData()})})),i.addEventListener("Exit",n),i};n.initClippingEffect=function(e){var t=new o.Bimface.Plugins.Clipping.ClippingConfig;return t.boundary=e.boundary,t.layerIds=[e.layerId],new o.Bimface.Plugins.Clipping.Clipping(t)};n.getEffectManager=function(){return a.getEffectManager()};n.handleClippingBoundary=function(e){var t=window.THREE,n=[];return e.map((function(e){var i=new t.Vector3(e.x,e.y,1e4),o=new t.Vector3(0,0,-1),r=a.getViewer().getComponentsByRaycaster(i,o,[]),s=r.length>0?r[0].position.z:0;n.push(new t.Vector3(e.x,e.y,s))})),n}},{"./EventBus":106,"./options":107}],109:[function(e,t,n){!function(e){var t,n,i,a,o,r,s='<svg><symbol id="bf-map" viewBox="0 0 1024 1024"><path d="M64 64h896v896H64z" fill="#EEEEEE" ></path><path d="M960 64v896H64V64h896z m-64 64H128v768h768V128z" fill="#999999" ></path><path d="M112.448 388.544l800 480-32.896 54.912-800-480z" fill="#979797" ></path><path d="M514.944 82.56l58.112 26.88-384 832-58.112-26.88 384-832zM704 256a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m0 64a64 64 0 1 0 0 128 64 64 0 0 0 0-128z" fill="#979797" ></path></symbol><symbol id="bf-terrain" viewBox="0 0 1024 1024"><path d="M960 871.04l-194.816-633.28a64 64 0 0 0-122.368 0L448 871.04h512z" fill="#EEEEEE" ></path><path d="M685.184 195.456a64 64 0 0 1 77.44 35.328l2.56 7.04L960 871.04H448l194.816-633.216a64 64 0 0 1 42.368-42.24zM704 256.64l-169.408 550.4h338.752L704 256.64z" fill="#999999" ></path><path d="M704 871.04L438.272 445.76a64 64 0 0 0-108.544 0L64 871.04h640z" fill="#EEEEEE" ></path><path d="M350.08 425.472a64 64 0 0 1 83.84 14.208l4.352 6.144L704 871.04H64l265.728-425.152a64 64 0 0 1 20.352-20.352z m33.92 54.272L179.392 807.04h409.152L384 479.744z" fill="#999999" ></path></symbol><symbol id="bf-file" viewBox="0 0 1024 1024"><path d="M128 64h512l256 256v640H128z" fill="#EEEEEE" ></path><path d="M640 64l256 256v640H128V64h512z m-26.56 64H192v768h640V346.56L613.44 128z" fill="#999999" ></path><path d="M640 64l256 256v64H576V64h64z m0 90.56V320h165.44L640 154.56z" fill="#979797" ></path></symbol><symbol id="bf-file-md-c" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248A32 32 0 0 1 896 205.248V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248A32 32 0 0 1 896 205.248V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224H704a32 32 0 0 1-32-32V32z" fill="#C8C8C8" ></path></symbol><symbol id="bf-folder-open-sm" viewBox="0 0 1024 1024"><path d="M384 128l64 64 482.112 4.928C945.6 196.928 960 209.088 960 224v580.928A27.52 27.52 0 0 1 931.968 832H92.032A27.52 27.52 0 0 1 64 804.928V155.072A27.52 27.52 0 0 1 92.032 128H384z m64 128l-64-64H128v576h768V256H448z" fill="#FACB66" ></path><path d="M448 256l-64-64H128v576h768V256z" fill="#FFFFFF" ></path><path d="M482.24 679.808h64v64h-64z" fill="#FFFFFF" ></path><path d="M72.512 384h878.976a64 64 0 0 1 63.488 71.936l-48 384A64 64 0 0 1 903.488 896H120.512a64 64 0 0 1-63.488-56.064l-48-384A64 64 0 0 1 72.512 384z" fill="#FACB66" ></path></symbol><symbol id="bf-folder-close-sm" viewBox="0 0 1024 1024"><path d="M384 128l64 64 482.112 4.928C945.6 196.928 960 209.088 960 224v580.928A27.52 27.52 0 0 1 931.968 832H92.032A27.52 27.52 0 0 1 64 804.928V155.072A27.52 27.52 0 0 1 92.032 128H384z m64 128l-64-64H128v576h768V256H448z" fill="#FACB66" ></path><path d="M448 256l-64-64H128v576h768V256z" fill="#FFFFFF" ></path><path d="M128 320h768q64 0 64 64v448q0 64-64 64H128q-64 0-64-64V384q0-64 64-64z" fill="#FACB66" ></path></symbol><symbol id="bf-folder-md" viewBox="0 0 1024 1024"><path d="M345.856 96L448 160h512c16.576 0 32 14.336 32 32v704c0 17.664-13.44 32-30.016 32H62.016C45.44 928 32 913.664 32 896V128c0-17.664 13.44-32 30.016-32h283.84z" fill="#FFFFFF" ></path><path d="M345.856 96L448 160h512c16.576 0 32 14.336 32 32v704c0 17.664-13.44 32-30.016 32H62.016C45.44 928 32 913.664 32 896V128c0-17.664 13.44-32 30.016-32h283.84zM448 192l-110.592-64H64v768h896V192H448z" fill="#FACB66" ></path><path d="M482.272 679.776h60v34.976h-60z" fill="#FFFFFF" ></path><path d="M64 320h896v576H64z" fill="#FACB66" ></path></symbol><symbol id="bf-model" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248A32 32 0 0 1 896 205.248V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M751.968 463.488v258.656L528 851.424V592.832z m-479.968 0l224 129.344v258.592l-224-129.28z m240-157.024l223.968 129.312L512 565.088 288 435.776z" fill="#00B0DC" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248A32 32 0 0 1 896 205.248V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224H704a32 32 0 0 1-32-32V32z" fill="#00B0DC" ></path></symbol><symbol id="bf-zip" viewBox="0 0 1024 1024"><path d="M864 0a32 32 0 0 1 32 32v960a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h704z" fill="#FFFFFF" ></path><path d="M864 0a32 32 0 0 1 32 32v960a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h704z m0 32H160v960h704V32z" fill="#7C00AC" ></path><path d="M448 32h64v96h-64zM512 128h64v96h-64zM448 224h64v96h-64zM512 320h64v96h-64zM448 416h64v96h-64z" fill="#C18EC9" ></path><path d="M448 512h128v128a32 32 0 0 1-32 32h-64a32 32 0 0 1-32-32v-128z" fill="#7C00AC" ></path></symbol><symbol id="bf-dwf" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#0092D0" ></path><path d="M765.568 410.752l0.704 1.888 25.504 105.6a8 8 0 0 1-8.224 9.856l-1.984-0.384-22.272-7.072-5.888 11.2-5.76 10.592c-1.792 3.2-3.456 6.08-5.12 8.832l-4.896 7.744a210.816 210.816 0 0 1-5.216 7.456l-15.136 22.08-17.6 21.248a155.744 155.744 0 0 1-6.432 7.808l-7.616 8.192-10.752 10.688-11.424 11.072-6.88 6.784-22.208 17.952c-11.744 9.472-19.84 15.36-28.8 20.8l-6.944 4.8-7.232 4.608-8.192 4.8-4.672 2.56-31.328 16.64-20.8 8.736-13.44 5.408a235.776 235.776 0 0 1-27.072 8.96c-6.08 2.144-12.416 4-19.488 5.76l-16.64 3.712-26.912 5.376-9.92 0.96-26.24 2.88-8.512 0.64-7.232 0.256h-3.456l-3.52-0.128-27.648 0.064-16.768-1.536a1125.792 1125.792 0 0 1-7.936-0.8 187.648 187.648 0 0 1-14.88-1.344l-10.304-1.6-37.952-7.456-42.88-13.152a8 8 0 0 1-5.6-7.584l0.256-2.048 1.184-4.672a8 8 0 0 1 9.472-5.792l27.712 6.24 13.792 3.072 22.336 2.688c12.864 1.6 21.568 2.432 30.56 2.528h5.44l23.104 0.384 17.664-1.44 14.272-0.928 6.24-0.704c1.12-0.128 2.272-0.32 3.52-0.512l8.416-1.44 22.624-4.256 5.376-0.832 5.696-1.6 31.04-7.36c4.224-1.024 8.064-1.92 11.552-2.848l9.6-2.624c5.76-1.664 10.464-3.296 14.4-5.024l3.68-1.28 7.232-2.912 7.84-3.488 14.56-7.104 19.328-9.664 23.936-15.232 8.48-5.632 7.104-5.024 6.4-4.928 3.168-2.56 3.456-2.56 6.912-5.44a247.04 247.04 0 0 0 7.424-6.528l22.144-20.8a42.24 42.24 0 0 1 1.44-1.28l5.088-5.952 13.088-14.784a161.28 161.28 0 0 0 15.488-20.032l13.856-19.296 11.616-20.224c3.456-5.44 6.496-11.072 9.536-17.536l5.696-12.64-22.272-5.248a8 8 0 0 1-5.056-11.904l1.28-1.6 77.216-76.032a8 8 0 0 1 12.672 1.952z" fill="#FFE600" ></path><path d="M564 249.376l1.536 1.376 3.2 3.616a8 8 0 0 1 0.704 9.6l-1.376 1.6-30.08 27.52-1.28 1.152-24.64 27.808-1.184 1.408a199.68 199.68 0 0 0-8.128 10.4l-3.68 5.28-13.536 18.752-10.08 17.216-3.104 5.184a125.696 125.696 0 0 0-7.552 13.44l-4.224 8.96-9.6 21.344-1.856 3.712-2.24 6.496-14.496 36.832-3.872 10.688c-2.24 6.496-3.776 11.84-4.704 16.512a168.512 168.512 0 0 0-2.08 8l-1.824 8.64a282.656 282.656 0 0 0-0.832 4.8l-3.2 21.504-1.76 12.128a161.088 161.088 0 0 1-0.32 2.016l-1.344 33.536a350.72 350.72 0 0 0-0.096 4.928l0.064 8.736 0.16 4.032 0.576 8.096 0.256 8 0.288 4.064 0.96 8.992 1.504 11.008 2.976 19.712 0.352 3.2 8.48 33.984 2.144 7.328 2.24 6.4 1.28 3.104 8 22.464 9.888 21.056c1.728 4.096 3.648 8.064 5.824 12.16l4.832 8.704 6.048 10.08 20.288-13.056a8 8 0 0 1 11.68 3.52l0.576 2.016 15.296 102.592a8 8 0 0 1-8.896 9.12l-1.92-0.48-101.152-39.424a8 8 0 0 1-3.52-12.224l1.568-1.6 18.496-14.176-8.992-17.568a265.568 265.568 0 0 1-11.136-24.896l-2.048-5.792-9.472-25.024-7.328-26.624-2.08-7.072a157.376 157.376 0 0 1-0.928-3.648l-1.728-7.936-1.728-9.472-5.44-32.608-2.624-36.544-0.416-10.112a209.216 209.216 0 0 1-0.064-4.512l0.192-8.576 0.256-4.288a217.408 217.408 0 0 1 0.288-14.656l0.8-11.296 0.704-7.04 4.16-34.016 7.36-33.44 2.464-9.92 1.216-4.416 2.432-8.032c0.832-2.592 1.728-5.12 2.688-7.712l1.312-4.544 2.976-9.088 1.728-4.704 4.16-10.432 13.664-31.456 17.536-31.808 2.592-4.48 4.896-7.808c0.8-1.216 1.6-2.368 2.432-3.52l2.464-3.328 15.744-22.72 16.032-19.04c3.68-4.672 7.648-9.216 11.936-13.76l4.48-4.704 4.8-4.736 9.792-9.28 13.6-13.184 35.232-27.776a8 8 0 0 1 9.408-0.32z" fill="#DC232D" ></path><path d="M343.04 368.32l0.512 1.92 2.944 23.136 5.472 0.32c11.936 0.32 23.872 1.28 35.648 2.944l11.744 1.856 26.464 4.48 26.688 7.04c3.04 0.704 6.176 1.504 9.44 2.464l8.224 2.56 5.984 2.112 34.848 13.184 24 11.744c13.952 6.816 23.744 12.192 32.64 18.24 5.6 3.136 10.624 6.272 16.256 10.112l8.96 6.368 5.12 3.744 24.512 18.656 22.592 20.8 8.32 7.968 6.912 7.072c3.2 3.424 6.08 6.72 8.896 10.144 6.848 6.944 12.896 14.176 20.416 24.16l19.648 26.752 5.6 9.6 11.84 19.488c3.744 6.4 6.752 11.968 9.184 17.216l2.272 5.12 11.712 25.12 8.416 23.584c5.28 14.08 9.472 28.576 12.416 42.976l4.608 18.4 2.24 15.456 3.968 28.992a8 8 0 0 1-4.448 8.32l-1.952 0.64-4.8 0.896a8 8 0 0 1-9.312-6.144l-5.92-27.712-1.568-6.72-1.44-7.104-10.88-33.12-2.88-8.032a168.32 168.32 0 0 0-1.44-3.552l-3.008-6.88-1.696-3.584-9.376-21.184-10.464-18.56-2.24-4.032a143.2 143.2 0 0 0-9.76-16.288l-16.192-22.72-3.328-4.96-4.8-5.6-23.008-29.216c-8.352-10.4-14.72-17.6-20.416-22.592l-5.44-5.44-5.952-5.44-7.04-5.952-25.824-20.608-26.144-16.768-4.608-2.816-8.384-4.864a189.984 189.984 0 0 0-11.84-6.016 182.08 182.08 0 0 0-19.392-9.504l-10.24-4.224-18.816-7.488a94.56 94.56 0 0 1-2.144-0.96l-10.944-3.104-20.608-6.144-5.152-1.408-4.608-1.056-5.952-1.12-3.808-0.576-23.424-4.416-23.168-2.016-8.32-0.864-8.512-0.416a244.672 244.672 0 0 0-4.8-0.032l-12.96 0.16 2.368 18.432a8 8 0 0 1-8.64 8.992l-1.888-0.416-98.336-33.472a8 8 0 0 1-3.84-12.384l1.44-1.44 85.024-67.52a8 8 0 0 1 12.416 3.296z" fill="#F9AE17" ></path></symbol><symbol id="bf-dwg" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M416 32l-0.032 512H512v96h352v32H512v96h-96v224h-32v-224H288v-96H160v-32h128v-96h95.968L384 32h32z m32 576h-96v96h96v-96z" fill="#3D69B0" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#3D69B0" ></path></symbol><symbol id="bf-dgn" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M697.472 738.976c-5.76 23.456-91.488 50.112-94.048-26.112v-43.2c-88.896 104.864-136.576 117.536-206.88 74.848l-39.84 151.52H269.216l143.232-576h87.552L412.48 683.84c36.64 43.712 106.56 27.808 191.04-60.608L667.2 320h79.552l-73.824 378.944c0.896 14.688 14.688 16.256 34.144 5.664" fill="#49BDCA" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#49BDCA" ></path></symbol><symbol id="bf-rvm" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M468.288 638.4l64.416-149.056a6.112 6.112 0 0 1 11.2 0l65.184 149.088h-140.8z m306.432 185.184L543.904 291.872a6.144 6.144 0 0 0-11.2 0L383.36 638.4H229.44a5.44 5.44 0 0 0-4.992 7.584l28.736 66.464c0.768 1.792 2.56 2.944 4.48 2.944h92.48l-46.528 108.096a6.144 6.144 0 0 0 5.568 8.736h71.36a6.112 6.112 0 0 0 5.6-3.648l48.864-113.184h207.68l49.472 113.12c0.96 2.208 3.2 3.648 5.6 3.648h71.296a6.144 6.144 0 0 0 5.6-8.64" fill="#3D1152" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#3D1152" ></path></symbol><symbol id="bf-osgb" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M512 288a288 288 0 1 1 0 576 288 288 0 0 1 0-576z m0 32a256 256 0 1 0 0 512 256 256 0 0 0 0-512z" fill="#3A8EC9" ></path><path d="M512 288c88.352 0 160 128.96 160 288s-71.648 288-160 288-160-128.96-160-288 71.648-288 160-288z m0 32c-65.632 0-128 112.256-128 256s62.368 256 128 256 128-112.256 128-256-62.368-256-128-256z" fill="#3A8EC9" ></path><path d="M735.488 394.336c6.656 8.192 12.896 16.768 18.624 25.664-51.264 39.712-140.544 66.016-242.112 66.016-101.568 0-190.848-26.304-242.144-66.016a288.96 288.96 0 0 1 18.656-25.664c43.392 33.92 126.272 59.68 223.488 59.68 95.776 0 177.6-24.96 221.568-58.176l1.92-1.504zM289.184 744.096a288.96 288.96 0 0 1-18.656-25.632c51.296-39.744 140.576-66.016 242.144-66.016 101.568 0 190.848 26.272 242.144 65.984a288.96 288.96 0 0 1-18.656 25.664c-43.392-33.92-126.272-59.648-223.488-59.648-95.776 0-177.6 24.96-221.568 58.144l-1.92 1.504z" fill="#3A8EC9" ></path><path d="M528 290.016v571.968h-32V290.016z" fill="#3A8EC9" ></path><path d="M784 560v32h-544v-32z" fill="#3A8EC9" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#3A8EC9" ></path></symbol><symbol id="bf-igms" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M491.712 352c-121.856 0-198.432 37.664-225.76 154.784l-21.312 92.224c-26.56 114.656 65.216 164.352 155.392 164.352h288.736c20.16 0 37.632-13.824 42.24-33.472l34.816-148.512c6.4-27.232-14.272-53.28-42.24-53.28h-73.856v0.192H556.48l-11.744 22.144a32.544 32.544 0 0 0 28.768 47.744h59.52l-21.056 90.848h-117.12c-83.04 0-107.584-26.56-94.848-81.152l23.488-102.624c11.776-49.952 54.432-78.304 146.432-78.304h194.272c20.16 0 37.664-13.92 42.24-33.6l9.568-41.184L491.712 352z" fill="#0082DC" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#0082DC" ></path></symbol><symbol id="bf-catia" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#005386" ></path><path d="M508.992 288.32c46.656-2.24 101.888 7.68 112.16 40.64 16.864 53.952-68.576 132.608-143.04 171.232-18.24 9.472-29.312 12.064-33.92 11.424-4.416-0.608-5.088-4.992-3.648-8 2.656-5.696 14.656-17.248 30.72-29.824 83.84-65.44 111.072-113.472 95.264-132.928-10.176-12.48-52.64-21.12-96.768-21.12-11.968 0-43.456 2.752-46.688-8.32-2.624-9.088 39.616-20.928 85.92-23.136M410.304 535.68c40-2.336 88.64 4.672 115.904 25.536 13.568 10.368 23.104 29.472 17.6 51.36-15.776 62.144-74.56 137.28-205.216 195.04-41.536 18.368-74.24 25.408-81.056 20.48-7.36-5.312 14.048-46.304 20.48-59.904 20.864-44.064 46.912-86.976 72.32-126.272 9.376-14.432 23.808-39.52 36.896-37.504 11.712 1.792-2.016 28.448-11.04 45.376-15.136 28.448-56.896 107.424-43.136 112.128 30.464 10.464 173.312-98.24 152.256-158.752-9.76-28.096-71.808-30.752-110.848-30.752-17.792 0-56.576 4.16-58.752-9.408-2.304-12.576 58.976-25.216 94.592-27.328" fill="#005386" ></path><path d="M719.296 469.12c24 4.352 43.584 7.712 48.064 17.856 5.056 11.488-21.12 12.16-34.272 12.48-63.168 1.184-101.28 2.432-103.168 23.904-2.496 27.616 26.976 55.456 56.096 94.432 26.56 35.616 56.8 70.72 48.096 103.52-10.88 40.8-60.896 49.44-108.512 49.44a581.696 581.696 0 0 1-107.04-10.88c-22.624-4.48-19.264-15.648-13.216-19.232 6.72-4.032 45.184-4.128 71.904-5.696 22.016-1.28 85.888-1.28 95.84-17.632 12.224-20.032-17.696-54.336-45.12-90.24-34.272-44.8-71.936-91.072-52-124.832 25.76-43.712 101.184-40.736 143.328-33.088" fill="#005386" ></path></symbol><symbol id="bf-ifc" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M568.384 611.488l138.56-138.56c-38.464-38.4-76.736-76.704-115.104-115.072l-35.328 35.84-45.536-45.568c0.16-0.192 0.992-1.152 1.92-2.048 13.792-13.856 27.648-27.712 41.504-41.536 21.984-21.952 54.208-22.08 76.224-0.16a73285.12 73285.12 0 0 1 130.112 130.112c21.632 21.696 21.504 54.08-0.064 75.648l-109.504 109.504a52.48 52.48 0 0 1-73.952 0.288c-2.816-2.752-5.696-5.44-8.832-8.448" fill="#DD0224" ></path><path d="M455.744 509.28l-138.4 138.368 114.816 114.816 35.968-36.032 45.536 45.536c-0.512 0.512-1.344 1.472-2.24 2.368-14.304 14.304-28.64 28.576-42.88 42.944a50.24 50.24 0 0 1-36.384 15.168 48.864 48.864 0 0 1-35.936-14.272c-44.832-44.704-89.6-89.44-134.304-134.272-19.424-19.488-18.912-52.576 1.12-72.736 36.576-36.8 73.344-73.408 110.016-110.08a51.52 51.52 0 0 1 35.488-15.584c13.696-0.48 26.048 3.968 36.416 13.12 3.744 3.296 7.104 7.008 10.784 10.656" fill="#AB007C" ></path><path d="M563.008 504.064l-138.56-138.592-114.784 114.784 36.032 36-45.312 45.344c0.192 0.128-0.192-0.032-0.448-0.32-15.68-15.712-31.776-31.04-46.848-47.296-18.208-19.616-17.216-51.232 1.728-70.272 44.288-44.512 88.704-88.896 133.184-133.216a52.032 52.032 0 0 1 72.448 0 28848.32 28848.32 0 0 1 111.776 111.68c19.968 20.128 19.392 52.384-1.024 73.728-2.432 2.56-5.024 4.992-8.192 8.16" fill="#004D95" ></path><path d="M679.52 603.712l44.352-44.384c0.8 0.736 1.856 1.664 2.848 2.656 13.76 13.76 27.52 27.488 41.216 41.248 21.376 21.408 21.44 53.344 0.096 74.688l-130.72 130.688c-21.184 21.216-53.12 21.184-74.336-0.032l-109.792-109.792a51.456 51.456 0 0 1 0.032-73.28c2.56-2.56 5.472-6.976 8.032-6.848 2.944 0.16 5.824 4.288 8.48 6.944l127.104 127.04c1.088 1.12 2.272 2.144 3.68 3.424 1.408-1.28 2.688-2.336 3.872-3.52 36.16-36.096 72.256-72.288 108.48-108.32 2.848-2.816 2.848-4.416 0-7.168-10.272-9.984-20.32-20.192-30.432-30.336-1.024-0.992-1.984-2.048-2.912-3.008" fill="#0093A8" ></path><path d="M357.6 619.872l103.712-103.712 44.704 44.8c-0.192 0.192-0.768 0.896-1.408 1.536-21.056 21.056-42.144 42.112-63.168 63.2-10.432 10.496-22.848 16.64-37.696 16.864a51.552 51.552 0 0 1-37.888-15.264c-2.72-2.624-5.632-5.056-8.256-7.424" fill="#004D95" ></path><path d="M452.896 405.888l103.616 103.616-45.664 45.664c-0.32-0.64-0.704-2.24-1.696-3.2-21.024-21.12-42.112-42.176-63.168-63.264-21.664-21.696-21.6-54.144 0.128-75.904l6.784-6.912" fill="#DD0224" ></path><path d="M512.416 566.08l1.344 1.152c22.08 22.112 44.288 44.096 66.208 66.368a51.84 51.84 0 0 1-0.704 72.896c-2.656 2.688-5.248 5.44-7.648 7.904l-103.776-103.808 44.576-44.512" fill="#AB007C" ></path><path d="M665.92 500.512l-103.04 102.976-44.576-44.576c1.12-0.736 2.912-1.504 4.192-2.784 21.056-20.928 42.016-41.92 63.008-62.912a51.744 51.744 0 0 1 71.84-0.608c2.912 2.816 5.92 5.472 8.576 7.904" fill="#0093A8" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#004D95" ></path></symbol><symbol id="bf-rvt" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M765.12 841.824l-0.736-0.544c-0.224-0.192-0.512-0.32-0.768-0.576-0.576-0.448-1.216-0.832-1.792-1.312l-2.048-1.472a734.976 734.976 0 0 1-22.624-16.224l-0.96-0.736c-2.624-1.888-5.248-3.84-7.904-5.824l-0.096-0.064-0.512-0.384a20.864 20.864 0 0 0-1.28-0.928l-7.168-5.44c-15.936-12.288-31.552-24.96-46.848-38.016-30.4-26.24-60.256-53.312-87.232-83.04-13.056-15.104-25.344-31.264-39.456-45.76-14.048-14.56-29.44-28.16-47.36-38.016a137.92 137.92 0 0 0-28.608-10.976 325.28 325.28 0 0 0-29.6-6.72c-12.096-2.24-24.256-4-36.48-5.44a606.848 606.848 0 0 0 61.312-10.72c27.904-6.496 55.488-15.648 80.768-29.632 12.576-7.04 24.544-15.616 34.24-26.624a80.064 80.064 0 0 0 19.104-39.04c2.56-14.464 1.6-29.12-0.48-43.328a154.592 154.592 0 0 0-12.672-41.408c-6.272-13.024-14.816-25.28-26.368-34.4-3.2-2.56-6.624-4.928-10.112-7.04a115.744 115.744 0 0 0-28.64-12.064 169.376 169.376 0 0 0-42.72-5.76c-14.4-0.224-28.64 0.608-42.976 2.4-7.104 1.088-14.304 2.88-20.704 6.592-6.4 3.648-11.584 9.536-14.4 16.256a66.528 66.528 0 0 0-4.544 21.12c-0.64 7.2-1.056 14.304-1.184 21.44-0.224 14.336 0.736 28.704 3.424 42.752 1.376 7.008 2.912 14.08 5.888 20.576a43.008 43.008 0 0 0 10.88 15.104l-0.736-0.64a41.6 41.6 0 0 1-9.28-13.472c-0.224-0.384-0.416-0.736-0.576-1.12l-0.032-0.16a94.592 94.592 0 0 1-5.44-20.448 207.168 207.168 0 0 1-2.688-42.528c0.192-7.104 0.768-14.208 1.44-21.28 0.736-7.04 1.92-14.144 4.736-20.48a31.616 31.616 0 0 1 13.76-14.976c5.952-3.456 12.896-5.184 19.84-6.08 28.064-2.976 57.152-3.84 84.32 4.032 5.856 1.696 11.616 3.744 17.12 6.336 7.232 3.264 14.112 7.392 20.256 12.416 10.88 8.768 18.88 20.608 24.96 33.216 5.952 12.704 9.952 26.368 12.192 40.288 2.048 13.888 2.944 28.16 0.384 41.824-0.64 3.584-1.536 7.072-2.72 10.432 0.064 0.064 0 0.096 0 0.096a75.264 75.264 0 0 1-15.36 26.368l-1.632 1.696c-8.96 9.632-19.936 17.408-31.552 23.808-24.768 13.664-52 22.528-79.552 28.992-27.328 6.24-55.136 11.008-83.072 13.056 0.192 0.192 0.416 0.32 0.608 0.544l1.024 0.864-0.096 0.736-0.064 0.384v0.16l-0.256 2.176c19.2 1.536 38.4 3.904 57.28 7.264 9.856 1.792 19.648 3.904 29.28 6.528 9.568 2.72 19.104 5.856 27.68 10.528 17.376 9.6 32.64 22.784 46.656 37.024 14.08 14.272 26.4 30.048 39.744 45.28 11.264 12.352 23.136 24 35.296 35.424l0.416 0.448 2.112 2.144 1.408 1.408 2.528 2.432c3.648 3.456 10.272 9.344 18.08 16.128l2.336 2.048 2.432 2.08c4.096 3.52 8.32 7.168 12.576 10.72l2.528 2.208 2.464 2.08 2.496 2.112 3.744 3.168 3.36 2.752 2.4 1.952 14.464 11.616c0.928 0.704 1.92 1.44 2.816 2.24l0.48 0.384c6.016 4.672 12.032 9.28 18.144 13.824l1.28 0.96c1.504 1.248 3.04 2.368 4.608 3.52 15.648 11.584 31.616 22.656 47.68 33.6l-1.216-0.864z" fill="#3DBBD8" ></path><path d="M768 843.872h-149.504c-11.04 0-21.376-5.664-27.328-15.008l-37.76-59.2-7.36-11.296a347.296 347.296 0 0 1-3.616-5.408l-3.36-5.056v-0.032a854.08 854.08 0 0 0-30.496-42.336c-26.944-34.784-46.336-52.48-56.64-56.704-0.16-0.096-0.32-0.192-0.448-0.192l-0.704-0.32h-0.128c-18.56-6.368-18.144 5.632-19.936 22.272l-0.032 0.704c-0.32 2.976-0.544 8.64-0.704 16.224a86.656 86.656 0 0 0-0.096 3.584l-0.096 3.36-0.096 5.024-0.032 3.072a7539.808 7539.808 0 0 0-0.64 73.696c-0.096 28.32-0.096 49.408-0.096 49.408l-80.032 28.192c6.176-45.504 11.776-91.008 17.344-136.544l6.944-58.432v-0.224l1.12-9.664 7.744-66.176c19.2 1.536 38.4 3.904 57.28 7.264 9.856 1.792 19.648 3.904 29.28 6.528 9.568 2.72 19.104 5.856 27.68 10.528 17.376 9.6 32.64 22.784 46.656 37.024 14.08 14.272 26.4 30.048 39.744 45.312 11.264 12.32 23.168 24 35.296 35.392l0.416 0.448 2.112 2.144 1.408 1.408 2.528 2.432c3.648 3.456 10.272 9.344 18.08 16.128l2.336 2.048 2.432 2.08c4.096 3.52 8.32 7.168 12.576 10.72l2.528 2.208 2.464 2.08 2.496 2.112 3.744 3.168 3.36 2.752 2.4 1.952c3.552 3.04 6.816 5.664 9.504 7.84a162.624 162.624 0 0 0 4.16 3.328l0.064 0.032c0.256 0.096 0.48 0.256 0.736 0.416 0.928 0.704 1.92 1.44 2.816 2.24l0.512 0.384c5.984 4.672 12.032 9.28 18.112 13.824l1.28 0.96c1.504 1.248 3.04 2.368 4.608 3.52 15.648 11.584 31.616 22.656 47.68 33.6 0.064 0 0.064 0.064 0.096 0.096 0.512 0.352 0.96 0.704 1.472 0.96l0.032 0.064 0.064 0.064z" fill="#2390AD" ></path><path d="M768 843.872h-149.504c-11.04 0-21.376-5.664-27.328-15.008l-37.76-59.2-7.36-11.296a347.296 347.296 0 0 1-3.616-5.408 196.064 196.064 0 0 0-3.584-5.184 0.384 0.384 0 0 0 0.224 0.096v0.032l0.96 0.64 0.064 0.032c65.696 43.808 121.12 25.44 150.464 39.136l0.032 0.032c0.256 0.096 0.48 0.256 0.736 0.416 0.928 0.704 1.92 1.44 2.816 2.24l0.512 0.384c5.984 4.672 12.032 9.28 18.112 13.824l1.28 0.96c1.504 1.248 3.04 2.368 4.608 3.52 15.648 11.584 31.616 22.656 47.68 33.6 0.064 0 0.064 0.064 0.096 0.096 0.512 0.352 0.96 0.704 1.472 0.96l0.032 0.064 0.064 0.064z" fill="#3AB9DB" ></path><path d="M609.28 350.752c-18.784 7.968-44.224 2.4-59.84-2.56a115.744 115.744 0 0 0-28.64-12.096 169.376 169.376 0 0 0-42.72-5.76c-14.4-0.224-28.64 0.608-42.976 2.4-7.104 1.088-14.304 2.88-20.704 6.592-6.4 3.648-11.584 9.536-14.4 16.256a66.528 66.528 0 0 0-4.544 21.12c-0.64 7.2-1.056 14.304-1.152 21.44-0.256 14.336 0.704 28.704 3.392 42.752 1.376 7.008 2.912 14.08 5.888 20.576a43.008 43.008 0 0 0 11.104 15.424c1.76 1.792 3.68 3.456 5.76 5.056 13.408 10.176 30.08 14.752 46.656 15.776 28.224 1.664 61.472-2.624 81.344-25.088 3.904-4.384 6.688-9.152 8.832-14.208 0.672-1.024 11.04-17.12 19.68-16.288 13.92 1.472 17.536 21.056 15.04 41.792 0.064 0.064 0 0.096 0 0.096a75.264 75.264 0 0 1-15.36 26.368l-1.632 1.696c-1.504 0.928-3.008 1.76-4.48 2.56a140.704 140.704 0 0 1-4.448 2.496 181.888 181.888 0 0 1-10.528 5.504c-3.104 1.6-6.176 3.072-9.248 4.48-1.536 0.704-3.104 1.44-4.672 2.048l-1.12 0.512-3.296 1.408-5.216 2.08a139.52 139.52 0 0 1-6.688 2.432c-1.696 0.64-3.392 1.216-5.12 1.76-0.864 0.32-1.792 0.576-2.624 0.896l-5.152 1.536a204.288 204.288 0 0 1-52.8 8.32 181.76 181.76 0 0 1-59.488-8.64c-34.336-10.112-59.36-39.264-76.224-67.2a287.36 287.36 0 0 1-23.712-49.824c0-0.032-0.064-0.032-0.064-0.096a588.16 588.16 0 0 1-5.248-29.12 605.984 605.984 0 0 1-5.184-41.984l-0.032-0.64c0-0.256 0-0.544-0.064-0.768-0.416-5.376-1.12-18.24-1.12-18.24-0.192-2.656-0.32-5.344-0.48-8v-65.28c0.64 0 1.312-0.064 1.92-0.128l2.368-0.128 2.08-0.096c1.088-0.064 2.208-0.16 3.264-0.16l2.24-0.096a891.104 891.104 0 0 1 6.624-0.32 1133.76 1133.76 0 0 1 80.384-1.184c12.096 0.224 24.16 0.384 36.192 0.672 6.72 0.192 13.44 0.384 20.16 0.672 45.504 2.016 92.992 6.944 134.592 26.88 0 0 31.296 27.936 38.016 48.192l0.032 0.064c2.56 7.872 1.504 14.592-6.624 18.048" fill="#0070B7" ></path><path d="M767.904 843.776a25.376 25.376 0 0 1-1.472-0.96c-0.032-0.064-0.032-0.128-0.096-0.128l-1.216-0.864-0.736-0.544c-0.224-0.192-0.512-0.32-0.768-0.576-0.576-0.448-1.216-0.832-1.792-1.312l-2.048-1.472a734.976 734.976 0 0 1-22.624-16.224l-0.96-0.736c-2.624-1.888-5.248-3.84-7.904-5.824l-0.096-0.064-0.512-0.384a20.864 20.864 0 0 0-1.28-0.928l-7.168-5.44c-15.936-12.288-31.552-24.96-46.848-38.016-30.4-26.24-60.256-53.312-87.232-83.04-13.056-15.104-25.344-31.264-39.456-45.76-14.048-14.56-29.44-28.16-47.36-38.016a137.92 137.92 0 0 0-28.608-10.976 325.28 325.28 0 0 0-29.6-6.72c-12.096-2.24-24.256-4-36.48-5.44a606.848 606.848 0 0 0 61.312-10.72c27.904-6.496 55.488-15.648 80.768-29.632 12.576-7.04 24.544-15.616 34.24-26.624 7.808-8.672 13.696-19.168 17.056-30.368 7.936-12.48 20.864-30.4 36.864-43.456 10.144-8.256 16.416-4.512 20.32 3.424v0.064c6.272 12.736 6.4 36.288 6.4 38.56a210.368 210.368 0 0 1-22.08 55.136c-5.76 9.92-11.776 19.648-18.176 29.12-5.696 8.48-11.232 15.072-13.248 25.28-3.296 16.832 3.936 26.88 11.52 40.416 13.472 24 51.84 77.888 75.776 110.912 1.152 1.696 2.336 3.296 3.52 4.864 2.08 2.88 3.968 5.536 5.76 7.936l1.248 1.664c0.736 1.024 1.44 2.048 2.24 3.072l3.744 5.152 1.312 1.792 2.24 3.072 23.2 31.968 5.824 8.032 2.784 3.808 5.12 7.04 2.336 3.264 2.976 4.096 2.688 3.712 2.336 3.2 1.984 2.784 4.192 5.856z" fill="#0070B7" ></path><path d="M594.72 473.536c-0.64 3.52-1.536 7.04-2.72 10.4 2.496-20.736-1.12-40.32-15.04-41.792-8.64-0.832-19.008 15.264-19.68 16.288 2.08-5.024 3.552-10.4 4.672-16 3.072-14.944 4.544-31.552 2.496-46.72a86.304 86.304 0 0 0-2.112-10.56c-3.84-14.72-12.704-30.048-25.408-39.392 7.232 3.264 14.112 7.392 20.256 12.416 10.88 8.768 18.88 20.608 24.96 33.216 5.952 12.704 9.952 26.368 12.192 40.288 2.048 13.888 2.944 28.16 0.384 41.856" fill="#1D4D78" ></path><path d="M575.008 512.096c-8.96 9.664-19.936 17.408-31.552 23.808-24.768 13.664-52 22.528-79.552 28.992-27.328 6.24-55.136 11.008-83.072 13.056a234.24 234.24 0 0 1-42.752-53.12l-0.96-1.6a270.048 270.048 0 0 1-24.704-54.752c-0.064-0.224-0.096-0.48-0.192-0.704a258.368 258.368 0 0 1-2.08-6.4c-3.968-12.832-7.232-25.792-9.952-38.912a308.896 308.896 0 0 0 20.48 44.32l3.2 5.504c16.896 27.936 41.92 57.088 76.256 67.2a230.528 230.528 0 0 0 25.28 6.112c9.664 1.6 21.12 2.848 34.208 2.56l3.2-0.096a187.712 187.712 0 0 0 33.536-4.192c5.184-1.088 10.56-2.464 16.064-4.064l5.152-1.536c0.832-0.32 1.76-0.544 2.624-0.896 1.728-0.544 3.424-1.12 5.12-1.76a139.52 139.52 0 0 0 6.688-2.432l5.216-2.08 3.296-1.408 1.12-0.512a228.672 228.672 0 0 0 13.92-6.528c2.048-0.96 4.096-2.048 6.144-3.104 1.472-0.768 2.944-1.568 4.384-2.4 1.472-0.768 2.944-1.6 4.448-2.464l4.48-2.56" fill="#0086C9" ></path><path d="M429.152 755.712l-0.128 20.544c-0.096 28.32-0.096 49.408-0.096 49.408l-80.032 28.192c6.176-45.504 11.776-91.008 17.344-136.544l6.944-58.432c1.824 16.64 7.168 48.96 21.76 71.68 9.44 14.656 26.56 27.392 33.984 25.184l0.224-0.032" fill="#35ABCD" ></path><path d="M666.432 433.76a283.008 283.008 0 0 1-0.32 11.264c-0.704 12.288-2.592 24.544-5.536 36.576 0-2.272-0.096-25.824-6.368-38.56v-0.064c-3.904-7.936-10.176-11.68-20.32-3.424-16 13.056-28.928 30.944-36.864 43.456 0.832-2.88 1.504-5.76 2.048-8.64 2.56-14.496 1.6-29.12-0.48-43.36a154.592 154.592 0 0 0-12.672-41.408c-6.272-13.024-14.816-25.28-26.368-34.4-3.2-2.56-6.624-4.928-10.112-7.04 15.616 4.992 41.056 10.56 59.84 2.592 8.096-3.456 9.184-10.176 6.592-18.048l-0.032-0.064c-6.72-20.256-38.016-48.224-38.016-48.224 37.856 18.176 65.92 53.344 79.488 93.056 0.8 2.272 1.536 4.512 2.144 6.816a89.536 89.536 0 0 1 2.24 8.512c0.64 2.496 1.184 5.024 1.6 7.52 0.32 1.44 0.608 2.944 0.8 4.48 0.096 0.224 0.096 0.512 0.16 0.768 0.32 2.24 0.672 4.544 0.928 6.816 0.032 0.256 0.096 0.48 0.096 0.768a118.688 118.688 0 0 1 0.704 7.808 173.184 173.184 0 0 1 0.448 12.8" fill="#0079BC" ></path><path d="M459.2 492.384c-13.024 0.512-28.96-1.824-35.68-14.496a52.704 52.704 0 0 1-4.8-17.472c-2.88-21.568-9.024-68.64 23.552-71.264 22.976-1.856 68.544-11.68 78.816 26.304 10.336 37.984 2.816 74.368-61.92 76.928m105.28-96.64a86.304 86.304 0 0 0-2.112-10.56c-3.84-14.72-12.704-30.08-25.408-39.424a117.984 117.984 0 0 0-17.12-6.336c-27.2-7.84-56.256-7.04-84.32-4.064a53.696 53.696 0 0 0-19.84 6.08 31.616 31.616 0 0 0-13.76 15.04 67.04 67.04 0 0 0-4.736 20.448c-0.672 7.04-1.28 14.176-1.44 21.28-0.512 14.24 0.224 28.48 2.656 42.528 1.28 6.976 2.688 13.984 5.44 20.48l0.064 0.128 0.544 1.12c2.336 4.8 5.376 9.344 9.28 13.44l0.768 0.672 0.128 0.192a52.704 52.704 0 0 0 5.856 5.152c13.408 10.208 30.08 14.784 46.656 15.808 28.224 1.664 61.472-2.624 81.344-25.088 3.904-4.384 6.688-9.152 8.832-14.208 2.08-5.024 3.552-10.4 4.672-16 3.072-14.944 4.544-31.552 2.496-46.72" fill="#283558" ></path><path d="M377.344 581.28l-7.424 67.2-7.392 68.384a10769.6 10769.6 0 0 0-13.632 136.992L288 830.24V327.008c0 6.4 0.16 12.8 0.448 19.2v3.296c0.736 14.816 2.144 29.376 4.032 44.064 3.104 23.2 7.584 46.24 14.016 68.832 6.496 22.56 15.648 44.48 27.744 64.704 11.84 19.84 25.792 38.4 43.104 54.176" fill="#18426F" ></path><path d="M382.464 579.36l-0.096 0.736-0.064 0.384v0.16l-0.256 2.176-7.744 66.176-1.12 9.664v0.224l-6.944 58.432a9954.464 9954.464 0 0 1-17.344 136.544c4.16-45.696 8.864-91.328 13.632-136.96l7.392-68.416 7.424-67.2c-17.28-15.808-31.264-34.368-43.104-54.176a273.12 273.12 0 0 1-27.744-64.704c-6.4-22.592-10.88-45.632-14.016-68.8-1.92-14.72-3.296-29.28-4.032-44.096v-3.264c-0.32-6.432-0.448-12.8-0.448-19.232v-3.36c0.16 2.624 1.184 20.832 1.6 26.208 0.064 0.224 0.064 0.512 0.064 0.768l0.032 0.64c1.216 14.08 2.976 28.064 5.184 41.984 1.504 9.728 3.264 19.488 5.248 29.12 0 0.064 0.064 0.064 0.064 0.096a428.736 428.736 0 0 0 11.776 44.576c0.032 0.256 0.16 0.48 0.256 0.736l0.224 0.736a270.048 270.048 0 0 0 24.704 54.72l1.696 3.04c-0.224-0.48-0.544-0.96-0.768-1.472a234.24 234.24 0 0 0 42.752 53.152c0.192 0.192 0.416 0.32 0.608 0.544l1.024 0.864z" fill="#3DBBD8" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#0070B7" ></path></symbol><symbol id="bf-nwd" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M630.912 826.464h-5.952s-52.704-63.808-100.544-126.848c-38.816-51.2-72.832-110.208-93.76-102.016-12.576 4.992-12.8 47.456-12.64 89.6 0.224 55.68 0.768 113.888 0.768 113.888l-27.744 25.376H288V310.4l0.192 1.504c0 0.224 0 0.416 0.064 0.64 0.032 0.512 0.064 1.12 0.16 1.632l0.224 2.112c0 0.384 0.032 0.8 0.128 1.184l0.128 1.152 0.16 1.216 0.064 0.896c0.16 0.896 0.224 1.76 0.32 2.784 1.728 17.504 3.744 34.976 5.888 52.416 2.72 21.76 5.632 43.584 8.8 65.312 6.272 43.52 13.12 86.944 21.024 130.176 8.224 43.2 16.928 86.304 27.616 128.96 8.128 32.768 17.184 65.28 28.128 97.28l0.128 0.416 2.88 8.576c0.992 2.912 2.016 5.824 3.072 8.704l3.136 8.544-0.064-0.256v-0.256a3046.432 3046.432 0 0 1-9.088-97.152 2405.504 2405.504 0 0 1-6.08-97.984 1060.704 1060.704 0 0 1 0.096-98.144c0.96-16.32 2.496-32.576 5.92-48.48 1.824-7.872 4.032-15.808 8-22.752a26.368 26.368 0 0 1 7.68-8.736 15.36 15.36 0 0 1 10.88-2.304c7.616 1.28 14.4 6.368 20.416 11.68 5.952 5.44 11.392 11.52 16.512 17.824 10.208 12.736 19.264 26.368 27.968 40.224 17.216 27.776 32.704 56.64 47.712 85.696 29.952 58.176 56.96 117.888 86.592 176.32a748.736 748.736 0 0 1 4.544 9.024l2.272 4.48 8.544 16.544 1.824 3.456c0.288 0.512 0.544 0.96 0.768 1.472l0.768 1.44c1.984 3.776 3.52 6.752 4.512 8.544l0.384 0.64 0.48 0.96 0.16 0.32M736 555.008v271.456l-20.96-31.392-0.32-0.448-1.12-1.664-0.224-0.32-0.64-0.96-0.096-0.192-0.16-0.16-0.384-0.64-0.96-1.44-0.32-0.416-0.096-0.192-0.128-0.224-0.224-0.32-0.448-0.704-0.128-0.16-0.448-0.672-0.288-0.384-0.32-0.416-0.256-0.448-0.8-1.248-23.36-35.968-27.168-40.864c0.416-0.096 0.8-0.128 1.216-0.352 0.32-0.16 0.736-0.288 1.152-0.512l0.16-0.032a15.584 15.584 0 0 0 6.56-5.344c2.432-3.424 4.096-7.392 5.248-11.392 2.24-8.096 3.2-16.48 3.872-24.768 1.12-16.64 0.96-33.344 0.32-49.92-0.32-8.32-0.704-16.544-1.28-24.832v-0.128l0.16-2.24 0.256-4.96 0.32-5.344 0.544-8.768 0.32-4.64 0.32-4.768 0.48-5.92v-0.128l0.416-5.888 0.512-6.176 0.384-4.608 0.32-3.36 0.32-3.424 0.64-6.88c0.16-1.088 0.256-2.24 0.384-3.424a349.248 349.248 0 0 1 1.504-13.568 1186625.472 1186625.472 0 0 1 1.248-9.92l0.64-4.864 0.736-4.768 0.48-3.072c0.384-2.048 0.672-4.064 1.024-6.016a44.48 44.48 0 0 1 0.448-2.56l0.064-0.32c0.224-1.088 0.384-2.112 0.64-3.168 0.096-0.832 0.288-1.632 0.48-2.464 0.32-1.664 0.704-3.328 1.056-4.928 0.576-2.368 1.152-4.64 1.728-6.752l0.576-2.112c0.192-0.64 0.416-1.344 0.576-2.048l0.64-1.824c0.224-0.576 0.384-1.152 0.64-1.728l0.384-1.088 0.64-1.664a18.048 18.048 0 0 1 3.744-6.496l0.64-0.736c0.352-0.32 0.672-0.64 1.024-0.832a4.16 4.16 0 0 1 0.8-0.544 4.8 4.8 0 0 1 1.696-0.576C722.88 434.752 736 555.008 736 555.008" fill="#08723A" ></path><path d="M736 826.464h-105.056l-0.192-0.32-0.48-0.96-0.352-0.64c-0.992-1.792-2.56-4.768-4.544-8.544l-0.768-1.44-0.768-1.472-1.824-3.456-8.544-16.576-2.24-4.448a748.8 748.8 0 0 0-4.544-9.024c-14.624-29.312-28.128-59.136-42.112-88.8-13.952-29.536-28.16-59.072-43.008-88.288a910.304 910.304 0 0 0-7.552-14.624c-2.56-4.896-5.088-9.76-7.68-14.624-1.184-2.112-2.304-4.32-3.52-6.432a871.648 871.648 0 0 0-28.704-50.368c-8.64-13.92-17.664-27.648-27.904-40.512a157.888 157.888 0 0 0-16.736-18.24c-6.144-5.408-12.992-10.848-21.696-12.32a17.408 17.408 0 0 0-12.544 2.72 28.832 28.832 0 0 0-8.416 9.6c-4.16 7.328-6.368 15.36-8.16 23.456a322.624 322.624 0 0 0-5.76 48.864c-1.696 32.768-0.992 65.536 0.32 98.272a2337.28 2337.28 0 0 0 12.896 159.744l0.128 1.152v0.224l0.448 4.064 0.256 2.56 0.352 3.36c0.096 1.184 0.224 2.368 0.416 3.552l0.032 0.416 0.416 3.584c0.032 0.576 0.064 1.152 0.16 1.76 0.224 1.856 0.448 3.52 0.576 5.12 0.096 1.088 0.224 2.176 0.416 3.296l0.16 1.376 0.544 4.896-9.472-28.16c-3.424-10.4-6.24-21.056-9.408-31.552-3.232-10.496-5.856-21.12-8.672-31.776-2.816-10.624-5.664-21.216-8.064-31.936a2308.64 2308.64 0 0 1-26.784-128.96 3578.88 3578.88 0 0 1-21.824-129.984c-3.296-21.728-6.336-43.52-9.28-65.28-2.912-21.28-5.76-42.496-8.32-63.84L288.032 310.4h103.2l0.256 0.448 72.48 108.48-20.576-30.08 33.856 51.648 34.144 51.456 68.32 102.848 69.024 102.4 34.56 51.168 25.472 36.992 0.32 0.416 0.256 0.384 0.448 0.64 0.128 0.224 0.448 0.64 0.224 0.32v0.064l0.128 0.192 0.128 0.192 0.256 0.416 0.96 1.44 0.416 0.64 0.16 0.192 0.128 0.16 0.64 0.96 0.192 0.32 1.12 1.664 0.32 0.448 20.96 31.36z" fill="#65B184" ></path><path d="M673.344 664.704a129.344 129.344 0 0 1-3.104 24.544 38.4 38.4 0 0 1-4.544 11.392 14.304 14.304 0 0 1-8 6.176c0.224-0.128 0.384-0.32 0.576-0.48a4.704 4.704 0 0 0 1.024-1.664 5.248 5.248 0 0 0 0.32-0.864 8.064 8.064 0 0 0 0.416-1.92 2.88 2.88 0 0 0 0.16-0.896l0.128-1.568a31.808 31.808 0 0 0-0.064-4.096c-0.032-0.576-0.064-1.184-0.16-1.856a46.784 46.784 0 0 0-1.12-7.296 65.152 65.152 0 0 0-3.488-12.608 83.072 83.072 0 0 0-1.824-4.896c-13.248-33.088-27.36-63.84-47.232-82.112l-0.64-0.512 1.152-0.224c7.424-2.4 8.224-25.6 7.776-55.808 0 0 0.96-5.76 2.624-14.016v-0.096c3.872-19.712 11.52-53.6 18.72-58.24 7.584-4.96 18.112 11.84 21.568 17.952 2.272 13.408 4.416 26.816 6.4 40.256 2.336 16.416 4.64 32.896 6.208 49.408 1.728 16.48 2.496 33.088 2.976 49.696 0.544 16.608 0.96 33.216 0.128 49.728" fill="#24713C" ></path><path d="M660.32 699.424l-0.128 1.568a2.88 2.88 0 0 1-0.16 0.896 8.064 8.064 0 0 1-0.416 1.92 5.248 5.248 0 0 1-0.32 0.864 4.704 4.704 0 0 1-1.6 2.144l-0.064 0.064-0.064 0.032-0.544 0.128-6.848-10.368-68.352-102.848-69.056-102.4-34.496-51.2-12.384-18.112c28.928 40.864 87.072 118.912 139.744 163.776l0.192 0.16 0.64 0.512c19.84 18.24 33.92 49.024 47.2 82.112a83.072 83.072 0 0 1 3.264 9.376 70.24 70.24 0 0 1 2.048 8.128 46.784 46.784 0 0 1 1.12 7.296c0.096 0.64 0.128 1.28 0.16 1.856a31.808 31.808 0 0 1 0.064 4.096" fill="#509970" ></path><path d="M736 555.008v271.456l-20.96-31.392-0.32-0.448-1.12-1.664-0.224-0.32-0.64-0.96-0.096-0.192-0.16-0.16-0.384-0.64-0.96-1.44-0.32-0.416-0.096-0.192-0.128-0.224-0.224-0.32-0.448-0.704-0.128-0.16-0.448-0.672-0.288-0.384-0.32-0.416-0.256-0.448-0.8-1.248-23.36-35.968-27.168-40.864c0.416-0.096 0.8-0.128 1.216-0.352 0.32-0.16 0.736-0.288 1.152-0.512l0.16-0.032a15.584 15.584 0 0 0 6.56-5.344c2.432-3.424 4.096-7.392 5.248-11.392 2.24-8.096 3.2-16.48 3.872-24.768 1.12-16.64 0.96-33.344 0.32-49.92-0.32-8.32-0.704-16.544-1.28-24.832v-0.128l0.16-2.24 0.256-4.96 0.32-5.344 0.544-8.768 0.32-4.64 0.32-4.768 0.48-5.92v-0.128l0.416-5.888 0.512-6.176 0.384-4.608 0.32-3.36 0.32-3.424 0.64-6.88c0.16-1.088 0.256-2.24 0.384-3.424a349.248 349.248 0 0 1 1.504-13.568 1186625.472 1186625.472 0 0 1 1.248-9.92l0.64-4.864 0.736-4.768 0.48-3.072c0.384-2.048 0.672-4.064 1.024-6.016a44.48 44.48 0 0 1 0.448-2.56l0.064-0.32c0.224-1.088 0.384-2.112 0.64-3.168 0.096-0.832 0.288-1.632 0.48-2.464 0.32-1.664 0.704-3.328 1.056-4.928 0.544-2.4 1.12-4.672 1.728-6.752l0.576-2.112c0.192-0.64 0.416-1.344 0.576-2.048l0.64-1.824c0.224-0.576 0.384-1.152 0.64-1.728l0.384-1.088 0.64-1.664a18.048 18.048 0 0 1 3.744-6.496l0.64-0.736c0.352-0.32 0.672-0.64 1.024-0.832a4.16 4.16 0 0 1 0.8-0.544 4.8 4.8 0 0 1 1.696-0.576C722.88 434.752 736 555.008 736 555.008" fill="#299555" ></path><path d="M736 319.744v235.264s-13.12-120.256-34.816-117.632a4.8 4.8 0 0 0-1.696 0.576 4.16 4.16 0 0 0-0.8 0.544c-0.352 0.224-0.64 0.512-1.024 0.832l-0.64 0.704a18.048 18.048 0 0 0-2.24 3.488 26.016 26.016 0 0 0-1.472 3.04l-0.672 1.664-0.416 1.088c-0.224 0.576-0.384 1.152-0.64 1.728l-0.608 1.824c-0.16 0.704-0.384 1.376-0.576 2.048l-0.576 2.112c-0.64 2.08-1.184 4.352-1.728 6.752l-1.056 4.928c-0.192 0.832-0.384 1.6-0.512 2.464-0.224 1.056-0.384 2.08-0.64 3.168v0.32a44.48 44.48 0 0 0-0.48 2.56 120.64 120.64 0 0 0-1.024 6.016l-0.48 3.072-0.704 4.768c-0.256 1.6-0.448 3.232-0.672 4.864a295.232 295.232 0 0 0-1.248 9.92 349.248 349.248 0 0 0-1.504 13.568l-0.352 3.424-0.672 6.88-0.32 3.424-0.32 3.36-0.384 4.608-0.512 6.176c-0.16 1.952-0.32 3.968-0.416 5.888v0.128c-0.192 2.016-0.32 3.968-0.448 5.92-0.16 1.6-0.224 3.2-0.352 4.768l-0.32 4.64-0.544 8.768-0.32 5.344a1162.88 1162.88 0 0 1-0.256 4.96l-0.128 2.24a669.28 669.28 0 0 0-2.048-24.896 1022.144 1022.144 0 0 0-6.56-49.44 1131.296 1131.296 0 0 0-3.36-20.896l-0.64-3.968a1489.184 1489.184 0 0 0-2.368-13.792v-0.064c-2.528-14.72-5.184-29.312-7.968-44.032l-0.384-1.92c-5.888-31.04-12.288-61.856-19.008-92.704l-1.28-6.016a71.04 71.04 0 0 0-0.64-2.976c-0.576-2.72-1.152-5.504-1.792-8.192l-0.128-0.736-0.032-0.224-0.064-0.064-0.032-0.288H736z" fill="#65B184" ></path><path d="M657.632 475.616c-3.456-6.144-13.984-22.912-21.6-17.984-7.2 4.672-14.816 38.56-18.688 58.272v0.096c-1.632 8.288-2.624 14.016-2.624 14.016l-0.096-5.76-0.032-2.336c0-0.8 0-1.632-0.064-2.56v-2.72c0-1.984 0-4.064-0.064-6.336l-0.288-23.872-0.064-6.016-0.096-7.872c-0.064-1.6-0.064-3.2-0.064-4.8l-0.128-9.76-0.032-4.928c0-0.864 0-1.696-0.064-2.56 0-2.432 0-4.896-0.064-7.36-0.064-2.592-0.064-5.216-0.096-7.84l-0.096-6.72-0.096-8-0.064-4.704-0.384-31.36a6.272 6.272 0 0 0 0-1.312v-6.4l0.064-0.288v-0.096a38.72 38.72 0 0 0-0.096-2.24v-0.288c0-14.784 6.56-33.44 11.072-44.512l1.792-4.288a0.64 0.64 0 0 1 0.096-0.32c0.48-1.152 0.96-2.08 1.28-2.88l0.64-1.28c0.064-0.288 0.224-0.512 0.32-0.768v-0.096l0.064 0.288 0.064 0.256 0.032 0.032 0.128 0.736a3956.416 3956.416 0 0 1 18.976 96.544l3.648 19.776c2.24 12.736 4.544 25.472 6.624 38.24" fill="#056737" ></path><path d="M288 663.232s10.592-68.672 19.328-36.736c8.704 32 48.704 132.768 83.712 200-35.712 0.064-103.04 0-103.04 0v-163.264z" fill="#0F8640" ></path><path d="M708.48 785.312l-0.8-1.248-23.36-35.968-27.168-40.864-0.032-0.096-0.064-0.032c0.128-0.064 0.288-0.064 0.416-0.096h0.032l0.032-0.096-0.512 0.128-6.848-10.368-68.352-102.848-69.056-102.4-34.496-51.2-12.384-18.112-0.704-0.96-1.216-1.792-20.576-30.112 33.856 51.648 34.144 51.456 68.32 102.848 69.024 102.4 34.56 51.168 25.472 36.992-0.288-0.448zM390.08 823.904l-3.072-8.544a288.832 288.832 0 0 1-3.072-8.704c-0.992-2.816-1.92-5.728-2.88-8.576l-0.16-0.448a1172.384 1172.384 0 0 1-28.16-97.28 2312.832 2312.832 0 0 1-27.584-128.928 3473.6 3473.6 0 0 1-21.024-130.176c-3.168-21.728-6.08-43.52-8.8-65.312a2299.008 2299.008 0 0 1-6.208-55.2l-0.064-0.896-0.16-1.216a88.64 88.64 0 0 1-0.48-4.448c-0.096-0.512-0.128-1.12-0.16-1.632-0.064-0.224-0.064-0.416-0.064-0.64 2.56 21.344 5.408 42.56 8.32 63.84 2.944 21.76 5.984 43.552 9.28 65.28 6.592 43.424 13.632 86.784 21.824 129.952 7.968 43.2 16.384 86.336 26.784 128.96 2.4 10.752 5.248 21.344 8.064 31.968 2.816 10.624 5.44 21.28 8.672 31.776 3.168 10.496 5.984 21.12 9.408 31.552l9.472 28.16 0.064 0.064v0.448M606.656 779.584c-29.632-58.432-56.64-118.144-86.592-176.32a1247.168 1247.168 0 0 0-47.712-85.696 425.92 425.92 0 0 0-27.968-40.224 161.12 161.12 0 0 0-16.512-17.856c-6.016-5.28-12.8-10.368-20.448-11.648a15.36 15.36 0 0 0-10.88 2.304 26.368 26.368 0 0 0-7.648 8.736 83.808 83.808 0 0 0-8 22.72 321.824 321.824 0 0 0-5.92 48.512 1060.704 1060.704 0 0 0-0.096 98.144c1.28 32.64 3.424 65.344 6.08 97.984 2.368 30.816 5.184 61.536 8.512 92.256l-0.16-1.408a41.568 41.568 0 0 1-0.416-3.264c-0.128-1.6-0.32-3.264-0.576-5.12a446.144 446.144 0 0 1-0.576-5.344l-0.032-0.416a48.416 48.416 0 0 1-0.416-3.552l-0.32-3.36-0.32-2.56c-0.096-1.344-0.288-2.72-0.416-4.064v-0.224l-0.128-1.152a2337.28 2337.28 0 0 1-12.864-159.744c-1.344-32.736-2.048-65.504-0.384-98.24a323.2 323.2 0 0 1 5.792-48.896c1.792-8.064 4.032-16.128 8.16-23.488a28.832 28.832 0 0 1 8.416-9.568 17.408 17.408 0 0 1 12.544-2.72c8.704 1.472 15.552 6.912 21.696 12.352 6.144 5.568 11.584 11.808 16.736 18.208 10.24 12.864 19.264 26.56 27.904 40.512 9.44 15.36 18.336 30.976 26.816 46.88a434.08 434.08 0 0 1 5.376 9.92c2.624 4.864 5.184 9.728 7.68 14.624 2.624 4.832 5.12 9.728 7.584 14.624 14.848 29.216 29.056 58.72 43.008 88.32 13.984 29.632 27.488 59.456 42.08 88.768" fill="#A3CCEF" ></path><path d="M675.36 664.832c-0.64 8.288-1.6 16.64-3.872 24.768a37.376 37.376 0 0 1-5.248 11.392 15.584 15.584 0 0 1-6.56 5.344l-0.16 0.032a14.944 14.944 0 0 1-2.016 0.64l0.032-0.096 0.096-0.032 0.064-0.064a14.336 14.336 0 0 0 8-6.176 38.4 38.4 0 0 0 4.544-11.392 129.28 129.28 0 0 0 3.104-24.544c0.864-16.512 0.416-33.12-0.128-49.728a659.68 659.68 0 0 0-2.976-49.696 1025.248 1025.248 0 0 0-6.24-49.408 2743.232 2743.232 0 0 0-12.992-78.496l-3.648-19.776a3956.416 3956.416 0 0 0-18.976-96.576c0.64 2.72 1.216 5.504 1.792 8.224l0.64 2.976 1.28 6.016c6.72 30.848 13.12 61.696 19.008 92.672l0.384 1.984c2.784 14.688 5.44 29.28 8 44.032 0.768 4.608 1.6 9.248 2.336 13.824l0.64 3.968c1.184 6.944 2.304 13.952 3.36 20.864 2.464 16.448 4.896 32.928 6.56 49.472 0.832 8.32 1.504 16.64 2.048 24.896v0.128c0.512 8.288 0.928 16.512 1.248 24.8 0.64 16.64 0.8 33.28-0.32 49.952" fill="#A3CCEF" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#299555" ></path></symbol><symbol id="bf-max" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#00ACAC" ></path><path d="M644.448 715.456c-0.64 1.728-1.28 3.456-2.016 5.184a106.528 106.528 0 0 1-13.408 24.96c-5.44 7.744-11.904 14.784-19.008 21.056l-0.128 0.192a7.744 7.744 0 0 0-0.64 0.512l-0.128 0.096c-14.208 12.256-30.752 21.76-48.48 28.16a161.824 161.824 0 0 1-55.296 9.728 126.048 126.048 0 0 1-40.416-6.72c-9.696-20.8-8.384-67.712 36.16-80.448h0.032c2.016 0.064 4 0 5.984-0.064 8.096-0.32 16.32-1.824 23.872-5.056a77.568 77.568 0 0 0 28.416-21.504c5.632-1.856 58.656-18.24 85.056 23.904" fill="#00848C" ></path><path d="M573.248 658.88v0.608c0.032 0.672 0 1.28-0.096 1.92v0.32c-0.032 0.576-0.224 1.152-0.256 1.664l-0.256 1.472c-1.152 5.6-3.552 10.88-6.496 15.808a79.936 79.936 0 0 1-35.84 30.816c-7.328 3.168-15.264 4.48-23.264 4.8a92.096 92.096 0 0 1-46.4-9.664 61.76 61.76 0 0 1-18.624-14.88 64.192 64.192 0 0 1-10.976-21.12l-0.032-0.16v-0.192a42.976 42.976 0 0 1 0-10.656l0.032-0.384c0.032-0.128 0.032-0.288 0.096-0.416l0.032-0.128v-0.128l0.096-0.256v-0.128a2.24 2.24 0 0 1 0.096-0.544l0.032-0.128a1.6 1.6 0 0 1 0.096-0.512l0.032-0.064v-0.096a7.744 7.744 0 0 1 0.32-1.472l0.224-0.896 0.32-1.056c0.064-0.352 0.16-0.768 0.32-1.12a4.832 4.832 0 0 1 4.48 4.32c0.416 3.008 1.152 5.984 2.112 8.896 1.664 3.936 3.552 7.808 5.824 11.456 5.856 9.728 14.624 19.072 25.216 23.52 23.648 9.856 52.384 8.64 74.944-4 22.944-12.8 26.944-28.096 27.744-34.624v-0.192l0.096-0.96v-0.096c0.096-0.576 0.096-1.024 0.096-1.344l0.032-0.384" fill="#008089" ></path><path d="M681.024 353.792c-9.312 50.016-33.856 89.056-67.2 116.416l0.992-1.344c2.88-3.936 5.6-8 8.128-12.16 5.12-8.32 9.408-17.152 12.672-26.4l0.032-0.064 0.192-0.576c3.936-11.584 6.112-23.904 5.984-36.192a105.888 105.888 0 0 0-7.04-36.16 117.312 117.312 0 0 0-9.024-18.752l-1.184-1.92a104.032 104.032 0 0 0-6.144-9.28c-0.448-0.8-0.992-1.504-1.536-2.208l-0.64-0.832a72.416 72.416 0 0 0-3.616-4.672l-0.128-0.192a160.448 160.448 0 0 0-20.512-21.28l0.032 0.096a97.12 97.12 0 0 0-8.576-6.528c-2.912-2.016-5.728-4.256-8.736-6.112-6.208-3.456-12.32-7.2-18.976-9.728-6.432-3.104-13.312-4.992-20.064-7.168l-10.4-2.368c-3.424-0.864-6.976-1.184-10.464-1.76a182.912 182.912 0 0 0-42.432-0.8c-14.016 1.344-28.064 3.872-41.472 8.288A182.784 182.784 0 0 1 507.136 256c10.56 0.064 21.088 0.832 31.552 2.56 62.976 9.888 114.432 46.656 142.368 95.232" fill="#03C7CB" ></path><path d="M649.984 693.248c-1.184 7.552-2.976 15.008-5.536 22.208-26.4-42.144-79.424-25.76-85.056-23.904 0.64-0.736 1.248-1.504 1.824-2.304l0.576-0.704a65.12 65.12 0 0 0 6.432-10.496 48.608 48.608 0 0 0 4-10.688c0.128-0.672 0.32-1.28 0.416-1.952 0.256-1.216 0.384-2.464 0.512-3.68v-0.32a9.024 9.024 0 0 0 0.096-1.92v-0.608l-0.032 0.384v-0.256a130.56 130.56 0 0 0-0.064-8.32 51.616 51.616 0 0 0-2.048-12.544l-0.512-1.664a52.928 52.928 0 0 0-0.704-1.92c-4.064-11.136-11.52-20.48-19.616-25.664a171.04 171.04 0 0 0 18.656-4.032c1.28-0.32 2.496-0.64 3.744-1.024 1.952-0.544 3.84-1.152 5.824-1.728a183.68 183.68 0 0 0 25.856-10.4c5.664-2.784 11.2-5.856 16.672-9.184l0.096 0.128 0.864 1.408 7.04 12.544c2.688 4.576 4.864 9.408 7.04 14.208 3.84 8.512 7.168 17.312 9.696 26.304 1.28 4.512 2.368 9.056 3.264 13.632 0.896 4.512 1.408 9.184 1.92 13.76v0.32c0.608 9.44 0.48 19.04-0.96 28.416" fill="#006570" ></path><path d="M638.848 393.504c0.128 7.648-0.64 15.328-2.24 22.784l-0.704 2.88a145.6 145.6 0 0 1-1.216 4.704c-0.096 0.32-0.192 0.576-0.224 0.896l-1.344 4.096-0.032 0.096-0.16 0.48a135.264 135.264 0 0 1-12.256 25.888 193.888 193.888 0 0 1-8 12c-1.088 1.504-2.208 2.976-3.392 4.448-62.144 46.752-92.832 31.488-103.104 22.848a214.496 214.496 0 0 0 51.584-33.44 52.256 52.256 0 0 0 13.12-15.392c1.92-3.168 3.2-6.592 4.064-10.176 3.424-14.944-1.6-28.48-12.896-40.096a66.56 66.56 0 0 0-21.696-15.04l-2.336-0.864c-0.736-0.288-1.536-0.544-2.336-0.8a109.76 109.76 0 0 0-1.92-0.544l-0.448-0.128a101.952 101.952 0 0 0-27.168-3.072h-0.128c-49.216-3.072-165.568 25.984-149.824-43.84a193.024 193.024 0 0 1 74.464-59.072l0.256-0.064c6.624-2.016 13.312-3.552 20.16-4.736l0.448-0.064c0.032 0 0.096 0 0.128-0.064l0.768-0.128a233.28 233.28 0 0 1 20.064-2.304 195.776 195.776 0 0 1 44.672 1.984c1.504 0.224 3.04 0.448 4.48 0.736 1.12 0.224 2.176 0.416 3.264 0.704l5.792 1.408 4.48 1.088c5.088 1.728 10.24 3.264 15.2 5.312 0.192 0.032 0.32 0.128 0.512 0.192 1.312 0.576 2.656 1.152 3.936 1.824a60.8 60.8 0 0 1 5.984 2.752c4.288 2.176 8.352 4.704 12.544 7.04 2.976 1.824 5.728 4 8.576 6.016 2.848 2.016 5.728 4.128 8.256 6.304l0.032 0.064c9.152 7.872 17.344 16.896 24.448 26.624 7.104 9.728 13.088 20.288 17.344 31.52 4.16 11.232 6.624 23.136 6.848 35.136" fill="#00ACAC" ></path><path d="M609.28 471.744c-1.728 2.272-3.616 4.544-5.44 6.816-5.856 6.72-11.904 13.12-18.304 19.2-1.152 1.056-2.304 2.08-3.52 3.104-1.344 1.152-2.688 2.336-4.096 3.456l-5.44 4.384c0 0.096-0.128 0.128-0.192 0.224l-0.672 0.48a297.472 297.472 0 0 1-9.632 7.296l-1.28 0.896-1.888 1.312c-2.304 1.664-4.672 3.296-7.04 4.896l-3.808 2.56-1.92 1.28c-0.64 0.48-1.312 0.864-1.92 1.28H544l-3.84 2.464c-1.312 0.864-2.592 1.696-3.904 2.496h-0.064a625.984 625.984 0 0 1-23.776 13.92c-0.096 0-0.224 0.064-0.352 0.16l-3.84 2.08c-1.344 0.768-2.72 1.536-4.128 2.24l-0.192 0.064c-5.472 2.88-11.04 5.664-16.576 8.352l-0.128 0.064-8.064 3.84-2.432 1.184-5.312 2.432a282.88 282.88 0 0 1-6.464 2.88l-1.376 0.64-0.64 0.256c-1.472 0.64-2.976 1.344-4.48 1.952-1.28 0.544-2.464 1.024-3.712 1.6l-0.8 0.32a531.2 531.2 0 0 1-7.456 3.104l-1.6 0.64c-0.448 0.16-0.96 0.32-1.376 0.544a10.848 10.848 0 0 0-1.056 0.448l-1.44 0.544-6.304 2.496-4.736 1.792-4.096 1.536-2.144 0.736-2.112 0.8-0.096 0.064v-61.664s11.904-3.36 29.216-9.408a538.24 538.24 0 0 0 52.96-21.728c0.832-0.32 1.664-0.8 2.464-1.152 10.24 8.64 40.96 23.904 103.104-22.88" fill="#00ACAC" ></path><path d="M574.944 435.616a33.696 33.696 0 0 1-4.64 11.104c-0.576 0.864-1.152 1.856-1.76 2.688a31.264 31.264 0 0 0-0.96-7.328c-2.688-11.04-10.976-19.84-20.352-25.824a79.488 79.488 0 0 0-8.736-4.768l-0.64-0.256a72.64 72.64 0 0 0-11.136-3.904c-0.544-0.192-1.088-0.32-1.6-0.448l-2.24-0.544c-0.128-0.032-0.224-0.032-0.32-0.096a86.496 86.496 0 0 0-19.584-2.08 84.288 84.288 0 0 0-40.576 9.824 56.064 56.064 0 0 0-15.648 12.288c-3.68 4.224-6.336 8.96-7.936 14.368a29.76 29.76 0 0 0-1.344 7.904l-2.784 2.336a89.664 89.664 0 0 1 1.92-30.08l0.416-2.368c0.352-1.6 0.8-3.168 1.344-4.672l0.768-2.016c0.032-0.064 0.032-0.16 0.128-0.256 0.32-0.736 0.64-1.504 1.024-2.24a50.24 50.24 0 0 1 10.56-14.176c2.56-2.464 5.44-4.736 8.512-6.752l0.224-0.192 2.144-1.344a79.808 79.808 0 0 1 13.12-6.304l0.48-0.16 2.432-0.8 2.72-0.864h0.224a4.352 4.352 0 0 1 0.704-0.256 4.352 4.352 0 0 1 0.704-0.224l1.472-0.384h0.096a16.64 16.64 0 0 1 1.408-0.352 74.272 74.272 0 0 1 4.672-0.96h0.096c2.016-0.32 4.064-0.64 6.208-0.864a39.04 39.04 0 0 1 3.424-0.32l1.184-0.032c0-0.064 0.064-0.064 0.064-0.064h0.832l1.056-0.096H506.144c9.056 0 18.4 0.576 27.2 3.04l0.416 0.128 1.92 0.544a35.552 35.552 0 0 1 4.672 1.696l2.304 0.96c7.264 3.36 13.792 8.32 19.392 14.016 11.296 11.648 16.32 25.184 12.896 40.128" fill="#006368" ></path><path d="M654.4 556.32a167.968 167.968 0 0 1-9.248 8.512h-0.032a246.176 246.176 0 0 1-23.68 17.44l-0.32 0.192h-0.096v0.064c-5.44 3.328-11.008 6.4-16.672 9.184a209.376 209.376 0 0 1-25.856 10.4c-1.952 0.576-3.84 1.184-5.824 1.728l-3.744 1.024a186.432 186.432 0 0 1-18.656 4.032 208.32 208.32 0 0 1-66.816 0.192l-0.672-0.128a208.16 208.16 0 0 1-61.12-19.776v-0.64c1.44-0.512 2.848-0.992 4.224-1.6l4.096-1.504 4.736-1.792 3.648-1.376 4.096-1.664a10.848 10.848 0 0 1 1.056-0.448c0.448-0.224 0.96-0.384 1.376-0.576a190.208 190.208 0 0 0 9.856-4.032l3.68-1.6c1.728-0.64 3.488-1.408 5.152-2.24a282.88 282.88 0 0 0 7.808-3.52c1.792-0.736 3.584-1.536 5.344-2.4l2.464-1.152 8.16-3.872h0.032a199.232 199.232 0 0 0 5.056 3.456l0.544 0.32c3.104 1.984 6.272 3.84 9.504 5.536l0.224 0.128 0.224 0.16 1.376 0.64c0.096 0.064 0.224 0.096 0.32 0.192l1.6 0.8 0.8 0.352a1.6 1.6 0 0 0 0.384 0.192l2.368 1.088c1.376 0.672 2.752 1.28 4.16 1.824 1.376 0.64 2.816 1.152 4.224 1.664a49.376 49.376 0 0 0 3.456 1.216l0.8 0.288c1.472 0.512 2.88 0.96 4.352 1.376a141.184 141.184 0 0 0 91.744-3.2l0.608-0.224c1.184-0.448 2.4-0.896 3.52-1.44 1.408-0.512 2.784-1.152 4.096-1.76l1.28-0.64 2.688-1.216c1.792-0.896 3.52-1.824 5.248-2.752l0.032-0.064c2.88-1.6 5.696-3.264 8.384-5.12 0.384-0.16 0.736-0.416 1.088-0.64l0.224-0.192c0.448-0.32 0.832-0.64 1.248-0.864 1.024-0.672 2.08-1.44 3.04-2.24 0.288-0.16 0.512-0.352 0.768-0.544l1.248-0.96c0.8-0.544 1.6-1.216 2.4-1.824" fill="#007278" ></path><path d="M464.928 798.624a89.92 89.92 0 0 1-13.856-6.208 81.888 81.888 0 0 1-21.824-17.6 93.376 93.376 0 0 1-15.264-23.744c-1.696-3.424-2.88-7.2-4.352-10.784-0.256-0.96-0.544-1.792-0.8-2.624a29.92 29.92 0 0 1-0.768-2.656l-0.736-2.72-0.064-0.256v-0.16l-0.608-2.208v-0.032l-0.032-0.16-0.448-2.016-0.192-0.768-0.16-0.96c-0.064-0.288-0.128-0.608-0.128-0.896-0.064-0.096-0.064-0.128-0.064-0.224v-0.192l-0.032-0.32-0.192-0.832-0.032-0.352-0.128-0.96-0.16-0.992c0-0.352 0-0.704-0.064-1.056v-0.064a49.92 49.92 0 0 1-0.032-7.328 47.104 47.104 0 0 1 0.768-5.984 46.912 46.912 0 0 1 3.072-10.24 62.336 62.336 0 0 1 5.6-10.24c0-0.096 0.096-0.16 0.16-0.224a14.592 14.592 0 0 1 1.696-2.304 54.848 54.848 0 0 1 11.52-11.072l1.504-0.96 0.032-0.064 0.064 0.064 1.6-1.024 0.032 0.16V670.944l0.128 0.352 0.064 0.064 0.064 0.32a3.68 3.68 0 0 0 0.416 1.088l0.032 0.224c0 0.032 0 0.096 0.064 0.128l0.032 0.192c1.024 3.2 2.176 6.304 3.584 9.312l0.064 0.064c1.6 3.36 3.52 6.592 5.76 9.6 5.024 6.464 11.552 11.616 18.624 15.68 12.64 6.72 26.944 10.016 41.216 10.208-44.544 12.736-45.856 59.68-36.16 80.448" fill="#006570" ></path><path d="M674.336 776.064c-15.68 28.16-36.864 48.96-63.808 66.56a167.552 167.552 0 0 1-54.944 23.424c-32.832 7.744-61.376 6.976-87.232 1.216a187.488 187.488 0 0 1-88.832-46.944c-12.16-19.648-17.536-62.176 28.608-83.584a14.432 14.432 0 0 1 0.32 1.024l0.736 2.592v0.096l0.128 0.32a92.288 92.288 0 0 0 10.496 23.328 84 84 0 0 0 45.76 37.024l0.928 0.352c12.416 4.32 25.696 6.272 38.816 6.496a162.816 162.816 0 0 0 54.912-9.12l1.44-0.48a152.128 152.128 0 0 0 49.44-28.704l1.024-0.96-0.16 0.16c7.264-6.464 13.76-13.696 19.36-21.664 5.536-7.936 10.304-16.48 13.6-25.6 3.744-8.96 6.08-18.4 7.424-28 1.344-9.6 1.344-19.328 0.544-28.96v-0.224a163.584 163.584 0 0 0-2.176-13.984 140.928 140.928 0 0 0-3.488-13.728l-0.064-0.352a184.032 184.032 0 0 0-10.368-25.92h0.064c-1.12-2.144-2.176-4.384-3.36-6.496l-2.112-4.096a236.8 236.8 0 0 0-6.72-11.584c-0.736-1.344-1.6-2.624-2.432-3.904l-0.768-1.216-0.224-0.32-0.128-0.16-0.096-0.128v-0.064h0.096l0.32-0.192c8.256-5.344 16.128-11.2 23.68-17.472l0.032 0.032a314.144 314.144 0 0 1 24.736 33.024c1.472 2.24 2.88 4.512 4.224 6.784 0.64 1.152 1.344 2.24 1.984 3.424l2.368 4.256 1.856 3.552a132.416 132.416 0 0 1 3.488 7.04c25.76 55.328 17.12 105.344-9.472 153.152" fill="#00ABB6" ></path><path d="M506.016 375.072H504.32l-0.128 0.032h-1.536l-1.504 0.096h-0.416c-0.416 0.064-0.864 0.064-1.28 0.096a39.04 39.04 0 0 0-2.24 0.224 70.528 70.528 0 0 0-7.36 0.96h-0.096a74.272 74.272 0 0 0-3.072 0.608h-0.128l-1.472 0.32a16.64 16.64 0 0 0-1.408 0.384h-0.096l-1.472 0.384a3.968 3.968 0 0 0-0.704 0.224 3.68 3.68 0 0 0-0.96 0.288c-0.096 0-0.192 0-0.32 0.064a3.264 3.264 0 0 0-0.64 0.192c-0.64 0.128-1.184 0.32-1.76 0.512l-2.4 0.864-0.448 0.16a33.12 33.12 0 0 0-3.168 1.216l-2.432 1.056a74.976 74.976 0 0 0-7.232 3.84c-0.128 0-0.224 0.128-0.352 0.16a33.824 33.824 0 0 0-2.112 1.376c-0.064 0.064-0.224 0.096-0.32 0.192a68.288 68.288 0 0 0-4.416 3.2c-0.96 0.8-1.92 1.536-2.816 2.4a3.328 3.328 0 0 0-0.704 0.64 13.856 13.856 0 0 0-6.528 7.2 29.952 29.952 0 0 0-1.984 2.848l-0.192 0.256c-0.576 0.896-1.056 1.824-1.536 2.72a11.52 11.52 0 0 0-0.8 1.696 9.312 9.312 0 0 0-0.672 1.312l-0.352 0.896c-0.096 0.096-0.096 0.192-0.128 0.256l-0.16 0.32a40.192 40.192 0 0 0-1.952 6.336l-0.448 2.432a89.664 89.664 0 0 0-1.92 30.08l-0.16 0.16s-86.656-7.904-93.888-9.728a132.8 132.8 0 0 1-2.176-0.672 10.848 10.848 0 0 1-1.056-0.448 21.824 21.824 0 0 1-8.32-5.44 21.888 21.888 0 0 1-3.328-4.16 25.248 25.248 0 0 1-2.944-23.264l0.32-1.248 0.288-1.184 0.032-0.096 0.224-0.96 0.256-1.088 0.576-2.4 0.16-0.48 0.32-1.408 0.864-3.168c0.96-3.104 2.08-7.104 3.616-11.776l1.792-5.44c0.384-0.896 0.736-1.888 1.088-2.88l1.92-4.896c0.64-1.664 1.344-3.296 2.016-4.896l2.176-4.896 1.728-3.584 1.152-2.304a144.704 144.704 0 0 1 14.88-23.424c-15.744 69.824 100.608 40.768 149.824 43.84" fill="#008B92" ></path><path d="M574.944 435.616a33.696 33.696 0 0 1-4.64 11.104c-0.576 0.864-1.152 1.856-1.76 2.688a31.264 31.264 0 0 0-0.96-7.328c-2.688-11.04-10.976-19.84-20.352-25.824a79.488 79.488 0 0 0-8.736-4.768l-0.64-0.256a72.64 72.64 0 0 0-11.136-3.904c-0.544-0.192-1.088-0.32-1.6-0.448l-2.24-0.544c-0.128-0.032-0.224-0.032-0.32-0.096 6.816-0.224 21.504-0.736 23.68-9.984 1.568-6.656-3.136-12.032-7.424-15.2h-0.032a22.368 22.368 0 0 0-5.024-2.784l1.92 0.544a35.552 35.552 0 0 1 4.672 1.696l2.304 0.96c7.264 3.36 13.792 8.32 19.392 14.016 11.296 11.648 16.32 25.184 12.896 40.128" fill="#048188" ></path><path d="M609.28 471.744c-1.728 2.272-3.616 4.544-5.44 6.816-5.856 6.72-11.904 13.12-18.304 19.2-1.152 1.056-2.304 2.08-3.52 3.104-1.344 1.152-2.688 2.336-4.096 3.456l-5.44 4.384c0 0.096-0.128 0.128-0.192 0.224l-0.672 0.48a297.472 297.472 0 0 1-9.632 7.296l-1.28 0.896-1.888 1.312c-0.832 0.64-1.696 1.216-2.56 1.824l-4.48 3.072-3.808 2.56-1.92 1.28c-0.64 0.48-1.312 0.864-1.92 1.28H544l-3.84 2.464c-1.312 0.864-2.592 1.696-3.904 2.496h-0.064a625.984 625.984 0 0 1-23.776 13.92c-0.096 0-0.224 0.064-0.352 0.16l-3.84 2.08c-1.344 0.768-2.72 1.536-4.128 2.24l-0.192 0.064c-5.472 2.88-11.04 5.664-16.576 8.352l-0.128 0.064-8.064 3.84-2.432 1.184-5.312 2.432a282.88 282.88 0 0 1-6.464 2.88l-1.376 0.64-0.64 0.256c-1.472 0.64-2.976 1.344-4.48 1.952-1.28 0.544-2.464 1.024-3.712 1.6l-0.8 0.32c-3.008 1.28-6.048 2.528-9.056 3.712-0.448 0.192-0.96 0.352-1.376 0.576a10.848 10.848 0 0 0-1.056 0.448l-1.44 0.544a67.776 67.776 0 0 1-2.656 1.12l-3.648 1.376-4.736 1.792-4.096 1.536-2.144 0.736-2.112 0.8-0.096-5.184v-56.416s11.904-3.36 29.216-9.408a538.24 538.24 0 0 0 52.96-21.728c0.832-0.32 1.664-0.8 2.464-1.152 10.24 8.64 40.96 23.904 103.104-22.88" fill="#008B92" ></path><path d="M572.64 664.864c-1.152 5.6-3.552 10.88-6.496 15.808a79.936 79.936 0 0 1-35.84 30.816c-7.328 3.168-15.264 4.48-23.264 4.8a92.16 92.16 0 0 1-46.4-9.664 61.824 61.824 0 0 1-18.624-14.88 64.192 64.192 0 0 1-10.976-21.12l0.64 2.048v0.096l0.064 0.224 0.064 0.032 0.64 1.92c-0.16-0.544-0.416-1.056-0.608-1.632 1.024 3.2 2.176 6.304 3.584 9.312l0.064 0.064c1.6 3.36 3.52 6.592 5.76 9.6 5.024 6.464 11.552 11.616 18.624 15.68 12.64 6.72 26.944 10.016 41.216 10.208h0.032c2.016 0.064 4 0.032 5.984-0.064 8.096-0.32 16.32-1.824 23.872-5.056a77.568 77.568 0 0 0 28.416-21.504c0.64-0.736 1.248-1.504 1.824-2.304l0.576-0.704a65.12 65.12 0 0 0 6.432-10.496 48.608 48.608 0 0 0 4-10.688c0.224-0.96 0.352-1.952 0.544-2.976a53.952 53.952 0 0 0-0.128 0.48" fill="#0AE0DA" ></path><path d="M652.896 664.64v-0.224a163.616 163.616 0 0 0-2.176-13.984 140.928 140.928 0 0 0-3.488-13.728l-0.064-0.32a184.032 184.032 0 0 0-10.368-25.92h0.064c-1.12-2.176-2.176-4.384-3.36-6.528l-2.112-4.096a236.8 236.8 0 0 0-5.12-8.896l-1.6-2.688c-0.736-1.344-1.6-2.624-2.432-3.904l-0.768-1.216 0.512 0.96 7.04 12.48c2.688 4.608 4.864 9.44 7.04 14.24 3.84 8.544 7.168 17.312 9.696 26.304 1.28 4.512 2.368 9.056 3.264 13.632 0.896 4.512 1.408 9.184 1.92 13.76v0.32c0.608 9.44 0.48 19.04-0.96 28.416a123.104 123.104 0 0 1-7.552 27.392 106.624 106.624 0 0 1-13.408 24.96c-5.44 7.744-11.904 14.784-19.008 21.056l-0.128 0.192-0.64 0.512-0.128 0.096c-14.208 12.256-30.752 21.76-48.48 28.16a161.728 161.728 0 0 1-55.296 9.728 126.048 126.048 0 0 1-40.416-6.72 89.92 89.92 0 0 1-13.856-6.208 81.888 81.888 0 0 1-21.824-17.6 93.376 93.376 0 0 1-15.264-23.744c-1.696-3.424-2.88-7.2-4.352-10.784-0.256-0.96-0.544-1.792-0.8-2.624a30.368 30.368 0 0 1-0.768-2.656l-0.736-2.72a56.928 56.928 0 0 0 1.184 5.056l-0.256-0.896-0.256-1.056a72.896 72.896 0 0 1-0.768-2.944l-0.448-1.984-0.032-0.32-0.224-0.64 0.032 0.416c0.064 0.16 0.064 0.32 0.096 0.512a81.536 81.536 0 0 0 1.792 7.328l0.736 2.624v0.064l0.128 0.32c1.28 3.552 2.368 7.136 3.968 10.656a95.904 95.904 0 0 0 6.528 12.672 84 84 0 0 0 45.76 37.024l0.928 0.352c12.416 4.32 25.696 6.272 38.816 6.496a162.816 162.816 0 0 0 54.912-9.12l1.44-0.48a152.128 152.128 0 0 0 49.44-28.672l0.992-0.992-0.128 0.192c7.264-6.496 13.76-13.76 19.36-21.696 5.536-7.936 10.304-16.48 13.6-25.6 3.744-8.96 6.08-18.4 7.424-28 1.344-9.6 1.344-19.328 0.544-28.96M641.824 393.472c0.128 12.288-2.048 24.608-5.984 36.16l-0.192 0.608-0.032 0.064a137.152 137.152 0 0 1-12.672 26.4 171.52 171.52 0 0 1-8.128 12.16c-0.352 0.448-0.64 0.896-1.024 1.344a227.84 227.84 0 0 1-8.064 10.048l-0.096 0.064a242.112 242.112 0 0 1-25.728 25.248c-9.184 7.808-18.88 14.944-28.864 21.632-20.064 13.28-41.536 24.32-63.648 33.568h-0.032v-0.064c2.784-1.312 5.6-2.688 8.32-4.064l8.32-4.256 0.128-0.096c1.408-0.704 2.784-1.472 4.16-2.24 1.312-0.64 2.592-1.376 3.904-2.08a290.464 290.464 0 0 0 24-14.08h0.096l3.872-2.496c1.28-0.8 2.56-1.6 3.84-2.464h0.128c0.608-0.416 1.28-0.8 1.92-1.28l5.888-3.84c1.472-0.96 2.912-1.984 4.352-3.072a109.056 109.056 0 0 0 5.696-4.032 297.472 297.472 0 0 0 9.6-7.296l0.704-0.48c0.064-0.096 0.16-0.128 0.192-0.224l5.44-4.384c1.408-1.12 2.752-2.304 4.128-3.456l3.52-3.072c6.4-6.144 12.416-12.48 18.272-19.232 1.824-2.24 3.712-4.544 5.44-6.784a193.888 193.888 0 0 0 11.424-16.448c4.96-8.224 9.12-16.864 12.224-25.92l0.16-0.448v-0.096l1.376-4.096c0.032-0.32 0.128-0.576 0.224-0.896a81.28 81.28 0 0 0 1.216-4.704l0.672-2.88a100.672 100.672 0 0 0-4.576-57.92 134.816 134.816 0 0 0-17.344-31.52 157.696 157.696 0 0 0-24.448-26.624l-0.032-0.064a122.272 122.272 0 0 0-8.256-6.304c-2.88-2.016-5.6-4.16-8.576-6.016-4.16-2.336-8.256-4.864-12.544-7.04a60.8 60.8 0 0 0-5.984-2.752c-1.28-0.672-2.624-1.28-3.936-1.824-0.192-0.064-0.32-0.16-0.512-0.192-4.96-2.048-10.112-3.584-15.232-5.312l-4.448-1.088-5.792-1.408a75.648 75.648 0 0 0-7.744-1.44 195.776 195.776 0 0 0-44.672-1.984c-6.72 0.48-13.44 1.248-20.064 2.304l-0.768 0.128c-0.032 0.064-0.096 0.064-0.128 0.064l-0.448 0.064a164 164 0 0 0-20.16 4.736c13.408-4.416 27.456-6.944 41.472-8.288 14.08-1.312 28.352-1.152 42.432 0.8 3.52 0.576 7.04 0.896 10.464 1.76l10.4 2.368c6.72 2.176 13.632 4.064 20.064 7.168 6.656 2.528 12.768 6.272 18.976 9.728 3.008 1.856 5.824 4.096 8.736 6.112 2.944 2.048 5.76 4.096 8.576 6.528L592 298.24c7.488 6.4 14.336 13.568 20.512 21.248l0.128 0.192c1.248 1.568 2.432 3.072 3.616 4.672l0.64 0.832a104.032 104.032 0 0 1 6.88 10.24c1.28 2.08 2.464 4.16 3.616 6.336l-0.8-1.6c3.2 5.504 5.952 11.2 8.224 17.184 4.384 11.52 6.816 23.808 7.008 36.16" fill="#0AE0DA" ></path><path d="M432.672 652.288l-0.32 1.12-0.288 1.056-0.224 0.896a7.744 7.744 0 0 0-0.32 1.472v0.096l-0.032 0.064a1.6 1.6 0 0 0-0.096 0.512l-0.032 0.128a2.24 2.24 0 0 0-0.096 0.544 1.28 1.28 0 0 0-0.096 0.384v0.128l-0.032 0.128-0.128 0.8a30.08 30.08 0 0 0-0.352 5.344c0 1.76 0.128 3.52 0.32 5.312v0.16l-0.288 0.16a6.528 6.528 0 0 0-0.64 0.416l-0.16 0.128-0.544 0.32h-0.032c-0.48 0.32-0.96 0.704-1.472 0.992a54.848 54.848 0 0 0-12.032 11.68c-0.384 0.544-0.832 1.088-1.184 1.696a27.104 27.104 0 0 0-2.56 3.968 62.336 62.336 0 0 0-4.544 10.048 46.912 46.912 0 0 0-2.144 9.184 47.104 47.104 0 0 0-0.352 10.816v0.064l0.096 1.056c0 0.352 0 0.704 0.064 1.056l0.32 2.048 0.032 0.352 0.384 2.272v0.48c0.064 0.096 0.064 0.192 0.064 0.288l0.448 2.016 0.064 0.096v0.128l0.16 0.736a81.536 81.536 0 0 0 1.472 6.304c-46.144 21.408-40.768 63.936-28.608 83.584a202.304 202.304 0 0 1-13.216-13.632c-26.944-30.656-42.112-66.688-46.112-107.328a29.92 29.92 0 0 1 2.496-16.224c3.328-6.176 7.136-12 11.52-17.504l98.464-13.344z" fill="#05D8D8" ></path><path d="M704 438.24a162.56 162.56 0 0 1-13.76 65.824 166.816 166.816 0 0 1-35.84 52.16l-2.4 1.92-1.28 0.96c-0.224 0.192-0.448 0.384-0.736 0.544l-3.04 2.24-1.28 0.864-0.192 0.128-1.088 0.736c-2.688 1.824-5.504 3.52-8.384 5.12h-0.032c-1.728 0.96-3.456 1.888-5.248 2.784-0.896 0.384-1.792 0.832-2.656 1.248l-1.28 0.608a56.544 56.544 0 0 1-5.152 2.176l-2.496 1.024-0.576 0.224a141.184 141.184 0 0 1-91.744 3.2l-4.384-1.376-0.8-0.288H521.6c-0.032 0-0.096 0-0.096-0.064a98.72 98.72 0 0 1-3.328-1.152l-4.224-1.664c-1.408-0.64-2.784-1.184-4.16-1.824a38.208 38.208 0 0 1-2.752-1.28l-0.8-0.352-1.6-0.8c-0.096-0.096-0.224-0.128-0.32-0.192a13.376 13.376 0 0 1-1.6-0.8c-0.096 0-0.128-0.064-0.224-0.128a135.904 135.904 0 0 1-9.504-5.536l-0.544-0.32v-0.032a199.232 199.232 0 0 1-5.056-3.424 382.016 382.016 0 0 0 63.68-33.6c9.952-6.656 19.648-13.792 28.832-21.6 9.216-7.744 17.856-16.32 25.728-25.248l0.096-0.064a227.84 227.84 0 0 0 8.064-10.048c33.376-27.36 57.92-66.4 67.232-116.416a178.304 178.304 0 0 1 8.576 16.96c0.416 0.96 0.864 1.888 1.216 2.816 0.32 0.64 0.576 1.312 0.8 1.984l1.472 3.648 1.376 3.84 1.28 3.84a132.96 132.96 0 0 1 3.232 11.2c0.32 1.248 0.64 2.432 0.896 3.68a119.712 119.712 0 0 1 1.92 9.696 96.032 96.032 0 0 1 1.056 7.552l0.32 2.752c0.32 3.36 0.64 6.816 0.704 10.24 0.096 2.048 0.128 4.16 0.128 6.24" fill="#00B9B9" ></path><path d="M683.808 622.944c-16.32-11.072-34.528-7.04-36.64 13.408a184.032 184.032 0 0 0-10.368-25.92h0.064c-1.12-2.144-2.176-4.384-3.36-6.496l-2.112-4.096a236.8 236.8 0 0 0-6.72-11.584c-0.736-1.344-1.6-2.624-2.432-3.904l-0.768-1.216-0.224-0.32-0.128-0.16-0.096-0.128v-0.064h0.096l0.32-0.192c8.256-5.344 16.128-11.2 23.68-17.472l0.032 0.032a314.144 314.144 0 0 1 22.464 29.536l2.272 3.488c1.472 2.24 2.848 4.512 4.224 6.784 0.64 1.152 1.344 2.24 1.984 3.424l2.368 4.256 1.856 3.552a132.416 132.416 0 0 1 3.488 7.04" fill="#03C7CB" ></path></symbol><symbol id="bf-skp" viewBox="0 0 1024 1024"><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752z" fill="#FFFFFF" ></path><path d="M690.752 0a32 32 0 0 1 22.624 9.376l173.248 173.248a32 32 0 0 1 9.376 22.624V992a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V32a32 32 0 0 1 32-32h530.752zM672 32H160v960h704V224h-160a32 32 0 0 1-32-32V32z" fill="#E8445A" ></path><path d="M597.824 323.136l169.472 137.184-35.68 314.88-342.56 96.768-85.6-232.224-48.16-274.4 342.528-42.208z m-129.056 331.84l-98.688 22.304 21.44 69.12 98.656-28.096-21.44-63.36z m63.04-150.08l-200.416 27.008 12.512 57.408 124.864-17.6 15.488 43.392 129.6-23.456-82.048-86.784z m68.992-151.264l-300.288 36.352 12.48 57.408 233.088-28.128 73.856 76.224 128.384-23.456-147.52-118.4z" fill="#E8445A" ></path></symbol></svg>',l=(l=document.getElementsByTagName("script"))[l.length-1].getAttribute("data-injectcss");if(l&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function c(){o||(o=!0,i())}t=function(){var e,t,n;(n=document.createElement("div")).innerHTML=s,s=null,(t=n.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",e=t,(n=document.body).firstChild?(t=n.firstChild).parentNode.insertBefore(e,t):n.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(i=t,a=e.document,o=!1,(r=function(){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(r,50)}c()})(),a.onreadystatechange=function(){"complete"==a.readyState&&(a.onreadystatechange=null,c())})}(window)},{}],110:[function(require,module,exports){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var Dom_1=require("../../Dom"),UIMap=require("../../UIMap"),EventEmmiter_1=require("../../../Event/EventEmmiter"),sign_enum={SIGN_END:"SIGN_END",SIGN_END_OK:"SIGN_EN_OK",SIGN_START:"SIGN_START",SIGN_START_OK:"SIGN_START_OK"},htmlStrParser=function(e){for(var t=e.replace(/\n/g,""),n={nodeName:"root",children:[]},i=[0],a=0,o=n,r="",s="",l=0;l<t.length;l++){var c=t.charAt(l),d=t.charAt(l+1);"<"===c?(r&&s===sign_enum.SIGN_START_OK&&(o.text=r,r=""),s="/"===d?sign_enum.SIGN_END:sign_enum.SIGN_START):">"===c?(s===sign_enum.SIGN_START&&(o=n,i.map((function(e,t){if(o.children||(o.children=[]),t===i.length-1){var n=(r=r.replace(/^\s*/g,"")).match(/^[a-zA-Z0-9]*\s*/)[0].replace(/\s/g,""),s=r.replace(n," ").match(/(^|\s)(\S+?=".+?")/g),l={},c={};s&&s.map((function(e){if(e){var t=/="(.+?)"/.exec(e)[1],n=e.split("=")[0].replace(/\s/g,"");if("style"===n)return t.split(";").map((function(e){e&&(c[e.split(":")[0]]=e.split(":")[1])})),l[n]=c;l[n]=t}})),o.children.push(__assign({nodeName:n,children:[]},l))}a=o.children.length-1,o=o.children[a]})),i.push(a),r="",s=sign_enum.SIGN_START_OK),s===sign_enum.SIGN_END&&(i.pop(),o=n,i.map((function(e){o.children[e]&&(o=o.children[e])})),r="",s=sign_enum.SIGN_END_OK)):r+=c}return n},attributeKeysList=["title"],render=function(html,container,scope){var parseResult=htmlStrParser(html),renderItemMap={},createItem=function(propsMap,parentItem){var nodeName=propsMap.nodeName,ref=propsMap.ref,text=propsMap.text,style=propsMap.style,className=propsMap.class,item,dom;if(UIMap[nodeName]){var config=void 0!==ref?{id:ref}:{};propsMap["bf-config"]&&scope&&"[object Object]"===Object.prototype.toString.call(scope[propsMap["bf-config"]])&&(config=__assign(__assign({},config),scope[propsMap["bf-config"]])),item=new UIMap[propsMap.nodeName](config),dom=item.getDomElement(),className&&item.addClass.apply(item,className.split(" "))}else item=dom=(new Dom_1.Dom).createElement({elementType:nodeName,className:className});if(void 0!==text&&dom.html(text),style&&dom.css(style),propsMap.hasOwnProperty("disabled")&&"false"!==propsMap.disabled&&dom.attribute("disabled",!0),attributeKeysList.forEach((function(e){propsMap.hasOwnProperty(e)&&dom.attribute(e,propsMap[e])})),parentItem.append(dom),scope){var expressionValue_1={},listen_1=function(key,execute){if(propsMap[key].indexOf("scope.data")>=0){var update_1=function(){var lastValue=expressionValue_1[key],value;try{value=eval(propsMap[key]),expressionValue_1[key]=value}catch(e){console.log(e),eventEmmiter_1.off("ValueChanged",update_1)}execute(value,lastValue)};eventEmmiter_1.on("ValueChanged",update_1),update_1()}else scope.data.hasOwnProperty(propsMap[key])&&(execute(scope.data[propsMap[key]]),eventEmmiter_1.on(propsMap[key],execute))},eventEmmiter_1=new EventEmmiter_1.default,proxy=new Proxy(scope.data,{set:function(e,t,n){var i=e[t];return e[t]=n,eventEmmiter_1.trigger(t,n,i),eventEmmiter_1.trigger("ValueChanged",t,n,i),!0}});scope.data=proxy;var _loop_1=function(e){0===e.indexOf("@")&&"[object Function]"===Object.prototype.toString.call(scope[propsMap[e]])&&dom.on(e.slice(1),(function(){return scope[propsMap[e]]()})),"bf-disabled"===e&&listen_1("bf-disabled",(function(e){"[object Boolean]"===Object.prototype.toString.call(e)&&dom.attribute("disabled",e)})),"bf-class"===e&&listen_1("bf-class",(function(e,t){"[object String]"===Object.prototype.toString.call(e)&&(t&&dom.removeClass(t),e&&dom.addClass(e))})),"bf-show"===e&&listen_1("bf-show",(function(e){"[object Boolean]"===Object.prototype.toString.call(e)&&(e?dom.show():dom.hide())})),attributeKeysList.forEach((function(t){e==="bf-"+t&&listen_1("bf-"+t,(function(e){"[object String]"===Object.prototype.toString.call(e)&&dom.attribute(t,e)}))}))};for(var key in propsMap)_loop_1(key)}propsMap.children.length>0&&propsMap.children.forEach((function(e){createItem(e,item)})),ref&&(renderItemMap[ref]=item)};return parseResult.children.forEach((function(e){createItem(e,container)})),renderItemMap};exports.default=render},{"../../../Event/EventEmmiter":57,"../../Dom":147,"../../UIMap":150}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.formatElementParam=function(e,t){if(void 0===t)return e;var n=e.className,i=t.className;i&&(n=n+" "+i);var a=window.Object.assign(e,t);return a.className=n,a},e}();n.default=i},{}],112:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Control=void 0;var o=e("../Event/EventEmmiter"),r=e("./Dom"),s=e("./UIEvents"),l=e("./ControlAnchor/ControlAnchor"),c=function(e){function t(n){var i=e.call(this)||this;(i._domElement=n.element||(new r.Dom).createElement(n.elementParam),n.parent)&&((n.parent instanceof t?n.parent._domElement:n.parent instanceof r.Dom?n.parent:new r.Dom(n.parent)).append(i._domElement),n.parent instanceof t&&(i._parent=n.parent));return i.id=n.id,i.type=n.type,i.position={anchor:"TopLeft",offset:{x:0,y:0}},i}return a(t,e),t.prototype.getParent=function(){return this._parent},t.prototype.setParent=function(e){this._parent=e},t.prototype.getDomElement=function(){return this._domElement},t.prototype.onClick=function(e){var t=this;return this._domElement.on("click",(function(n){e(n),t.trigger(s.default.Clicked,t)})),this},t.prototype.onMouseOver=function(e){var t=this;return this._domElement.on("mouseover",(function(n){e(n),t.trigger(s.default.MouseOver,t)})),this},t.prototype.onMouseOut=function(e){var t=this;return this._domElement.on("mouseout",(function(n){e(n),t.trigger(s.default.MouseOut,t)})),this},t.prototype.show=function(){return this._domElement.show(),this},t.prototype.hide=function(){return this._domElement.hide(),this},t.prototype.isVisible=function(){return this._domElement.isVisible()},t.prototype.destroy=function(){this._domElement.destroy()},t.prototype.addClass=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._domElement).addClass.apply(e,t),this},t.prototype.removeClass=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._domElement).removeClass.apply(e,t),this},t.prototype.toggleClass=function(e){return this._domElement.toggleClass(e),this},t.prototype.setPosition=function(e){if(e.anchor&&l.default.hasOwnProperty(e.anchor)){for(var t in l.default)this.removeClass("bfui-anchor-"+t.toLowerCase());var n=e.anchor.toLowerCase();this.addClass("bfui-anchor-"+n),this.position.anchor=e.anchor}return this.setOffset(e.offset),this},t.prototype.setOffset=function(e){if(e){var t=e.x||0,n=e.y||0,i=this.position.anchor.toLowerCase();this.setStyle(i.indexOf("right")>=0?{marginRight:-t+"px"}:{marginLeft:t+"px"}).setStyle(i.indexOf("bottom")>=0?{marginBottom:-n+"px"}:{marginTop:n+"px"}),this.position.offset.x=t,this.position.offset.y=n}return this},t.prototype.getPositionParam=function(){return this.position},t.prototype.getId=function(){return this.id},t.prototype.getType=function(){return this.type},t.prototype.getPosition=function(){return this._domElement.getPosition()},t.prototype.getDimensions=function(){return this._domElement.getDimensions()},t.prototype.getWidth=function(){return this._domElement.getWidth()},t.prototype.getHeight=function(){return this._domElement.getHeight()},t.prototype.setStyle=function(e){return this._domElement.css(e),this},t.prototype.getTooltip=function(){return this.tooltip},t.prototype.setTooltip=function(e){return this.tooltip=e,this.getDomElement().attribute("title",e),this},t.prototype.setHTML=function(e,t){var n=/<[C,c]ontrol id="(.*?)".*?>.*?<\/[C,c]ontrol>/g,i=e.replace(n,(function(e){var t=n.exec(e);return n.lastIndex=0,'<div class="BFUI_Control_'+t[1]+'"></div>'})),a=this.getDomElement();for(var o in a.html(i),t){var s=a.getElement().getElementsByClassName("BFUI_Control_"+o);if(1===s.length){var l=s[0];new r.Dom(l.parentElement).replace(t[o].getDomElement&&t[o].getDomElement()||t[o],new r.Dom(l))}}return this},t.prototype.click=function(){return this.getDomElement().click(),this},t}(o.default);n.Control=c},{"../Event/EventEmmiter":57,"./ControlAnchor/ControlAnchor":114,"./Dom":147,"./UIEvents":149}],113:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Left="Left",e.Center="Center",e.Right="Right",e.Top="Top",e.Middle="Middle",e.Bottom="Bottom"}(i||(i={})),n.default=i},{}],114:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.TopLeft="TopLeft",e.TopCenter="TopCenter",e.TopRight="TopRight",e.MiddleLeft="MiddleLeft",e.MiddleRight="MiddleRight",e.BottomLeft="BottomLeft",e.BottomCenter="BottomCenter",e.BottomRight="BottomRight",e.MiddleCenter="MiddleCenter"}(i||(i={})),n.default=i},{}],115:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Control=n.ControlGroup=void 0;var o=e("./Control");Object.defineProperty(n,"Control",{enumerable:!0,get:function(){return o.Control}});var r=function(e){function t(t){var n=e.call(this,t)||this;return n._children=[],n}return a(t,e),t.prototype.addControl=function(e,t){if(!t||isNaN(t.index)||-1===t.index)this._children.push(e),e.setParent(this),this._domElement.append(e.getDomElement());else{var n=t.index;n<-1&&(n=this.getControlCount()+n+1),this.insertControl(e,n)}return this},t.prototype.insertControl=function(e,t){return!isNaN(t)&&t<this._children.length?(this._children.splice(t,0,e),e.setParent(this),this._domElement.insert(e.getDomElement(),t)):this.addControl(e),this},t.prototype.removeControl=function(e){var t=this.indexOf(e);return t>=0&&(this._children.splice(t,1),e.setParent(void 0),this._domElement.remove(e.getDomElement())),this},t.prototype.clearControls=function(e){for(void 0===e&&(e=!1);this.getControlCount()>0;){var t=this.getControl({index:0});this.removeControl(t),e&&t.destroy()}return this},t.prototype.getControl=function(e){var t;if(e)return e.id?this.getAllControls().some((function(n){if(n.getId()===e.id)return t=n,!0})):!isNaN(e.index)&&e.index<this.getControlCount()&&(t=this._children[e.index]),t},t.prototype.getAllControls=function(){return this._children},t.prototype.indexOf=function(e){return this._children.indexOf(e)},t.prototype.getControlCount=function(){return this._children.length},t}(o.Control);n.ControlGroup=r},{"./Control":112}],116:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PropertyControl=void 0;var o=e("../../Control"),r=e("../../Controls/Collapse/Collapse"),s=function(e){function t(t){var n=this;t=t||{};var i={elementParam:{elementType:"table",className:"bfui-property-panel"},type:"PropertyPanel"};return(n=e.call(this,i)||this).createCollapse(t.propertyData),n}return a(t,e),t.prototype.clear=function(){this._domElement.html("")},t.prototype.createCollapse=function(e){var t=this;this.clear(),e&&e.forEach((function(e){e.parent=t.getDomElement(),new r.Collapse(e)}))},t}(o.Control);n.PropertyControl=s},{"../../Control":112,"../../Controls/Collapse/Collapse":123}],117:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../UIEvents"),s=e("../../Controls/Radio/Radio"),l=e("../../../Common/StatisticsDataManager"),c=l.getUINamespace("RadioGroup"),d=function(e){function t(t){var n=this;l.SDM.send(c,"bf_c_UIRadioGroup_new");var i={elementParam:{elementType:"div",className:"bfui-radioGroup"},type:"RadioGroup",id:(t=t||{}).id,parent:t.parent};return(n=e.call(this,i)||this).radioArray=[],t.options&&n.setOptions(t.options),n.on(r.default.ValueChanged,(function(e,t,i){i&&n.setCheckedByValue(t)})),n}return a(t,e),t.prototype.addRadio=function(e){var t=this;e.parent=this.getDomElement();var n=new s.default(e);return n.onChange((function(e,n){e.isChecked()&&t.trigger(r.default.ValueChanged,e,n,e.isChecked())})),this.radioArray.push(n),n},t.prototype.setOptions=function(e){var t,n=this;this.clearOptions(),e.forEach((function(e,i){null==t&&e.checked&&(t=i),n.addRadio(e)})),this.setChecked(null==t?0:t)},t.prototype.getOptions=function(){var e=[];return this.radioArray.forEach((function(t){e.push({value:t.getValue(),enabled:t.isEnabled(),checked:t.isChecked(),label:t.getLabel()})})),e},t.prototype.setChecked=function(e){this.radioArray.forEach((function(t,n){t.setChecked(n===e)}))},t.prototype.setCheckedByValue=function(e){this.radioArray.forEach((function(t){t.setChecked(t.getValue()==e)}))},t.prototype.getChecked=function(){var e;return this.radioArray.forEach((function(t,n){t.isChecked()&&(e=n)})),e},t.prototype.clearOptions=function(){this.radioArray=[],this._domElement.html("")},t.prototype.setEnabled=function(e){this.radioArray.forEach((function(t,n){t.setEnabled(e.indexOf(n)>-1)}))},t.prototype.getEnabled=function(){var e=[];return this.radioArray.forEach((function(t,n){t.isEnabled()&&e.push(n)})),e},t.prototype.onChange=function(e){return this.on(r.default.ValueChanged,e),this},t}(o.Control);n.default=d},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Controls/Radio/Radio":133,"../../UIEvents":149}],118:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o,r=e("../../ControlGroup");!function(e){e.Start="flex-start",e.End="flex-end",e.Center="center",e.Between="space-between",e.Around="space-around"}(o||(o={}));var s=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-row"},type:"Row",id:(t=t||{}).id,parent:t.parent};return(n=e.call(this,i)||this).setJustifyContent(t.justifyContent),t.contents&&t.contents.forEach((function(e){n.addControl(e)})),n}return a(t,e),t.prototype.setJustifyContent=function(e){var t=Object.keys(o).indexOf(e)>=0?e:"Between",n=o[t];this.getDomElement().css("justifyContent",n)},t}(r.ControlGroup);n.default=s},{"../../ControlGroup":115}],119:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../ControlGroup"),r=e("../../ControlAlign/ControlAlignOption"),s=e("../../Common/Utils/StyleUtil"),l=function(e){function t(t){var n=this;t=t||{};var i={elementParam:s.default.formatElementParam({elementType:"div",className:"bfui-toolbar"},t.elementParam),type:"Toolbar",id:t.id,parent:t.parent};(n=e.call(this,i)||this).isHorizontal=!1!==t.isHorizontal,n.isFullLength=!0===t.isFullLength,n.controlAlign=t.controlAlign||(n.isHorizontal?r.default.Left:r.default.Top);var a=n.isFullLength?"-full":"";return n.isHorizontal?n.addClass("bfui-toolbar-horizontal"+a):n.addClass("bfui-toolbar-vertical"+a),n.addClass("bfui-align-"+n.controlAlign.toLowerCase()),n}return a(t,e),t}(o.ControlGroup);n.default=l},{"../../Common/Utils/StyleUtil":111,"../../ControlAlign/ControlAlignOption":113,"../../ControlGroup":115}],120:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../Dom"),s=e("../../Common/Utils/StyleUtil"),l=e("../../../Common/StatisticsDataManager"),c=l.getUINamespace("Button"),d=function(e){function t(t){var n=this;l.SDM.send(c,"bf_c_UIButton_new"),t=t||{};var i={elementParam:s.default.formatElementParam({elementType:"div",className:"bfui-button"},t.elementParam),type:"Button",id:t.id,parent:t.parent};return n=e.call(this,i)||this,t.text&&n.setText(t.text),n.selectable=!0===t.selectable,n.selectable&&(n.select=!1),t.iconClass&&n.setIcon(t.iconClass),t.tooltip&&n.setTooltip(t.tooltip),t.clickCallback instanceof Function&&n.onClick(t.clickCallback),n}return a(t,e),t.prototype.getText=function(){return this._domElement.html()},t.prototype.setText=function(e){return this._domElement.html(e),this},t.prototype.setIcon=function(e){return e?(this.icon?this.icon.removeClass(this.iconClass):(this.icon=(new r.Dom).createElement({elementType:"div",className:"bfui-button-icon"}),this._domElement.append(this.icon)),this.iconClass=e,this.icon.addClass(e),this):this},t.prototype.isSelectable=function(){return this.selectable},t.prototype.isSelected=function(){return this.select},t.prototype.setSelected=function(e){return this.selectable?((e=!0===e)?this._domElement.addClass("bfui-button-select"):this._domElement.removeClass("bfui-button-select"),this.select=e,this):this},t}(o.Control);n.default=d},{"../../../Common/StatisticsDataManager":53,"../../Common/Utils/StyleUtil":111,"../../Control":112,"../../Dom":147}],121:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CheckState=void 0;var o=e("../../Control"),r=e("../../UIEvents"),s=e("../../Dom"),l=function(e){function t(t){var n=e.call(this,t)||this,i=n.inputPart=(new s.Dom).createElement({elementType:"input",className:t.className});i.attribute("type",t.name),n._domElement.on("click",(function(e){e.target.hasClass(t.className)||n.inputPart.getElement().click()})),i.on("change",(function(){n.trigger(r.default.ValueChanged,n,n.getValue(),n.isChecked())}));var a=n.textPart=(new s.Dom).createElement({elementType:"label",className:"bfui-checkState-text"});return n._domElement.append(i).append(a),n.setValue(void 0===t.value||t.value),t.label&&n.setLabel(t.label),!1===t.enabled&&n.setEnabled(t.enabled),!0===t.checked&&n.setChecked(t.checked),n}return a(t,e),t.prototype.onChange=function(e){return this.on(r.default.ValueChanged,e),this},t.prototype.getLabel=function(){return this.textPart.html()},t.prototype.setLabel=function(e){return this.textPart.html(e),this},t.prototype.isEnabled=function(){return!this.inputPart.attribute("disabled")},t.prototype.setEnabled=function(e){return e!=this.isEnabled()&&(this.textPart.toggle("bfui-checkState-text-disabled"),this.inputPart.attribute("disabled",!e)),this},t.prototype.isChecked=function(){return this.inputPart.attribute("checked")},t.prototype.setChecked=function(e){return e!=this.isChecked()&&(this.inputPart.attribute("checked",e),this.trigger(r.default.ValueChanged,this,this.getValue(),e)),this},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){return this.value=e,this},t}(o.Control);n.CheckState=l},{"../../Control":112,"../../Dom":147,"../../UIEvents":149}],122:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("./../CheckState/CheckState"),r=e("../../../Common/StatisticsDataManager"),s=r.getUINamespace("Checkbox"),l=function(e){function t(t){r.SDM.send(s,"bf_c_UICheckBox_new");var n={elementParam:{elementType:"div",className:"bfui-checkbox"},type:"Checkbox",name:"checkbox",id:t.id,className:"bfui-checkbox-checkbox",parent:t.parent};return t=Object.assign({},n,t),e.call(this,t)||this}return a(t,e),t}(o.CheckState);n.default=l},{"../../../Common/StatisticsDataManager":53,"./../CheckState/CheckState":121}],123:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Collapse=void 0;var o=e("../../Control"),r=e("../../Dom"),s=e("../../../Common/StatisticsDataManager"),l=s.getUINamespace("Collapse"),c=function(e){function t(t){var n;s.SDM.send(l,"bf_c_UICollapse_new");var i={elementParam:{elementType:"tbody",className:"bfui-collapse-tbody"},type:"Collapse",parent:t.parent},a=(n=e.call(this,i)||this)._domElement,o=(new r.Dom).createElement({elementType:"tr",className:"bfui-collapse-title bfui-transition"});return"基本属性"===t.group&&(t.group=window.BimfaceLanguage.bf_panel_basic_attribute),o.html('<td colspan="2"><i class="bfui-collapse-icon"></i>'+t.group+"</td>"),a.append(o),t.items&&t.items.length>0&&t.items.forEach((function(e){var t=(new r.Dom).createElement({elementType:"tr",className:"bfui-collapse-content"});t.html('<td class="bfui-collapse-content-key"><div  class="bfui-collapse-content-padding"></div><div   class="bfui-collapse-content-name">'+e.key+'</div></td><td class="bfui-collapse-content-value">'+e.value+"</td>"),a.append(t)})),o.on("click",(function(){a.toggleClass("bfui-collapse-collapse")})),n}return a(t,e),t}(o.Control);n.Collapse=c},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Dom":147}],124:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../Dom"),s=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-colorpicker"},type:"ColorPicker",id:(t=t||{}).id,parent:t.parent};return(n=e.call(this,i)||this).inputColor=(new r.Dom).createElement({elementType:"input",className:"bfui-colorpicker-input"}),n.inputColor.attribute("type","color"),n._domElement.append(n.inputColor),n.onClick((function(){n.inputColor.click()})),n.onInput((function(){})),n.setValue(""),n}return a(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){return this.value=e,e?(this.inputColor.attribute("value",e),this.getDomElement().css("background",e),this.getDomElement().removeClass("no-color")):(this.getDomElement().css("background","none"),this.getDomElement().addClass("no-color")),this},t.prototype.onChange=function(e){var t=this;return this.onChangeFn&&this._domElement.off("change",this.onChangeFn),this.onChangeFn=function(n){var i=n.target.value;t.value=i,t.getDomElement().css("background",i),t.getDomElement().removeClass("no-color"),e(i)},this._domElement.on("change",this.onChangeFn),this},t.prototype.onInput=function(e){var t=this;return this.onInputFn&&this._domElement.off("input",this.onInputFn),this.onInputFn=function(n){var i=n.target.value;t.value=i,t.getDomElement().css("background",i),t.getDomElement().removeClass("no-color"),e(i)},this._domElement.on("input",this.onInputFn),this},t}(o.Control);n.default=s},{"../../Control":112,"../../Dom":147}],125:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../Dom"),s=e("../../../Common/StatisticsDataManager"),l=s.getUINamespace("Input"),c=function(e){function t(t){var n=this;s.SDM.send(l,"bf_c_UICrumb_new");var i={elementParam:{elementType:"div",className:"bfui-crumb"},type:"Crumb",id:(t=t||{}).id,parent:t.parent};return(n=e.call(this,i)||this).value=[],n.getDomElement().on("click",(function(e){var t=new r.Dom(e.target).attribute("data-id");t&&n._selectHandler&&n._selectHandler(t)})),n}return a(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){var t=this;return this.value=e,this.getDomElement().clear(),e.forEach((function(n,i){var a=(new r.Dom).createElement({elementType:"a",className:"bfui-crumb-item"});if(a.html(n.text),a.attribute("title",n.text),a.attribute("data-id",n.id),t.getDomElement().append(a),i!==e.length-1){var o=(new r.Dom).createElement({elementType:"i",className:"bfui-crumb-array gld-bf-arrow-up-sm"});t.getDomElement().append(o)}})),this},t.prototype.onSelect=function(e){return this._selectHandler=e,this},t}(o.Control);n.default=c},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Dom":147}],126:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../../Common/StatisticsDataManager"),s=r.getUINamespace("Input"),l=function(e){function t(t){var n=this;r.SDM.send(s,"bf_c_UIInput_new");var i={elementParam:{elementType:"input",className:"bfui-input"},type:"Input",id:(t=t||{}).id,parent:t.parent};return(n=e.call(this,i)||this)._domElement.attribute("type","text"),t.onClick&&n.onClick(t.onClick),t.onBlur&&n.onBlur(t.onBlur),n}return a(t,e),t.prototype.getValue=function(){return this._domElement.attribute("value")},t.prototype.setValue=function(e){return this._domElement.attribute("value",e)},t.prototype.onChange=function(e){var t=this;return this.onChangeFn&&this._domElement.off("change",this.onChangeFn),this._domElement.on("change",(function(e){t.onChangeFn(e.target.value)})),this.onChangeFn=e,this},t.prototype.onBlur=function(e){return this.onBlurFn&&this._domElement.off("blur",this.onBlurFn),this._domElement.on("blur",e),this.onBlurFn=e,this},t.prototype.onFocus=function(e){return this._domElement.on("focus",e),this},t.prototype.onInput=function(e){return this._domElement.on("input",e),this},t.prototype.enabled=function(e){return this._domElement.attribute("disabled",!e||""),this},t.prototype.setPlaceholder=function(e){this._domElement.attribute("placeholder",e)},t}(o.Control);n.default=l},{"../../../Common/StatisticsDataManager":53,"../../Control":112}],127:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../../Common/StatisticsDataManager"),s=r.getUINamespace("Label"),l=function(e){function t(t){var n=this;r.SDM.send(s,"bf_c_UILabel_new");var i={elementParam:{elementType:"div",className:"bfui-label"},type:"Label",id:(t=t||{}).id,parent:t.parent};return n=e.call(this,i)||this,t.text&&n.setText(t.text),t.onClick&&n.onClick(t.onClick),t.className&&n.addClass(t.className),n}return a(t,e),t.prototype.getText=function(){return this._domElement.html()},t.prototype.setText=function(e){return this._domElement.html(e),this},t}(o.Control);n.default=l},{"../../../Common/StatisticsDataManager":53,"../../Control":112}],128:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../../Common/StatisticsDataManager"),s=r.getUINamespace("Link"),l=function(e){function t(t){var n=this;r.SDM.send(s,"bf_c_UILink_new");var i={elementParam:{elementType:"a",className:"bfui-link"},type:"Link",id:(t=t||{}).id,parent:t.parent};return n=e.call(this,i)||this,t.text&&n.setText(t.text),n.setHref(t.href),t.onClick&&n.onClick(t.onClick),n}return a(t,e),t.prototype.getText=function(){return this._domElement.html()},t.prototype.setText=function(e){return this._domElement.html(e),this},t.prototype.getHref=function(){return this.href},t.prototype.setHref=function(e){return this.href=e||"javascript:void(0)",this._domElement.attribute("href",this.href),this},t}(o.Control);n.default=l},{"../../../Common/StatisticsDataManager":53,"../../Control":112}],129:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Control"),s=e("../../Dom"),l=e("../../../Common/StatisticsDataManager"),c=e("../../UIMap"),d=l.getUINamespace("Input"),u=function(e){function t(t){var n=this;l.SDM.send(d,"bf_c_UIList_new");var i={elementParam:{elementType:"div",className:"bfui-list"},type:"List",id:(t=t||{}).id,parent:t.parent};return(n=e.call(this,i)||this).value=[],n._domElements=[],n._checkedList=[],n._singleCheckedMode=!1,n._checkBoxMap=new Map,n}return a(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){var t=this;return this.value=e,this._domElements.forEach((function(e){e.destroy()})),this._domElements=[],this._checkedList=[],this._checkBoxMap.clear(),this.getDomElement().clear(),e.forEach((function(e){var n=new c.Row({justifyContent:"Start"});if(e.hasCheckBox){var i=new c.Checkbox({value:e.id});e.isCheckBoxDisabled?i.setEnabled(!1):i.onChange((function(){if(i.isChecked())t._singleCheckedMode&&(t._checkedList.forEach((function(e){t._checkBoxMap.get(e.id).setChecked(!1)})),t._checkedList=[]),t._checkedList.push(e);else{var n=t._checkedList.indexOf(e);n>=0&&t._checkedList.splice(n,1)}t._checkedHandler&&t._checkedHandler(o(t._checkedList))})),t._domElements.push(i.getDomElement()),t._checkBoxMap.set(e.id,i),n.addControl(i),e.checked&&i.setChecked(!0)}if(e.hasIcon){var a=void 0;"svg"===e.iconType?(a=(new s.Dom).createElement({elementType:"div",className:"bfui-list-icon"})).html('<svg class="bimface-svgicon svg-icon" aria-hidden="true">\n            <use xlink:href="#'+e.iconClass+'"></use>\n          </svg>'):a=(new s.Dom).createElement({elementType:"i",className:"bfui-list-icon "+(e.iconClass?e.iconClass:"")}),n.getDomElement().append(a)}var r=(new s.Dom).createElement({elementType:"div",className:"bfui-list-text"});r.html(e.text),r.on("click",(function(){t._itemClickedHandler&&t._itemClickedHandler(e)})),t._domElements.push(r),n.getDomElement().append(r),t.getDomElement().append(n.getDomElement())})),this},t.prototype.onChecked=function(e){return this._checkedHandler=e,this},t.prototype.onItemClicked=function(e){return this._itemClickedHandler=e,this},t.prototype.getCheckedIds=function(){return this._checkedList.map((function(e){return e.id}))},t.prototype.getCheckedValue=function(){return this._checkedList},t.prototype.setSingleCheckedMode=function(e){this._singleCheckedMode=e},t}(r.Control);n.default=u},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Dom":147,"../../UIMap":150}],130:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-message"},type:"Message",id:(t=t||{}).id,parent:t.parent};return n=e.call(this,i)||this,t.text&&n.setText(t.text),t.className&&n.addClass(t.className),setTimeout((function(){n.getDomElement().addClass("hide"),n.getDomElement().on("transitionend",(function(){return n.destroy()}))}),t.duration||3e3),n}return a(t,e),t.prototype.getText=function(){return this._domElement.html()},t.prototype.setText=function(e){return this._domElement.html(e),this},t}(e("../../Control").Control);n.default=o},{"../../Control":112}],131:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Control"),s=e("../../Common/Utils/Render"),l=e("../../Dom"),c=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-messagebox"},type:"MessageBox",id:(t=t||{}).id,parent:t.parent};return(n=e.call(this,i)||this).data=o({},t),s.default('\n      <div class="bfui-messagebox-main">\n        <div ref="content" class="bfui-messagebox-content">'+t.content+'</div>\n        <div class="bfui-messagebox-footer">\n          <div class="bfui-messagebox-button button-primary" @click="confirm">'+(t.confirmText||"确认")+'</div>\n          <div class="bfui-messagebox-button" @click="cancel">'+(t.cancelText||"取消")+"</div>\n        </div>\n      </div>\n    ",n.getDomElement(),n),t.className&&n.addClass(t.className),t.parent?t.parent instanceof r.Control?t.parent.getDomElement().append(n.getDomElement()):t.parent instanceof l.Dom?t.parent.append(n.getDomElement()):t.parent instanceof HTMLElement&&t.parent.appendChild(n.getDomElement().element):document.body.appendChild(n.getDomElement().element),requestAnimationFrame((function(){return n.addClass("bfui-messagebox-show")})),n}return a(t,e),t.prototype.confirm=function(){var e=this;this.data.confirmHandler&&this.data.confirmHandler(),this.removeClass("bfui-messagebox-show"),this.getDomElement().on("transitionend",(function(){return e.destroy()}))},t.prototype.cancel=function(){var e=this;this.data.cancelHandler&&this.data.cancelHandler(),this.removeClass("bfui-messagebox-show"),this.getDomElement().on("transitionend",(function(){return e.destroy()}))},t}(r.Control);n.default=c},{"../../Common/Utils/Render":110,"../../Control":112,"../../Dom":147}],132:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../ControlGroup"),r=e("../../Dom"),s=e("../../../Common/StatisticsDataManager"),l=s.getUINamespace("Panel"),c=function(e){function t(t){var n=this;s.SDM.send(l,"bf_c_UIPanel_new");var i={elementParam:{elementType:"div",className:"bfui-panel"},type:"Panel",id:(t=t||{}).id,parent:t.parent};n=e.call(this,i)||this,t.onClick&&n.onClick(t.onClick);var a=n.header=(new r.Dom).createElement({elementType:"div",className:"bfui-panel-header"}),c={elementParam:{elementType:"div",className:"bfui-panel-content"},type:"ControlGroup"},d=n.content=new o.ControlGroup(c);n._domElement.append(a).append(d.getDomElement());var u=n.title=(new r.Dom).createElement({elementType:"div",className:"bfui-panel-title"}),f=n.headerCloseButton=(new r.Dom).createElement({elementType:"div",className:"bfui-button bfui-panel-headerclosebutton gld-bf-close-sm"});if(a.append(u).append(f),n.onCloseFn=function(){n.hide()},f.on("click",n.onCloseFn),t.title&&n.setTitle(t.title),n.sizeFixed=!0===t.sizeFixed,n.draggable=!1!==t.draggable,n.footerDisabled=!0===t.footerDisabled,t.position&&n.setPosition(t.position),isNaN(t.width)?n.width=300:(n.width=t.width,!isNaN(t.minWidth)&&t.minWidth>n.width&&(t.minWidth=n.width)),t.minWidth=t.minWidth||100,n.getDomElement().css({width:n.width+"px"}),isNaN(t.height)?(n.height=200,n.getDomElement().css({minHeight:"200px",maxHeight:"420px"})):(n.height=t.height,!isNaN(t.minHeight)&&t.minHeight>n.height&&(t.minHeight=n.height),n.getDomElement().css("height",n.height+"px")),t.minHeight=t.minHeight||80,n.getDomElement().on("mousedown",(function(){n.topShow()})),n.draggable){var p,h,m,v,g,b,y,E,C=!1,w=function(e){if(C){var t,i,a,o,r=e.clientX-p+m,s=e.clientY-h+v,l=b.width,c=b.height,d=y.width,u=y.height;E.indexOf("left")>=0?(t=0,a=l-d):E.indexOf("right")>=0?(t=-l+d,a=0):E.indexOf("center")>=0&&(t=-(l-d)/2,a=(l-d)/2),E.indexOf("top")>=0?(i=0,o=c-u):E.indexOf("bottom")>=0?(i=-c+u,o=0):E.indexOf("middle")>=0&&(i=-(c-u)/2,o=(c-u)/2),r=Math.max(r,t),r=Math.min(r,a),s=Math.max(s,i),s=Math.min(s,o),n.setOffset({x:r,y:s})}},I=function(e){C=!1,g.off("mousemove",w).off("mouseup",I)};a.on("mousedown",(function(e){C=!0,p=e.clientX,h=e.clientY;var t=n.getPositionParam(),i=t.anchor,a=t.offset,o=a.x,s=a.y;E=i.toLowerCase(),m=o,v=s,(g=g||new r.Dom(n.getDomElement().getElement().parentElement)).on("mousemove",w).on("mouseup",I),b=g.getDimensions(),y=n.getDimensions()})).on("mousemove",w).on("mouseup",I).addClass("bfui-panel-header-dragable")}if(!n.sizeFixed){var M=t.minWidth,_=t.minHeight;n.sizeFixedDom=(new r.Dom).createElement({elementType:"div",className:"bfui-panel-sizefixed"}),n.getDomElement().append(n.sizeFixedDom);var S,T,B,x,P,L=!1,D=function(e){if(L){var t=n.width,i=n.height;n.width=e.clientX-S+B,n.height=e.clientY-T+x,n.width<M&&(n.width=M),n.height<_&&(n.height=_),n.getDomElement().css({width:n.width+"px",height:n.height+"px"});var a=n.getPositionParam(),o=a.offset,r=o.x,s=o.y,l=a.anchor,c=n.width-t,d=n.height-i;l.indexOf("Center")>=0&&(r+=c/2),l.indexOf("Middle")>=0&&(s+=d/2),l.indexOf("Right")>=0&&(r+=c),l.indexOf("Bottom")>=0&&(s+=d),n.setOffset({x:r,y:s})}},k=function(e){L=!1,P.off("mousemove",D).off("mouseup",k)};n.sizeFixedDom.on("mousedown",(function(e){n.getDomElement().css({height:n.getHeight()+"px"}).css({minWidth:M+"px",minHeight:_+"px",maxHeight:""}),L=!0,S=e.clientX,T=e.clientY,B=n.getWidth(),x=n.getHeight(),(P=P||new r.Dom(n.getDomElement().getElement().parentElement)).on("mousemove",D).on("mouseup",k)})).on("mousemove",D).on("mouseup",k)}if(n.footerDisabled){var O={elementParam:{elementType:"div",className:"bfui-panel-footer"},type:"ControlGroup"};n.footer=new o.ControlGroup(O),n._domElement.append(n.footer.getDomElement())}return n}return a(t,e),t.prototype.setTips=function(e,t){this.tipsElement&&this.tipsElement.destroy();var n={default:"bfui-panel-tips",loading:"bfui-panel-loading"},i=n[t]||n.default,a=(new r.Dom).createElement({elementType:"div",className:i});a.html(e),this.tipsElement=a,this.showTips()},t.prototype.showTips=function(){if(this.tipsElement)return this.content.getDomElement().html(""),this.content.getDomElement().append(this.tipsElement),this},t.prototype.getContent=function(){return this.content},t.prototype.clearContent=function(){return this.content.getDomElement().html(""),this},t.prototype.getFooter=function(){return this.footer},t.prototype.clearFooter=function(){return this.footerDisabled&&this.footer.getDomElement().html(""),this},t.prototype.setTitle=function(e){return this.title.html(e),this},t.prototype.getTitle=function(){return this.title.html()},t.prototype.addControl=function(e,t){return this.content.addControl(e,t),this},t.prototype.removeControl=function(e){return this.content.removeControl(e),this},t.prototype.indexOf=function(e){return this.content.indexOf(e)},t.prototype.getControl=function(e){return this.content.getControl(e)},t.prototype.getAllControls=function(){return this.content.getAllControls()},t.prototype.onClose=function(e,t){var n=this;return void 0===t&&(t=!0),this.headerCloseButton.off("click",this.onCloseFn),this.onCloseFn=function(i){e(i),t&&n.hide()},this.headerCloseButton.on("click",this.onCloseFn),this},t.prototype.topShow=function(){document.querySelectorAll(".bfui-panel").forEach((function(e){new r.Dom(e).removeClass("bfui-panel-topshow")})),this.getDomElement().addClass("bfui-panel-topshow")},t}(o.Control);n.default=c},{"../../../Common/StatisticsDataManager":53,"../../ControlGroup":115,"../../Dom":147}],133:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("./../CheckState/CheckState"),r=e("../../../Common/StatisticsDataManager"),s=r.getUINamespace("Radio"),l=function(e){function t(t){r.SDM.send(s,"bf_c_UIRadio_new");var n={elementParam:{elementType:"div",className:"bfui-radio"},type:"Radio",name:"radio",id:t.id,className:"bfui-radio-radio",parent:t.parent};return t=Object.assign({},n,t),e.call(this,t)||this}return a(t,e),t}(o.CheckState);n.default=l},{"../../../Common/StatisticsDataManager":53,"./../CheckState/CheckState":121}],134:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../UIEvents"),s=e("../../Dom"),l=e("../../../Common/StatisticsDataManager"),c=e("../Input/Input"),d=e("./SearchResultOptionGroup"),u=(l.getUINamespace("Search"),function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-search"},type:"Search",id:(t=t||{}).id,parent:t.parent};(n=e.call(this,i)||this).enableAnimation=!1!==t.enableAnimation;(new s.Dom).createElement({elementType:"i",className:"bfui-search-icon gld-bf-search-md",parent:n.getDomElement()});return n.input=new c.default({parent:n}),n.input.addClass("bfui-search-input").onBlur((function(){return window.setTimeout((function(){return n.searchResult.hide()}),100)})).onFocus((function(){n.input.getValue()&&n.onSearch()})),t.placeholder&&n.setPlaceholder(t.placeholder),n.noResultText=t.noResultText||"没有找到对应内容",n.setSearchHandler(t.searchHandler||function(){return[]}),n.setSelectHandler(t.selectHandler||function(){return null}),n.searchResult=new d.default({enableAnimation:n.enableAnimation}),new s.Dom(document.body).append(n.searchResult.getDomElement()),n.searchResult.on(r.default.ValueChanged,(function(e){e&&n.input.setValue(e.text),n.searchResult.hide(),n.selectHandler instanceof Function&&n.selectHandler(e)})),n}return a(t,e),t.prototype.onSearch=function(){var e=this,t=this.input.getValue();if(t){var n=this.searchResultValue=this.searchHandler(t);n&&n.length>0?this.searchResult.setValues(n):this.searchResult.setValues([{html:this.noResultText,class:"bfui-search-noresult"},{html:"",class:"bfui-search-noresult"}]);var i=this.getPosition();this.searchResult.setFixedPosition(i),requestAnimationFrame((function(){return e.searchResult.show()}))}else this.searchResult.hide()},t.prototype.setSearchHandler=function(e){var t=this;e instanceof Function&&(this.searchHandler=e,this.input.onInput((function(){t.onSearch()})))},t.prototype.setSelectHandler=function(e){e instanceof Function&&(this.selectHandler=e)},t.prototype.setPlaceholder=function(e){this.input.getDomElement().attribute("placeholder",e)},t.prototype.setNoResultText=function(e){this.noResultText=e},t.prototype.getSearchResultGroup=function(){return this.searchResult},t}(o.Control));n.default=u},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Dom":147,"../../UIEvents":149,"../Input/Input":126,"./SearchResultOptionGroup":136}],135:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SearchResultOption=void 0;var o=e("../../Control"),r=e("../../UIEvents"),s=function(e){function t(t){var n=this;t=t||{};var i={elementParam:{elementType:"div",className:"bfui-search-option"},type:"SearchResultOption"};return(n=e.call(this,i)||this).getDomElement().html(t.html||t.text||""),n.param=t,n.disabled=!0===t.disabled,n.selected=!0===t.selected,n.value=t.value,n.text=t.text,n.setTooltip(n.text),n.setDisabled(n.disabled).setSelected(n.selected),t.class&&n.addClass(t.class),n.onClick((function(){n.selected||n.disabled||n._parent.setSelected(n),n.trigger(r.default.Clicked)})),n}return a(t,e),t.prototype.setSelected=function(e){return this.disabled||this.selected===e||(this.selected=e,e?this.addClass("bfui-search-option-selected"):this.removeClass("bfui-search-option-selected")),this},t.prototype.setDisabled=function(e){return this.disabled!==e&&(this.setSelected(!1),this.disabled=e,e?this.addClass("bfui-search-option-disabled"):this.removeClass("bfui-search-option-disabled")),this},t.prototype.getText=function(){return this.text},t.prototype.getValue=function(){return void 0===this.value?this.getText():this.value},t.prototype.getParam=function(){return this.param},t}(o.Control);n.SearchResultOption=s},{"../../Control":112,"../../UIEvents":149}],136:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../ControlGroup"),r=e("../../UIEvents"),s=e("./SearchResultOption"),l=e("../../../Common/Utils/DataUtil"),c=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-search-content"},type:"ControlGroup"};return(n=e.call(this,i)||this).enableAnimation=!1!==t.enableAnimation,n.enableAnimation&&n.addClass("bfui-search-animation"),t.values&&n.setValues(t.values),n.hide(),n}return a(t,e),t.prototype.setValues=function(e){var t=this;return this.clearControls(!0),this.values=[],e.forEach((function(e){var n;n=l.default.assertType(e,"obj")?e:{html:e.toString()},t.values.push(n);var i=new s.SearchResultOption(n);t.addControl(i),i.on(r.default.Clicked,(function(){t.trigger(r.default.Clicked,i)}))})),this},t.prototype.isVisible=function(){return this.enableAnimation?this._visible:e.prototype.isVisible.call(this)},t.prototype.setFixedPosition=function(e){var t=window.innerHeight,n=this.getDomElement().getElement(),i=Math.min(125,this._height);e.bottom+i>t?(n.style.top="",n.style.bottom=t-e.top+"px"):(n.style.top=e.bottom+"px",n.style.bottom=""),n.style.left=e.left+"px",n.style.width=e.right-e.left+"px"},t.prototype.show=function(){var t=this;if(this.enableAnimation){this._visible=!0;var n=function(){t._inTransition&&(t.getDomElement().removeClass("bfui-search-overflow-hidden").off("transitionend",n),t._inTransition=!1)};if(this._inTransition=!0,this._children.length>0){var i=this._children[0].getDimensions().height;this._height=this._children.length*i+2}this.getDomElement().addClass("bfui-search-overflow-hidden").css({"border-width":"1px",height:this._height+"px"}).on("transitionend",n)}else e.prototype.show.call(this);return this},t.prototype.hide=function(){return this.enableAnimation?(this._visible=!1,this.getDomElement().addClass("bfui-search-overflow-hidden").css({"border-width":"0px",height:"0px"})):e.prototype.hide.call(this),this},t.prototype.setSelected=function(e){if(void 0!==e){var t=!1;if(e instanceof s.SearchResultOption?this.indexOf(e)>=0&&(t=!0):this.getAllControls().some((function(n){if(n.getText()===e.toString())return e=n,t=!0,!0})),t&&this.selected!==e){this.getAllControls().forEach((function(t){t.setSelected(t===e)})),this.selected=e;var n=this.indexOf(this.selected),i=this.selected.getValue(),a=this.selected.getText(),o=this.selected.getParam();this.trigger(r.default.ValueChanged,{text:a,value:i,index:n,data:o})}return this}},t.prototype.setSelectedByIndex=function(e){var t=this.getControl({index:e});return t&&this.setSelected(t),this},t.prototype.setSelectedByValue=function(e){var t;return this.getAllControls().some((function(n){if((n=n).getValue()===e)return t=n,!0})),this.setSelected(t)},t.prototype.getSelected=function(){return this.selected},t.prototype.getValues=function(){return this.values},t.prototype.clearSelection=function(){this.selected=null,this.trigger(r.default.ValueChanged)},t}(o.ControlGroup);n.default=c},{"../../../Common/Utils/DataUtil":54,"../../ControlGroup":115,"../../UIEvents":149,"./SearchResultOption":135}],137:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../UIEvents"),s=e("../../Dom"),l=e("./SelectOptionGroup"),c=e("../../../Common/StatisticsDataManager"),d=c.getUINamespace("Select"),u=function(e){function t(t){var n=this;c.SDM.send(d,"bf_c_UISelect_new");var i={elementParam:{elementType:"div",className:"bfui-select"},type:"Select",id:(t=t||{}).id,parent:t.parent};(n=e.call(this,i)||this).enableAnimation=!1!==t.enableAnimation;var a=n.header=(new s.Dom).createElement({elementType:"div",className:"bfui-select-header"}),o=n.title=(new s.Dom).createElement({elementType:"div",className:"bfui-select-title"});o.html("请选择");var u=n.toggleButton=(new s.Dom).createElement({elementType:"div",className:"bfui-button bfui-select-togglebutton gld-bf-arrow-down-sm"});n.enableAnimation&&u.addClass("bfui-select-animation"),a.append(o).append(u).on("click",(function(e){n.disabled||(n.content.isVisible()?n.hideContent():n.showContent())}));var f=n.content=new l.default({enableAnimation:n.enableAnimation,values:t.values,maxHeight:t.maxHeight});return n.getDomElement().append(a),new s.Dom(document.body).append(f.getDomElement()),n.onChange(t.onChange),f.on(r.default.ValueChanged,(function(e){e&&n.title.html(e.text),n.onChangeCallback instanceof Function&&n.onChangeCallback(e)})),f.on(r.default.Clicked,(function(e){n.hideContent()})),void 0!==t.defaultIndex&&n.setSelected(t.defaultIndex),t.width&&n.getDomElement().css("width",t.width+"px"),document.addEventListener("mousedown",(function(e){var t=a.getElement(),i=e.target.parentElement;e.target!=t&&i!=t&&i!=f.getDomElement().getElement()&&e.target!=f.getDomElement().getElement()&&n.hideContent()}),!1),window.addEventListener("resize",(function(){n._resize()})),n.scrollFunc=n._scrollFunc.bind(n),n}return a(t,e),t.prototype._resize=function(){var e=this.header.getPosition();this.content.setFixedPosition(e)},t.prototype.setValues=function(e){return this.content.setValues(e),this},t.prototype.setSelected=function(e){return this.content.setSelectedByIndex(e),this.title.html(this.content.getSelected().getText()),this.hideContent(),this},t.prototype.setSelectedByValue=function(e){return this.content.setSelectedByValue(e),this},t.prototype.setDisabled=function(e){return void 0===e&&(e=!0),this.disabled=e,e?this.addClass("bfui-select-disabled"):this.removeClass("bfui-select-disabled"),this},t.prototype.onChange=function(e){return e instanceof Function&&(this.onChangeCallback=e),this},t.prototype._scrollFunc=function(){this.hideContent(),this.getDomElement().getParent().removeEventListener("scroll",this.scrollFunc,!1)},t.prototype.showContent=function(){return this.toggleButton.addClass("bfui-select-togglebutton-opened"),this._resize(),this.content.show(),this.getDomElement().getParent().addEventListener("scroll",this.scrollFunc,!1),this},t.prototype.hideContent=function(){return this.toggleButton.removeClass("bfui-select-togglebutton-opened"),this.content.hide(),this},t.prototype.clearSelection=function(e){return this.content.clearSelection(),this.setText(e),this},t.prototype.setText=function(e){return this.title.html(e),this},t.prototype.setMaxHeight=function(e){this.content.setMaxHeight(e)},t}(o.Control);n.default=u},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Dom":147,"../../UIEvents":149,"./SelectOptionGroup":139}],138:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SelectOption=void 0;var o=e("../../Control"),r=e("../../UIEvents"),s=function(e){function t(t){var n=this;t=t||{};var i={elementParam:{elementType:"div",className:"bfui-select-option"},type:"SelectOption"};return(n=e.call(this,i)||this).setTooltip(t.text).getDomElement().html(t.text),n.disabled=!0===t.disabled,n.selected=!0===t.selected,n.value=t.value,n.setDisabled(n.disabled).setSelected(n.selected),!1===t.visible&&n.hide(),n.onClick((function(){n.selected||n.disabled||n._parent.setSelected(n),n.trigger(r.default.Clicked)})),n}return a(t,e),t.prototype.setSelected=function(e){return this.disabled||this.selected===e||(this.selected=e,e?this.addClass("bfui-select-option-selected"):this.removeClass("bfui-select-option-selected")),this},t.prototype.setDisabled=function(e){return this.disabled!==e&&(this.setSelected(!1),this.disabled=e,e?this.addClass("bfui-select-option-disabled"):this.removeClass("bfui-select-option-disabled")),this},t.prototype.getText=function(){return this.getDomElement().html()},t.prototype.getValue=function(){return void 0===this.value?this.getText():this.value},t}(o.Control);n.SelectOption=s},{"../../Control":112,"../../UIEvents":149}],139:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../ControlGroup"),r=e("../../UIEvents"),s=e("./SelectOption"),l=e("../../../Common/Utils/DataUtil"),c=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-select-content"},type:"ControlGroup"};return(n=e.call(this,i)||this).enableAnimation=!1!==t.enableAnimation,n.enableAnimation&&n.addClass("bfui-select-animation"),n._maxHeight=t.maxHeight||125,n.getDomElement().css("maxHeight",n._maxHeight+"px"),t.values&&n.setValues(t.values),n.hide(),n}return a(t,e),t.prototype.setValues=function(e){var t=this;return this.clearControls(),this.values=[],e.forEach((function(e){var n;n=l.default.assertType(e,"obj")?e:{text:e.toString()},t.values.push(n);var i=new s.SelectOption(n);t.addControl(i),i.on(r.default.Clicked,(function(){t.trigger(r.default.Clicked,i)}))})),this._height=0,this},t.prototype.isVisible=function(){return this.enableAnimation?this._visible:e.prototype.isVisible.call(this)},t.prototype.getOptionsHeight=function(){if(!this._height){var e=2;this._children&&this._children.forEach((function(t){t.isVisible()&&(e+=t.getHeight())})),this._height=e}return this._height},t.prototype.setFixedPosition=function(e){var t=window.innerHeight,n=this._maxHeight,i=this.getDomElement().getElement(),a=Math.min(n,this.getOptionsHeight());e.bottom+a>t?(i.style.top="",i.style.bottom=t-e.top+"px"):(i.style.top=e.bottom+"px",i.style.bottom=""),i.style.left=e.left+"px",i.style.width=e.right-e.left+"px"},t.prototype.show=function(){var t=this;if(this.enableAnimation){this._visible=!0;var n=function(){t._inTransition&&(t.getDomElement().removeClass("bfui-select-overflow-hidden").off("transitionend",n),t._inTransition=!1)};this._inTransition=!0,this.getDomElement().addClass("bfui-select-overflow-hidden").css({"border-width":"1px",height:this.getOptionsHeight()+"px"}).on("transitionend",n)}else e.prototype.show.call(this);return this},t.prototype.hide=function(){return this.enableAnimation?(this._visible=!1,this.getDomElement().addClass("bfui-select-overflow-hidden").css({"border-width":"0px",height:"0px"})):e.prototype.hide.call(this),this},t.prototype.setSelected=function(e){if(void 0!==e){var t=!1;if(e instanceof s.SelectOption?this.indexOf(e)>=0&&(t=!0):this.getAllControls().some((function(n){if(n.getText()===e.toString())return e=n,t=!0,!0})),t&&this.selected!==e){this.getAllControls().forEach((function(t){t.setSelected(t===e)})),this.selected=e;var n=this.selected.getText(),i=this.indexOf(this.selected),a=this.selected.getValue();this.trigger(r.default.ValueChanged,{text:n,value:a,index:i})}return this}},t.prototype.setSelectedByIndex=function(e){var t=this.getControl({index:e});return t&&this.setSelected(t),this},t.prototype.setSelectedByValue=function(e){var t;return this.getAllControls().some((function(n){if((n=n).getValue()===e)return t=n,!0})),this.setSelected(t)},t.prototype.getSelected=function(){return this.selected},t.prototype.getValues=function(){return this.values},t.prototype.clearSelection=function(){this.selected=null,this.trigger(r.default.ValueChanged)},t.prototype.setMaxHeight=function(e){this._maxHeight=e,this.getDomElement().css("maxHeight",this._maxHeight+"px")},t}(o.ControlGroup);n.default=c},{"../../../Common/Utils/DataUtil":54,"../../ControlGroup":115,"../../UIEvents":149,"./SelectOption":138}],140:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../UIEvents"),s=e("../../Dom"),l=e("../../../Common/StatisticsDataManager"),c=e("../Tooltip/Tooltip"),d=l.getUINamespace("Slider"),u=function(e){function t(t){var n=this;l.SDM.send(d,"bf_c_UISlider_new");var i={elementParam:{elementType:"div",className:"bfui-slider"},type:"Slider",id:(t=t||{}).id,parent:t.parent};(n=e.call(this,i)||this).minValue=t.minValue||0,n.maxValue=t.maxValue||100,t.onClick&&n.onClick(t.onClick),n.onChangeCallback=t.onChangeCallback;var a=n.sliderLinePart=(new s.Dom).createElement({elementType:"div",className:"bfui-slider-line"}),o=n.sliderLeftPart=(new s.Dom).createElement({elementType:"div",className:"bfui-slider-left"}),c=n.sliderValuePart=(new s.Dom).createElement({elementType:"div",className:"bfui-slider-value"});n._domElement.append(a).append(o).append(c),n.setValue(t.value||0),n.setEnableTooltip(t.enableTooltip),n.on(r.default.ValueChanged,(function(e){n.onChangeCallback instanceof Function&&n.onChangeCallback(Math.round(e))}));var u,f,p=!1;c.on("mousedown",(function(e){p=!0,u=e.clientX,f=n.getValue(),n.enableTooltip&&n.tooltipControl&&n.tooltipControl.setEnableAlwaysShow(!0)}));var h=function(e){if(p){var t=e.clientX,i=f+(t-u)*(n.maxValue-n.minValue)/(n.sliderLinePart.getWidth()-10);i>n.maxValue&&(i=n.maxValue),i<n.minValue&&(i=n.minValue),n.setValue(i),u=t,f=i,n.enableTooltip&&n.tooltipControl&&n.tooltipControl.updatePosition(),e.preventDefault&&e.preventDefault()}},m=new s.Dom(document.body);return m.on("mousemove",h),m.on("mouseup",(function(e){h(e),n.enableTooltip&&n.tooltipControl&&n.tooltipControl.setEnableAlwaysShow(!1),p=!1})),n}return a(t,e),t.prototype.setValueRange=function(e,t){this.minValue=e,this.maxValue=t},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){this.value=Math.round(e);var t=(this.sliderLinePart.getWidth()-10)*this.value/(this.maxValue-this.minValue);return this.sliderValuePart.css("left",t+"px"),this.sliderLeftPart.css("width",t+3+"px"),this.trigger(r.default.ValueChanged,this.value),this.enableTooltip&&this.setTooltipValue(),this},t.prototype.onChange=function(e){return e instanceof Function&&(this.onChangeCallback=e),this},t.prototype.setEnableTooltip=function(e){this.enableTooltip=e,e&&!this.tooltipControl&&(this.tooltipControl=new c.default({hostDom:this.sliderValuePart,content:"",placement:"top",theme:"dark",className:"bfui-slider-tooltip"}),this.setTooltipValue())},t.prototype.setTooltipFormater=function(e){this.tooltipFormater=e,this.setTooltipValue()},t.prototype.setTooltipValue=function(){this.enableTooltip&&this.tooltipControl&&this.tooltipControl.setHTML(this.tooltipFormater?this.tooltipFormater(this.getValue()):this.getValue().toString())},t.prototype.getTooltipControl=function(){return this.tooltipControl},t}(o.Control);n.default=u},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Dom":147,"../../UIEvents":149,"../Tooltip/Tooltip":144}],141:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../UIEvents"),s=e("../../Dom"),l=e("../../../Common/StatisticsDataManager"),c=l.getUINamespace("Switch"),d=function(e){function t(t){var n=this;l.SDM.send(c,"bf_c_UISwitch_new");var i={elementParam:{elementType:"div",className:"bfui-switch"},type:"Switch",id:(t=t||{}).id,parent:t.parent};n=e.call(this,i)||this,t.onClick&&n.onClick(t.onClick);var a=n.switchPart=(new s.Dom).createElement({elementType:"input",className:"bfui-switch-switch"});a.attribute("type","checkbox"),a.on("click",(function(){n.value=a.attribute("checked"),n.onChangeFn&&n.onChangeFn(n.value)}));var o=n.textPart=(new s.Dom).createElement({elementType:"div",className:"bfui-switch-text"});return n._domElement.append(a).append(o),t.text&&n.setText(t.text),t.value&&n.setValue(t.value),n}return a(t,e),t.prototype.getText=function(){return this.textPart.html()},t.prototype.setText=function(e){return this.textPart.html(e),this},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){return this.value=e,this.switchPart.attribute("checked",e),this.trigger(r.default.ValueChanged,this,e),this},t.prototype.onChange=function(e){return e instanceof Function&&(this.onChangeFn=e),this},t}(o.Control);n.default=d},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Dom":147,"../../UIEvents":149}],142:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Tab=void 0;var o=e("../../Control"),r=e("../../UIEvents"),s=function(e){function t(t){var n=this,i={elementType:"div",className:"bfui-tab"},a={elementParam:i,type:"Tab",name:"tab",className:"bfui-tab-tab",parent:t.parent};return(t=Object.assign({},a,t)).extraClass&&(i.className=i.className+" "+t.extraClass),(n=e.call(this,t)||this).param=t,n._domElement.on("click",(function(e){!n.isActived()&&n.isEnabled()&&n.trigger(r.default.SelectionChanged,n)})),t.label&&n.setLabel(t.label),!1===t.enabled&&n.setEnabled(t.enabled),n}return a(t,e),t.prototype.isEnabled=function(){return!this._domElement.hasClass("disabled")},t.prototype.setEnabled=function(e){return e!=this.isEnabled()&&this._domElement.toggle("disabled"),this},t.prototype.setLabel=function(e){return this.setHTML(e),this},t.prototype.setActive=function(){return this.isActived()||this._domElement.addClass("is-active"),this},t.prototype.isActived=function(){return this._domElement.hasClass("is-active")},t.prototype.getValue=function(){return this.param.value},t}(o.Control);n.Tab=s},{"../../Control":112,"../../UIEvents":149}],143:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Control"),r=e("../../UIEvents"),s=e("../../Dom"),l=e("./Tab"),c=e("../../../Common/StatisticsDataManager"),d=c.getUINamespace("Tabs"),u=function(e){function t(t){var n=this;c.SDM.send(d,"bf_c_UITabs_new");var i={elementParam:{elementType:"div",className:"bfui-tabs"},type:"Tabs",id:(t=t||{}).id,parent:t.parent},a=(n=e.call(this,i)||this).header=(new s.Dom).createElement({elementType:"div",className:"bfui-tabs-header"}),o=n.content=(new s.Dom).createElement({elementType:"div",className:"bfui-tabs-content"});return n.getDomElement().append(a).append(o),n.tabLeft=null!=t.tabLeft?t.tabLeft:null,n.tabsArray=[],t.options&&n.setOptions(t.options),n}return a(t,e),t.prototype.addTab=function(e){var t=this;e.parent=this.header;var n=new l.Tab(e),i=(new s.Dom).createElement({elementType:"div",className:"bfui-tabs-pane",id:"pane-"+e.name});return this.content.append(i),"string"==typeof e.content?i.html(e.content):i.append(e.content),n.on(r.default.SelectionChanged,(function(e){var n=t.getIndex(e);t.setActive(n),t.trigger(r.default.SelectionChanged,e.param)})),this.tabsArray.push(n),n},t.prototype.getIndex=function(e){for(var t=0;t<this.tabsArray.length;t++)if(e.param.name===this.tabsArray[t].param.name)return t},t.prototype.setOptions=function(e){var t,n=this;this.clearOptions(),this.header.html('<div class="bfui-tabs-active-bar"></div>'),e.forEach((function(e,i){null==t&&e.actived&&(t=i),n.addTab(e)})),this.setActive(null==t?0:t)},t.prototype.getOptions=function(){var e=[];return this.tabsArray.forEach((function(t){e.push(t.param)})),e},t.prototype.setActive=function(e){var t=this,n=0;this.tabsArray.forEach((function(i,a){if(a===e){t.activeValue=i.getValue();var o=t.header.getElement().querySelector(".is-active"),r=t.content.getElement().querySelector(".is-active");o&&o.removeClass("is-active"),r&&r.removeClass("is-active"),i.setActive(),t.content.getElement().querySelector("#pane-"+i.param.name).addClass("is-active");var s=t.header.getElement().querySelector(".bfui-tabs-active-bar");1==e&&(n-=5),2==e&&(n-=10),s.style.transform="translateX("+n+"px)",s.style.width=i.getDomElement().getWidth()+"px"}else{var l=t.tabLeft?t.tabLeft:20;n=n+i.getDomElement().getWidth()+l}})),this.selectHandler&&this.selectHandler(this.activeValue)},t.prototype.getActiveValue=function(){return this.activeValue},t.prototype.clearOptions=function(){this.tabsArray=[],this.header.html(""),this.content.html("")},t.prototype.setEnabled=function(e){this.tabsArray.forEach((function(t,n){t.setEnabled(e.indexOf(n)>-1)}))},t.prototype.onSelect=function(e){this.selectHandler=e},t}(o.Control);n.default=u},{"../../../Common/StatisticsDataManager":53,"../../Control":112,"../../Dom":147,"../../UIEvents":149,"./Tab":142}],144:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){var n=this,i={elementParam:{elementType:"div",className:"bfui-tooltip"},type:"Tooltip",id:t.id,parent:t.parent};(n=e.call(this,i)||this).hostDom=t.hostDom,n.placement=t.placement||"right",n.addClass("bfui-tooltip-"+n.placement).setHTML(t.content).hide(),"dark"===t.theme&&n.addClass("bfui-tooltip-dark"),t.className&&n.addClass(t.className),t.width&&n.getDomElement().css({width:t.width+"px"});var a=!1,o=null,r=function(){a=!1,n.enableAlwaysShow||(o&&(clearTimeout(o),o=null),o=setTimeout((function(){a||n.hide()}),500))};return t.hostDom.on("mouseenter",(function(){a=!0,n.show(),requestAnimationFrame((function(){n.updatePosition()}))})).on("mouseleave",r),n.getDomElement().on("mouseenter",(function(){a=!0})).on("mouseleave",r),document.body.appendChild(n.getDomElement().getElement()),n}return a(t,e),t.prototype.setEnableAlwaysShow=function(e){this.enableAlwaysShow=e,e?this.show():this.hide(),this.updatePosition()},t.prototype.updatePosition=function(){var e,t,n=this,i=this.hostDom.getPosition(),a=i.top,o=i.right,r=(i.bottom,i.left),s=this.hostDom.getDimensions(),l=s.height,c=s.width,d=this.getDimensions(),u=d.width,f=d.height;switch(this.placement){case"right":e=a+l/2-f/2,t=o+10,n.getDomElement().css({left:t+"px",top:e+"px"});break;case"top":!function(){var e=a-f-10,t=r+c/2-u/2;n.getDomElement().css({left:t+"px",top:e+"px"})}();break;case"bottom":!function(){var e=a+30,t=r-c-10;n.getDomElement().css({left:t+"px",top:e+"px"})}()}},t}(e("../../Control").Control);n.default=o},{"../../Control":112}],145:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../ControlGroup"),r=e("../../UIEvents"),s=e("../../Dom"),l=e("../../../Common/StatisticsDataManager"),c=l.getUINamespace("Tree"),d=function(e){function t(t){var n=this;l.SDM.send(c,"bf_c_UITree_new");var i={elementParam:{elementType:"div",className:"bfui-tree"},type:"Tree",id:(t=t||{}).id,parent:t.parent},a={elementParam:{elementType:"div",className:"bfui-tree-content"},type:"ControlGroup"},r=(n=e.call(this,i)||this).content=new o.ControlGroup(a);n.header=(new s.Dom).createElement({elementType:"div",className:"bfui-tree-header"}),n.footer=(new s.Dom).createElement({elementType:"div",className:"bfui-tree-footer"}),n.title=(new s.Dom).createElement({elementType:"div",className:"bfui-tree-title"});return n._domElement.append(r.getDomElement()),t.title&&n.setTitle(t.title),n.sizeFixed=t.sizeFixed,n}return a(t,e),t.prototype.addTreeNode=function(e,t){var n=this;this.content.addControl(e,t),e.on(r.default.RightClicked,(function(e){n.trigger(r.default.RightClicked,e)}))},t.prototype.getControl=function(e){return this.content.getControl(e)},t.prototype.getAllControls=function(){return this.content.getAllControls()},t.prototype.setTitle=function(e){return this.title.html(e),this},t.prototype.getTitle=function(){return this.title.html()},t.prototype.getSelection=function(){},t.prototype.clearSelection=function(){var e=function(t){t.length>0&&t.find((function(t){t.getSelectState()?t.setSelectState(!1):e(t.getAllControls())}))};e(this.getAllControls())},t}(o.Control);n.default=d},{"../../../Common/StatisticsDataManager":53,"../../ControlGroup":115,"../../Dom":147,"../../UIEvents":149}],146:[function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../ControlGroup"),r=e("../../UIEvents"),s=e("../../Dom"),l=function(e){function t(t){var n=this;void 0===(t=t||{}).isLoaded&&(t.isLoaded=!0);var i={elementParam:{elementType:"div",className:t.isLoaded?"bfui-tree-node":"bfui-tree-node not-allowed"},type:"TreeNode",id:t.id,parent:t.parent};(n=e.call(this,i)||this).isLoaded=t.isLoaded,n.parent=t.parent;var a={elementParam:{elementType:"div",className:"bfui-subtree"},type:"ControlGroup"};n.subNode=new o.ControlGroup(a);return n.opt=t,n.opt.isChecked?n.checkedState="checked":n.checkedState="unchecked",n}return a(t,e),t.prototype.initTreeNode=function(e,t){var n=this,i=(new s.Dom).createElement({elementType:"div",className:"bfui-tree-info"});if(this.opt.hasCollapse){var a=this.opt.hasCollapse&&this.opt.isExpand?"open":"";this.opt.isExpand?this.subNode.show():this.subNode.hide();var o=this.collapseWrap=(new s.Dom).createElement({elementType:"span",className:"bfui-collapse "+a});o.html('<i class="bimface-icon gld-bf-arrow-down-sm"></i>'),o.on("click",(function(){n.toggleExpansion()}))}if(this.opt.hasCheckBox){var l="";this.opt.isChecked&&(this.isChildHasUncheckState(this.opt.content.children)&&"checked"!==this.opt.parent.checkedState?(l="bfui-checkbox bfui-half",this.checkedState="half"):l="bfui-checked"),(this.checkbox=(new s.Dom).createElement({elementType:"span",className:"bfui-checkbox "+l})).on("click",(function(){var e=!n.opt.isChecked;n.setCheckState(e),n.trigger(r.default.CheckedChanged,n,e)}))}if(this.opt.hasIsolate){var c=this.opt.isIsolate?"gld-bf-component-sm":"gld-bf-component-fill-sm";(this.isolateBox=(new s.Dom).createElement({elementType:"i",className:"bfui-isolate bimface-icon "+c})).on("click",(function(){n.setIsolateState(!n.opt.isIsolate),n.trigger(r.default.IsolateChanged,n,!n.opt.isIsolate)}))}var d=this.treeName=(new s.Dom).createElement({elementType:"span",className:"bfui-tree-name"}),u="";t&&(u="svg"===t.type?'<svg class="bimface-svgicon svg-icon" aria-hidden="true">\n                                                <use xlink:href="#'+t.name+'"></use>\n                                              </svg>':'<i class="bimface-icon '+t.name+'"></i>'),d.html(""+u+e),d.attribute("title",""+e),d.on("click",(function(){if(!n.opt.hasSelection&&n.opt.hasCollapse)n.toggleExpansion();else{if(!n.isLoaded)return;var e=!n.selectionState;n.currentUnSelect(n.opt.rootTree),n.setSelectState(e),n.trigger(r.default.SelectionChanged,n,e)}})),d.on("contextmenu",(function(e){e.preventDefault(),n.trigger(r.default.RightClicked,{event:e,node:n})})),this._domElement.append(i),this.checkbox&&i.append(this.checkbox),this.collapseWrap&&i.append(this.collapseWrap),this.isolateBox&&i.append(this.isolateBox),i.append(this.treeName),this.getTreeInfoDom=function(){return i},this._domElement.append(this.subNode.getDomElement())},t.prototype.getSelectState=function(){return this.selectionState},t.prototype.getIsChecked=function(){return this.opt.isChecked},t.prototype.setSelectState=function(e){this.selectionState=e,this.selectionState?this.opt.hasSelection&&this.treeName.addClass("bfui-selected"):this.treeName&&this.treeName.removeClass("bfui-selected")},t.prototype.currentUnSelect=function(e){for(var t=0,n=e.getAllControls();t<n.length;t++){var i=n[t];if(i.getSelectState()){i.setSelectState(!1),i.trigger(r.default.SelectionChanged,i,!1);break}this.currentUnSelect(i)}},t.prototype.getCheckedState=function(){return this.checkedState},t.prototype.setCheckState=function(e){this.checkedState=e?"checked":"unchecked",this.opt.isChecked=e,this.opt.hasCheckBox&&this.checkbox&&(this.checkbox.toggleClass("bfui-checked",e),this.checkbox.removeClass("bfui-half")),this.setChildCheckState(e)},t.prototype.setChildCheckState=function(e){if(this.opt.hasCheckBox&&this.checkbox){var t=this.getAllControls();"half"!==this.getCheckedState()&&t.forEach((function(t){t.setCheckState(e)}))}},t.prototype.setParentCheckState=function(e){if(this.checkbox){var t=this.getAllControls();if(t&&t.length>0){for(var n=void 0,i=0,a=t.length;i<a;i++){var o=t[i].getCheckedState();void 0===n?n=o:o!=n&&(n="half")}this.checkedState=n}switch(this.checkedState){case"checked":this.opt.isChecked=!0,this.checkbox.addClass("bfui-checked"),this.checkbox.removeClass("bfui-half");break;case"unchecked":this.opt.isChecked=!1,this.checkbox.removeClass("bfui-checked"),this.checkbox.removeClass("bfui-half");break;case"half":this.opt.isChecked=!0,this.checkbox.addClass("bfui-half"),this.checkbox.removeClass("bfui-checked")}this.trigger(r.default.ValueChanged,"check")}},t.prototype.isChildHasUncheckState=function(e){var t=[];if(e){var n=[];n.unshift(e);for(var i=function(){var e;n.shift().map((function(i){if(t.push(i.isVisible),(e=i.children)&&e.length>0)for(var a=0;a<e.length;a++)n.push([e[a]])}))};n.length>0;)i()}return!!t.includes(!1)},t.prototype.getIsolateState=function(){return this.opt.isIsolate},t.prototype.setIsolateState=function(e){(this.opt.isIsolate=e,this.opt.hasIsolate)&&(e?(this.isolateBox.removeClass("gld-bf-component-fill-sm"),this.isolateBox.addClass("gld-bf-component-sm")):(this.isolateBox.addClass("gld-bf-component-fill-sm"),this.isolateBox.removeClass("gld-bf-component-sm")),this.getAllControls().forEach((function(t){t.setIsolateState(e)})))},t.prototype.setParentIsolateState=function(e){var t=this.getAllControls();if(t&&t.length>0){for(var n=0,i=0;i<t.length;i++)t[i].getIsolateState()&&n++;n===t.length?this.opt.isIsolate=!0:this.opt.isIsolate=!1}this.opt.isIsolate?(this.isolateBox.removeClass("gld-bf-component-fill-sm"),this.isolateBox.addClass("gld-bf-component-sm")):(this.isolateBox.addClass("gld-bf-component-fill-sm"),this.isolateBox.removeClass("gld-bf-component-sm")),this.trigger(r.default.ValueChanged,"isolate")},t.prototype.toggleExpansion=function(){this.collapseWrap.toggleClass("open"),this.opt.isExpand=!this.opt.isExpand,this.trigger(r.default.ExpendChanged,this,this.opt.isExpand),this.opt.isExpand?this.subNode.show():this.subNode.hide()},t.prototype.setExpansion=function(e){this.opt.hasCollapse&&e!==this.opt.isExpand&&this.toggleExpansion()},t.prototype.addChildNode=function(e,t){var n=this;this.subNode.addControl(e,t),e.on("ValueChanged",(function(t){switch(t){case"check":n.setParentCheckState(e);break;case"isolate":n.setParentIsolateState(e)}})),e.on("CheckedChanged",(function(){n.setParentCheckState(e)})),e.on("IsolateChanged",(function(){n.setParentIsolateState(e)})),e.on("SelectionChanged",(function(){})),e.on(r.default.RightClicked,(function(e){n.trigger(r.default.RightClicked,e)}))},t.prototype.removeChildNode=function(){for(var e=this.getAllControls(),t=e.length-1;t>=0;t--)this.subNode.removeControl(e[t])},t.prototype.getControl=function(e,t){if(void 0===t&&(t=!1),!t)return this.subNode.getControl(e);if(this.subNode.getControl(e))return this.subNode.getControl(e);for(var n=0,i=this.getAllControls();n<i.length;n++){var a=i[n].getControl(e,t);if(a)return a}},t.prototype.getAllControls=function(){return this.subNode.getAllControls()},t.prototype.updateUnloadControl=function(e){if(this.getControl(e)){var t=this.getControl(e);t.removeClass("not-allowed"),t.isLoaded=!0}else{this.getAllControls().forEach((function(t){if(t.getControl(e)){var n=t.getControl(e);n.removeClass("not-allowed"),n.isLoaded=!0}else t.updateUnloadControl(e)}))}},t.prototype.getInstanceIds=function(){return this.opt.instanceIds},t.prototype.setInstanceIds=function(e){this.opt.instanceIds=e},t.prototype.getParent=function(){return this.parent},t.prototype.getOptions=function(){return this.opt},t.prototype.getTreeName=function(){return this.treeName},t.prototype.getSubNode=function(){return this.subNode},t}(o.Control);n.default=l},{"../../ControlGroup":115,"../../Dom":147,"../../UIEvents":149}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Dom=void 0;var i=e("../Common/Utils/DataUtil"),a=function(){function e(e){this.eventMap={},this.element=e}return e.prototype.createElement=function(t){var n=document.createElement(t.elementType),a=t.className;a&&(i.default.assertType(a,"arr")&&(a=a.join(" ")),n.className=a),t.id&&(n.id=t.id);var o=new e(n);t.parent&&(t.parent instanceof e?t.parent:new e(t.parent)).append(o);return o.visible=!0,o},e.prototype.getElement=function(){return this.element},e.prototype.getParent=function(){return this.element.parentElement},e.prototype.append=function(e){return this.element.appendChild(e.element),this},e.prototype.insert=function(e,t){return void 0!==t&&this.element.childNodes.length>t?this.element.insertBefore(e.element,this.element.childNodes[t]):this.append(e),this},e.prototype.remove=function(e){return this.element.removeChild(e.element),this},e.prototype.clear=function(){for(;this.element.childNodes.length>0;)this.element.removeChild(this.element.childNodes[0]);return this},e.prototype.replace=function(e,t){return this.element.replaceChild(e.getElement(),t.getElement()),this},e.prototype.show=function(){return this.visible||(this.element.style.display=this.displayType,this.visible=!0),this},e.prototype.hide=function(){return this.visible?(this.displayType=this.element.style.display,"none"===this.displayType&&(this.displayType=void 0),this.element.style.display="none",this.visible=!1,this):this},e.prototype.isVisible=function(){return this.visible},e.prototype.on=function(e,t,n){return void 0===n&&(n=null),this.element.addEventListener(e,t,n),this.eventMap[e]=this.eventMap[e]||[],this.eventMap[e].push(t),this},e.prototype.off=function(e,t){if(this.element.removeEventListener(e,t),this.eventMap[e]){var n=this.eventMap[e].indexOf(t);n>=0&&this.eventMap[e].splice(n,1)}return this},e.prototype.destroy=function(){var e=this,t=function(t){n.eventMap[t].forEach((function(n){e.off(t,n)}))},n=this;for(var i in this.eventMap)t(i);this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.eventMap=void 0,this.displayType=void 0,this.themeType=void 0,this.element=void 0},e.prototype.getClass=function(){return this.getElement().getAttribute("class")},e.prototype.hasClass=function(e){var t=this.getClass();return!!t&&(t&&t.split(" ")).indexOf(e)>-1},e.prototype.addClass=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.element.classList).add.apply(e,t),this},e.prototype.removeClass=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.element.classList).remove.apply(e,t),this},e.prototype.toggleClass=function(e,t){this.getClass();var n=this.hasClass(e);return null!=t?(t&&!n&&this.addClass(e),t||this.removeClass(e)):n?this.removeClass(e):this.addClass(e),!n},e.prototype.toggle=function(e){return this.element.classList.toggle(e),this},e.prototype.getPosition=function(){var e=this.element.getBoundingClientRect();return{top:e.top,left:e.left,right:e.right,bottom:e.bottom}},e.prototype.getDimensions=function(){var e=this.element.getBoundingClientRect();return{width:e.width,height:e.height}},e.prototype.getWidth=function(){return this.element.getBoundingClientRect().width},e.prototype.getHeight=function(){return this.element.getBoundingClientRect().height},e.prototype.html=function(e){return null!=e?(this.element.innerHTML=e,this):this.element.innerHTML},e.prototype.css=function(e,t){if(i.default.assertType(e,"str"))return t?(this.element.style[e]=t,this):this.element.style[e];if(i.default.assertType(e,"obj")){var n=e;for(var a in n)this.element.style[a]=n[a];return this}},e.prototype.attribute=function(e,t){if(i.default.assertType(e,"str"))return null!=t?(this.element[e]=t,this):this.element[e];if(i.default.assertType(e,"obj")){var n=e;for(var a in n)this.element[a]=n[a];return this}},e.prototype.theme=function(e){return e?(this.themeType&&this.removeClass(this.themeType),this.themeType=e,this.addClass(e),this):this.themeType},e.prototype.click=function(){return this.element.click(),this},e}();n.Dom=a},{"../Common/Utils/DataUtil":54}],148:[function(e,t,n){!function(e){var t,n,i,a,o,r='<svg><symbol id="gld-bf-search-md" viewBox="0 0 1024 1024"><path d="M448 128c75.328 0 148.544 26.688 206.144 75.2a318.976 318.976 0 0 1 98.944 341.568 318.72 318.72 0 0 1-304.896 223.36c-32.64 0-65.216-5.056-96.768-15.04A319.04 319.04 0 0 1 129.28 475.456a319.04 319.04 0 0 1 171.456-311.552C346.24 140.352 396.736 128.064 448 128z m0-128A447.872 447.872 0 0 0 1.728 486.4 448 448 0 1 0 448 0zM750.272 843.008l90.496-90.496 180.992 180.992L931.264 1024z" fill="#A4A8AE" ></path></symbol><symbol id="gld-bf-ground-selected-c-md" viewBox="0 0 1024 1024"><path d="M85.333333 769.066667l426.666667-85.333334L938.666667 426.666667v512H85.333333z" fill="#227360" ></path><path d="M810.666667 256h42.666666v85.333333h-42.666666zM810.666667 426.666667h42.666666v85.333333h-42.666666z" fill="#12151A" ></path><path d="M196.821333 413.141333l199.253334-243.498666L834.133333 213.418667l-4.266666 42.496-415.317334-41.557334-184.704 225.834667z" fill="#12151A" ></path><path d="M832 234.666667m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M405.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M192 448m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M170.666667 469.333333h42.666666v85.333334H170.666667zM170.666667 640h42.666666v128H170.666667z" fill="#12151A" ></path><path d="M512 768.853333l341.333333-205.653333v-85.333333l-341.333333 205.866666-341.333333 68.053334v85.333333z" fill="#12151A" ></path></symbol><symbol id="gld-bf-ground-c-md" viewBox="0 0 1024 1024"><path d="M85.333333 769.066667l426.666667-85.333334L938.666667 426.666667v512H85.333333z" fill="#636870" ></path><path d="M810.666667 256h42.666666v85.333333h-42.666666zM810.666667 426.666667h42.666666v85.333333h-42.666666z" fill="#A4A8AE" ></path><path d="M196.821333 413.141333l199.253334-243.498666L834.133333 213.418667l-4.266666 42.496-415.317334-41.557334-184.704 225.834667z" fill="#A4A8AE" ></path><path d="M832 234.666667m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M405.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M192 448m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M170.666667 469.333333h42.666666v85.333334H170.666667zM170.666667 640h42.666666v128H170.666667z" fill="#A4A8AE" ></path><path d="M512 768.853333l341.333333-205.653333v-85.333333l-341.333333 205.866666-341.333333 68.053334v85.333333z" fill="#A4A8AE" ></path></symbol><symbol id="gld-bf-space-selected-c-md" viewBox="0 0 1024 1024"><path d="M196.821333 413.141333l199.253334-243.498666L834.133333 213.418667l-4.266666 42.496-415.317334-41.557334-184.704 225.834667z" fill="#12151A" ></path><path d="M832 234.666667m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M405.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M192 448m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M85.333333 769.066667l426.666667-85.333334L938.666667 384v554.666667H85.333333z" fill="#227360" ></path></symbol><symbol id="gld-bf-space-c-md" viewBox="0 0 1024 1024"><path d="M196.821333 413.141333l199.253334-243.498666L834.133333 213.418667l-4.266666 42.496-415.317334-41.557334-184.704 225.834667z" fill="#A4A8AE" ></path><path d="M832 234.666667m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M405.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M192 448m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M85.333333 769.066667l426.666667-85.333334L938.666667 384v554.666667H85.333333z" fill="#636870" ></path></symbol><symbol id="gld-bf-projection-selected-c-md" viewBox="0 0 1024 1024"><path d="M85.333333 769.066667l426.666667-85.333334L938.666667 341.333333v597.333334H85.333333z" fill="#227360" ></path><path d="M810.666667 256h42.666666v128h-42.666666z" fill="#12151A" ></path><path d="M196.821333 413.141333l199.253334-243.498666L834.133333 213.418667l-4.266666 42.496-415.317334-41.557334-184.704 225.834667z" fill="#12151A" ></path><path d="M832 234.666667m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M405.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M192 448m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#12151A" ></path><path d="M810.666667 469.333333h42.666666v128h-42.666666zM810.666667 682.666667h42.666666v128h-42.666666zM170.666667 512h42.666666v85.333333H170.666667zM170.666667 682.666667h42.666666v128H170.666667zM170.666667 853.333333h682.666666v85.333334H170.666667z" fill="#12151A" ></path></symbol><symbol id="gld-bf-projection-c-md" viewBox="0 0 1024 1024"><path d="M85.333333 769.066667l426.666667-85.333334L938.666667 341.333333v597.333334H85.333333z" fill="#636870" ></path><path d="M810.666667 256h42.666666v128h-42.666666z" fill="#A4A8AE" ></path><path d="M196.821333 413.141333l199.253334-243.498666L834.133333 213.418667l-4.266666 42.496-415.317334-41.557334-184.704 225.834667z" fill="#A4A8AE" ></path><path d="M832 234.666667m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M405.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M192 448m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="#A4A8AE" ></path><path d="M810.666667 469.333333h42.666666v128h-42.666666zM810.666667 682.666667h42.666666v128h-42.666666zM170.666667 512h42.666666v85.333333H170.666667zM170.666667 682.666667h42.666666v128H170.666667zM170.666667 853.333333h682.666666v85.333334H170.666667z" fill="#A4A8AE" ></path></symbol><symbol id="gld-bf-third-person-lg" viewBox="0 0 1024 1024"><path d="M592 32a112 112 0 0 1 78.336 192.032L676.032 224c78.656 0 125.312 55.264 132.48 137.28l23.424 211.168 0.064 6.24c-3.168 37.184-26.24 61.728-63.84 61.728-12.032 0-22.4-2.56-31.104-7.168l-0.864 278.4A79.424 79.424 0 0 1 655.936 992c-28.096 0-50.336-11.456-64.096-30.08-14.4 18.752-37.184 30.08-63.872 30.08-45.216 0-79.04-33.856-79.04-78.72l-0.064-280.64a65.248 65.248 0 0 1-32.352 7.872c-37.728 0-64.512-27.36-64.512-63.68l0.256-3.936 25.632-206.656C387.2 279.36 427.552 224 505.44 224l8.192 0.032A112 112 0 0 1 592 32z m84.032 224h-170.592c-64.48 0-89.056 51.392-95.712 113.632L384 576.832c0 18.016 11.84 31.68 32.512 31.68 20.608 0 29.696-13.024 31.68-31.872l32.576-194.496 0.16 531.104c0 27.072 19.328 46.752 47.04 46.752 27.68 0 48-18.592 48.416-48.096L575.936 640h32l0.448 271.808c0 27.072 15.68 48.192 47.552 48.192 27.712 0 48.288-21.28 48.288-48.352l1.6-529.504 30.72 194.08c2.592 19.264 10.976 32.192 31.616 32.192s30.208-11.776 31.968-32.448l-23.424-211.136C771.296 302.912 740.448 256 676.032 256zM384 864v32H96v-32h288z m512 0v32h-96v-32h96zM288 544v32H192v-32h96z m304-480a80 80 0 1 0 0 159.968A80 80 0 0 0 592 64z"  ></path></symbol><symbol id="gld-bf-reverse-lg" viewBox="0 0 1024 1024"><path d="M128 128h192v32H160v160H128V128z m0 736h192v-32H160v-160H128v192zM864 128h-192v32h160v160h32V128z m0 736h-192v-32h160v-160h32v192zM566.016 332.48l19.968-24.96L768 448H256v-32h420.768zM457.984 659.52l-19.968 24.96L256 544h512v32H347.232z"  ></path></symbol><symbol id="gld-bf-zoom-in-lg" viewBox="0 0 1024 1024"><path d="M480 192a288 288 0 1 0 0 576 288 288 0 0 0 0-576z m0 32a256 256 0 1 1 0 512 256 256 0 0 1 0-512z"  ></path><path d="M640 448H320v64h320z"  ></path><path d="M448 320v320h64V320zM651.328 692.672l-22.656 22.656 176 176 22.656-22.656z"  ></path></symbol><symbol id="gld-bf-zoom-out-lg" viewBox="0 0 1024 1024"><path d="M480 160a288 288 0 1 0 0 576 288 288 0 0 0 0-576z m0 32a256 256 0 1 1 0 512 256 256 0 0 1 0-512z"  ></path><path d="M640 416H320v64h320zM651.328 660.672l-22.656 22.656 176 176 22.656-22.656z"  ></path></symbol><symbol id="gld-bf-drag-lg" viewBox="0 0 1024 1024"><path d="M608 224a64 64 0 0 1 63.84 59.2L672 288v192h-32V288a32 32 0 0 0-63.776-3.744L576 288h-32a64 64 0 0 1 64-64z m-192 0a64 64 0 0 1 63.84 59.2L480 288v192h-32V288a32 32 0 0 0-63.776-3.744L384 288v192h-32V288a64 64 0 0 1 64-64z"  ></path><path d="M320 416a64 64 0 0 1 63.84 59.2L384 480v160h-32v-160a32 32 0 0 0-63.776-3.744L288 480v160H256v-160a64 64 0 0 1 64-64z m384-112a64 64 0 0 1 63.84 59.2l0.16 4.8V640h-32v-272a32 32 0 0 0-63.776-3.744L672 368h-32a64 64 0 0 1 64-64zM512 896a256 256 0 0 0 255.872-248L768 640h-32a224 224 0 0 1-447.872 7.68L288 640H256a256 256 0 0 0 256 256z m0-736a64 64 0 0 1 63.84 59.2L576 224v256h-32V224a32 32 0 0 0-63.776-3.744L480 224v80h-32V224a64 64 0 0 1 64-64z"  ></path></symbol><symbol id="gld-bf-scaling-lg" viewBox="0 0 1024 1024"><path d="M480 544v320H160V544h320z m-32 32H192v256h256v-256zM836.672 164.672l22.656 22.656-224 224-22.656-22.656zM160 480h32V192h352V160H160zM544 832h288V480h32v384H544z"  ></path><path d="M672 160h192v192h-32V192h-160z"  ></path></symbol><symbol id="gld-bf-rotation-lg" viewBox="0 0 1024 1024"><path d="M480 192h32v352h-32V192z m0 544h32v128h-32v-128zM672 500L832 480l-14.176 160z"  ></path><path d="M482.976 655.968c-184.384 0-336-83.392-336-192 0-97.344 122.24-175.36 282.944-189.664l9.888-0.8 2.304 31.904c-150.976 10.912-263.136 80.704-263.136 158.56 0 85.76 134.944 160 304 160 64.096 0 125.184-10.688 176.384-30.208 46.08-17.6 82.208-41.6 104.032-68.8l4.48-5.92 26.016 18.624c-25.248 35.328-68.288 65.088-123.136 85.984-54.944 20.96-119.872 32.32-187.776 32.32z"  ></path></symbol><symbol id="gld-bf-translation-lg" viewBox="0 0 1024 1024"><path d="M512 576v160h96l-112 128-112-128h96v-160h32z m224-192l128 112-128 112v-96.032L576 512v-32l160-0.032V384zM256 384v96h160v32H256v96l-128-112L256 384z m240-256L608 256h-96v160h-32V256h-96l112-128z"  ></path></symbol><symbol id="gld-bf-room-deletenode-lg" viewBox="0 0 1024 1024"><path d="M224 352v257.6a80 80 0 0 1 64 77.536V672h256.704A176.064 176.064 0 0 1 704 512.704V352h32v160.704a176 176 0 1 1-191.296 191.328L288 704l-0.032-15.136-0.128 4.384A80 80 0 1 1 192 609.6V352h32z m496 192a144 144 0 1 0 0 288 144 144 0 0 0 0-288z m-512 96a48 48 0 1 0 0 96 48 48 0 0 0 0-96zM800 672v32h-160v-32h160zM208 192A80 80 0 0 1 288 271.136V256h352v32H288l-0.032-15.136-0.128 4.384A80 80 0 1 1 208 192z m512 0a80 80 0 1 1 0 160 80 80 0 0 1 0-160z m-512 32a48 48 0 1 0 0 96 48 48 0 0 0 0-96z m512 0a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"  ></path></symbol><symbol id="gld-bf-room-addnode-lg" viewBox="0 0 1024 1024"><path d="M224 352v257.6a80 80 0 0 1 64 77.536V672h256.704A176.064 176.064 0 0 1 704 512.704V352h32v160.704a176 176 0 1 1-191.296 191.328L288 704l-0.032-15.136-0.128 4.384A80 80 0 1 1 192 609.6V352h32z m496 192a144 144 0 1 0 0 288 144 144 0 0 0 0-288z m16 64l-0.032 64H800v32h-64.032L736 768h-32l-0.032-64H640v-32h63.968L704 608h32zM208 640a48 48 0 1 0 0 96 48 48 0 0 0 0-96z m0-448A80 80 0 0 1 288 271.136V256h352v32H288l-0.032-15.136-0.128 4.384A80 80 0 1 1 208 192z m512 0a80 80 0 1 1 0 160 80 80 0 0 1 0-160z m-512 32a48 48 0 1 0 0 96 48 48 0 0 0 0-96z m512 0a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"  ></path></symbol><symbol id="gld-bf-room-dragnode-lg" viewBox="0 0 1024 1024"><path d="M512 640v128h96l-112 128-112-128h96v-128h32z m256-256l128 112-128 112v-96.032L640 512v-32l128-0.032V384zM224 384v96h128v32H224v96l-128-112L224 384z m272 32a80 80 0 1 1 0 160 80 80 0 0 1 0-160z m0 32a48 48 0 1 0 0 96 48 48 0 0 0 0-96z m0-352L608 224h-96v128h-32V224h-96l112-128z"  ></path></symbol><symbol id="gld-bf-minimize-sm" viewBox="0 0 1024 1024"><path d="M947.2 19.2l-307.2 320V64H576v384h384V384h-275.2l307.2-320-44.8-44.8zM76.8 1004.8l307.2-320V960h64V576H64v64h275.2L32 960l44.8 44.8z"  ></path></symbol><symbol id="gld-bf-maximize-sm" viewBox="0 0 1024 1024"><path d="M576 64v64h275.2L524.8 454.4l44.8 44.8L896 172.8V448h64V64H576zM454.4 524.8L128 851.2V576H64v384h384v-64H172.8l326.4-326.4-44.8-44.8z"  ></path></symbol><symbol id="gld-bf-exit-fullscreen-lg" viewBox="0 0 1024 1024"><path d="M256 544v32h169.6l-227.2 227.2 22.4 22.4 227.2-227.2V768h32v-224H256zM803.2 198.4L576 425.6V256h-32v224h224v-32h-169.6l227.2-227.2-22.4-22.4z"  ></path><path d="M896 128v768H128V128h768m32-32H96v832h832V96z"  ></path></symbol><symbol id="gld-bf-enter-fullscreen-lg" viewBox="0 0 1024 1024"><path d="M608 192v32h169.6l-227.2 227.2 22.4 22.4L800 246.4V416h32V192h-224z m-156.8 358.4L224 777.6V608H192v224h224v-32H246.4l227.2-227.2-22.4-22.4z"  ></path><path d="M896 128v768H128V128h768m32-32H96v832h832V96z"  ></path></symbol><symbol id="gld-bf-property-lg" viewBox="0 0 1024 1024"><path d="M256 416h64v64H256zM384 416h352v64H384zM256 544h64v64H256zM384 544h352v64H384zM256 672h64v64H256zM384 672h352v64H384z"  ></path><path d="M820 160H160v704h672V160h-12zM352 208h64v64h-64v-64z m-96 0h64v64H256v-64zM800 832H192V320h608v512z"  ></path></symbol><symbol id="gld-bf-property-sm" viewBox="0 0 1024 1024"><path d="M320 320v64H256V320h64z m448 0v64H384V320h384zM320 512v64H256V512h64z m448 0v64H384V512h384z m-448 192v64H256v-64h64z m448 0v64H384v-64h384zM64 0v960h896V0H64z m64 896V192h768v704H128z"  ></path></symbol><symbol id="gld-bf-tree-lg" viewBox="0 0 1024 1024"><path d="M800 704v-192h-288v-192h96V160h-224v160h96v192H192v192H128v160h160v-160H224v-160h256v160h-64v160h160v-160h-64v-160h256v160h-64v160h160v-160z"  ></path></symbol><symbol id="gld-bf-explode-lg" viewBox="0 0 1024 1024"><path d="M832 288l-320 160L192 288l320-160 320 160zM512 163.776L263.552 288 512 412.224 760.448 288 512 163.776zM128 384l320 160v352L128 736V384z m32 51.776v280.448l256 128v-280.448l-256-128zM896 736l-320 160V544l320-160v352z"  ></path></symbol><symbol id="gld-bf-message2-sm" viewBox="0 0 1024 1024"><path d="M512 85.312c238.912 0 426.688 187.776 426.688 426.688 0 238.912-187.776 426.688-426.688 426.688-238.912 0-426.688-187.776-426.688-426.688 0-238.912 187.776-426.688 426.688-426.688M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512-230.4-512-512-512z"  ></path><path d="M469.312 256h85.376v85.312H469.312V256z m0 170.688h85.376V768H469.312V426.688z"  ></path></symbol><symbol id="gld-bf-route-lg" viewBox="0 0 1024 1024"><path d="M240 288a112 112 0 1 1 0-224 112 112 0 0 1 0 224zM224 288h32v128H224V288z m0 192h32v128H224v-128z m576-160h32v128h-32v-128z m0 192h32v118.144h-32V512zM240 896a112 112 0 1 1 0-224 112 112 0 0 1 0 224z m576-608a112 112 0 1 1 0-224 112 112 0 0 1 0 224z m-576 320a176 176 0 1 1 0 352 176 176 0 0 1 0-352z m0 32a144 144 0 1 0 0 288 144 144 0 0 0 0-288z m576-32a112 112 0 1 1 0 224 112 112 0 0 1 0-224z m-179.008-69.44l91.84 89.12-22.272 22.976-91.84-89.152 22.272-22.944zM499.2 404.8l91.84 89.184-22.272 22.944-91.84-89.152 22.272-22.944z m-137.76-133.696l91.84 89.152-22.272 22.944-91.84-89.152 22.272-22.944zM223.648 137.376l91.84 89.152-22.272 22.944-91.84-89.12 22.272-22.976z"  ></path></symbol><symbol id="gld-bf-hide-slice-lg" viewBox="0 0 1024 1024"><path d="M618.72 550.848l-25.664-25.664A241.408 241.408 0 0 1 672 512c94.272 0 179.584 53.344 256 160-28.8 40.224-58.88 72.832-90.24 97.92l-22.72-22.784c24.96-19.52 49.312-44.512 73.056-75.136-66.912-86.304-138.688-128-216.096-128-18.048 0-35.84 2.24-53.28 6.848z m-89.728 46.016c-24.992 19.52-49.344 44.512-73.088 75.136 66.912 86.304 138.688 128 216.096 128 18.048 0 35.84-2.24 53.28-6.848l25.664 25.664c-25.6 8.8-51.904 13.184-78.944 13.184-94.272 0-179.584-53.344-256-160 28.8-40.224 58.88-72.832 90.24-97.92l22.72 22.784h0.032z"  ></path><path d="M735.872 668a64 64 0 0 0-59.84-59.872l-28.896-28.864a96.128 96.128 0 0 1 117.6 117.6l-28.864-28.864z m-127.744 8a64 64 0 0 0 59.84 59.872l28.896 28.864a96.128 96.128 0 0 1-117.6-117.6l28.864 28.864zM512 489.376L851.424 828.8l-22.656 22.624L489.376 512z"  ></path><path d="M416 768v32H160V224h640v256h-32V256H192v512z"  ></path></symbol><symbol id="gld-bf-section-axial-lg" viewBox="0 0 1024 1024"><path d="M288 781.76V394.016l256-173.632v387.744L288 781.76z m-32 60.384l320-217.056V160L256 377.056v465.088z"  ></path><path d="M718.4 672.928l-15.52 26.848-277.12-160 15.488-26.88 277.12 160 0.032 0.032z m46.368-83.072l81.536 177.28-188.8 15.424 107.264-192.704z"  ></path></symbol><symbol id="gld-bf-sectionbox-lg" viewBox="0 0 1024 1024"><path d="M560 128L128 345.056V717.12l304 155.04L864 655.104V283.04L560 128z m269.664 172.544L432 500.064 162.368 362.56l397.664-200.096 269.632 138.08zM160 396.384l256 130.56v302.016l-256-130.56v-302.016z m672 240l-384 192.576v-302.016l384-192.576v302.016z"  ></path></symbol><symbol id="gld-bf-section-lg" viewBox="0 0 1024 1024"><path d="M576 160h32v704h-32zM672 256v32H864v384h-192v32h224V256zM128 512h32v96H128zM128 704h64v-32H128v32zM416 288h96V256h-96zM128 352h32v96H128zM128 256h64v32H128zM256 256h96v32H256zM416 672v32h96v-32h-60zM256 672h96v32H256z"  ></path></symbol><symbol id="gld-bf-information-lg" viewBox="0 0 1024 1024"><path d="M512 160c195.2 0 352 156.8 352 352s-156.8 352-352 352S160 707.2 160 512 316.8 160 512 160m0-32C300.8 128 128 300.8 128 512s172.8 384 384 384 384-172.8 384-384S723.2 128 512 128z"  ></path><path d="M480 320h64v64h-64v-64z m0 128h64v256h-64v-256z"  ></path></symbol><symbol id="gld-bf-firstperson-lg" viewBox="0 0 1024 1024"><path d="M496 224a80 80 0 1 0 0-160 80 80 0 0 0 0 160z m0 32a112 112 0 1 1 0-224 112 112 0 0 1 0 224z"  ></path><path d="M580.096 256h-170.624c-64.48 0-89.088 51.392-95.744 113.632L288 576.832c0 18.016 11.872 31.68 32.512 31.68s29.728-13.024 31.712-31.872l32.576-194.496 0.16 531.104c0 27.072 19.328 46.752 47.04 46.752 27.68 0 48.032-18.592 48.448-48.096L480 640h32l0.448 271.808c0 27.072 15.68 48.192 47.552 48.192 27.712 0 48.288-21.28 48.288-48.352l1.632-529.504 30.688 194.08c2.624 19.264 11.008 32.192 31.648 32.192s30.208-11.776 31.968-32.448l-23.424-211.136C675.392 302.912 644.544 256 580.096 256z m60.192 655.648A79.424 79.424 0 0 1 560 992c-28.096 0-50.336-11.456-64.096-30.08-14.4 18.752-37.184 30.08-63.904 30.08-45.216 0-79.04-33.856-79.04-78.72l-0.096-280.64a65.28 65.28 0 0 1-32.352 7.872c-37.728 0-64.512-27.36-64.512-63.68l0.256-3.936 25.664-206.656C291.2 279.36 331.52 224 409.472 224h170.624c78.656 0 125.344 55.264 132.48 137.28l23.456 211.168 0.064 6.24c-3.168 37.184-26.24 61.728-63.84 61.728-12.032 0-22.4-2.56-31.104-7.168l-0.864 278.4z"  ></path></symbol><symbol id="gld-bf-reset-box-lg" viewBox="0 0 1024 1024"><path d="M210.016 612.096l81.28-116.096h-162.56z"  ></path><path d="M530.016 832v-32a304 304 0 1 0-304-304h-32c0-185.568 150.4-336 336-336 185.568 0 336 150.432 336 336S715.552 832 530.016 832z"  ></path></symbol><symbol id="gld-bf-fit-to-box-lg" viewBox="0 0 1024 1024"><path d="M528 260.416l-203.552 110.624v217.92l203.552 110.624 203.552-110.624v-217.92L528 260.416zM528 224l235.552 128v256L528 736l-235.552-128v-256L528 224z"  ></path><path d="M314.528 391.168l14.304-28.64 220.64 110.304-14.304 28.64z"  ></path><path d="M512 464h32v256h-32z"  ></path><path d="M522.24 501.888l-16.128-27.648 219.648-128.128 16.128 27.648-219.648 128.128zM160 128h192v32H192v160H160V128z m0 736h192v-32H192v-160H160v192zM896 128h-192v32h160v160h32V128z m0 704h-192v-26.656h160V672h32v160z"  ></path></symbol><symbol id="gld-bf-hide-box-lg" viewBox="0 0 1024 1024"><path d="M560 128L128 352v352l304 160 131.2-67.2c-9.6-9.6-22.4-12.8-32-19.2L448 819.2v-278.4l384-198.4v188.8c9.6 3.2 22.4 6.4 32 9.6V288l-304-160zM160 684.8v-278.4l256 134.4v278.4l-256-134.4z m272-172.8l-268.8-140.8 396.8-208 268.8 144L432 512z"  ></path><path d="M714.72 582.848l-25.664-25.664A241.408 241.408 0 0 1 768 544c94.272 0 179.584 53.344 256 160-28.8 40.224-58.88 72.832-90.24 97.92l-22.72-22.784c24.96-19.52 49.312-44.512 73.056-75.136-66.912-86.304-138.688-128-216.096-128-18.048 0-35.84 2.24-53.28 6.848z m-89.728 46.016c-24.992 19.52-49.344 44.512-73.088 75.136 66.912 86.304 138.688 128 216.096 128 18.048 0 35.84-2.24 53.28-6.848l25.664 25.664c-25.6 8.8-51.904 13.184-78.944 13.184-94.272 0-179.584-53.344-256-160 28.8-40.224 58.88-72.832 90.24-97.92l22.72 22.784h0.032z"  ></path><path d="M831.872 700a64 64 0 0 0-59.84-59.872l-28.896-28.864a96.128 96.128 0 0 1 117.6 117.6l-28.864-28.864z m-127.744 8a64 64 0 0 0 59.84 59.872l28.896 28.864a96.128 96.128 0 0 1-117.6-117.6l28.864 28.864zM608 521.376L947.424 860.8l-22.656 22.624L585.376 544z"  ></path></symbol><symbol id="gld-bf-elevation-lg" viewBox="0 0 1024 1024"><path d="M224 384h640v32h-284L384 640l-224-256h64z m313.472 32H230.528L384 591.392 537.472 416zM640 704v32H160v-32z"  ></path></symbol><symbol id="gld-bf-distance-min-lg" viewBox="0 0 1024 1024"><path d="M192 672v64h608v-64H192z m-32-32h672v128H160v-128z m64-192h512v32H224v-32z m64-224h128v32h-32v96h-32V256h-32v96H288V224z m128 128V256h32v96h-32z m96-160v32h-32V192h32z m0 64v96h-32V256h32z m128 96V256h32v96h-32z m-64-96v96h-32V224h96v32h-64z"  ></path><path d="M160 343.584l29.44-12.608L246.464 464l-56.96 133.024-29.44-12.608L211.616 464 160 343.584z m646.432 0l-29.44-12.608-56.96 133.024 56.96 133.024 29.44-12.608-51.616-120.416 51.648-120.416h-0.032z"  ></path></symbol><symbol id="gld-bf-angle-lg" viewBox="0 0 1024 1024"><path d="M192 672v64h640v-64H192z m-32-32h704v128H160v-128z"  ></path><path d="M216.736 640.608l-18.336-25.088L692.064 224.608l18.336 25.088z"  ></path><path d="M288 407.072c136.512 23.456 203.616 111.136 192.416 264.928h-32.8c10.112-138.08-40.128-212.544-159.616-233.024v-31.904z"  ></path></symbol><symbol id="gld-bf-area-lg" viewBox="0 0 1024 1024"><path d="M581.888 256H160.768v480H872L581.888 256z m263.68 480l9.024 15.68-9.76 16.32h-18.432l-18.432-32h37.6zM128 224h473.056L928 768H128V224z"  ></path><path d="M336 313.376l22.624 22.624L240 454.624l-22.624-22.624L336 313.376z m192 0l22.624 22.624L240 646.624l-22.624-22.624L528 313.376z m64 128l22.624 22.624-214.624 214.624-22.624-22.624 214.624-214.624z m64 128l22.624 22.624-86.624 86.624-22.624-22.624 86.624-86.624z"  ></path></symbol><symbol id="gld-bf-distance-lg" viewBox="0 0 1024 1024"><path d="M800 480v256H192v-256h608z m-32 32H224v192h544v-192z"  ></path><path d="M672 608h32v-96h-32v96z m-96 0h32v-96h-32v96z m-192 0h32v-96h-32v96z m96 32h32v-128h-32v128z m-192-32h32v-96H288v96z m-96-256h608v-32H192v32z"  ></path><path d="M768 384.032h32V288h-32v96.032z m-576 0h32V288H192v96.032z"  ></path></symbol><symbol id="gld-bf-note-text-lg" viewBox="0 0 1024 1024"><path d="M752 224v150.4h-14.592c-8.704-34.4-18.304-58.496-28.8-73.6-10.496-15.104-25.12-27.008-43.52-36-10.304-4.896-28.288-7.296-53.984-7.296h-40.992v456.992c0 28.192 1.6 45.792 4.672 52.8 3.104 7.008 9.216 13.216 18.24 18.496 9.088 5.312 21.472 7.904 37.184 7.904h18.304v15.008h-288.416v-15.008h18.304c16 0 28.8-2.784 38.592-8.48 7.008-3.84 12.608-10.304 16.704-19.52 3.008-6.496 4.48-23.584 4.48-51.2V257.6H398.4c-37.12 0-64.096 7.904-80.8 23.584-23.616 22.016-38.496 52.608-44.704 93.312H256V224h496z"  ></path></symbol><symbol id="gld-bf-note-cross-lg" viewBox="0 0 1024 1024"><path d="M192.192 800.192L800.192 192l22.592 22.592-608 608.192-22.592-22.592z m617.408 22.592L201.6 214.592 224.192 192l608 608.192-22.592 22.592z"  ></path></symbol><symbol id="gld-bf-note-oval-lg" viewBox="0 0 1024 1024"><path d="M512 224c158.784 0 288 129.184 288 288 0 158.784-129.216 288-288 288-158.816 0-288-129.216-288-288 0-158.816 129.184-288 288-288m0-32C335.296 192 192 335.296 192 512s143.296 320 320 320 320-143.296 320-320S688.704 192 512 192z"  ></path></symbol><symbol id="gld-bf-note-rectangle-lg" viewBox="0 0 1024 1024"><path d="M800.384 288.096v447.68H224.096V288.128h576.32m32-32H192v511.68h640.32l0.064-511.68z"  ></path></symbol><symbol id="gld-bf-note-ployline-lg" viewBox="0 0 1024 1024"><path d="M128 591.104l683.136 239.104 10.592-30.208-596.864-208.896 640.128-224.032L453.696 224l-10.528 30.208 324.704 112.96z"  ></path></symbol><symbol id="gld-bf-note-cloud-lg" viewBox="0 0 1024 1024"><path d="M795.52 480c0.192-4.704 0.192-8.992 0.192-12.384a209.856 209.856 0 0 0-61.824-149.216 209.664 209.664 0 0 0-149.184-61.792c-43.712 0-86.592 14.784-124.192 43.008a234.464 234.464 0 0 0-62.816 70.784 119.136 119.136 0 0 0-55.488-13.504c-31.296 0-61.408 14.496-84.704 40.896a143.296 143.296 0 0 0-32 61.216 156 156 0 0 0-67.008 51.2A152.768 152.768 0 0 0 128 602.112c0 84.8 68.992 153.888 153.92 153.888v-0.384h499.072v0.192a138.144 138.144 0 0 0 138.016-138.016c0.096-70.784-54.4-130.08-123.52-137.792z m-8.928 244l-514.08-0.096A122.08 122.08 0 0 1 160 602.4a122.336 122.336 0 0 1 83.296-116.384c0.192-0.128 0.32-0.128 0.416-0.224a13.472 13.472 0 0 0 9.696-10.784c7.104-42.72 44.192-85.92 88.896-85.92 18.304 0 35.904 5.504 50.784 16a15.904 15.904 0 0 0 25.28-5.12c30.336-65.184 98.016-111.264 166.336-111.264a179.2 179.2 0 0 1 179.008 179.008c0 6.688-0.416 17.184-1.024 26.4a16.128 16.128 0 0 0 13.312 16.896c1.408 0.192 2.784 0.32 4.192 0.096v0.096c58.496 0 106.88 48.416 106.88 106.88a106.112 106.112 0 0 1-100.48 105.92z"  ></path></symbol><symbol id="gld-bf-note-cloud2-lg" viewBox="0 0 1024 1024"><path d="M694.4 224c57.6 0 105.6 48 105.6 105.6 0 48-32 86.4-73.6 99.2 41.6 12.8 73.6 51.2 73.6 99.2s-32 86.4-73.6 99.2c41.6 12.8 73.6 54.4 73.6 99.2 0 57.6-48 105.6-105.6 105.6-48 0-86.4-32-99.2-73.6C582.4 800 544 832 496 832s-86.4-32-99.2-73.6C384 800 342.4 832 297.6 832 240 832 192 784 192 726.4c0-48 32-86.4 73.6-99.2C224 614.4 192 576 192 528s32-86.4 73.6-99.2C224 416 192 374.4 192 329.6 192 272 240 224 297.6 224c48 0 86.4 32 99.2 73.6C409.6 256 448 224 496 224s86.4 32 99.2 73.6C608 256 649.6 224 694.4 224m0-32c-38.4 0-73.6 19.2-99.2 44.8-25.6-25.6-60.8-44.8-99.2-44.8-38.4 0-73.6 19.2-99.2 44.8-25.6-25.6-60.8-44.8-99.2-44.8C220.8 192 160 252.8 160 329.6c0 38.4 19.2 73.6 44.8 99.2-25.6 25.6-44.8 60.8-44.8 99.2 0 38.4 19.2 73.6 44.8 99.2-25.6 25.6-44.8 60.8-44.8 99.2C160 803.2 220.8 864 297.6 864c38.4 0 73.6-19.2 99.2-44.8 25.6 25.6 60.8 44.8 99.2 44.8 38.4 0 73.6-19.2 99.2-44.8 25.6 28.8 60.8 44.8 99.2 44.8 76.8 0 137.6-60.8 137.6-137.6 0-38.4-19.2-73.6-44.8-99.2 25.6-25.6 44.8-60.8 44.8-99.2 0-38.4-19.2-73.6-44.8-99.2 28.8-25.6 44.8-60.8 44.8-99.2C832 252.8 771.2 192 694.4 192z"  ></path></symbol><symbol id="gld-bf-note-arrow-lg" viewBox="0 0 1024 1024"><path d="M352 480l192 192-288 96 96-288z m-60 274.88l-22.016-23.264L768 256l23.488 24L292 754.88z"  ></path></symbol><symbol id="gld-bf-show-fill-md" viewBox="0 0 1024 1024"><path d="M512 256c286.378667 0 426.666667 251.050667 426.666667 251.050667S799.445333 764.842667 512 768c-281.685333 3.114667-416.682667-243.114667-426.112-261.034667L85.333333 505.941333S230.101333 256 512 256z m0 85.333333a170.666667 170.666667 0 1 0 0 341.333334 170.666667 170.666667 0 0 0 0-341.333334z m0 42.666667a128 128 0 1 1 0 256 128 128 0 0 1 0-256z"  ></path></symbol><symbol id="gld-bf-hide-md" viewBox="0 0 1024 1024"><path d="M235.733333 213.333333l592.213334 592.213334-29.568 29.610666L206.165333 243.029333 235.690667 213.333333z m688.128 283.093334C918.229333 487.04 783.36 256 512 256c-52.053333 0-99.072 8.234667-141.226667 21.333333l34.304 34.304A428.8 428.8 0 0 1 512 297.770667c250.752 0 376.021333 220.117333 376.021333 220.117333s-48.426667 81.152-145.792 142.378667l30.336 30.378666c98.048-64.426667 148.181333-145.792 151.466667-151.296l12.8-21.589333-12.970667-21.333333z m-306.090666 217.258666a425.984 425.984 0 0 1-106.666667 13.738667c-250.026667 0-376.96-209.408-376.96-209.408s48.682667-80.896 145.792-142.122667l-30.336-30.378666c-97.792 64.256-148.053333 145.28-151.296 150.912L85.333333 518.016l13.098667 21.589333c5.632 9.429333 142.122667 229.717333 412.672 229.717334 52.053333 0 99.072-8.106667 141.056-21.205334l-34.389333-34.432z m-138.88-316.586666c10.325333-2.773333 21.077333-4.693333 32.213333-4.693334a125.866667 125.866667 0 0 1 125.610667 125.610667c0 11.264-1.962667 21.845333-4.693334 32.213333l33.237334 33.237334a167.509333 167.509333 0 0 0-219.733334-219.605334l33.365334 33.237334z m64.128 241.834666c-10.325333 2.773333-20.906667 4.693333-31.914667 4.693334a125.866667 125.866667 0 0 1-125.653333-125.610667c0-11.093333 1.962667-21.76 4.693333-31.914667l-33.237333-33.28a167.509333 167.509333 0 0 0 219.605333 219.605334l-33.493333-33.493334z"  ></path></symbol><symbol id="gld-bf-layers-lg" viewBox="0 0 1024 1024"><path d="M522.016 544l-393.6-160 393.6-160 393.6 160-393.6 160z m-310.4-160l310.4 128 310.4-128-310.4-128-310.4 128z"  ></path><path d="M717.216 496l115.2 48-310.4 128-310.4-128 115.2-48-41.6-16-156.8 64 393.6 160 393.6-160-156.8-64z"  ></path><path d="M717.216 656l115.2 48-310.4 128-310.4-128 115.2-48-41.6-16-156.8 64 393.6 160 393.6-160-156.8-64z"  ></path></symbol><symbol id="gld-bf-map-lg" viewBox="0 0 1024 1024"><path d="M656 96C524.8 96 416 201.6 416 336S656 736 656 736 896 467.2 896 336 790.4 96 656 96z m0 339.2c-67.2 0-121.6-54.4-121.6-121.6 0-67.2 54.4-121.6 121.6-121.6 67.2 0 121.6 54.4 121.6 121.6 0 67.2-54.4 121.6-121.6 121.6zM128 704h480v32H128v-32z m0-288h288v32H128v-32z"  ></path><path d="M320 256h32v672h-32V256z m320 512h32v160h-32v-160z m64-64h160v32h-160v-32z"  ></path></symbol><symbol id="gld-bf-measurement-lg" viewBox="0 0 1024 1024"><path d="M160 672h736v-256H160v256z m-32-288h800v320H128V384z m0-32h800v32H128v-32z"  ></path><path d="M224 416h32v96H224v-96z m96 0h32v96h-32v-96z m96 0h32v96h-32v-96z m192 0h32v96h-32v-96z m-96 0h32v160h-32v-160z m192 0h32v96h-32v-96z m96 0h32v96h-32v-96z"  ></path></symbol><symbol id="gld-bf-zoomrect-lg" viewBox="0 0 1024 1024"><path d="M851.392 841.6l-96-96c25.6-28.8 41.6-64 41.6-105.6 0-9.6 0-19.2-3.2-28.8v-6.4c-3.2-9.6-3.2-16-6.4-22.4 0-3.2-3.2-6.4-3.2-9.6-3.2-6.4-6.4-9.6-9.6-16-3.2-6.4-6.4-9.6-9.6-16l-6.4-6.4c-6.4-9.6-16-16-22.4-22.4V224h-512v512h288c6.4 9.6 12.8 16 22.4 22.4l6.4 6.4c6.4 3.2 9.6 6.4 16 9.6 6.4 3.2 9.6 6.4 16 9.6 3.2 0 6.4 3.2 9.6 3.2 6.4 3.2 16 6.4 22.4 6.4h6.4c9.6 3.2 19.2 3.2 28.8 3.2 35.2 0 67.2-12.8 96-32l96 96 19.2-19.2zM252.992 704V256h448v236.8c-19.2-9.6-41.6-12.8-64-12.8-89.6 0-160 70.4-160 160 0 22.4 6.4 44.8 12.8 64h-236.8z m384 64c-9.6 0-19.2 0-28.8-3.2-3.2 0-3.2 0-6.4-3.2-6.4-3.2-12.8-3.2-19.2-6.4-3.2 0-3.2-3.2-6.4-3.2-6.4-3.2-12.8-6.4-19.2-12.8 0 0-3.2 0-3.2-3.2l-19.2-19.2-6.4-6.4c-12.8-19.2-19.2-44.8-19.2-70.4 0-70.4 57.6-128 128-128 25.6 0 48 6.4 70.4 19.2l6.4 6.4c6.4 6.4 16 12.8 19.2 19.2 0 0 0 3.2 3.2 3.2 6.4 6.4 9.6 12.8 12.8 19.2 0 3.2 3.2 3.2 3.2 6.4 3.2 6.4 6.4 12.8 6.4 19.2 0 3.2 0 3.2 3.2 6.4 3.2 9.6 3.2 19.2 3.2 28.8 0 70.4-57.6 128-128 128z"  ></path></symbol><symbol id="gld-bf-setting-fill-lg" viewBox="0 0 1024 1024"><path d="M796.896 435.552a292.896 292.896 0 0 0-29.408-70.976l55.872-84.32-0.096-0.096-79.456-79.456-0.096-0.064-84.32 55.872a292.384 292.384 0 0 0-70.976-29.408L568.32 128h-112.64l-20.128 99.104c-25.12 6.72-48.96 16.672-70.976 29.408L280.288 200.64l-0.096 0.096-79.456 79.456-0.096 0.096 55.872 84.32a292.384 292.384 0 0 0-29.408 70.976L128 455.68v112.64l99.104 20.128c6.72 25.12 16.672 48.96 29.408 70.976L200.64 743.712l0.096 0.096 79.456 79.456 0.096 0.096 84.32-55.872a292.384 292.384 0 0 0 70.976 29.408L455.68 896h112.64l20.096-99.104a292.896 292.896 0 0 0 70.976-29.408l84.32 55.872 0.096-0.096 79.456-79.456 0.096-0.096-55.872-84.32a292.384 292.384 0 0 0 29.408-70.976L896 568.32v-112.64l-99.104-20.128zM512 672a160 160 0 1 1 0.032-320.032A160 160 0 0 1 512 672z"  ></path></symbol><symbol id="gld-bf-home-fill-lg" viewBox="0 0 1024 1024"><path d="M928 512L512 128 96 512h128v352h192v-256h192v256h192V512z"  ></path></symbol><symbol id="gld-bf-measurement-gis-md" viewBox="0 0 1024 1024"><path d="M85.674667 939.008h810.666666v-42.666667h-810.666666v42.666667z m573.226666-896L85.674667 616.234667l211.2 211.2L870.101333 254.208l-211.2-211.2zM146.048 616.234667l512.853333-512.896 150.826667 150.869333-512.853333 512.853333-150.869334-150.826666z"  ></path><path d="M327.04 616.234667l-30.165333 30.165333 60.330666 60.330667 30.208-30.165334-60.373333-60.330666z m90.453333-90.538667l-30.122666 30.208 60.330666 60.330667 30.165334-30.165334-60.330667-60.373333zM477.866667 405.034667l-30.165334 30.165333 90.453334 90.453333 30.208-30.122666L477.866667 405.034667z m120.704-60.330667l-30.208 30.165333 60.373333 60.330667 30.165333-30.165333-60.330666-60.330667z m90.453333-90.496l-30.122667 30.165333 60.330667 60.373334 30.165333-30.208-60.330666-60.330667z"  ></path></symbol><symbol id="gld-bf-setting-fill-md" viewBox="0 0 1024 1024"><path d="M791.381333 410.325333a309.162667 309.162667 0 0 0-31.018666-74.922666l58.965333-89.002667-0.085333-0.128-83.882667-83.797333-0.128-0.085334-89.002667 58.965334a308.608 308.608 0 0 0-74.922666-31.018667l-21.205334-104.661333h-118.869333L409.984 190.293333a309.162667 309.162667 0 0 0-74.922667 31.018667L246.101333 162.346667l-0.128 0.085333L162.133333 246.314667l-0.085333 0.128L221.013333 335.445333a308.608 308.608 0 0 0-31.018666 74.922667L85.333333 431.573333V550.4l104.618667 21.248a308.053333 308.053333 0 0 0 31.018667 74.922667L162.005333 735.573333l0.085334 0.128 83.882666 83.84 0.128 0.085334 89.002667-58.965334c23.466667 13.568 48.682667 24.021333 74.922667 31.018667l21.205333 104.661333h118.869333l21.205334-104.618666a309.162667 309.162667 0 0 0 74.922666-31.018667l89.002667 58.965333 0.128-0.085333 83.882667-83.882667 0.085333-0.128-58.965333-89.002666c13.610667-23.509333 24.021333-48.682667 31.018666-74.922667L896 550.4v-118.869333l-104.618667-21.248z m-300.714666 272.64a192 192 0 1 1 0.042666-384 192 192 0 0 1-0.042666 384z"  ></path></symbol><symbol id="gld-bf-home-fill-md" viewBox="0 0 1024 1024"><path d="M85.333333 554.666667l426.666667-384 426.666667 384h-128v298.666666h-213.333334v-170.666666h-170.666666v170.666666H213.333333v-298.666666z"  ></path></symbol><symbol id="gld-bf-layers-fill-md" viewBox="0 0 1024 1024"><path d="M896 406.016l-384-192-384 192 384 192z"  ></path><path d="M853.333333 512.682667l42.666667 21.333333-384 192-384-192 42.666667-21.333333 341.333333 170.666666 341.333333-170.666666z"  ></path><path d="M853.333333 640.682667l42.666667 21.333333-384 192-384-192 42.666667-21.333333 341.333333 170.666666z"  ></path></symbol><symbol id="gld-bf-message-sm" viewBox="0 0 1024 1024"><path d="M469.312 640V469.312h-42.624V384h128v256h42.624v85.312H426.688V640h42.624z m0-384h85.376v85.312H469.312V256zM512 938.688a426.688 426.688 0 1 0 10.432-853.312A426.688 426.688 0 0 0 512 938.688zM512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z"  ></path></symbol><symbol id="gld-bf-message-fill-sm" viewBox="0 0 1024 1024"><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024z m64-320V384H384v64h64v256H384v64h256v-64H576zM448 192v128h128V192H448z"  ></path></symbol><symbol id="gld-bf-arrow-up-sm" viewBox="0 0 1024 1024"><path d="M916.288 681.984L489.984 256l-60.608 60.16L64 681.92l60.16 60.288 365.824-365.44 366.016 365.44z"  ></path></symbol><symbol id="gld-bf-arrow-down-sm" viewBox="0 0 1024 1024"><path d="M959.808 380.8l-426.304 426.048-60.608-60.16L107.52 380.928l60.16-60.352 365.824 365.504 366.016-365.44z"  ></path></symbol><symbol id="gld-bf-pause-md" viewBox="0 0 1024 1024"><path d="M512 128a384 384 0 1 1 0 768 384 384 0 0 1 0-768z m0 42.666667a341.333333 341.333333 0 1 0 0 682.666666 341.333333 341.333333 0 0 0 0-682.666666z"  ></path><path d="M384 341.333333h85.333333v341.333334H384zM554.666667 341.333333h85.333333v341.333334h-85.333333z"  ></path></symbol><symbol id="gld-bf-play-md" viewBox="0 0 1024 1024"><path d="M682.666667 512l-298.666667 170.666667V341.333333z"  ></path><path d="M512 128a384 384 0 1 1 0 768 384 384 0 0 1 0-768z m0 42.666667a341.333333 341.333333 0 1 0 0 682.666666 341.333333 341.333333 0 0 0 0-682.666666z"  ></path></symbol><symbol id="gld-bf-minus-sm" viewBox="0 0 1024 1024"><path d="M128 448h768v128H128z"  ></path></symbol><symbol id="gld-bf-add-sm" viewBox="0 0 1024 1024"><path d="M448 448H128v128h320v320h128V576h320V448H576V128H448z"  ></path></symbol><symbol id="gld-bf-arrow-sm" viewBox="0 0 1024 1024"><path d="M792.256 333.824A64 64 0 0 1 877.76 428.8l-6.016 5.376-322.816 256a64 64 0 0 1-73.408 4.288l-6.592-4.672-317.12-256A64 64 0 0 1 225.664 329.6l6.528 4.672 277.376 223.744 282.688-224.128z"  ></path></symbol><symbol id="gld-bf-measure-setting-md" viewBox="0 0 1024 1024"><path d="M128 341.333333h170.666667v42.666667H128zM426.666667 341.333333h469.333333v42.666667H426.666667z"  ></path><path d="M362.666667 256a106.666667 106.666667 0 1 1 0 213.333333 106.666667 106.666667 0 0 1 0-213.333333z m0 42.666667a64 64 0 1 0 0 128 64 64 0 0 0 0-128z"  ></path><path d="M128 640h469.333333v42.666667H128zM725.333333 640h170.666667v42.666667h-170.666667z"  ></path><path d="M661.333333 554.666667a106.666667 106.666667 0 1 1 0 213.333333 106.666667 106.666667 0 0 1 0-213.333333z m0 42.666666a64 64 0 1 0 0 128 64 64 0 0 0 0-128z"  ></path></symbol><symbol id="gld-bf-close-sm" viewBox="0 0 1024 1024"><path d="M490.048 444.8L806.848 128l45.248 45.248-316.8 316.8 316.8 316.8-45.248 45.248-316.8-316.8-316.8 316.8L128 806.848l316.8-316.8L128 173.248 173.248 128z"  ></path></symbol><symbol id="gld-bf-map-c-sm" viewBox="0 0 1024 1024"><path d="M64 64h896v896H64z" fill="#6C7179" ></path><path d="M960 64v896H64V64h896z m-64 64H128v768h768V128z" fill="#A4A8AE" ></path><path d="M112.448 388.544l800 480-32.896 54.912-800-480z" fill="#A4A8AE" ></path><path d="M514.944 82.56l58.112 26.88-384 832-58.112-26.88 384-832zM704 256a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m0 64a64 64 0 1 0 0 128 64 64 0 0 0 0-128z" fill="#A4A8AE" ></path></symbol><symbol id="gld-bf-scene-c-sm" viewBox="0 0 1024 1024"><path d="M960 871.04l-194.816-633.28a64 64 0 0 0-122.368 0L448 871.04h512z" fill="#6C7179" ></path><path d="M685.184 195.456a64 64 0 0 1 77.44 35.328l2.56 7.04L960 871.04H448l194.816-633.216a64 64 0 0 1 42.368-42.24zM704 256.64l-169.408 550.4h338.752L704 256.64z" fill="#A4A8AE" ></path><path d="M704 871.04L438.272 445.76a64 64 0 0 0-108.544 0L64 871.04h640z" fill="#6C7179" ></path><path d="M350.08 425.472a64 64 0 0 1 83.84 14.208l4.352 6.144L704 871.04H64l265.728-425.152a64 64 0 0 1 20.352-20.352z m33.92 54.272L179.392 807.04h409.152L384 479.744z" fill="#A4A8AE" ></path></symbol><symbol id="gld-bf-file-c-sm" viewBox="0 0 1024 1024"><path d="M128 64h512l256 256v640H128z" fill="#6C7179" ></path><path d="M640 64l256 256v640H128V64h512z m-26.56 64H192v768h640V346.56L613.44 128z" fill="#A4A8AE" ></path><path d="M640 64l256 256v64H576V64h64z m0 90.56V320h165.44L640 154.56z" fill="#A4A8AE" ></path></symbol><symbol id="gld-bf-folder-close-c-sm" viewBox="0 0 1024 1024"><path d="M960 896V64h-320L576 128H64v768z" fill="#E3D286" ></path><path d="M960 64v832H64V128h512l64-64h320z m-64 64h-229.504l-64 64H128v640h768V128z" fill="#CFA745" ></path><path d="M960 896V256H64v640z" fill="#E3D286" ></path><path d="M960 256v640H64V256h896z m-64 64H128v512h768V320z" fill="#CFA745" ></path></symbol><symbol id="gld-bf-folder-open-c-sm" viewBox="0 0 1024 1024"><path d="M1024 896V64h-320l-64 64H128v768z" fill="#E3D286" ></path><path d="M1024 64v832H128V128h512l64-64h320z m-64 64h-229.504l-64 64H192v640h768V128z" fill="#CFA745" ></path><path d="M1024 896L896 256H0l128 640z" fill="#E3D286" ></path><path d="M896 256l128 640H128L0 256h896z m-52.48 64H78.016l102.4 512H945.92l-102.4-512z" fill="#CFA745" ></path></symbol><symbol id="gld-bf-clear-md" viewBox="0 0 1024 1024"><path d="M490.666667 85.674667a404.949333 404.949333 0 0 1 339.370666 183.594666l6.997334 11.093334-36.437334 22.186666a362.794667 362.794667 0 0 0-666.965333 124.373334c-9.258667 0.128-24.746667 0-43.264 0.128 30.72-193.450667 198.229333-341.333333 400.298667-341.333334v-0.042666z"  ></path><path d="M106.666667 597.674667l106.666666-170.666667H0zM490.666667 896.341333a404.949333 404.949333 0 0 1-339.370667-183.594666l-6.997333-11.093334 36.437333-22.186666a362.794667 362.794667 0 0 0 666.965333-124.458667h43.264c-30.677333 193.450667-198.229333 341.333333-400.298666 341.333333z"  ></path><path d="M874.666667 384.341333l-106.666667 170.666667h213.333333z"  ></path></symbol><symbol id="gld-bf-component-sm" viewBox="0 0 1024 1024"><path d="M480 0L0 256v512l480 256 480-256V256L480 0z m394.24 273.28L480 476.16 88.96 274.56 480 70.4l394.24 202.88zM64 718.08v-384l384 197.76v402.56l-384-198.4v-17.92z m832 17.92l-384 198.4V531.84l384-197.76v401.92z"  ></path></symbol><symbol id="gld-bf-component-fill-sm" viewBox="0 0 1024 1024"><path d="M928 244.608l-448 238.08-448-238.08L480 0l448 244.608zM0 306.56l448 235.456V1024l-448-241.28V306.56z m960 476.16L512 1024V542.016l448-235.52v476.16z"  ></path></symbol><symbol id="gld-bf-coordinate-md" viewBox="0 0 1024 1024"><path d="M408.021333 128.682667h42.666667v512h-42.666667z"  ></path><path d="M429.354667 86.016l106.666666 128h-213.333333l106.666667-128z m-301.226667 834.56l15.061333-165.888 150.826667 150.826667-165.888 15.061333z m834.56-301.226667l-128 106.666667v-213.333333l128 106.666666z"  ></path><path d="M408.021333 598.016h512v42.666667h-512z"  ></path><path d="M150.442667 868.010667l271.573333-271.530667 30.165333 30.208-271.530666 271.530667z"  ></path></symbol><symbol id="gld-bf-triangulation-md" viewBox="0 0 1024 1024"><path d="M128 213.674667h42.666667v128H128v-128z m725.333333 0h42.666667v128h-42.666667v-128z m-682.666666 42.666666h682.666666v42.666667H170.666667v-42.666667zM896 427.008l-768 426.666667v-426.666667h768z m-164.650667 42.624H170.666667v311.466667l560.682666-311.466667z"  ></path></symbol><symbol id="gld-bf-area-md" viewBox="0 0 1024 1024"><path d="M579.370667 171.008l402.304 640h-853.333334v-640h450.986667z m-23.594667 42.666667H171.008v554.666666h733.44l-348.672-554.666666z"  ></path><path d="M223.573333 365.568L344.277333 244.906667l30.165334 30.165333-120.746667 120.704-30.122667-30.208z m298.666667 341.333333l120.704-120.661333 30.165333 30.165333-120.746666 120.704-30.122667-30.208zM218.368 584.106667l301.738667-301.696 30.165333 30.165333-301.696 301.653333-30.208-30.122666z m139.477333 52.565333l211.2-211.2 30.165334 30.208-211.2 211.2-30.165334-30.208z"  ></path></symbol><symbol id="gld-bf-distance-md" viewBox="0 0 1024 1024"><path d="M939.008 427.008v341.333333h-810.666667v-341.333333h810.666667z m-42.666667 42.666667h-725.333333v256h725.333333v-256z"  ></path><path d="M768.341333 597.674667h42.666667v-128h-42.666667v128z m-128 0h42.666667v-128h-42.666667v128z m-256 0h42.666667v-128h-42.666667v128z m128 42.666666h42.666667v-170.666666h-42.666667v170.666666z m-256-42.666666h42.666667v-128h-42.666667v128z m-128-298.666667h810.666667v-42.666667h-810.666667v42.666667z"  ></path><path d="M896.341333 341.717333h42.666667V213.674667h-42.666667v128z m-768 0h42.666667V213.674667h-42.666667v128z"  ></path></symbol><symbol id="gld-bf-angle-md" viewBox="0 0 1024 1024"><path d="M85.674667 639.317333h810.666666v85.333334h-810.666666z"  ></path><path d="M141.354667 657.152l-25.173334-34.474667 592.853334-451.84 25.173333 34.432z"  ></path><path d="M252.757333 371.029333l7.168-42.069333c182.016 31.274667 267.349333 153.301333 252.416 358.4l-42.666666-3.157333c13.482667-184.106667-57.642667-285.866667-216.96-313.173334z"  ></path></symbol><symbol id="gld-bf-annotation-md" viewBox="0 0 1024 1024"><path d="M512.682667 341.333333a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m0 42.666667a85.333333 85.333333 0 1 0 0 170.666667 85.333333 85.333333 0 0 0 0-170.666667z"  ></path><path d="M512.682667 128a341.333333 341.333333 0 0 1 341.333333 341.333333c0 125.696-113.792 267.904-341.333333 426.666667-227.541333-158.762667-341.333333-300.970667-341.333334-426.666667a341.333333 341.333333 0 0 1 341.333334-341.333333z m0 42.666667a298.666667 298.666667 0 0 0-298.666667 298.666666c0 99.925333 91.093333 221.013333 277.504 358.954667l21.12 15.402667 5.888-4.181334c191.829333-139.008 287.957333-261.290667 292.650667-362.453333l0.170666-7.722667a298.666667 298.666667 0 0 0-298.666666-298.666666z"  ></path></symbol><symbol id="gld-bf-tag-md" viewBox="0 0 1024 1024"><path d="M512 85.333333l298.666667 256v554.666667H213.333333V341.333333l298.666667-256z m0 56.192L256 360.917333V853.333333h512V360.96l-256-219.434667z"  ></path><path d="M512 341.333333a85.333333 85.333333 0 1 1 0 170.666667 85.333333 85.333333 0 0 1 0-170.666667z m0 42.666667a42.666667 42.666667 0 1 0 0 85.333333 42.666667 42.666667 0 0 0 0-85.333333z"  ></path></symbol><symbol id="gld-bf-route-md" viewBox="0 0 1024 1024"><path d="M171.008 790.016a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 0 0-213.333333 0zM171.008 192.682667a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 0 0-213.333333 0zM725.674667 192.682667a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 0 0-213.333333 0zM725.674667 747.349333a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 0 0-213.333333 0z"  ></path><path d="M277.674667 598.016a192 192 0 1 1 0 384 192 192 0 0 1 0-384z m0 42.666667a149.333333 149.333333 0 1 0 0 298.666666 149.333333 149.333333 0 0 0 0-298.666666z"  ></path><path d="M256.341333 299.349333v128h42.666667v-128h-42.666667z m0 213.333334v106.666666h42.666667v-106.666666h-42.666667z m554.666667-213.333334v128h42.666667v-128h-42.666667z m0 213.333334v128h42.666667v-128h-42.666667zM305.237333 250.453333l90.538667 90.453334 30.165333-30.122667-90.496-90.538667-30.208 30.208z m150.869334 150.826667l90.453333 90.453333 30.208-30.122666-90.453333-90.496-30.208 30.165333z m150.869333 150.869333l90.453333 90.453334 30.208-30.122667-90.496-90.496-30.165333 30.165333z m150.826667 150.826667l59.434666 59.477333 30.208-30.208-59.477333-59.434666-30.165333 30.165333z"  ></path></symbol><symbol id="gld-bf-polyline-md" viewBox="0 0 1024 1024"><path d="M887.210667 213.333333l25.941333 33.834667L153.941333 827.776 128 793.898667z"  ></path></symbol><symbol id="gld-bf-polygon-md" viewBox="0 0 1024 1024"><path d="M854.016 171.349333v682.666667h-682.666667v-682.666667h682.666667z m-42.666667 42.666667h-597.333333v597.333333h597.333333v-597.333333z"  ></path></symbol><symbol id="gld-bf-property-md" viewBox="0 0 1024 1024"><path d="M896 85.674667v853.333333H85.333333v-853.333333h810.666667z m-42.666667 42.666666H128v768h725.333333v-768z"  ></path><path d="M85.333333 85.674667h810.666667v128H85.333333v-128z m128 256h85.333334v85.333333H213.333333v-85.333333z m0 170.666666h85.333334v85.333334H213.333333v-85.333334z m0 170.666667h85.333334v85.333333H213.333333v-85.333333z m170.666667-341.333333h384v85.333333H384v-85.333333z m0 170.666666h384v85.333334H384v-85.333334z m0 170.666667h384v85.333333H384v-85.333333z"  ></path></symbol></svg>',s=(s=document.getElementsByTagName("script"))[s.length-1].getAttribute("data-injectcss");if(s&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function l(){o||(o=!0,i())}t=function(){var e,t;(t=document.createElement("div")).innerHTML=r,r=null,(e=t.getElementsByTagName("svg")[0])&&(e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.width=0,e.style.height=0,e.style.overflow="hidden",t=e,(e=document.body).firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(t,e.firstChild):e.appendChild(t))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(i=t,a=e.document,o=!1,function e(){try{a.documentElement.doScroll("left")}catch(t){return void setTimeout(e,50)}l()}(),a.onreadystatechange=function(){"complete"==a.readyState&&(a.onreadystatechange=null,l())})}(window)},{}],149:[function(e,t,n){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.ValueChanged="ValueChanged",e.Clicked="Clicked",e.RightClicked="RightClicked",e.MouseOver="MouseOver",e.MouseOut="MouseOut",e.CheckedChanged="CheckedChanged",e.SelectionChanged="SelectionChanged",e.ExpendChanged="ExpendChanged",e.IsolateChanged="IsolateChanged"}(i||(i={})),n.default=i},{}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColorPicker=n.Search=n.List=n.Crumb=n.ControlAlignOption=n.ControlAnchor=n.Tabs=n.Tree=n.Slider=n.Radio=n.Collapse=n.Checkbox=n.Switch=n.Select=n.Panel=n.Input=n.Link=n.Label=n.UIEvents=n.PropertyPanel=n.RadioGroup=n.Row=n.Toolbar=n.Button=void 0;var i=e("./Controls/Button/Button");n.Button=i.default;var a=e("./Controls/Label/Label");n.Label=a.default;var o=e("./Controls/Link/Link");n.Link=o.default;var r=e("./Controls/Input/Input");n.Input=r.default;var s=e("./Controls/Panel/Panel");n.Panel=s.default;var l=e("./Controls/Select/Select");n.Select=l.default;var c=e("./Controls/Switch/Switch");n.Switch=c.default;var d=e("./Controls/Checkbox/Checkbox");n.Checkbox=d.default;var u=e("./Controls/Collapse/Collapse");Object.defineProperty(n,"Collapse",{enumerable:!0,get:function(){return u.Collapse}});var f=e("./Controls/Radio/Radio");n.Radio=f.default;var p=e("./Controls/Slider/Slider");n.Slider=p.default;var h=e("./Controls/Tree/Tree");n.Tree=h.default;var m=e("./ControlGroups/Toolbar/Toolbar");n.Toolbar=m.default;var v=e("./ControlGroups/Row/Row");n.Row=v.default;var g=e("./ControlGroups/RadioGroup/RadioGroup");n.RadioGroup=g.default;var b=e("./ControlGroups/PropertyPanel/PropertyPanel"),y=e("./ControlAlign/ControlAlignOption");n.ControlAlignOption=y.default;var E=e("./ControlAnchor/ControlAnchor");n.ControlAnchor=E.default;var C=e("./Controls/Tabs/Tabs");n.Tabs=C.default;var w=e("./Controls/Crumb/Crumb");n.Crumb=w.default;var I=e("./Controls/List/List");n.List=I.default;var M=e("./Controls/Search/Search");n.Search=M.default;var _=e("./Controls/ColorPicker/ColorPicker");n.ColorPicker=_.default;var S=e("./UIEvents");n.UIEvents=S.default;var T=b.PropertyControl;n.PropertyPanel=T},{"./ControlAlign/ControlAlignOption":113,"./ControlAnchor/ControlAnchor":114,"./ControlGroups/PropertyPanel/PropertyPanel":116,"./ControlGroups/RadioGroup/RadioGroup":117,"./ControlGroups/Row/Row":118,"./ControlGroups/Toolbar/Toolbar":119,"./Controls/Button/Button":120,"./Controls/Checkbox/Checkbox":122,"./Controls/Collapse/Collapse":123,"./Controls/ColorPicker/ColorPicker":124,"./Controls/Crumb/Crumb":125,"./Controls/Input/Input":126,"./Controls/Label/Label":127,"./Controls/Link/Link":128,"./Controls/List/List":129,"./Controls/Panel/Panel":132,"./Controls/Radio/Radio":133,"./Controls/Search/Search":134,"./Controls/Select/Select":137,"./Controls/Slider/Slider":140,"./Controls/Switch/Switch":141,"./Controls/Tabs/Tabs":143,"./Controls/Tree/Tree":145,"./UIEvents":149}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Common/Glodon"),a=e("../Application/WebApplicationGIS/WebApplicationGIS"),o=e("../Application/WebApplicationGIS/WebApplicationGISConfig"),r=e("../../src/Application/WebApplicationGIS/WebApplicationGISEvent"),s=e("../Module/Scene/Editor"),l=e("../Module/Scene/EditorConfig"),c=e("../Module/Scene/EditorEvent"),d=e("./UIMap"),u=e("../Feature/Interaction/Interaction");e("./Fonts/gld-bf/iconfont"),i.default.Bimface=i.default.Bimface||{},i.default.Bimface.Tiles=i.default.Bimface.Tiles||{};var f=i.default.Bimface.Tiles.UI=i.default.Bimface.Tiles.UI||d;i.default.Bimface.Tiles.Interaction=u.default;var p=i.default.Bimface.Application=i.default.Bimface.Application||{};p.WebApplicationGIS=a.default,p.WebApplicationGISConfig=o.WebApplicationGISConfig,p.WebApplicationGISEvent=r.default;var h=i.default.Bimface.Module=i.default.Bimface.Module||{},m=h.Scene=h.Scene||{};p.WebApplicationGISEditor=m.Editor=s.default,p.WebApplicationGISEditorConfig=m.EditorConfig=l.EditorConfig,p.WebApplicationGISEditorEvent=c.default,n.default=f},{"../../src/Application/WebApplicationGIS/WebApplicationGISEvent":50,"../Application/WebApplicationGIS/WebApplicationGIS":48,"../Application/WebApplicationGIS/WebApplicationGISConfig":49,"../Common/Glodon":52,"../Feature/Interaction/Interaction":64,"../Module/Scene/Editor":103,"../Module/Scene/EditorConfig":104,"../Module/Scene/EditorEvent":105,"./Fonts/gld-bf/iconfont":148,"./UIMap":150}]},{},[151]);